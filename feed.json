{
    "version": "https://jsonfeed.org/version/1",
    "title": "永不陨落的星辰",
    "subtitle": "",
    "icon": "https://www.yexingcheng.com/images/favicon.ico",
    "description": "温柔正确的人总是难以生存，因为这个世界既不温柔 也不正确",
    "home_page_url": "https://www.yexingcheng.com",
    "items": [
        {
            "id": "https://www.yexingcheng.com/wx-app/day2/",
            "url": "https://www.yexingcheng.com/wx-app/day2/",
            "title": "微信小程序学习第二天",
            "date_published": "2022-10-31T16:00:00.000Z",
            "content_html": "<h1 id=\"8小程序代码的构成\"><a class=\"anchor\" href=\"#8小程序代码的构成\">#</a> 8. 小程序代码的构成</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay8=\">https://developers.weixin.qq.com/miniprogram/dev/framework/</span></p>\n<blockquote>\n<p>学习思路，从起步 - 小程序代码构成 开始，如果见到有链接，就跳转过去学习完整的知识</p>\n</blockquote>\n<h2 id=\"81-json配置\"><a class=\"anchor\" href=\"#81-json配置\">#</a> 8.1 JSON 配置</h2>\n<p>JSON 是一种数据格式，并不是编程语言，在小程序中，JSON 扮演的静态配置的角色</p>\n<h3 id=\"811-小程序的配置-appjson\"><a class=\"anchor\" href=\"#811-小程序的配置-appjson\">#</a> 8.1.1 小程序的配置 app.json</h3>\n<p><code>app.json</code>  是当前小程序的全局配置，包括了小程序的所有页面路径、界面表现、网络超时时间、底部 tab 等</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb25maWcuaHRtbA==\">https://developers.weixin.qq.com/miniprogram/dev/framework/config.html</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1s\">https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html</span></p>\n<p>小程序根目录下的  <code>app.json</code>  文件用来对微信小程序进行全局配置。文件内容为一个 JSON 对象，有以下属性：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">属性</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">必填</th>\n<th style=\"text-align:left\">描述</th>\n<th style=\"text-align:left\">最低版本</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2VudHJ5UGFnZVBhdGg=\">entryPagePath</span></td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">小程序默认启动首页</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3BhZ2Vz\">pages</span></td>\n<td style=\"text-align:left\">string[]</td>\n<td style=\"text-align:left\">是</td>\n<td style=\"text-align:left\">页面路径列表</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3dpbmRvdw==\">window</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">全局的默认窗口表现</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3RhYkJhcg==\">tabBar</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">底部  <code>tab</code>  栏的表现</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI25ldHdvcmtUaW1lb3V0\">networkTimeout</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">网络超时时间</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2RlYnVn\">debug</span></td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">是否开启 debug 模式，默认关闭</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2Z1bmN0aW9uYWxQYWdlcw==\">functionalPages</span></td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">是否启用插件功能页，默认关闭</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.1.0</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3N1YnBhY2thZ2Vz\">subpackages</span></td>\n<td style=\"text-align:left\">Object[]</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">分包结构配置</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">1.7.3</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3dvcmtlcnM=\">workers</span></td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\"><code>Worker</code>  代码放置的目录</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">1.9.90</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3JlcXVpcmVkQmFja2dyb3VuZE1vZGVz\">requiredBackgroundModes</span></td>\n<td style=\"text-align:left\">string[]</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">需要在后台使用的能力，如「音乐播放」</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3BsdWdpbnM=\">plugins</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">使用到的插件</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">1.9.6</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3ByZWxvYWRSdWxl\">preloadRule</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">分包预下载规则</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.3.0</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3Jlc2l6YWJsZQ==\">resizable</span></td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">PC 小程序是否支持用户任意改变窗口大小（包括最大化窗口）；iPad 小程序是否支持屏幕旋转。默认关闭</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.3.0</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3VzaW5nQ29tcG9uZW50cw==\">usingComponents</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">全局<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jdXN0b20tY29tcG9uZW50Lw==\">自定义组件</span>配置</td>\n<td style=\"text-align:left\">开发者工具 1.02.1810190</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3Blcm1pc3Npb24=\">permission</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">小程序接口权限相关设置</td>\n<td style=\"text-align:left\">微信客户端 7.0.0</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3NpdGVtYXBMb2NhdGlvbg==\">sitemapLocation</span></td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">是</td>\n<td style=\"text-align:left\">指明 sitemap.json 的位置</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3N0eWxl\">style</span></td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">指定使用升级后的 weui 样式</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.8.0</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3VzZWV4dGVuZGVkbGli\">useExtendedLib</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">指定需要引用的扩展库</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.2.1</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2VudHJhbmNlRGVjbGFyZQ==\">entranceDeclare</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">微信消息用小程序打开</td>\n<td style=\"text-align:left\">微信客户端 7.0.9</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2Rhcmttb2Rl\">darkmode</span></td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">小程序支持 DarkMode</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.11.0</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3RoZW1lTG9jYXRpb24=\">themeLocation</span></td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">指明 theme.json 的位置，darkmode 为 true 为必填</td>\n<td style=\"text-align:left\">开发者工具 1.03.2004271</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2xhenlDb2RlTG9hZGluZw==\">lazyCodeLoading</span></td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">配置自定义组件代码按需注入</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.11.1</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3NpbmdsZVBhZ2U=\">singlePage</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">单页模式相关配置</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.12.0</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">supportedMaterials</td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9tYXRlcmlhbC9zdXBwb3J0X21hdGVyaWFsLmh0bWw=\">聊天素材小程序打开</span>相关配置</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.14.3</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">serviceProviderTicket</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vZG9jL29wbGF0Zm9ybS9UaGlyZC1wYXJ0eV9QbGF0Zm9ybXMvMi4wL29wZXJhdGlvbi90aGlyZHBhcnR5L2N1c3RvbWl6ZWRfc2VydmljZV9wbGF0Zm9ybV9ndWlkZWxpbmVzLmh0bWw=\">定制化型服务商</span>票据</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2VtYmVkZGVkQXBwSWRMaXN0\">embeddedAppIdList</span></td>\n<td style=\"text-align:left\">string[]</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">半屏小程序 appId</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.20.1</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2hhbGZQYWdl\">halfPage</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">视频号直播半屏场景设置</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.18.0</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2RlYnVnT3B0aW9ucw==\">debugOptions</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">调试相关配置</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.22.1</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2VuYWJsZVBhc3NpdmVFdmVudA==\">enablePassiveEvent</span></td>\n<td style=\"text-align:left\">Object 或 boolean</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">touch 事件监听是否为 passive</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.24.1</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3Jlc29sdmVBbGlhcw==\">resolveAlias</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">自定义模块映射规则</td>\n<td style=\"text-align:left\"></td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong>entryPagePath</strong></li>\n</ul>\n<p>设置小程序默认的启动页面，如果不作设置，那么将会取 pages 数组 的第一项为默认启动项，开发过程中，一般不建议这么使用，你可以使用开发者工具中 添加编译模式 快速解决问题</p>\n<p><img data-src=\"E:%5CUsers%5CDeskdop%5CBlog%5Csource_posts%5Cwx-app%5Cday2%5C13.png\" alt=\"image-20220530113321490\"></p>\n<p><img data-src=\"E:%5CUsers%5CDeskdop%5CBlog%5Csource_posts%5Cwx-app%5Cday2%5C14.png\" alt=\"image-20220530113402566\"></p>\n<ul>\n<li><strong>pages</strong></li>\n</ul>\n<p>用于指定小程序由哪些页面组成，每一项都对应一个页面的 路径（含文件名） 信息。文件名不需要写文件后缀，框架会自动去寻找对应位置的  <code>.json</code> ,  <code>.js</code> ,  <code>.wxml</code> ,  <code>.wxss</code>  四个文件进行处理。</p>\n<p>如何给小程序快速添加页面，写好页面后直接保存即可</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token property\">\"pages\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token string\">\"pages/home/home\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token string\">\"pages/index/index\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string\">\"pages/logs/logs\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">\"pages/kind/kind\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string\">\"pages/cart/cart\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token string\">\"pages/user/user\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  ...</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li><strong>window</strong></li>\n</ul>\n<p>用于设置小程序的状态栏、导航条、标题、窗口背景色。</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">属性</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">默认值</th>\n<th style=\"text-align:left\">描述</th>\n<th style=\"text-align:left\">最低版本</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">navigationBarBackgroundColor</td>\n<td style=\"text-align:left\">HexColor</td>\n<td style=\"text-align:left\">#000000</td>\n<td style=\"text-align:left\">导航栏背景颜色，如  <code>#000000</code></td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">navigationBarTextStyle</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">white</td>\n<td style=\"text-align:left\">导航栏标题颜色，仅支持  <code>black</code>  /  <code>white</code></td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">navigationBarTitleText</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\">导航栏标题文字内容</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">navigationStyle</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">default</td>\n<td style=\"text-align:left\">导航栏样式，仅支持以下值：  <code>default</code>  默认样式  <code>custom</code>  自定义导航栏，只保留右上角胶囊按钮。参见注 2。</td>\n<td style=\"text-align:left\">iOS/Android 微信客户端 6.6.0，Windows 微信客户端不支持</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">backgroundColor</td>\n<td style=\"text-align:left\">HexColor</td>\n<td style=\"text-align:left\">#ffffff</td>\n<td style=\"text-align:left\">窗口的背景色</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">backgroundTextStyle</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">dark</td>\n<td style=\"text-align:left\">下拉 loading 的样式，仅支持  <code>dark</code>  /  <code>light</code></td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">backgroundColorTop</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">#ffffff</td>\n<td style=\"text-align:left\">顶部窗口的背景色，仅 iOS 支持</td>\n<td style=\"text-align:left\">微信客户端 6.5.16</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">backgroundColorBottom</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">#ffffff</td>\n<td style=\"text-align:left\">底部窗口的背景色，仅 iOS 支持</td>\n<td style=\"text-align:left\">微信客户端 6.5.16</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">enablePullDownRefresh</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:left\">false</td>\n<td style=\"text-align:left\">是否开启全局的下拉刷新。 详见 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29ucHVsbGRvd25yZWZyZXNo\">Page.onPullDownRefresh</span></td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onReachBottomDistance</td>\n<td style=\"text-align:left\">number</td>\n<td style=\"text-align:left\">50</td>\n<td style=\"text-align:left\">页面上拉触底事件触发时距页面底部距离，单位为 px。 详见 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29ucmVhY2hib3R0b20=\">Page.onReachBottom</span></td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">pageOrientation</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">portrait</td>\n<td style=\"text-align:left\">屏幕旋转设置，支持  <code>auto</code>  /  <code>portrait</code>  /  <code>landscape</code>  详见 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay92aWV3L3Jlc2l6YWJsZS5odG1s\">响应显示区域变化</span></td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.4.0</span> (auto) / <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.5.0</span> (landscape)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3Jlc3RhcnRTdHJhdGVneQ==\">restartStrategy</span></td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">homePage</td>\n<td style=\"text-align:left\">重新启动策略配置</td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.8.0</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">initialRenderingCache</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\">页面<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay92aWV3L2luaXRpYWwtcmVuZGVyaW5nLWNhY2hlLmh0bWw=\">初始渲染缓存</span>配置，支持  <code>static</code>  /  <code>dynamic</code></td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.11.1</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">visualEffectInBackground</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">none</td>\n<td style=\"text-align:left\">切入系统后台时，隐藏页面内容，保护用户隐私。支持  <code>hidden</code>  /  <code>none</code></td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.15.0</span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">handleWebviewPreload</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">static</td>\n<td style=\"text-align:left\">控制<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9wZXJmb3JtYW5jZS90aXBzL3J1bnRpbWVfbmF2Lmh0bWwjXzItNC0lRTYlOEUlQTclRTUlODglQjYlRTklQTIlODQlRTUlOEElQTAlRTglQkQlQkQlRTQlQjglOEIlRTQlQjglQUElRTklQTElQjUlRTklOUQlQTIlRTclOUElODQlRTYlOTclQjYlRTYlOUMlQkE=\">预加载下个页面的时机</span>。支持  <code>static</code>  /  <code>manual</code>  /  <code>auto</code></td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.15.0</span></td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t...<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token property\">\"window\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"navigationBarBackgroundColor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#f66\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token property\">\"navigationBarTextStyle\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"white\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token property\">\"navigationBarTitleText\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"嗨购\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token property\">\"navigationStyle\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token property\">\"homeButton\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token property\">\"backgroundColor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#123123\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token property\">\"backgroundTextStyle\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dark\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token property\">\"enablePullDownRefresh\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token property\">\"pageOrientation\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"portrait\"</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  ....</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li><strong>tabBar</strong></li>\n</ul>\n<p>如果小程序是一个多 tab 应用（客户端窗口的底部或顶部有 tab 栏可以切换页面），可以通过 tabBar 配置项指定 tab 栏的表现，以及 tab 切换时显示的对应页面。</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">属性</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">必填</th>\n<th style=\"text-align:left\">默认值</th>\n<th style=\"text-align:left\">描述</th>\n<th style=\"text-align:left\">最低版本</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">color</td>\n<td style=\"text-align:left\">HexColor</td>\n<td style=\"text-align:left\">是</td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\">tab 上的文字默认颜色，仅支持十六进制颜色</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">selectedColor</td>\n<td style=\"text-align:left\">HexColor</td>\n<td style=\"text-align:left\">是</td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\">tab 上的文字选中时的颜色，仅支持十六进制颜色</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">backgroundColor</td>\n<td style=\"text-align:left\">HexColor</td>\n<td style=\"text-align:left\">是</td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\">tab 的背景色，仅支持十六进制颜色</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">borderStyle</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">black</td>\n<td style=\"text-align:left\">tabbar 上边框的颜色， 仅支持  <code>black</code>  /  <code>white</code></td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">list</td>\n<td style=\"text-align:left\">Array</td>\n<td style=\"text-align:left\">是</td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\">tab 的列表，详见  <code>list</code>  属性说明，最少 2 个、最多 5 个 tab</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">position</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">bottom</td>\n<td style=\"text-align:left\">tabBar 的位置，仅支持  <code>bottom</code>  /  <code>top</code></td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">custom</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">false</td>\n<td style=\"text-align:left\">自定义 tabBar，见<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9hYmlsaXR5L2N1c3RvbS10YWJiYXIuaHRtbA==\">详情</span></td>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=\">2.5.0</span></td>\n</tr>\n</tbody>\n</table>\n<p>其中 list 接受一个数组，<strong>只能配置最少 2 个、最多 5 个 tab</strong>。tab 按数组的顺序排序，每个项都是一个对象，其属性值如下：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">属性</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">必填</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">pagePath</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">是</td>\n<td style=\"text-align:left\">页面路径，必须在 pages 中先定义</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">text</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">是</td>\n<td style=\"text-align:left\">tab 上按钮文字</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">iconPath</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。 <strong>当  <code>position</code>  为  <code>top</code>  时，不显示 icon。</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">selectedIconPath</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">否</td>\n<td style=\"text-align:left\">选中时的图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。 <strong>当  <code>position</code>  为  <code>top</code>  时，不显示 icon。</strong></td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>如何获取项目需要的图片</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaWNvbmZvbnQuY24v\">https://www.iconfont.cn/</span></p>\n<p>搜索图标 - 加入购物车 - 点击购物车 - 下载素材</p>\n<p>输入颜色 #333333 和 #ff6666。选择大小为 81px，下载 png 图片即可</p>\n</blockquote>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t...<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token property\">\"tabBar\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#333\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token property\">\"selectedColor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#f66\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token property\">\"backgroundColor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#efefef\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token property\">\"borderStyle\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"black\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token property\">\"list\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token property\">\"pagePath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pages/home/home\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"首页\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token property\">\"iconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"resources/tabBar/home.png\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token property\">\"selectedIconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"resources/tabBar/home_active.png\"</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token property\">\"pagePath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pages/kind/kind\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"分类\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token property\">\"iconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"resources/tabBar/kind.png\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token property\">\"selectedIconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"resources/tabBar/kind_active.png\"</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token property\">\"pagePath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pages/cart/cart\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"购物车\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token property\">\"iconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"resources/tabBar/cart.png\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token property\">\"selectedIconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"resources/tabBar/cart_active.png\"</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token property\">\"pagePath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pages/user/user\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"我的\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token property\">\"iconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"resources/tabBar/user.png\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            <span class=\"token property\">\"selectedIconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"resources/tabBar/user_active.png\"</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  ...</pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li><strong>networkTimeout</strong></li>\n</ul>\n<p>各类网络请求的超时时间，单位均为毫秒。</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t...<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token property\">\"networkTimeout\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"request\"</span><span class=\"token operator\">:</span> <span class=\"token number\">6000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token property\">\"connectSocket\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token property\">\"uploadFile\"</span><span class=\"token operator\">:</span> <span class=\"token number\">600000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token property\">\"downloadFile\"</span><span class=\"token operator\">:</span> <span class=\"token number\">6000000</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  ....</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li>debug</li>\n</ul>\n<p>可以在开发者工具中开启  <code>debug</code>  模式，在开发者工具的控制台面板，调试信息以  <code>info</code>  的形式给出，其信息有 Page 的注册，页面路由，数据更新，事件触发等。可以帮助开发者快速定位一些常见的问题。</p>\n<pre><code>&#123;\n\t...,\n\t&quot;debug&quot;: false,\n\t....\n&#125;\n</code></pre>\n<blockquote>\n<p>底部 tab 选项卡对应的页面，会自动添加类似 vue 中的 keep-alive 的功能，原来的 activated 和 deactivated 分别对应小程序中的。onShow 和 onHide</p>\n</blockquote>\n<ul>\n<li><strong>subpackages</strong></li>\n</ul>\n<p>启用<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9zdWJwYWNrYWdlcy5odG1s\">分包加载</span>时，声明项目分包结构。</p>\n<blockquote>\n<p>分包加载：</p>\n<ul>\n<li>整个小程序所有分包大小不超过 20M</li>\n<li>单个分包 / 主包大小不能超过 2M</li>\n</ul>\n<p><strong>使用分包</strong></p>\n<p><strong>独立分包</strong></p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"subPackages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token property\">\"root\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pckSearch\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"search\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token property\">\"pages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token string\">\"pages/search/search\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token string\">\"pages/result/result\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token property\">\"independent\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token property\">\"root\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pckUser\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token property\">\"pages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token string\">\"pages/login/login\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token string\">\"pages/register/register\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token property\">\"debug\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><blockquote>\n<p><strong>开启 debug 模式，添加编译模式，调试分包的页面，观察 独立分包和 非独立分包的效果，通过控制台的 console 查看</strong></p>\n</blockquote>\n<p><strong>分包预下载</strong></p>\n<p>开发者可以通过配置，在进入小程序某个页面时，由框架自动预下载可能需要的分包，提升进入后续分包页面时的启动速度。</p>\n<blockquote>\n<p>做一个电商类型的小程序，大部分的用户一定回去搜索，所以可以把搜索相关业务写到分包，当用户打开主包时，预下载 搜索的分包</p>\n</blockquote>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t...<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token property\">\"subPackages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>          <span class=\"token property\">\"root\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pckSearch\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>          <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pckSearch\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>          <span class=\"token property\">\"pages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token string\">\"pages/search/search\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token string\">\"pages/result/result\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>          <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>          <span class=\"token property\">\"independent\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token property\">\"root\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pckUser\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pckUser\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>          <span class=\"token property\">\"pages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token string\">\"pages/login/login\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token string\">\"pages/register/register\"</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>          <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>     <span class=\"token property\">\"preloadRule\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>       <span class=\"token property\">\"pages/home/home\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>         <span class=\"token property\">\"network\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"all\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>         <span class=\"token property\">\"packages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>          <span class=\"token string\">\"pckSearch\"</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>         <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>       <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>     <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  ...</pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></blockquote>\n<p>整体的全局配置文件如下：</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"pages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token string\">\"pages/home/home\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token string\">\"pages/kind/kind\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string\">\"pages/cart/cart\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">\"pages/user/user\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string\">\"pages/detail/detail\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token string\">\"pages/index/index\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token string\">\"pages/logs/logs\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token property\">\"window\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token property\">\"navigationBarBackgroundColor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#f66\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token property\">\"navigationBarTextStyle\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"white\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token property\">\"navigationBarTitleText\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"嗨购\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token property\">\"navigationStyle\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token property\">\"backgroundColor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#efefef\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token property\">\"backgroundTextStyle\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dark\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token property\">\"restartStrategy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"homePageAndLatestPage\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token property\">\"visualEffectInBackground\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hidden\"</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token property\">\"tabBar\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#333\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token property\">\"selectedColor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#f66\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token property\">\"backgroundColor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#efefef\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token property\">\"borderStyle\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"black\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token property\">\"list\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token property\">\"pagePath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pages/home/home\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"首页\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token property\">\"iconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tabBar/home.png\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token property\">\"selectedIconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tabBar/home_active.png\"</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token property\">\"pagePath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pages/kind/kind\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"分类\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token property\">\"iconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tabBar/kind.png\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token property\">\"selectedIconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tabBar/kind_active.png\"</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token property\">\"pagePath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pages/cart/cart\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"购物车\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token property\">\"iconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tabBar/cart.png\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token property\">\"selectedIconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tabBar/cart_active.png\"</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token property\">\"pagePath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pages/user/user\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"我的\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token property\">\"iconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tabBar/user.png\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token property\">\"selectedIconPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tabBar/user_active.png\"</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>  <span class=\"token property\">\"networkTimeout\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token property\">\"request\"</span><span class=\"token operator\">:</span> <span class=\"token number\">6000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token property\">\"connectSocket\"</span><span class=\"token operator\">:</span> <span class=\"token number\">6000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token property\">\"uploadFile\"</span><span class=\"token operator\">:</span> <span class=\"token number\">60000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token property\">\"downloadFile\"</span><span class=\"token operator\">:</span> <span class=\"token number\">60000</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>  <span class=\"token property\">\"subpackages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>      <span class=\"token property\">\"root\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"packageSearch\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"packageSearch\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>      <span class=\"token property\">\"independent\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>      <span class=\"token property\">\"pages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        <span class=\"token string\">\"pages/search/search\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        <span class=\"token string\">\"pages/result/result\"</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>      <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>      <span class=\"token property\">\"root\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"packageUser\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"packageUser\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>      <span class=\"token property\">\"pages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>        <span class=\"token string\">\"pages/register/register\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>        <span class=\"token string\">\"pages/login/login\"</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>      <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>  <span class=\"token property\">\"preloadRule\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    <span class=\"token property\">\"pages/home/home\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>      <span class=\"token property\">\"network\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"all\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>      <span class=\"token property\">\"packages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"packageSearch\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>  <span class=\"token property\">\"debug\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>  <span class=\"token property\">\"style\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"v2\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>  <span class=\"token property\">\"sitemapLocation\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sitemap.json\"</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"812-工具配置-projectconfigjson\"><a class=\"anchor\" href=\"#812-工具配置-projectconfigjson\">#</a> 8.1.2 工具配置 project.config.json</h3>\n<h2 id=\"项目配置文件\"><a class=\"anchor\" href=\"#项目配置文件\">#</a> 项目配置文件</h2>\n<ol>\n<li>项目根目录中的  <code>project.config.json</code>  和  <code>project.private.config.json</code>  文件可以对项目进行配置，</li>\n<li><code>project.private.config.json</code>  中的相同设置优先级高于  <code>project.config.json</code></li>\n<li>可以在  <code>project.config.json</code>  文件中配置公共的配置，在  <code>project.private.config.json</code>  配置个人的配置，可以将  <code>project.private.config.json</code>  写到  <code>.gitignore</code>  避免版本管理的冲突。</li>\n<li><code>project.private.config.json</code>  中有的字段，开发者工具内的设置修改会优先覆盖  <code>project.private.config.json</code>  的内容。如在  <code>project.private.config.json</code>  有  <code>appid</code>  字段，那么在 详情 - 基本信息 中修改了 appid，会写到  <code>project.private.config.json</code>  中，不会覆盖掉  <code>project.config.json</code>  的  <code>appid</code>  字段的内容</li>\n<li>开发阶段相关的设置修改优先同步到  <code>project.private.config.json</code>  中，但与最终编译产物有关的设置无法在  <code>project.private.config.json</code>  中生效，界面上的改动也不会同步到  <code>project.private.config.json</code>  文件中。详见 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNzZXR0aW5n\">表格</span> 是否允许私有设置。</li>\n</ol>\n<h2 id=\"一级字段\"><a class=\"anchor\" href=\"#一级字段\">#</a> 一级字段</h2>\n<p>可以在项目根目录使用  <code>project.config.json</code>  文件对项目进行配置。</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">字段名</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">miniprogramRoot</td>\n<td style=\"text-align:left\">Path String</td>\n<td style=\"text-align:left\">指定小程序源码的目录 (需为相对路径)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">qcloudRoot</td>\n<td style=\"text-align:left\">Path String</td>\n<td style=\"text-align:left\">指定腾讯云项目的目录 (需为相对路径)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">pluginRoot</td>\n<td style=\"text-align:left\">Path String</td>\n<td style=\"text-align:left\">指定插件项目的目录 (需为相对路径)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cloudbaseRoot</td>\n<td style=\"text-align:left\">Path String</td>\n<td style=\"text-align:left\">云开发代码根目录 (需为相对路径)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cloudfunctionRoot</td>\n<td style=\"text-align:left\">Path String</td>\n<td style=\"text-align:left\">云函数代码根目录 (需为相对路径)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cloudfunctionTemplateRoot</td>\n<td style=\"text-align:left\">Path String</td>\n<td style=\"text-align:left\">云函数本地调试请求模板的根目录 (需为相对路径)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cloudcontainerRoot</td>\n<td style=\"text-align:left\">Path String</td>\n<td style=\"text-align:left\">云托管代码根目录 (需为相对路径)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNjb21waWxlVHlwZQ==\">compileType</span></td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">编译类型</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNzZXR0aW5n\">setting</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">项目设置</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNsaWJWZXJzaW9u\">libVersion</span></td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">基础库版本</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">appid</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">项目的 appid</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">projectname</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">项目名字</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNwYWNrT3B0aW9ucw==\">packOptions</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">打包配置选项</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNkZWJ1Z09wdGlvbnM=\">debugOptions</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">调试配置选项</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCN3YXRjaE9wdGlvbnM=\">watchOptions</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">文件监听配置设置</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNzY3JpcHRz\">scripts</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">自定义预处理</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaWdhbWUvZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcjc3RhdGljU2VydmVyT3B0aW9ucw==\">staticServerOptions</span></td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">仅在小游戏项目中有效</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"compiletype\"><a class=\"anchor\" href=\"#compiletype\">#</a> compileType</h3>\n<p>编译类型作用于开发工具的以下设置</p>\n<p><img data-src=\"E:%5CUsers%5CDeskdop%5CBlog%5Csource_posts%5Cwx-app%5Cday2%5Cimage-20221101090136819.png\" alt=\"image-20221101090136819\"></p>\n",
            "tags": [
                "微信小程序",
                "wxapp",
                "ts"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/wx-app/day1/",
            "url": "https://www.yexingcheng.com/wx-app/day1/",
            "title": "微信小程序学习第一天",
            "date_published": "2022-10-30T16:00:00.000Z",
            "content_html": "<h1 id=\"1-小程序介绍\"><a class=\"anchor\" href=\"#1-小程序介绍\">#</a> 1、小程序介绍</h1>\n<p>小程序是一种不需要下载安装即可使用的应用，它实现了应用 “触手可及” 的梦想，用户扫一扫或者搜一下即可打开应用。也体现了 “用完即走” 的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无需安装卸载。</p>\n<p>小程序种类</p>\n<ul>\n<li>微信小程序</li>\n<li>支付宝小程序</li>\n<li>百度小程序</li>\n<li>字节跳动小程序</li>\n<li>qq 小程序</li>\n<li>京东小程序</li>\n<li>.....</li>\n</ul>\n<p>随着技术的发展，现在已经不满足只写某一个类型的小程序，这样开发成本太高，所以现在很多公司倾向于 使用一套代码同时部署到不同的小程序平台，简单一点来说就是，一次开发，多端运行，典型的代表有 uniapp，taro</p>\n<p>要想学好 uniapp，前提条件是得学习 vue 以及微信小程序</p>\n<h1 id=\"2准备小程序的账号\"><a class=\"anchor\" href=\"#2准备小程序的账号\">#</a> 2. 准备小程序的账号</h1>\n<p>打开网址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tLw==\">https://mp.weixin.qq.com/</span></p>\n<p>账号分类 --- 小程序 ---- 鼠标移动上去 --- 查看详情 --- 滑动页面至底部 ---- 前往注册</p>\n<p>也可以直接点击 网址进行注册： <span class=\"exturl\" data-url=\"aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3d4b3Blbi93YXJlZ2lzdGVyP2FjdGlvbj1zdGVwMQ==\">https://mp.weixin.qq.com/wxopen/waregister?action=step1</span></p>\n<blockquote>\n<p>账号选择个人即可</p>\n<p>账号类型一定要选择微信小程序</p>\n</blockquote>\n<h1 id=\"3准备小程序开发者工具\"><a class=\"anchor\" href=\"#3准备小程序开发者工具\">#</a> 3. 准备小程序开发者工具</h1>\n<p>下载地址： <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL2Rvd25sb2FkLmh0bWw=\">https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html</span></p>\n<p><img data-src=\"02.png\" alt=\"image-20220530094135968\"></p>\n<h1 id=\"4查看小程序的后台界面\"><a class=\"anchor\" href=\"#4查看小程序的后台界面\">#</a> 4. 查看小程序的后台界面</h1>\n<p>打开网址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tLw==\">https://mp.weixin.qq.com/</span></p>\n<ul>\n<li>账户名密码登录</li>\n<li>扫码登录：扫码完成，选择自己的小程序项目即可</li>\n</ul>\n<p><img data-src=\"03.png\" alt=\"image-20220530094630311\"></p>\n<h2 id=\"41-首页\"><a class=\"anchor\" href=\"#41-首页\">#</a> 4.1 首页</h2>\n<p>可视化说明小程序统计数据</p>\n<h2 id=\"42-管理\"><a class=\"anchor\" href=\"#42-管理\">#</a> 4.2 管理</h2>\n<p><strong>版本管理</strong></p>\n<ul>\n<li>开发版本：主要通过微信开发者工具开发，然后通过开发者工具上传即可显示体验二维码，只有项目成员和体验成员才可扫码查看效果</li>\n<li>审核版本：开发版本点击 提交审核 按钮，填写审核的信息，然后交给微信审核即可</li>\n<li>线上版本：微信审核通过，即可点击项目上线，所有人可以搜索微信小程序的名字从而使用小程序</li>\n</ul>\n<p><strong>成员管理</strong></p>\n<p>​\t可以添加项目成员以及体验成员</p>\n<ul>\n<li>\n<p>项目成员：运营者，开发者，数据分析者，一个小程序项目最多含有 15 个项目成员</p>\n</li>\n<li>\n<p>体验成员：只是拥有体验权限，一个小程序项目最多含有 15 个体验成员</p>\n<blockquote>\n<p>添加时注意要添加的是 成员的 微信号，记住不是微信绑定的手机号</p>\n</blockquote>\n</li>\n</ul>\n<p><strong>用户反馈</strong></p>\n<h2 id=\"43-统计\"><a class=\"anchor\" href=\"#43-统计\">#</a> 4.3 统计</h2>\n<p>统计一般跟开发者无太大关系，数据分析者需要多加关注，通过数据分析，解析新的需求以及需要的改进点，项目组提出新的方案，再由开发者实现</p>\n<h2 id=\"44-功能\"><a class=\"anchor\" href=\"#44-功能\">#</a> 4.4 功能</h2>\n<ul>\n<li>微信搜一搜</li>\n<li>客服</li>\n<li>订阅消息</li>\n<li>页面内容接入</li>\n<li>实验工具</li>\n<li>小程序联盟</li>\n</ul>\n<h2 id=\"45-开发\"><a class=\"anchor\" href=\"#45-开发\">#</a> 4.5 开发</h2>\n<ul>\n<li>\n<p>开发管理</p>\n<ul>\n<li>运维中心</li>\n<li>监控告警</li>\n<li>开发设置 **</li>\n</ul>\n<p><img data-src=\"04.png\" alt=\"image-20220530101133559\"></p>\n<blockquote>\n<p>如果小程序项目要上线，就必须的配置 开发管理 - 开发设置 - 服务器域名</p>\n</blockquote>\n<p><img data-src=\"05.png\" alt=\"image-20220530101346711\"></p>\n<ul>\n<li>接口设置 **</li>\n<li>安全中心</li>\n</ul>\n</li>\n<li>\n<p>开发工具</p>\n</li>\n<li>\n<p>云服务</p>\n</li>\n</ul>\n<h2 id=\"46-设置\"><a class=\"anchor\" href=\"#46-设置\">#</a> 4.6 设置</h2>\n<ul>\n<li>基础设置</li>\n</ul>\n<blockquote>\n<p>根据小程序的业务需求，选择合适的 服务类目，否则小程序提交审核是会不通过</p>\n</blockquote>\n<h1 id=\"5使用微信开发者工具\"><a class=\"anchor\" href=\"#5使用微信开发者工具\">#</a> 5. 使用微信开发者工具</h1>\n<p><img data-src=\"06.png\" alt=\"image-20220530102326201\"></p>\n<p><img data-src=\"image-20221031185844387.png\" alt=\"image-20221031185844387\"></p>\n<h1 id=\"6熟悉微信开发者工具\"><a class=\"anchor\" href=\"#6熟悉微信开发者工具\">#</a> 6. 熟悉微信开发者工具</h1>\n<ul>\n<li>\n<p>编辑器</p>\n</li>\n<li>\n<p>调试器</p>\n</li>\n<li>\n<p>可视化：不建议使用 - 拖拽布局页面</p>\n</li>\n<li>\n<p>云开发：不需要单独的后端的接口，包含 数据库、存储、云函数、云托管</p>\n</li>\n<li>\n<p>小程序模式：另一个插件模式</p>\n</li>\n<li>\n<p>普通编译：小程序每次热更新都会让小程序从第一个页面开始渲染，那么为了提高开发效率，可以选择添加编译模式，从而快速调试页面</p>\n</li>\n<li>\n<p>预览：拥有开发权限和体验权限的人，可以直接查看在手机上的实际的运行结果，它跟小程序的线上版本保持一致</p>\n</li>\n<li>\n<p>真机调试：拥有开发权限和体验权限的人，可以直接查看在手机上的实际的运行结果，它跟小程序开发者工具中的模拟器效果保持一致（因为真机调试可以不需要后台配置服务器域名等就可以查看效果）</p>\n</li>\n<li>\n<p>清缓存：清除模拟的缓存信息</p>\n</li>\n<li>\n<p>上传：点击上传即可将项目进入 后台系统中的 开发版本和体验版本</p>\n</li>\n<li>\n<p>版本管理：默认使用 git 作为代码版本管理工具，方便多人合作</p>\n</li>\n<li>\n<p>详情</p>\n<ul>\n<li>基本信息</li>\n<li>性能分析</li>\n<li>本地设置\n<ul>\n<li>调试基础库：非常关键</li>\n<li>开发阶段：勾选不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPs 证书</li>\n</ul>\n</li>\n<li>项目配置\n<ul>\n<li>高级配置\n<ul>\n<li>代码包总大小（使用分包）   20M</li>\n<li>代码包总大小（不使用分包） 2M</li>\n<li>单个分包 / 主包大小                   2M</li>\n<li>Tabbar 最小个数\t\t\t\t\t           2</li>\n<li>Tabbar 最大个数                           5</li>\n<li>Tabbar 的 icon 大小限制          40KB</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>消息</p>\n</li>\n<li>\n<p>页面路径</p>\n<ul>\n<li>页面路径：路由，当前页面展示的一个标识</li>\n<li>页面参数：列表进入详情，详情区分产品的标识</li>\n<li>场景值：进入查看小程序的途径</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"7熟悉小程序代码\"><a class=\"anchor\" href=\"#7熟悉小程序代码\">#</a> 7. 熟悉小程序代码</h1>\n<pre><code>- miniprogram\n    - pages  存放该小程序所对应的页面，每个页面一个文件夹\n        - index  index页面\n            index.ts  index页面的逻辑文件\n            index.json index页面的配置文件\n            index.wxml  index页面的结构文件\n            index.scss  index页面的样式文件\n        - logs   logs 页面\n            logs.ts\n            logs.json\n            logs.wxml\n            logs.scss\n    - utils 自定义的工具包\n        util.js 自定义的函数\n    app.ts 全局的逻辑文件\n    app.json 全局的配置文件\n    app.wxss 全局的样式文件\n    sitemap.json 被搜索的配置文件\n- typings\n  - types\n  \t- wx\n  \t  index.d.ts\n  \t  lib.wx.api.d.ts\n  \t  lib.wx.app.d.ts\n  \t  lib.wx.behavior.d.ts\n  \t  lib.wx.cloud.d.ts\n  \t  lib.wx.component.d.ts\n  \t  lib.ex.event.d.ts\n  \t  lib.wx.page.d.ts\n  \tindex.d.ts\n  index.d.ts\n.eslintrc.js js代码的规则描述\n project.config.json 项目的配置文件\n project.private.config.json 项目私有的配置文件\n tsconfig.json\n</code></pre>\n",
            "tags": [
                "微信小程序",
                "wxapp",
                "ts"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/computer/rightPointNewMd/",
            "url": "https://www.yexingcheng.com/computer/rightPointNewMd/",
            "title": "如何在右键菜单下添加一个新建markdown文件选项",
            "date_published": "2022-10-29T16:00:00.000Z",
            "content_html": "<h1 id=\"在新建笔记的时候我们都会用到md文件但是windows11自带的新建文件夹下面没有新建md文件这一选项让我们很苦恼怎么办呢下面就一起来看看吧\"><a class=\"anchor\" href=\"#在新建笔记的时候我们都会用到md文件但是windows11自带的新建文件夹下面没有新建md文件这一选项让我们很苦恼怎么办呢下面就一起来看看吧\">#</a> 在新建笔记的时候，我们都会用到 md 文件，但是 windows11 自带的新建文件夹下面没有新建 md 文件这一选项，让我们很苦恼，怎么办呢？下面就一起来看看吧</h1>\n<h2 id=\"第一种方法修改注册表\"><a class=\"anchor\" href=\"#第一种方法修改注册表\">#</a> 第一种方法：修改注册表</h2>\n<h3 id=\"一-win-r输入regedit\"><a class=\"anchor\" href=\"#一-win-r输入regedit\">#</a> 一、win + R 输入【regedit】</h3>\n<p><img data-src=\"image-20221030035511584.png\" alt=\"image-20221030035511584\"></p>\n<h3 id=\"二-定位路径-计算机hkey_classes_rootmd\"><a class=\"anchor\" href=\"#二-定位路径-计算机hkey_classes_rootmd\">#</a> 二、定位路径 【计算机 \\HKEY_CLASSES_ROOT.md】</h3>\n<p><img data-src=\"image-20221030035632249.png\" alt=\"image-20221030035632249\"></p>\n<h3 id=\"三-右键md文件夹-新建-项把新建的项命名为shellnew\"><a class=\"anchor\" href=\"#三-右键md文件夹-新建-项把新建的项命名为shellnew\">#</a> 三、右键.md 文件夹 =&gt; 新建 =&gt; 项，把新建的项命名为【ShellNew】</h3>\n<p><img data-src=\"image-20221030035755119.png\" alt=\"image-20221030035755119\"></p>\n<h3 id=\"四-右键shellnew-新建-字符串值将该字符串值名称改为nullfile\"><a class=\"anchor\" href=\"#四-右键shellnew-新建-字符串值将该字符串值名称改为nullfile\">#</a> 四、右键 ShellNew =&gt; 新建 =&gt; 字符串值，将该字符串值名称改为【NullFile】</h3>\n<p><img data-src=\"image-20221030035848133.png\" alt=\"image-20221030035848133\"></p>\n<p>如果没有生效，请尝试注销重启系统。</p>\n<h2 id=\"二-注册表导入\"><a class=\"anchor\" href=\"#二-注册表导入\">#</a> 二、注册表导入</h2>\n<p>我们可以新建文本文文档，将以下命名复制进去，将 txt 后缀名改为 reg 格式，直接双击 reg 文件进行注册表导入。</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Windows Registry Editor Version 5<span class=\"token punctuation\">.</span>00</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token namespace\">[HKEY_CLASSES_ROOT\\.md]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>@=<span class=\"token string\">\"Marktext.exe\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token namespace\">[HKEY_CLASSES_ROOT\\.md\\ShellNew]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token string\">\"NullFile\"</span>=<span class=\"token string\">\"\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token namespace\">[HKEY_CLASSES_ROOT\\Marktext.exe]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>@=<span class=\"token string\">\"Markdown\"</span></pre></td></tr></table></figure><p><img data-src=\"image-20221030040857071.png\" alt=\"image-20221030040857071\"></p>\n<h2 id=\"三-通过-reg-注册表命令添加\"><a class=\"anchor\" href=\"#三-通过-reg-注册表命令添加\">#</a> 三、通过 Reg 注册表命令添加</h2>\n<p>更深入一些，我们也可以通过 reg 注册表命令来进行修改。</p>\n<p>必须以管理员权限启动 CMD 窗口，输如下命令。</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>reg add <span class=\"token string\">\"HKEY_CLASSES_ROOT\\.md\"</span> <span class=\"token operator\">/</span>d <span class=\"token string\">\"Marktext.exe\"</span> <span class=\"token operator\">/</span>f</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>reg add <span class=\"token string\">\"HKEY_CLASSES_ROOT\\.md\\ShellNew\"</span> <span class=\"token operator\">/</span>v <span class=\"token string\">\"NullFile\"</span> <span class=\"token operator\">/</span>t <span class=\"token string\">\"REG_SZ\"</span>  <span class=\"token operator\">/</span>f</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>reg add <span class=\"token string\">\"HKEY_CLASSES_ROOT\\Marktext.exe\"</span> <span class=\"token operator\">/</span>d <span class=\"token string\">\"Markdown\"</span> <span class=\"token operator\">/</span>f</pre></td></tr></table></figure><p><img data-src=\"image-20221030041025319.png\" alt=\"image-20221030041025319\"></p>\n<h1 id=\"最终我们发现可以在右键菜单下有了这个选项\"><a class=\"anchor\" href=\"#最终我们发现可以在右键菜单下有了这个选项\">#</a> 最终我们发现可以在右键菜单下有了这个选项</h1>\n<p><img data-src=\"image-20221030042132599.png\" alt=\"image-20221030042132599\"></p>\n",
            "tags": [
                "计算机相关",
                "windows",
                "windows11"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/react-study/react-router-params/",
            "url": "https://www.yexingcheng.com/react-study/react-router-params/",
            "title": "React路由传参的几种方式",
            "date_published": "2022-10-29T16:00:00.000Z",
            "content_html": "<h1 id=\"一-函数式组件\"><a class=\"anchor\" href=\"#一-函数式组件\">#</a> 一、函数式组件</h1>\n<p>首先新建两个页面并导入到 app.tsx 页面中</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span>  <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">From</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">函数式组件传值</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> From<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span>  <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">To</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">函数式组件接受值</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> To<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight tsx\"><figcaption data-lang=\"React TSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> Route<span class=\"token punctuation\">,</span> Routes <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> From <span class=\"token keyword\">from</span> <span class=\"token string\">'./From-function'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> To <span class=\"token keyword\">from</span> <span class=\"token string\">'./To-function'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">From</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>to<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">To</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./router-params/App'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BrowserRouter</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">BrowserRouter</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"1-params传参\"><a class=\"anchor\" href=\"#1-params传参\">#</a> 1、params 传参</h2>\n<p>优点：刷新页面，参数不丢失</p>\n<p>缺点：1. 只能传字符串，传值过多 url 会变得很长 2. 参数必须在路由上配置</p>\n<p>是通过在路由后面写 /: 参数名将路径配合？name=xxx 的形式</p>\n<p>通过 useParams 来获取路径参数</p>\n<p><code>路由配置</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">From</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>to:number<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">To</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><code>From组件</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useNavigate <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">From</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">const</span> navigate <span class=\"token operator\">=</span> <span class=\"token function\">useNavigate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">to</span> <span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'to:666'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">函数式组件传值</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span><span class=\"token function\">to</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">传参</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> From<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>to组件</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token constant\">FC</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span>useParams<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">To</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">const</span> params <span class=\"token operator\">=</span> <span class=\"token function\">useParams</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">函数式组件接受值</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    传递的参数为<span class=\"token punctuation\">&#123;</span>params<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> To<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>运行结果:</p>\n<p><img data-src=\"image-20221030173426778.png\" alt=\"image-20221030173426778\"></p>\n<h2 id=\"2-search传参\"><a class=\"anchor\" href=\"#2-search传参\">#</a> 2、. search 传参</h2>\n<p>优点：刷新页面，参数不丢失</p>\n<p>缺点：只能传字符串，传值过多 url 会变得很长，获取参数需要自定义 hooks</p>\n<p><code>路由配置</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">From</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>to<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">To</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><code>from组件</code></p>\n<pre><code>import React from &quot;react&quot;;\nimport &#123; useNavigate &#125; from 'react-router-dom';\nconst From = () =&gt; &#123;\n\n  const navigate = useNavigate()\n\n\n  const search =()=&gt;&#123;\n    navigate('to/?num=666')\n  &#125;\n\n\n  return (&lt;&gt;\n  &lt;h1&gt;函数式组件传值&lt;/h1&gt;\n  &lt;button onClick=&#123;()=&gt;&#123;search()&#125;&#125;&gt;search传参&lt;/button&gt;\n\n  &lt;/&gt;)\n&#125;;\n\nexport default From;\n\n</code></pre>\n<p><code>to组件</code></p>\n<pre><code>import React from 'react';\nimport &#123; useParams, useSearchParams ,useLocation&#125; from 'react-router-dom';\n\nconst To = () =&gt; &#123;\nconst [search] = useSearchParams()\nconsole.log(search.get('num'));\n\n\n  return (\n    &lt;&gt;\n\n    &lt;h1&gt;函数式组件接受值&lt;/h1&gt;\n    \n    search传递的参数为\n   \n    &lt;/&gt;\n  )\n\n&#125;;\n\nexport default To;\n</code></pre>\n<p><code>运行结果</code></p>\n<p><img data-src=\"image-20221030190608909.png\" alt=\"image-20221030190608909\"></p>\n<h2 id=\"3-state传参\"><a class=\"anchor\" href=\"#3-state传参\">#</a> 3、state 传参</h2>\n<p>优点：可以传对象</p>\n<p>缺点：  <code>&lt;HashRouter&gt;</code>  刷新页面，参数丢失</p>\n<p><code>路由配置</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">From</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>to<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">To</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><code>from</code>  组件</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useNavigate <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">From</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">const</span> navigate <span class=\"token operator\">=</span> <span class=\"token function\">useNavigate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">state</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'to'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span><span class=\"token string\">'叶星辰'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span><span class=\"token string\">'18'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token literal-property property\">hobby</span><span class=\"token operator\">:</span><span class=\"token string\">\"敲代码\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">函数式组件传值</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span><span class=\"token function\">state</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">state传参</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> From<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>to组件</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useParams<span class=\"token punctuation\">,</span> useSearchParams <span class=\"token punctuation\">,</span>useLocation<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">To</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> hobby <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">useLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    statec传递的参数为姓名<span class=\"token punctuation\">&#123;</span>name<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">年纪</span><span class=\"token punctuation\">&#123;</span>age<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">爱好</span><span class=\"token punctuation\">&#123;</span>hobby<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> To<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>运行结果</code></p>\n<p><img data-src=\"image-20221030180814827.png\" alt=\"image-20221030180814827\"></p>\n<h1 id=\"二-类组件\"><a class=\"anchor\" href=\"#二-类组件\">#</a> 二、类组件</h1>\n<p>类组件不能用到 useNavigate 等 hooks, 所以采用 NavLink 的方式跳转路由，同理，函数式组件中也可以用 NavLink 的方式跳转路由</p>\n<p>如果不用 withRouter，发现组件的 this.props 是一个空对象</p>\n<p><img data-src=\"image-20221030194100624.png\" alt=\"image-20221030194100624\"></p>\n<p>经过各方查阅，我们在 react-router-dom v6 版本中，已经去除了 withRouter，所以在这里我们可以自己封装，但还是推荐使用函数式组件 hooks</p>\n<p>js 版本:</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useLocation<span class=\"token punctuation\">,</span> useNavigate <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router-dom\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span> <span class=\"token parameter\">Child</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span> <span class=\"token parameter\">props</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">const</span> location <span class=\"token operator\">=</span> <span class=\"token function\">useLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">const</span> navigate <span class=\"token operator\">=</span> <span class=\"token function\">useNavigate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">const</span> params <span class=\"token operator\">=</span> <span class=\"token function\">useParams</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>Child <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>props <span class=\"token punctuation\">&#125;</span> navigate<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> navigate <span class=\"token punctuation\">&#125;</span> location<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> location <span class=\"token punctuation\">&#125;</span> params<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> params <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ts 版本:</p>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> NavigateFunction<span class=\"token punctuation\">,</span> useLocation<span class=\"token punctuation\">,</span> useNavigate<span class=\"token punctuation\">,</span> useParams <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">RoutedProps<span class=\"token operator\">&lt;</span>Params <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> State <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    location<span class=\"token operator\">:</span> State<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    navigate<span class=\"token operator\">:</span> NavigateFunction<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    params<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">withRouter</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">P</span> <span class=\"token keyword\">extends</span> RoutedProps<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span> Child<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ComponentClass<span class=\"token operator\">&lt;</span><span class=\"token constant\">P</span><span class=\"token operator\">></span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span> props<span class=\"token operator\">:</span> Omit<span class=\"token operator\">&lt;</span><span class=\"token constant\">P</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">keyof</span> RoutedProps<span class=\"token operator\">></span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">const</span> location <span class=\"token operator\">=</span> <span class=\"token function\">useLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">const</span> navigate <span class=\"token operator\">=</span> <span class=\"token function\">useNavigate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">const</span> params <span class=\"token operator\">=</span> <span class=\"token function\">useParams</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>Child <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>props <span class=\"token keyword\">as</span> <span class=\"token constant\">P</span> <span class=\"token punctuation\">&#125;</span> navigate<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> navigate <span class=\"token punctuation\">&#125;</span> location<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> location <span class=\"token punctuation\">&#125;</span> params<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> params <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"1-params传参-2\"><a class=\"anchor\" href=\"#1-params传参-2\">#</a> 1、params 传参</h2>\n<p><code>路由配置</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">From</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>to:number<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">To</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><code>From组件</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> NavLink<span class=\"token punctuation\">,</span> Link <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router-dom\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> withRouter <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./withRouter\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">FromClass</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">类组件传参</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"/to:666\"</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">详情</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>FromClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>to组件</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> withRouter <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./withRouter\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">ToClass</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        params传递的参数为<span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>ToClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>运行结果:</p>\n<p><img data-src=\"image-20221030195320898.png\" alt=\"image-20221030195320898\"></p>\n<h2 id=\"2-search传参-2\"><a class=\"anchor\" href=\"#2-search传参-2\">#</a> 2、. search 传参</h2>\n<p><code>路由配置</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">From</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>to<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">To</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><code>from组件</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> NavLink<span class=\"token punctuation\">,</span> Link <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router-dom\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> withRouter <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./withRouter\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">FromClass</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">类组件传参</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"/to/?number=666\"</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">详情</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>FromClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>to组件</code></p>\n<p>由于 search 传递的参数比较特殊，所以用 query-string 解析一下就行</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> withRouter <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./withRouter\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> qs <span class=\"token keyword\">from</span> <span class=\"token string\">\"query-string\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">ToClass</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>qs<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        search传递的参数为<span class=\"token punctuation\">&#123;</span>qs<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>ToClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>运行结果</code></p>\n<p><img data-src=\"image-20221030200459605.png\" alt=\"image-20221030200459605\"></p>\n<h2 id=\"3-state传参-2\"><a class=\"anchor\" href=\"#3-state传参-2\">#</a> 3、state 传参</h2>\n<p><code>路由配置</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">From</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>to<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">To</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#125;</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><code>from</code>  组件</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> NavLink<span class=\"token punctuation\">,</span> Link <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router-dom\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> withRouter <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./withRouter\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">FromClass</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token literal-property property\">pathname</span><span class=\"token operator\">:</span> <span class=\"token string\">\"to\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"叶星辰\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">18</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">类组件传参</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span>path<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">传参</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>FromClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>to组件</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> withRouter <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./withRouter\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> qs <span class=\"token keyword\">from</span> <span class=\"token string\">\"query-string\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">ToClass</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>       </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        state传递的参数为<span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>ToClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>运行结果</code></p>\n<p>扩展延伸:react-router-dom 中 <code>NavLink</code>  和 <code>Link</code>  的区别</p>\n<p>在 ReactJS 中，有三种不同的链接。这些是 <code>NavLink</code> 、、 <code>Link</code>  和 <code>a</code>  链接，它们都有不同的用途。</p>\n<ol>\n<li><strong> <code>NavLink</code> </strong>：当您想要突出显示当前或活动链接时使用此选项。这与 <code>activeClassName</code>  启用它的属性一起使用。请参见下面的示例。</li>\n</ol>\n<pre><code>&lt;NavLink to=&quot;/home&quot; activeClassName=&quot;active&quot; &gt;Home&lt;/NavLink&gt;&lt;br/&gt;\n</code></pre>\n<p>然后 <code>CSS</code>  可以根据您在 <code>App.css</code>  文件中的选择设置样式。让我们将文本颜色设为红色以使其简单。</p>\n<pre><code>.active&#123;\n  color:red;\n&#125;\n</code></pre>\n<ol>\n<li><strong> <code>Link</code> </strong>：当您的链接没有特殊样式或突出显示时使用。请参见下面的示例。</li>\n</ol>\n<pre><code>&lt;Link to=&quot;/not-active&quot;&gt;Not Active &lt;/Link&gt;&lt;br/&gt;\n</code></pre>\n<blockquote>\n<p>注意：当您需要链接到属于您的应用程序的页面时，请使用 <code>NavLink</code>  或。 <code>Link</code>  对于外部链接， <code>a</code>  是首选。</p>\n</blockquote>\n<ol>\n<li><strong>锚标记 <code>a</code> </strong>：这用于网页外的链接。<br>\n请参见下面的示例。</li>\n</ol>\n<pre><code>&lt;a href=&quot;https://www.educative.io/edpresso&quot;&gt;Visit Edpresso &lt;/a&gt;\n</code></pre>\n<h2 id=\"结论\"><a class=\"anchor\" href=\"#结论\">#</a> 结论</h2>\n<p>当 <code>NavLink</code>  您想要将链接突出显示为活动时使用。因此，在每次路由到页面时，链接都会根据 <code>activeClassName</code> .  <code>Link</code>  用于不需要突出显示的链接。并且 <code>a</code>  用于外部链接。</p>\n",
            "tags": [
                "react学习",
                "react",
                "router"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/Blog_introduction/Blog_introduction/",
            "url": "https://www.yexingcheng.com/Blog_introduction/Blog_introduction/",
            "title": "Welcome!",
            "date_published": "2022-09-30T16:00:00.000Z",
            "content_html": "",
            "tags": [
                "index",
                "index"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/interface/interview/",
            "url": "https://www.yexingcheng.com/interface/interview/",
            "title": "面试题总结",
            "date_published": "2022-09-30T16:00:00.000Z",
            "content_html": "<h1 id=\"javascript\"><a class=\"anchor\" href=\"#javascript\">#</a> JavaScript</h1>\n<h3 id=\"柯里化和反柯里化\"><a class=\"anchor\" href=\"#柯里化和反柯里化\">#</a> 柯里化和反柯里化</h3>\n<blockquote>\n<p>柯里化，可以理解为<strong>提前接收部分参数，延迟执行，不立即输出结果，而是返回一个接受剩余参数的函数</strong>。因为这样的特性，也被称为部分计算函数。柯里化，是一个逐步接收参数的过程。在接下来的剖析中，你会深刻体会到这一点。</p>\n<p>反柯里化，是一个<strong>泛型化</strong>的过程。它使得被反柯里化的函数，可以<strong>接收更多参数</strong>。目的是创建一个更普适性的函数，可以被不同的对象使用。有鸠占鹊巢的效果。</p>\n</blockquote>\n<h3 id=\"async和await\"><a class=\"anchor\" href=\"#async和await\">#</a> async 和 await</h3>\n<blockquote>\n<p>async 声明一个 function 来表示这个异步函数，await 用于等待函数中某个异步操作执行完成。</p>\n</blockquote>\n<h3 id=\"对象类型的数组去重\"><a class=\"anchor\" href=\"#对象类型的数组去重\">#</a> 对象类型的数组去重</h3>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'林青霞'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'张三丰'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'段誉'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">preValue<span class=\"token punctuation\">,</span> item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  obj<span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">?</span> <span class=\"token string\">''</span> <span class=\"token operator\">:</span> obj<span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">&amp;&amp;</span> preValue<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token keyword\">return</span> preValue</pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// 将返回值的初始值定义为空数组</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">,</span> <span class=\"token string\">'==='</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// 打印去重之后的数组</span></pre></td></tr></table></figure><h3 id=\"箭头函数和普通函数的区别\"><a class=\"anchor\" href=\"#箭头函数和普通函数的区别\">#</a> 箭头函数和普通函数的区别</h3>\n<blockquote>\n<p>箭头函数不会创建自己的 <code>this</code> ，所以它没有自己的 <code>this</code> ，它只会从自己的作用域链的上一层继承 <code>this</code> 。</p>\n<p>箭头函数中的 this 指向永远不变</p>\n<p>而箭头函数就不可以使用 <code>arguments</code>  对象，获取不到输入的参数。</p>\n<p>使用场景</p>\n</blockquote>\n<p>判断一个变量类型的方式</p>\n<blockquote>\n<p>//typeof</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">//'undefined'    </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//'boolean'    </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> <span class=\"token string\">'123'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//'string'   </span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> <span class=\"token number\">123</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//'number'    </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> <span class=\"token number\">NaN</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//'number'    </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//'object'       </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">//'object'    </span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">var</span>  <span class=\"token function-variable function\">fn</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//'function'    </span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">class</span> <span class=\"token class-name\">c</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//'function'</span></pre></td></tr></table></figure><p>//instanceof</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// example</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 由于：</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>arr<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Array</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>arr<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>arr<span class=\"token punctuation\">.</span>__poto__<span class=\"token punctuation\">.</span>proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// 所以，以下都返回 true</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>arr <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">arr<span class=\"token punctuation\">.</span>constructor</span><span class=\"token punctuation\">(</span>Array<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>arr <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">arr<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>constructor</span><span class=\"token punctuation\">(</span>Array<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>arr <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">arr<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__poto__<span class=\"token punctuation\">.</span>constructor</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jerry\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//[object String]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//[object Number]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//[object Boolean]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//[object Undefined]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//[object Null]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jerry\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//[object Object]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//[object Function]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//[object Array]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//[object Date]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\d</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//[object RegExp]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//[object Object]</span></pre></td></tr></table></figure><p>constructor</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">b</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//a</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//Function（）&#123;&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//Function（）&#123;&#125;</span></pre></td></tr></table></figure></blockquote>\n<p>ES5 和 ES6 继承的区别</p>\n<blockquote>\n<p>ES5 的继承实质上是先创建子类的实例对象，然后再将父类的方法添加 到 this 上<br>\n ES6 的继承机制完全不同，实质上是先创建父类的实例对象 this（所以必须先调用父类的 super () 方法），然后再用子类的构造函数修改 this。<br>\nES5 的继承时通过原型或构造函数机制来实现。<br>\nES6 通过 class 关键字定义类，里面有构造方法，类之间通过 extends 关 键字实现继承。 子类必须在 constructor 方法中调用 super 方法，否则新建实例报错。因为子类没有自己的 this 对象，而是继承了父类的 this 对象，然后对其进行加工。 如果不调用 super 方法，子类得不到 this 对象。 super 关键字指代父类的实例，即父类的 this 对象。 在子类构造函数中，调用 super 后，才可使用 this 关键字，否则报错。<br>\nES5 的构造函数可以不进行构造调用即可以当普通函数使用，而 ES6 的 class 只能通过 new 来调用。<br>\nclass 的所有方法（包括静态方法和实例方法）都是不可枚举的且都没有原型对象 prototype，所以也没有 [[constructor]]，不能使用 new 来调用</p>\n</blockquote>\n<p>事件循环</p>\n<blockquote></blockquote>\n<p>promise</p>\n<blockquote>\n<p>Promise 类有 .then () .catch () 和 .finally () 三个方法，这三个方法的参数都是一个函数，.then () 可以将参数中的函数添加到当前 Promise 的正常执行序列，.catch () 则是设定 Promise 的异常处理序列，.finally () 是在 Promise 执行的最后一定会执行的序列。 .then () 传入的函数会按顺序依次执行，有任何异常都会直接跳到 catch 序列：</p>\n<p>resolve () 中可以放置一个参数用于向下一个 then 传递一个值，then 中的函数也可以返回一个值传递给 then。但是，如果 then 中返回的是一个 Promise 对象，那么下一个 then 将相当于对这个返回的 Promise 进行操作，这一点从刚才的计时器的例子中可以看出来。</p>\n<p>reject () 参数中一般会传递一个异常给之后的 catch 函数用于处理异常。</p>\n<p>但是请注意以下两点：</p>\n<ul>\n<li>resolve 和 reject 的作用域只有起始函数，不包括 then 以及其他序列；</li>\n<li>resolve 和 reject 并不能够使起始函数停止运行，别忘了 return。</li>\n</ul>\n</blockquote>\n<h1 id=\"vue3\"><a class=\"anchor\" href=\"#vue3\">#</a> Vue3</h1>\n<h3 id=\"vue3的缺点\"><a class=\"anchor\" href=\"#vue3的缺点\">#</a> vue3 的缺点</h3>\n<blockquote></blockquote>\n<h3 id=\"vue命名路由\"><a class=\"anchor\" href=\"#vue命名路由\">#</a> vue 命名路由</h3>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span><span class=\"token comment\">// 重定向</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">\"/home\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">\"/home\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 地址栏地址 - 路由</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">\"home\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名路由  ---   唯一性</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      default<span class=\"token operator\">:</span> HomeView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 路由映射的页面组件</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// 页面中</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre> &lt;router-view name = <span class=\"token string\">\"default\"</span>/></pre></td></tr><tr><td data-num=\"14\"></td><td><pre> &lt;router-view name = <span class=\"token string\">\"footer\"</span>/></pre></td></tr></table></figure><h3 id=\"浏览器渲染的过程\"><a class=\"anchor\" href=\"#浏览器渲染的过程\">#</a> 浏览器渲染的过程</h3>\n<blockquote>\n<p>处理 HTML 标记并构建 DOM 树。<br>\n处理 CSS 标记并构建 CSSOM 树。<br>\n将 DOM 与 CSSOM 合并成一个渲染树。<br>\n根据渲染树来布局，计算每个节点的几何信息。<br>\n将各个节点绘制到屏幕上。</p>\n</blockquote>\n<h3 id=\"vue3自定义指令\"><a class=\"anchor\" href=\"#vue3自定义指令\">#</a> vue3 自定义指令</h3>\n<pre><code class=\"language-vue\">&lt;div id=&quot;app&quot;&gt;\n    &lt;p&gt;页面载入时，input 元素自动获取焦点：&lt;/p&gt;\n    &lt;input v-focus&gt;\n&lt;/div&gt;\n \n&lt;script&gt;\nconst app = Vue.createApp(&#123;&#125;)\n// 注册一个全局自定义指令 `v-focus`\napp.directive('focus', &#123;\n  // 当被绑定的元素挂载到 DOM 中时……\n  mounted(el) &#123;\n    // 聚焦元素\n    el.focus()\n  &#125;\n&#125;)\napp.mount('#app')\n&lt;/script&gt;\n</code></pre>\n<h3 id=\"v-clock和v-pre\"><a class=\"anchor\" href=\"#v-clock和v-pre\">#</a> v-clock 和 v-pre</h3>\n<blockquote>\n<p>v-clock 在编译成功后会删除，可以使用属性选择器解决加载闪烁问题<br>\n v-pre 会阻止编译，有此指令的的标签内部的内容不会被编译，会原样输出</p>\n</blockquote>\n<h3 id=\"为什么需要状态管理器\"><a class=\"anchor\" href=\"#为什么需要状态管理器\">#</a> 为什么需要状态管理器？</h3>\n<blockquote>\n<p>多个视图依赖同一个状态多个</p>\n<p>视图都需要变更状态</p>\n<p>例如：各个组件都需要检测用户登录状态</p>\n</blockquote>\n<h3 id=\"导航守卫\"><a class=\"anchor\" href=\"#导航守卫\">#</a> 导航守卫</h3>\n<blockquote>\n<p>三大类：全局 组件内 路由独享</p>\n</blockquote>\n<h3 id=\"vue单页面优缺点\"><a class=\"anchor\" href=\"#vue单页面优缺点\">#</a> Vue 单页面优缺点</h3>\n<blockquote>\n<p>一旦页面加载完成，SPA 不会因为用户操作而进行页面重新加载或跳转，取而代之的是利用路由机制实现 Html 内容的变换。<br>\n优点：</p>\n<p>用户体验好、快，内容改变不需要加载整个页面，对服务器压力小<br>\n前后端分离 完全的前端组件化，代码结构和组织方式更加规范化，便于修改和调整</p>\n<p>缺点：</p>\n<p>首次加载页面需大量加载静态资源，时间相对比较长 不利于 seo 优化，单页面数据在前端渲染意味着没有 seo<br>\n 页面导航不可用 如果要导航需要自行实现前进后退<br>\n页面复杂度提高很多</p>\n</blockquote>\n<h3 id=\"v-model的三个修饰符\"><a class=\"anchor\" href=\"#v-model的三个修饰符\">#</a> V-model 的三个修饰符</h3>\n<blockquote>\n<p>1.lazy：可以等待用户敲回车或者输入框输入焦点时才将数据写到 data 中<br>\n（可以提高效率）接管 input 的事件监听事件，输入的时候不会马上响应在展示层，当数据确认改变的时候才会显示出来；<br>\n2.number：只有输入数字才会显示<br>\n（v-<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5jc2RuLm5ldC9zby9zZWFyY2g/cT1tb2RlbCZhbXA7c3BtPTEwMDEuMjEwMS4zMDAxLjcwMjA=\">model</span> 默认将输入的数字当成字符串类型，使用 number 就直接当成数字类型）<br>\n3.trim：去除左右两边多余空格</p>\n</blockquote>\n<h3 id=\"vue的路由传参\"><a class=\"anchor\" href=\"#vue的路由传参\">#</a> Vue 的路由传参</h3>\n<blockquote>\n<p><strong>ue</strong> 路由传参的使用场景一般都是应用在父路由跳转到子路由时，携带参数跳转。传参方式可划分为  <code>params</code>  传参和  <code>query</code>  传参，而  <code>params</code>  传参又可分为在 <strong>url</strong> 中显示参数和不显示参数两种方式，这就是 vue 路由传参的三种方式。</p>\n<h2 id=\"方式一params-传参显示参数\"><a class=\"anchor\" href=\"#方式一params-传参显示参数\">#</a> 方式一： <code>params</code>  传参（显示参数）</h2>\n<p>1、声明式  <code>router-link</code></p>\n<pre><code class=\"language-vue\">//子路由配置\n&#123;\n path: '/child/:id',\n component: Child\n&#125;\n//父路由组件\n&lt;router-link :to=&quot;/child/123&quot;&gt;进入Child路由&lt;/router-link&gt;\n\n</code></pre>\n<p>2、编程式  <code>this.$router.push</code></p>\n<pre><code class=\"language-vue\">//子路由配置\n&#123;\n path: '/child/:id',\n component: Child\n&#125;\n//父路由编程式传参(一般通过事件触发)\nthis.$router.push(&#123;\n   path:'/child/$&#123;id&#125;',\n&#125;)\n\n</code></pre>\n<p><strong>在子路由中可以通过下面代码来获取传递的参数值</strong></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$route<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">.</span>id</pre></td></tr></table></figure><h2 id=\"方式二params-传参不显示参数\"><a class=\"anchor\" href=\"#方式二params-传参不显示参数\">#</a> 方式二： <code>params</code>  传参（不显示参数）</h2>\n<p>params 传参（不显示参数）也可分为 声明式 和 编程式 两种方式，与方式一不同的是，这里是通过路由的别名 name 进行传值的</p>\n<p>1、声明式 router-link</p>\n<p>该方式也是通过 router-link 组件的 to 属性实现，例如：</p>\n<pre><code class=\"language-vue\">&lt;router-link :to=&quot;&#123;name:'Child',params:&#123;id:123&#125;&#125;&quot;&gt;进入Child路由&lt;/router-link&gt;\n</code></pre>\n<p>2、编程式 this.$router.push</p>\n<p>使用该方式传值的时候，同样需要子路由提前配置好参数，不过不能再使用 :/id 来传递参数了，因为父路由中，已经使用 params 来携带参数了，例如：</p>\n<pre><code class=\"language-vue\">//子路由配置\n&#123;\n path: '/child,\n name: 'Child',\n component: Child\n&#125;\n//父路由编程式传参(一般通过事件触发)\nthis.$router.push(&#123;\n   name:'Child',\n   params:&#123;\n    id:123\n   &#125;\n&#125;)\n</code></pre>\n<p>在子路由中可以通过下面代码来获取传递的参数值</p>\n<pre><code class=\"language-vue\">this.$route.params.id\n</code></pre>\n<p><strong>注意：上述这种利用  <code>params</code>  不显示  <code>url</code>  传参的方式会导致在刷新页面的时候，传递的值会丢失</strong></p>\n<p>方式三：query 传参（显示参数）<br>\nquery 传参（显示参数）也可分为 声明式 和 编程式 两种方式</p>\n<p>1、声明式 router-link</p>\n<p>该方式也是通过 router-link 组件的 to 属性实现，不过使用该方式传值的时候，需要子路由提前配置好路由别名（name 属性），例如：</p>\n<pre><code>//子路由配置\n&#123;\n path: '/child,\n name: 'Child',\n component: Child\n&#125;\n//父路由组件\n&lt;router-link :to=&quot;&#123;name:'Child',query:&#123;id:123&#125;&#125;&quot;&gt;进入Child路由&lt;/router-link&gt;\n</code></pre>\n<p>2、编程式 this.$router.push</p>\n<p>使用该方式传值的时候，同样需要子路由提前配置好路由别名（name 属性），例如：</p>\n<pre><code>//子路由配置\n&#123;\n path: '/child,\n name: 'Child',\n component: Child\n&#125;\n//父路由编程式传参(一般通过事件触发)\nthis.$router.push(&#123;\n   name:'Child',\n   query:&#123;\n    id:123\n   &#125;\n&#125;)\n</code></pre>\n<p>在子路由中可以通过下面代码来获取传递的参数值</p>\n<pre><code>this.$route.query.id\n</code></pre>\n</blockquote>\n<p>Vue 的路由模式</p>\n<blockquote>\n<p>Vue-Router 有两个路由模式，分别是哈希 hash 模式和历史 history 模式，然后默认的是哈希 hash 模式。</p>\n<p>hash 模式是开发中默认的模式，它的 URL 带着一个 #，例如：<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5iYWlkdS5jb20vIy92dWUlRUYlQkMlOEMlRTUlQUUlODMlRTclOUElODRoYXNoJUU1JTgwJUJDJUU1JUIwJUIxJUU2JTk4JUFGIy92dWU=\">www.baidu.com/#/vue，它的 hash 值就是 #/vue</span></p>\n<p>hash 的值会出现再 URL 里面的，但是不会出现再 HTTP 请求之中的，也就是说，它并没有向后端发起请求，对后端是没有影响的</p>\n<p>history 模式的 URL 中没有 #，它使用传统的路由分发模式，就是说用户在输入一个 URL 时，服务器会接收这个请求，并解析这个 URL，然后做出相应的处理，也就是它向服务器发起了一个请求差不错</p>\n</blockquote>\n<h1 id=\"react\"><a class=\"anchor\" href=\"#react\">#</a> React</h1>\n<h3 id=\"严格模式的理解\"><a class=\"anchor\" href=\"#严格模式的理解\">#</a> 严格模式的理解</h3>\n<blockquote>\n<p>打开方式：React.StricMode<br>\n 识别不安全的生命周期<br>\n关于使用过时字符串 ref API 的警告<br>\n关于使用废弃的 findDOMNode 方法的警告<br>\n检测意外的副作用<br>\n检测过时的 context API<br>\n 确保可复用的状态  从 React 18 开始的严格模式，每当组件在开发中挂载时，React 会模拟立即卸载和重新挂载组件：在第二次挂载时，React 将恢复第一次装载时的状态。<br>\n卸载和重新挂载的函数，包括<br>\n componentDidMount<br>\ncomponentWillUnmount<br>\nuseEffect<br>\nuseLayoutEffect<br>\nuseInsertionEffect<br>\n 这只适用于开发模式，生产环境没有变化。</p>\n</blockquote>\n<h3 id=\"react修改状态对象和函数的不同之处\"><a class=\"anchor\" href=\"#react修改状态对象和函数的不同之处\">#</a> react 修改状态对象和函数的不同之处</h3>\n<blockquote>\n<p>对象会合并，this.setState ()  的第一个参数也可以是函数，这个函数接收两个参数：<br>\n第一个参数为更新前的状态值，第二个参数为 props（可获取父级组件传递的数据）；当修改状态时涉及到前一个状态值时就可以使用这种形式。<br>\n函数会拿到上一次状态结果的值</p>\n</blockquote>\n<h3 id=\"react事件绑定的原理\"><a class=\"anchor\" href=\"#react事件绑定的原理\">#</a> React 事件绑定的原理</h3>\n<blockquote>\n<p>React 并不是将 click 事件绑在该 div 的真实 DOM 上，而是在 document 处监听所有支持的事件，当事件发生并冒泡至 document 处时，React 将事件内容封装并交由真正的处理函数运行。这样的方式不仅减少了内存消耗，还能在组件挂载销毁时统一订阅和移除事件。<br>\n另外冒泡到 document 上的事件也不是原生浏览器事件，而是 React 自己实现的合成事件（SyntheticEvent）。因此我们如果不想要事件冒泡的话，调用 event.stopPropagation 是无效的，而应该调用 event.preventDefault。</p>\n</blockquote>\n<h3 id=\"reack状态提示以及使用场景\"><a class=\"anchor\" href=\"#reack状态提示以及使用场景\">#</a> Reack 状态提示以及使用场景</h3>\n<blockquote>\n<p>实现方式是 利用最近的共同的父级组件中，用 <code>props</code>  的方式传过去到两个子组件， <code>props</code>  中传的是一个 <code>setState</code>  的方法，通过子组件触发 <code>props</code>  传过去的方法，进而调用父级组件的 <code>setState</code>  的方法，改变了父级组件的 <code>state</code> ，调用父级组件的 <code>add</code>  方法，进而同时改变了两个子级组件的 <code>数据</code> 。</p>\n<p>这是 两个有关连的<strong>同级组件</strong>的传值，因为 <code>react</code>  的单项数据流，所以不在两个组件中进行传值，而是提升到 最近的共同的父级组件中，改变父级的 <code>state</code> , 进而影响了两个子级组件的 <code>render</code> 。</p>\n<p>组件之间状态共享</p>\n</blockquote>\n<h3 id=\"react高阶组件\"><a class=\"anchor\" href=\"#react高阶组件\">#</a> React 高阶组件</h3>\n<blockquote>\n<p>高阶组件（HOC）是 React 中用于复用组件逻辑的一种高级技巧。HOC 自身不是 React API 的一部分，它是一种基于 React 的组合特性而形成的设计模式。</p>\n<p>具体而言，<strong>高阶组件是参数为组件，返回值为新组件的函数。</strong></p>\n</blockquote>\n<h3 id=\"react路由跳转-路由传参-路由拿到参数\"><a class=\"anchor\" href=\"#react路由跳转-路由传参-路由拿到参数\">#</a> React 路由跳转 路由传参 路由拿到参数</h3>\n<blockquote></blockquote>\n<h3 id=\"react组件优化-类组件-函数式组件\"><a class=\"anchor\" href=\"#react组件优化-类组件-函数式组件\">#</a> React 组件优化 类组件 函数式组件</h3>\n<blockquote>\n<p>类组件中：</p>\n<p>继承 Component 改为 React.PureComponent  或者用 shouldComponentUpdate</p>\n<p>某一个组件内部所有的数据都来源于父级，子组件只负责渲染，如果数据不变就不重新渲染</p>\n<h3 id=\"reactmemo-基本使用\"><a class=\"anchor\" href=\"#reactmemo-基本使用\">#</a> React.memo 基本使用</h3>\n<p>将函数组件变成纯组件，将当前 props 和上一次的 props 进行浅层比较，如果相同就阻止组件重新渲染</p>\n<p>组件懒加载</p>\n<p>组件创建错误边界</p>\n</blockquote>\n<p>React 状态管理器有哪几个，rtk 的流程</p>\n<blockquote></blockquote>\n<p>React 中类组件和函数式组件的区别</p>\n<blockquote></blockquote>\n",
            "tags": [
                "面试用",
                "vue",
                "js",
                "react",
                "面试"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/interface/programming/",
            "url": "https://www.yexingcheng.com/interface/programming/",
            "title": "编程题总结",
            "date_published": "2022-09-30T16:00:00.000Z",
            "content_html": "<h3 id=\"数组扁平化\"><a class=\"anchor\" href=\"#数组扁平化\">#</a> 数组扁平化</h3>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">reduceDimension</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">let</span> ret <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">let</span> <span class=\"token function-variable function\">toArr</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    arr<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      item <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">?</span> <span class=\"token function\">toArr</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> ret<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token function\">toArr</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token keyword\">return</span> ret<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">reduceDimension</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>输出结果: <code>[ 1, 2, 3, 4, 5, 6 ]</code></p>\n<h3 id=\"数组对象去重\"><a class=\"anchor\" href=\"#数组对象去重\">#</a> 数组对象去重</h3>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// let arr = [&#123; a: 1 &#125;, &#123; a: 2 &#125;, &#123; a: 3 &#125;, &#123; a: 1 &#125;, &#123; a: 4 &#125;, &#123; a: 2 &#125;]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'林青霞'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'张三丰'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'段誉'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">preValue<span class=\"token punctuation\">,</span> item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>preValue<span class=\"token punctuation\">,</span> <span class=\"token string\">'--'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// 上一次调用回调返回的值，或者是提供的初始值</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> <span class=\"token string\">'++'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// 下一个要遍历的数组成员</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token comment\">// 下面这句话是首先是判断当前数组成员的 key 是否存在于 obj 中，如果已经存在，将这个 obj 中的 key 设置为空，并且值设置为 true，再将当前数组成员添加到返回值中</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token comment\">// 如果不存在，obj 中的 key 为当前数组成员的 key，并且值设置为 true，再将当前数组成员添加到返回值中</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  obj<span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">?</span> <span class=\"token string\">''</span> <span class=\"token operator\">:</span> obj<span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">&amp;&amp;</span> preValue<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> <span class=\"token string\">'obj2'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token keyword\">return</span> preValue</pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// 将返回值的初始值定义为空数组</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">,</span> <span class=\"token string\">'==='</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// 打印去重之后的数组</span></pre></td></tr></table></figure><p>打印结果 `[] --</p>\n<p>{key: '1', name: ' 林青霞 '} ++</p>\n<p>{ '1': 1 } obj2</p>\n<p>[{ key: '1', name: ' 林青霞 '} ] --</p>\n<p>{key: '2', name: ' 张三丰 '} ++</p>\n<p>{ '1': 1, '2': 2 } obj2</p>\n<p>[{ key: '1', name: ' 林青霞 '}, { key: '2', name: ' 张三丰 ' } ] --</p>\n<p>{key: '1', name: ' 段誉 '} ++</p>\n<p>{ '1': 1, '2': 2 } obj2</p>\n<p>[{ key: '1', name: ' 林青霞 '}, { key: '2', name: ' 张三丰 ' } ] ===`</p>\n<h3 id=\"验证括号合法性\"><a class=\"anchor\" href=\"#验证括号合法性\">#</a> 验证括号合法性:</h3>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">let</span> zhan <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> str<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"(\"</span> <span class=\"token operator\">||</span> str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"[\"</span> <span class=\"token operator\">||</span> str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"&#123;\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> zhan<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"&#125;\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">\"&#123;\"</span> <span class=\"token operator\">===</span> zhan<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">continue</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">\")\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">\"(\"</span> <span class=\"token operator\">===</span> zhan<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">continue</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"]\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">\"[\"</span> <span class=\"token operator\">===</span> zhan<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">;</span> <span class=\"token keyword\">continue</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">return</span> zhan<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token boolean\">false</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">const</span> s1 <span class=\"token operator\">=</span> <span class=\"token string\">\"()\"</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">const</span> s2 <span class=\"token operator\">=</span> <span class=\"token string\">\"()[]&#123;&#125;\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> s3 <span class=\"token operator\">=</span> <span class=\"token string\">\"(]\"</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">const</span> s4 <span class=\"token operator\">=</span> <span class=\"token string\">\"([)]\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">const</span> s5 <span class=\"token operator\">=</span> <span class=\"token string\">\"([])\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">const</span> s6 <span class=\"token operator\">=</span> <span class=\"token string\">\"&#123;([&#123;&#125;])&#125;\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>s2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>s3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>s4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>s5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>s6<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>打印结果:`true</p>\n<p>true</p>\n<p>false</p>\n<p>false</p>\n<p>true</p>\n<p>true`</p>\n<h3 id=\"分糖果问题\"><a class=\"anchor\" href=\"#分糖果问题\">#</a> 分糖果问题:</h3>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">candy2</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      res<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> res<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    res<span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    res<span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> res<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">candy2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//4</span></pre></td></tr></table></figure><h3 id=\"兔子问题斐波那契数列\"><a class=\"anchor\" href=\"#兔子问题斐波那契数列\">#</a> 兔子问题:（斐波那契数列）</h3>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">rabbit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">==</span> <span class=\"token number\">1</span> <span class=\"token operator\">||</span> n <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token function\">rabbit</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">rabbit</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token function\">rabbit</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>打印结果 <code>8</code></p>\n",
            "tags": [
                "面试用",
                "js",
                "面试"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/react-study/8/",
            "url": "https://www.yexingcheng.com/react-study/8/",
            "title": "React学习第八天",
            "date_published": "2022-08-07T16:00:00.000Z",
            "content_html": "<h1 id=\"十八-redux\"><a class=\"anchor\" href=\"#十八-redux\">#</a> 十八、Redux</h1>\n<h2 id=\"181-理解flux架构\"><a class=\"anchor\" href=\"#181-理解flux架构\">#</a> 18.1 理解 Flux 架构</h2>\n<p>在 2013 年，Facebook 让 <code>React</code>  亮相的同时推出了 Flux 框架， <code>React</code>  的初衷实际上是用来替代 <code>jQuery</code>  的， <code>Flux</code>  实际上就可以用来替代 <code>Backbone.js</code> ， <code>Ember.js</code>  等一系列 <code>MVC</code>  架构的前端 JS 框架。</p>\n<p>其实 <code>Flux</code>  在 <code>React</code>  里的应用就类似于 <code>Vue</code>  中的 <code>Vuex</code>  的作用，但是在 <code>Vue</code>  中， <code>Vue</code>  是完整的 <code>mvvm</code>  框架，而 <code>Vuex</code>  只是一个全局的插件。</p>\n<p><code>React</code>  只是一个 MVC 中的 V (视图层)，只管页面中的渲染，一旦有数据管理的时候， <code>React</code>  本身的能力就不足以支撑复杂组件结构的项目，在传统的 <code>MVC</code>  中，就需要用到 Model 和 Controller。Facebook 对于当时世面上的 <code>MVC</code>  框架并不满意，于是就有了 <code>Flux</code> , 但 <code>Flux</code>  并不是一个 <code>MVC</code>  框架，他是一种新的思想。</p>\n<p><img data-src=\"flux.png\" alt=\"image-20220812002755397\"></p>\n<ul>\n<li>View： 视图层</li>\n<li>ActionCreator（动作创造者）：视图层发出的消息（比如 mouseClick）</li>\n<li>Dispatcher（派发器）：用来接收 Actions、执行回调函数</li>\n<li>Store（数据层）：用来存放应用的状态，一旦发生变动，就提醒 Views 要更新页面</li>\n</ul>\n<p>Flux 的流程：</p>\n<ol>\n<li>组件获取到 store 中保存的数据挂载在自己的状态上</li>\n<li>用户产生了操作，调用 actions 的方法</li>\n<li>actions 接收到了用户的操作，进行一系列的逻辑代码、异步操作</li>\n<li>然后 actions 会创建出对应的 action，action 带有标识性的属性</li>\n<li>actions 调用 dispatcher 的 dispatch 方法将 action 传递给 dispatcher</li>\n<li>dispatcher 接收到 action 并根据标识信息判断之后，调用 store 的更改数据的方法</li>\n<li>store 的方法被调用后，更改状态，并触发自己的某一个事件</li>\n<li>store 更改状态后事件被触发，该事件的处理程序会通知 view 去获取最新的数据</li>\n</ol>\n<h2 id=\"182-理解redux单向数据流流程\"><a class=\"anchor\" href=\"#182-理解redux单向数据流流程\">#</a> 18.2 理解 Redux 单向数据流流程</h2>\n<p>React 只是 DOM 的一个抽象层，并不是 Web 应用的完整解决方案。有两个方面，它没涉及。</p>\n<ul>\n<li>代码结构</li>\n<li>组件之间的通信</li>\n</ul>\n<p>2013 年 Facebook 提出了 Flux 架构的思想，引发了很多的实现。2015 年，Redux 出现，将 Flux 与<span class=\"exturl\" data-url=\"aHR0cHM6Ly9sbGg5MTEwMDEuZ2l0Ym9va3MuaW8vbW9zdGx5LWFkZXF1YXRlLWd1aWRlLWNoaW5lc2UvY29udGVudC8=\">函数式编程</span>结合一起，很短时间内就成为了最热门的前端架构。</p>\n<p>如果你不知道是否需要 Redux，那就是不需要它</p>\n<p>只有遇到 React 实在解决不了的问题，你才需要 Redux</p>\n<p>简单说，如果你的 UI 层非常简单，没有很多互动，Redux 就是不必要的，用了反而增加复杂性。</p>\n<ul>\n<li>用户的使用方式非常简单</li>\n<li>用户之间没有协作</li>\n<li>不需要与服务器大量交互，也没有使用 WebSocket</li>\n<li>视图层（View）只从单一来源获取数据</li>\n</ul>\n<p><strong>需要使用 Redux 的项目:</strong></p>\n<ul>\n<li>用户的使用方式复杂</li>\n<li>不同身份的用户有不同的使用方式（比如普通用户和管理员）</li>\n<li>多个用户之间可以协作</li>\n<li>与服务器大量交互，或者使用了 WebSocket</li>\n<li>View 要从多个来源获取数据</li>\n</ul>\n<p><strong>从组件层面考虑，什么样子的需要 Redux：</strong></p>\n<ul>\n<li>某个组件的状态，需要共享</li>\n<li>某个状态需要在任何地方都可以拿到</li>\n<li>一个组件需要改变全局状态</li>\n<li>一个组件需要改变另一个组件的状态</li>\n</ul>\n<p><strong>Redux 的设计思想：</strong></p>\n<ol>\n<li>Web 应用是一个状态机，视图与状态是一一对应的。</li>\n<li>所有的状态，保存在一个对象里面（唯一数据源）。</li>\n</ol>\n<blockquote>\n<p>注意：flux、redux 都不是必须和 react 搭配使用的，因为 flux 和 redux 是完整的架构，在学习 react 的时候，只是将 react 的组件作为 redux 中的视图层去使用了。</p>\n</blockquote>\n<p><img data-src=\"image%5Credux\" alt=\"image-20220812002936378\"></p>\n<h2 id=\"183-redux使用三大原则\"><a class=\"anchor\" href=\"#183-redux使用三大原则\">#</a> 18.3 redux 使用三大原则</h2>\n<ul>\n<li>Single Source of Truth (唯一的数据源)</li>\n<li>State is read-only (状态是只读的) - 无法直接修改状态</li>\n<li>Changes are made with pure function (数据的改变必须通过纯函数完成)</li>\n</ul>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ cnpm i redux <span class=\"token parameter variable\">-S</span></pre></td></tr></table></figure><p><code>src/13_redux/store.js</code>  创建状态管理器</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//createStore 方法在新版本中已经被弃用</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 2. 创建所有操作 reducer 以及定义初始化的状态 - 纯函数</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 第一个参数为管理的状态，需要在此处书写 初始的状态</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> reducer <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token literal-property property\">msg</span><span class=\"token operator\">:</span> <span class=\"token string\">'hello redux'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//action 中 type 代表动作的标识，用于触发行为，payload 代表传递的参数</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CAHNGE_MSG'</span><span class=\"token operator\">:</span> <span class=\"token comment\">//type 的名字可以根据自己公司的需求进行更改</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token comment\">// 必须返回最新的状态</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">msg</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'INCREMENT_COUNT'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> action<span class=\"token punctuation\">.</span>payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'DECREMENT_COUNT'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> action<span class=\"token punctuation\">.</span>payload <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token keyword\">return</span> state</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">// 创建状态管理器</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store</pre></td></tr></table></figure><p><code>src/index.js</code>  配置状态管理器 - 状态管理器修改订阅视图的更新</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 引入状态管理器</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./13_redux/store'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./13_redux/App'</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">//dispatch 可以触发 reducer 的更改</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">//getState 可以用来获取状态管理器的数据</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">//replaceReducer 替换 reducer</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">//subscribe 订阅数据的变化</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token operator\">&lt;</span>App<span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">// 订阅数据的变化，重新渲染视图</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>store<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token comment\">// 一旦检测到数据发生改变，此处代码就会执行</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token operator\">&lt;</span>App<span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/13_redux/App.jsx</code>  使用状态管理器</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> Child1 <span class=\"token keyword\">from</span> <span class=\"token string\">'./Child1'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> Child2 <span class=\"token keyword\">from</span> <span class=\"token string\">'./Child2'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">使用redux</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Child1</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Child2</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/13_redux/Child1.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./store'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Child1</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 获取状态管理器中的状态</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">child1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> state<span class=\"token punctuation\">.</span>msg <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> - </span><span class=\"token punctuation\">&#123;</span> state<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>          store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CAHNGE_MSG'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token string\">'hello child1 redux'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">修改msg</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>          store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'INCREMENT_COUNT'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">加10</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Child1<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/13_redux/Child2.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./store'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Child2</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 获取状态管理器中的状态</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">child2</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span> state<span class=\"token punctuation\">.</span>msg <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> - </span><span class=\"token punctuation\">&#123;</span> state<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>          store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CAHNGE_MSG'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token string\">'hello child2 redux'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">修改msg</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>          store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'DECREMENT_COUNT'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">减10</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Child2<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>以上代码是最最最最最最最基本的 redux 的使用，现在企业里基本上不使用这种原始的方法</p>\n<h2 id=\"184-redux-react-redux配合使用\"><a class=\"anchor\" href=\"#184-redux-react-redux配合使用\">#</a> 18.4 redux + react-redux 配合使用</h2>\n<blockquote>\n<p>redux 是属于 js 的状态管理模式，不独属于 react，在 react 中需要结合 react-redux 模块使用</p>\n</blockquote>\n<p>react-redux 提供两个核心的 api：</p>\n<ul>\n<li>\n<p>Provider: 提供 store  <code>&lt;Provider store = &#123; store &#125;&gt;&lt;App /&gt;&lt;/store&gt;</code></p>\n</li>\n<li>\n<p>connect: 用于连接容器组件和展示组件</p>\n<ul>\n<li>\n<p>Provider</p>\n<p>根据单一 store 原则 ，一般只会出现在整个应用程序的最顶层。</p>\n</li>\n<li>\n<p>connect</p>\n<p>语法格式为</p>\n<p><code>connect(mapStateToProps?, mapDispatchToProps?, mergeProps?, options?)(component)</code></p>\n<p>一般来说只会用到前面两个，它的作用是：</p>\n<ul>\n<li>把 <code>store.getState()</code>  的状态转化为展示组件的 <code>props</code></li>\n<li>把 <code>actionCreators</code>  转化为展示组件 <code>props</code>  上的方法</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>只要上层中有 <code>Provider</code>  组件并且提供了 <code>store</code> , 那么，子孙级别的任何组件，要想使用 <code>store</code>  里的状态，都可以通过 <code>connect</code>  方法进行连接。如果只是想连接 <code>actionCreators</code> ，可以第一个参数传递为 <code>null</code></p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ cnpm i react-redux <span class=\"token parameter variable\">-S</span></pre></td></tr></table></figure><h3 id=\"1841-创建状态管理器\"><a class=\"anchor\" href=\"#1841-创建状态管理器\">#</a> 18.4.1 创建状态管理器</h3>\n<p><code>src/14_redux-react_redux/store.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">reducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token literal-property property\">kindList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> type<span class=\"token punctuation\">,</span> payload <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//action  解构了 &#123;type, payload&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_PRO_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_KIND_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">kindList</span><span class=\"token operator\">:</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token keyword\">return</span> state</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store</pre></td></tr></table></figure><blockquote>\n<p>1. 引入 createStore 方法（新版本中建议使用 rtk）</p>\n<p>2. 创建 reducer（包含初始化状态，包含了修改状态的标识，返回了新的状态（对象合并））</p>\n<p>3. 创建 store</p>\n<p>4. 暴露 store</p>\n</blockquote>\n<h3 id=\"1842-使用react-redux\"><a class=\"anchor\" href=\"#1842-使用react-redux\">#</a> 18.4.2  使用 react-redux</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 引入状态管理器</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> Provider <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span> <span class=\"token comment\">// 提供 Provier 组件，可以添加 store 属性</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./14_redux_react-redux/store'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./14_redux_react-redux/App'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token operator\">&lt;</span>Provider store <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> store <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token operator\">&lt;</span>App<span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Provider<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>使用了  react-redux 提供的组件组件 Provider 配合 store 完成传递数据</p>\n</blockquote>\n<p><code>src/14_redux_react-redux/App.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> Home <span class=\"token keyword\">from</span> <span class=\"token string\">'./Home'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> Kind <span class=\"token keyword\">from</span> <span class=\"token string\">'./Kind'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">redux + react-redux</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Home</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Kind</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/14_redux_react-redux/Home.jsx</code>  业务逻辑写到了组件中</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 引入 connect 高阶组件 实际上 connect () 返回值才是高阶组件</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> connect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 展示组件   ---- 理想情况：  负责数据的展示以及发起指令</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Home</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token comment\">// &#123; proList: [], dispatch: function()&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> proList<span class=\"token punctuation\">,</span> dispatch <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> props</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">// 在展示组件内 写业务逻辑</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token comment\">// 修改状态</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_PRO_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 依赖项最好 不要直接使用 props，先将 props 进行解构，后添加依赖项</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>          proList <span class=\"token operator\">&amp;&amp;</span> proList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>li key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proid <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proname <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\">//mapStateToProps 负责给展示组件提供数据，提供给展示组件的 props 属性</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapStateToProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//state 参数即为管理的所有的状态</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 必须含有返回值，返回什么取决于你的展示组件需要什么数据</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>proList</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token comment\">// 返回的是一个 容器组件  ---- 理想情况： 负责给展示组件提供数据 以及执行 业务逻辑</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>mapStateToProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Home<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/14_redux_react-redux/Kind.jsx</code>  业务逻辑写到容器组件中</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> connect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Kind</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> kindList<span class=\"token punctuation\">,</span> getKindListData <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> props</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 展示组件发起指令，后续交给容器组件处理</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token function\">getKindListData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>getKindListData<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">kind</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        kindList <span class=\"token operator\">&amp;&amp;</span> kindList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token operator\">&lt;</span>p key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>          <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapStateToProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token literal-property property\">kindList</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>kindList</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\">// 将业务逻辑交给容器组件组件处理</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapDispatchToProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//dispatch 为默认参数，可以通过此 触发 reducer 中状态的更新</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token function\">getKindListData</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 返回自定义函数，供 展示组件调用，展示组件通过 props 访问即可</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/categorylist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token comment\">// 修改状态</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>          <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_KIND_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>          <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>mapStateToProps<span class=\"token punctuation\">,</span> mapDispatchToProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Kind<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>vuex 中 可以把异步操作提取到 vuex 中的 actions 中，react 中异步操作方式会有很多，最常见的就是 redux-thunk</p>\n</blockquote>\n<h2 id=\"185-reduxreact-redux分模块使用\"><a class=\"anchor\" href=\"#185-reduxreact-redux分模块使用\">#</a> 18.5 redux+react-redux 分模块使用</h2>\n<blockquote>\n<p>如果项目很大，或者项目划分比较明确，需要将状态管理器也分模块去处理</p>\n<p>假设现在有一个 home 模块，管理 bannerList 以及 proList</p>\n<p>还有一个模块 kind 模块，管理 kindList</p>\n</blockquote>\n<p><code>src/15_redux_react-redux_combine/store/modules/home.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 单独管理 home 模块的状态管理器</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">reducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token literal-property property\">bannerList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> type<span class=\"token punctuation\">,</span> payload <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_BANNER_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">bannerList</span><span class=\"token operator\">:</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_PRO_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token keyword\">return</span> state</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> reducer</pre></td></tr></table></figure><p><code>src/15_redux_react-redux_combine/store/modules/kind.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 单独管理 kind 模块的状态管理器</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">reducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token literal-property property\">kindList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> type<span class=\"token punctuation\">,</span> payload <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_KIND_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">kindList</span><span class=\"token operator\">:</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token keyword\">return</span> state</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> reducer</pre></td></tr></table></figure><blockquote>\n<p>整合多个 reducer 为一个，因为 有一个原则 ： 单一数据源 的原则</p>\n</blockquote>\n<p><code>src/15_redux_react-redux_combine/store/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> combineReducers<span class=\"token punctuation\">,</span> createStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> home <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/home'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> kind <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/kind'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> reducer <span class=\"token operator\">=</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  home<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  kind</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store</pre></td></tr></table></figure><blockquote>\n<p>入口文件处引入状态管理器</p>\n</blockquote>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 引入状态管理器</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> Provider <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span> <span class=\"token comment\">// 提供 Provier 组件，可以添加 store 属性</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./15_redux_react-redux_combine/store/index'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./15_redux_react-redux_combine/App'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token operator\">&lt;</span>Provider store <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> store <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token operator\">&lt;</span>App<span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Provider<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>组件中使用状态管理器</p>\n</blockquote>\n<p><code>src/15_redux_react-redux_combine/App.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> Home <span class=\"token keyword\">from</span> <span class=\"token string\">'./views/Home'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> Kind <span class=\"token keyword\">from</span> <span class=\"token string\">'./views/Kind'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Home</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>hr</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Kind</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/15_redux_react-redux_combine/views/Home.jsx</code>  业务逻辑在展示型组件中</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> connect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Home</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> bannerList<span class=\"token punctuation\">,</span> proList<span class=\"token punctuation\">,</span> dispatch <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/banner/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_BANNER_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_PRO_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"24\"></td><td><pre>          bannerList <span class=\"token operator\">&amp;&amp;</span> bannerList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token operator\">&lt;</span>img key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>bannerid <span class=\"token punctuation\">&#125;</span> src<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>img <span class=\"token punctuation\">&#125;</span> alt<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>item<span class=\"token punctuation\">.</span>alt<span class=\"token punctuation\">&#125;</span> style<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>swig￼<span class=\"token number\">0</span><span class=\"token operator\">--</span><span class=\"token operator\">></span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>          proList <span class=\"token operator\">&amp;&amp;</span> proList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>li key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proid <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proname <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token comment\">// (state) => (&#123; bannerList: state.home.bannerList, proList: state.home.proList &#125;)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token comment\">// (&#123; home &#125;) => (&#123; bannerList: home.bannerList, proList: home.proList &#125;)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token comment\">// (&#123; home: &#123; bannerList, proList &#125; &#125;) => (&#123; bannerList: bannerList, proList: proList &#125;)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">home</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> bannerList<span class=\"token punctuation\">,</span> proList <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> bannerList<span class=\"token punctuation\">,</span> proList <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Home<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/15_redux_react-redux_combine/views/Kind.jsx </code>  业务逻辑在容器组件中</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> connect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// const Kind = connect(</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//   (&#123; kind: &#123; kindList &#125;&#125;) => (&#123; kindList &#125;), // state => &#123; return &#123; kindList: state.kind.kindList &#125;&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//   (dispatch) => (&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">//     getKindListData () &#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">//       fetch('http://121.89.205.189:3001/api/pro/categorylist').then(res => res.json()).then(res => &#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">//         dispatch(&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">//           type: 'CHANGE_KIND_LIST',</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">//           payload: res.data</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">//         &#125;)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">//       &#125;)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">//     &#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">//   &#125;)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">// )((&#123; kindList, getKindListData &#125;) => &#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">//   useEffect(() => &#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">//     getKindListData()</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">//   &#125;, [getKindListData])</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">//   return (</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">//     &lt;div></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">//       &lt;h1>Kind&lt;/h1></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">//       &#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">//         kindList &amp;&amp; kindList.map(item => &#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">//           return (</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\">//             &lt;p key = &#123; item &#125;> &#123; item &#125; &lt;/p></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">//           )</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\">//         &#125;)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\">//       &#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\">//     &lt;/div></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\">//   );</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\">// &#125;);</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\">// export default Kind;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Kind</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> kindList<span class=\"token punctuation\">,</span> getKindListData <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token function\">getKindListData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>getKindListData<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Kind</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        kindList <span class=\"token operator\">&amp;&amp;</span> kindList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            <span class=\"token operator\">&lt;</span>p key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>          <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">kind</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> kindList <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> kindList <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// state => &#123; return &#123; kindList: state.kind.kindList &#125;&#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>  <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token function\">getKindListData</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>      <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/categorylist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>          <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_KIND_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>          <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Kind<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>细心的你发现，虽然展示组件的代码变少了，但是容器组件中还有 异步相关操作，能否把这些异步操作提取出去</p>\n</blockquote>\n<h2 id=\"186-redux-react-redux-分模块-异步操作\"><a class=\"anchor\" href=\"#186-redux-react-redux-分模块-异步操作\">#</a> 18.6 redux + react-redux + 分模块 + 异步操作</h2>\n<blockquote>\n<p>配合 redux 常用的异步模块 为  <code>redux-thunk</code> ,   <code>redux-saga</code></p>\n</blockquote>\n<h3 id=\"1861-redux-thunk\"><a class=\"anchor\" href=\"#1861-redux-thunk\">#</a> 18.6.1 redux-thunk</h3>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ cnpm i redux-thunk <span class=\"token parameter variable\">-S</span></pre></td></tr></table></figure><p><code>src/16_redux_react-redux_redux-thunk_combine/store/modules/home.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">reducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token literal-property property\">bannerList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> type<span class=\"token punctuation\">,</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_BANNER_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">bannerList</span><span class=\"token operator\">:</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_PRO_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token keyword\">return</span> state</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> reducer</pre></td></tr></table></figure><p><code>src/16_redux_react-redux_redux-thunk_combine/store/modules/kind.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">reducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token literal-property property\">kindList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> type<span class=\"token punctuation\">,</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_KIND_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">kindList</span><span class=\"token operator\">:</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token keyword\">return</span> state</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> reducer</pre></td></tr></table></figure><blockquote>\n<p>整合多个 reducer 为一个，因为 有一个原则 ： 单一数据源 的原则</p>\n<p>并且后续需要使用 异步操作，将异步操作模块 使用进来</p>\n</blockquote>\n<p><code>src/16_redux_react-redux_redux-thunk_combine/store/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createStore<span class=\"token punctuation\">,</span> combineReducers<span class=\"token punctuation\">,</span> applyMiddleware <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> thunk <span class=\"token keyword\">from</span> <span class=\"token string\">'redux-thunk'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> home <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/home'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> kind <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/kind'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> reducer <span class=\"token operator\">=</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  home<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  kind</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 第二个参数表示代码中含有异步操作，且异步操作需要提取出 容器组件</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">,</span> <span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span>thunk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store</pre></td></tr></table></figure><p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 引入状态管理器</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> Provider <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span> <span class=\"token comment\">// 提供 Provier 组件，可以添加 store 属性</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./16_redux_react-redux_redux-thunk_combine/store'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./16_redux_react-redux_redux-thunk_combine/App'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token operator\">&lt;</span>Provider store <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> store <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/16_redux_react-redux_redux-thunk_combine/App.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> Home <span class=\"token keyword\">from</span> <span class=\"token string\">'./views/Home'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> Kind <span class=\"token keyword\">from</span> <span class=\"token string\">'./views/Kind'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Home</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Kind</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>上一个案例 异步操作在组件，现在需要将其放到 异步操作模块中去 actionCreator</p>\n</blockquote>\n<p><code>src/16_redux_react-redux_redux-thunk_combine/api/home.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getBannerList</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/banner/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getProList</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">params</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/list?limitNum='</span> <span class=\"token operator\">+</span> params<span class=\"token punctuation\">.</span>limitNum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>src/16_redux_react-redux_redux-thunk_combine/api/kind.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getKindList</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/categorylist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>src/16_redux_react-redux_redux-thunk_combine/store/actions/home.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 容器组件抽离的异步操作都写在这里</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 每一个 action 的函数记住一个原则，默认的参数为 dispatch</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 如果接口调用不需要传递参数，直接给函数写默认参数 dispatch</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 如果接口调用需要传递参数，一般在返回一个函数，返回函数的 参数为 dispatch</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getBannerList<span class=\"token punctuation\">,</span> getProList <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../api/home'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">//actionCreator 本质是一个带有 dispatch 参数的函数</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> action <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token function\">getBannerListAction</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 因为此接口不需要参数，所有拥有了默认参数 dispatch</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token function\">getBannerList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_BANNER_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token function\">getProListAction</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">params</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 组件调用需要传递参数</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token function\">getProList</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_PRO_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> action</pre></td></tr></table></figure><p><code>src/16_redux_react-redux_redux-thunk_combine/store/actions/kind.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getKindList <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../api/kind'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> action <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token function\">getKindListAction</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token function\">getKindList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_KIND_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> action</pre></td></tr></table></figure><blockquote>\n<p>记住接口有无参数影响 action 的写法，还影响其调用</p>\n</blockquote>\n<p><code>src/16_redux_react-redux_redux-thunk_combine/views/Home.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> connect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> action <span class=\"token keyword\">from</span> <span class=\"token string\">'../store/actions/home'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> Home <span class=\"token operator\">=</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token literal-property property\">bannerList</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>home<span class=\"token punctuation\">.</span>bannerList<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>home<span class=\"token punctuation\">.</span>proList</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token function\">getBannerList</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>getBannerListAction<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 因为没有参数，所以不加 ()</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token function\">getProList</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token function\">getProListAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">limitNum</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// 因为有参数，所以加 ()</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> bannerList<span class=\"token punctuation\">,</span> proList<span class=\"token punctuation\">,</span> getBannerList<span class=\"token punctuation\">,</span> getProList <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token function\">getBannerList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token function\">getProList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>getBannerList<span class=\"token punctuation\">,</span> getProList<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">首页</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>          bannerList <span class=\"token operator\">&amp;&amp;</span> bannerList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            <span class=\"token operator\">&lt;</span>img src <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>img <span class=\"token punctuation\">&#125;</span> key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>bannerid <span class=\"token punctuation\">&#125;</span> alt<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span> style<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>swig￼<span class=\"token number\">1</span><span class=\"token operator\">--</span><span class=\"token operator\">>></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>img</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>          proList <span class=\"token operator\">&amp;&amp;</span> proList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token operator\">&lt;</span>li key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proid <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proname <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Home<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/16_redux_react-redux_redux-thunk_combine/views/Home.jsx</code>  异步在组件</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> connect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// import &#123; getBannerList, getProList &#125; from '../api/home'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> action <span class=\"token keyword\">from</span> <span class=\"token string\">'../store/actions/home'</span> <span class=\"token comment\">// 异步操作</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Home</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> bannerList<span class=\"token punctuation\">,</span> proList<span class=\"token punctuation\">,</span> getBannerListData<span class=\"token punctuation\">,</span> getProListData <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token function\">getBannerListData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">getProListData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>getBannerListData<span class=\"token punctuation\">,</span> getProListData<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          bannerList <span class=\"token operator\">&amp;&amp;</span> bannerList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token operator\">&lt;</span>img key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>bannerid <span class=\"token punctuation\">&#125;</span> src<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>img <span class=\"token punctuation\">&#125;</span> alt<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>item<span class=\"token punctuation\">.</span>alt<span class=\"token punctuation\">&#125;</span> style<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>swig￼<span class=\"token number\">2</span><span class=\"token operator\">--</span><span class=\"token operator\">></span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          proList <span class=\"token operator\">&amp;&amp;</span> proList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>li key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proid <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proname <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">home</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> bannerList<span class=\"token punctuation\">,</span> proList <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> bannerList<span class=\"token punctuation\">,</span> proList <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token function\">getBannerListData</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      <span class=\"token comment\">// getBannerList().then(res => &#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token comment\">//   dispatch(&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>      <span class=\"token comment\">//     type: 'CHANGE_BANNER_LIST',</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token comment\">//     payload: res.data</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token comment\">//   &#125;)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>      <span class=\"token comment\">// 根据生成的 actionCreate 规则去写，午餐不加（）</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>getBannerListAction<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>      </pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token function\">getProListData</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      <span class=\"token comment\">// getProList().then(res => &#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>      <span class=\"token comment\">//   dispatch(&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      <span class=\"token comment\">//     type: 'CHANGE_PRO_LIST',</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      <span class=\"token comment\">//     payload: res.data</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>      <span class=\"token comment\">//   &#125;)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>      <span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token function\">getProListAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">limitNum</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Home<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/16_redux_react-redux_redux-thunk_combine/views/Kind.jsx</code>  异步在 store</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> connect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// import &#123; getKindList &#125; from '../api/kind'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> action <span class=\"token keyword\">from</span> <span class=\"token string\">'../store/actions/kind'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Kind</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> kindList<span class=\"token punctuation\">,</span> getKindListData <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token function\">getKindListData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>getKindListData<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Kind</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        kindList <span class=\"token operator\">&amp;&amp;</span> kindList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token operator\">&lt;</span>p key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>          <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">kind</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> kindList <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> kindList <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token function\">getKindListData</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token comment\">// getKindList().then(res => &#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token comment\">//   dispatch(&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token comment\">//     type: 'CHANGE_KIND_LIST',</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token comment\">//     payload: res.data</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token comment\">//   &#125;)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>getKindListAction<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Kind<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>虽然引入了 redux-thunk，但是仍然可以把 异步放在组件中，具体根据项目的需求而定</p>\n</blockquote>\n<blockquote>\n<p>创建状态模块</p>\n<p>整合模块</p>\n<p>创建异步的 actionCreator</p>\n<p>组件触发 actionCreator</p>\n<p>传递数据以及修改界面</p>\n</blockquote>\n<h3 id=\"1862-redux-saga\"><a class=\"anchor\" href=\"#1862-redux-saga\">#</a> 18.6.2 redux-saga</h3>\n<blockquote>\n<p>先要了解解决异步操作方案：回调函数、promise、async await、generator yield</p>\n</blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9lczYucnVhbnlpZmVuZy5jb20vI2RvY3MvZ2VuZXJhdG9yLWFzeW5j\">https://es6.ruanyifeng.com/#docs/generator-async</span></p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ cnpm i redux-saga <span class=\"token parameter variable\">-S</span></pre></td></tr></table></figure><p><code>src/17_redux_react-redux_redux-saga_combine/store/modules/home.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">reducer</span> <span class=\"token operator\">=</span>  <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token literal-property property\">bannerList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> type<span class=\"token punctuation\">,</span> payload <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_BANNER_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">bannerList</span><span class=\"token operator\">:</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_PRO_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token keyword\">return</span> state</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> reducer</pre></td></tr></table></figure><p><code>src/17_redux_react-redux_redux-saga_combine/store/modules/kind.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">reducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token literal-property property\">kindList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> type<span class=\"token punctuation\">,</span> payload <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_KIND_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">kindList</span><span class=\"token operator\">:</span> payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token keyword\">return</span> state</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> reducer</pre></td></tr></table></figure><p><code>src/17_redux_react-redux_redux-saga_combine/api/home.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getBannerList</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/banner/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getProList</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">params</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/list?limitNum='</span> <span class=\"token operator\">+</span> params<span class=\"token punctuation\">.</span>limitNum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>src/17_redux_react-redux_redux-saga_combine/api/kind.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getKindList</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/categorylist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>src/17_redux_react-redux_redux-saga_combine/store/mySaga.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//put 类似 dispatch put (&#123;type: '', payload: ''&#125;) 触发状态的修改</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">//call 用来调用数据请求   call (getBannerList)  ===>    getBannerList ()</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">//takeLatest 用来响应触发哪一个异步操作</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> put<span class=\"token punctuation\">,</span> call<span class=\"token punctuation\">,</span> takeLatest <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux-saga/effects'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getBannerList<span class=\"token punctuation\">,</span> getProList <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../api/home'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getKindList <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../api/kind'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 异步操作</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token operator\">*</span> <span class=\"token function\">getBannerListAction</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> <span class=\"token function\">call</span><span class=\"token punctuation\">(</span>getBannerList<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'banner'</span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token comment\">// 修改状态</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">yield</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_BANNER_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token operator\">*</span> <span class=\"token function\">getProListAction</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">111</span><span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> <span class=\"token function\">call</span><span class=\"token punctuation\">(</span>getProList<span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pro'</span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token keyword\">yield</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_PRO_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token operator\">*</span> <span class=\"token function\">getKindListAction</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> <span class=\"token function\">call</span><span class=\"token punctuation\">(</span>getKindList<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token keyword\">yield</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_KIND_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\">// 定义异步触发的条件</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token operator\">*</span> <span class=\"token function\">mySaga</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token comment\">// 组件触发 REQUEST_BANNER 即可执行 getBannerListAction 异步行为</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token keyword\">yield</span> <span class=\"token function\">takeLatest</span><span class=\"token punctuation\">(</span><span class=\"token string\">'REQUEST_BANNER'</span><span class=\"token punctuation\">,</span> getBannerListAction<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token comment\">// 组件触发 REQUEST_PRO 即可执行 getProListAction 异步行为</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token keyword\">yield</span> <span class=\"token function\">takeLatest</span><span class=\"token punctuation\">(</span><span class=\"token string\">'REQUEST_PRO'</span><span class=\"token punctuation\">,</span> getProListAction<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>   <span class=\"token comment\">// 组件触发 REQUEST_KIND 即可执行 getKindListAction 异步行为</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token keyword\">yield</span> <span class=\"token function\">takeLatest</span><span class=\"token punctuation\">(</span><span class=\"token string\">'REQUEST_KIND'</span><span class=\"token punctuation\">,</span> getKindListAction<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> mySaga</pre></td></tr></table></figure><p><code>src/17_redux_react-redux_redux-saga_combine/store/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createStore<span class=\"token punctuation\">,</span> combineReducers<span class=\"token punctuation\">,</span> applyMiddleware <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> createSagaMiddleWare <span class=\"token keyword\">from</span> <span class=\"token string\">'redux-saga'</span> <span class=\"token comment\">// 导入生成中间件的函数</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> mySaga <span class=\"token keyword\">from</span> <span class=\"token string\">'./mySaga'</span> <span class=\"token comment\">// 异步行为</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 分模块</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> home <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/home'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> kind <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/kind'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> reducer <span class=\"token operator\">=</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> home<span class=\"token punctuation\">,</span> kind <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 整合 reducer</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">const</span> middleware <span class=\"token operator\">=</span> <span class=\"token function\">createSagaMiddleWare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 生成中间件</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">,</span> <span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span>middleware<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 创建状态管理器</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>middleware<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>mySaga<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 中间件使用异步，放到 store 创建之后</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store</pre></td></tr></table></figure><p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 引入状态管理器</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> Provider <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span> <span class=\"token comment\">// 提供 Provier 组件，可以添加 store 属性</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./17_redux_react-redux_redux-saga_combine/store/index'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./17_redux_react-redux_redux-saga_combine/App'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token operator\">&lt;</span>Provider store <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> store <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token operator\">&lt;</span>App<span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Provider<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/17_redux_react-redux_redux-saga_combine/views/Home.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> connect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Home</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> bannerList<span class=\"token punctuation\">,</span> proList<span class=\"token punctuation\">,</span> dispatch <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 触发某个行为，从而触发 异步操作</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'REQUEST_BANNER'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'REQUEST_PRO'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">limitNum</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          bannerList <span class=\"token operator\">&amp;&amp;</span> bannerList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token operator\">&lt;</span>img key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>bannerid <span class=\"token punctuation\">&#125;</span> src<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>img <span class=\"token punctuation\">&#125;</span> alt<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>item<span class=\"token punctuation\">.</span>alt<span class=\"token punctuation\">&#125;</span> style<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>swig￼<span class=\"token number\">3</span><span class=\"token operator\">--</span><span class=\"token operator\">></span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          proList <span class=\"token operator\">&amp;&amp;</span> proList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>li key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proid <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proname <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">home</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> bannerList<span class=\"token punctuation\">,</span> proList <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> bannerList<span class=\"token punctuation\">,</span> proList <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Home<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/17_redux_react-redux_redux-saga_combine/views/Kind.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> connect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Kind</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> kindList<span class=\"token punctuation\">,</span> getKindListData <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token function\">getKindListData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>getKindListData<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Kind</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        kindList <span class=\"token operator\">&amp;&amp;</span> kindList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token operator\">&lt;</span>p key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">kind</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> kindList <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>kindList<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token function\">getKindListData</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'REQUEST_KIND'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Kind<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"187-使用immutable不可变数据数据结构\"><a class=\"anchor\" href=\"#187-使用immutable不可变数据数据结构\">#</a> 18.7 使用 immutable 不可变数据数据结构</h2>\n<p>immutable 不可变的数据解构，意思就是一旦数据被创建，需要使用特殊的方法进行修改（修改过后的数据也是符合 immutable 数据解构的，他是一个全新的对象）</p>\n<p>学习 immutable： <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaW1tdXRhYmxl\">https://www.npmjs.com/package/immutable</span></p>\n<pre><code>$ cnpm i immutable redux-immutable -S\n</code></pre>\n<p>重点就是修改 reducer 的数据机构以及组件中获取状态的方式（整合 reducer 时使用 redux-immutable 提供的 combineReducers）</p>\n<p>拷贝 17 文件，修改 store/modules/home.js    store/modules/kind.js    store/index.js</p>\n<p>views/Home.jsx  views/Kind.jsx</p>\n<h1 id=\"十九-redux-toolkit\"><a class=\"anchor\" href=\"#十九-redux-toolkit\">#</a> 十九、redux toolkit</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbi5yZWR1eC5qcy5vcmcv\">https://cn.redux.js.org/</span></p>\n<h2 id=\"191-什么是redux-toolkit\"><a class=\"anchor\" href=\"#191-什么是redux-toolkit\">#</a> 19.1 什么是 Redux Toolkit</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbi5yZWR1eC5qcy5vcmcvcmVkdXgtdG9vbGtpdC9vdmVydmlldy8=\">https://cn.redux.js.org/redux-toolkit/overview/</span></p>\n<p><strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWR1eC10b29sa2l0LmpzLm9yZy8=\">Redux Toolkit</span></strong> 是我们官方的，有观点的，开箱即用的高效 Redux 开发工具集。它旨在成为标准的 Redux 逻辑开发方式，我们强烈建议您使用它。</p>\n<p>它包括几个实用程序功能，这些功能可以简化最常见场景下的 Redux 开发，包括配置 store、定义 reducer，不可变的更新逻辑、甚至可以立即创建整个状态的 “切片 slice”，而无需手动编写任何 action creator 或者 action type。它还包括使用最广泛的 Redux 插件，例如 Redux Thunk 用于异步逻辑，而 Reselect 用于编写选择器 selector 函数，因此你可以立即使用它们。</p>\n<h2 id=\"192-如何使用redux-toolkit\"><a class=\"anchor\" href=\"#192-如何使用redux-toolkit\">#</a> 19.2 如何使用 redux-toolkit</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbi5yZWR1eC5qcy5vcmcvdHV0b3JpYWxzL3F1aWNrLXN0YXJ0\">https://cn.redux.js.org/tutorials/quick-start</span></p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ cnpm i @reduxjs/toolkit redux react-redux redux-devtools <span class=\"token parameter variable\">-S</span></pre></td></tr></table></figure><h3 id=\"1921-创建状态管理器\"><a class=\"anchor\" href=\"#1921-创建状态管理器\">#</a> 19.2.1 创建状态管理器</h3>\n<p><code>src/19_rtk/store/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> configureStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@reduxjs/toolkit'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token literal-property property\">reducer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 此处可以设置多模块</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store</pre></td></tr></table></figure><h3 id=\"1922-入口文件配置状态管理器\"><a class=\"anchor\" href=\"#1922-入口文件配置状态管理器\">#</a> 19.2.2 入口文件配置状态管理器</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 引入状态管理器</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> Provider <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span> <span class=\"token comment\">// 提供 Provier 组件，可以添加 store 属性</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./19_rtk/store'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./19_rtk/App'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token operator\">&lt;</span>Provider store <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> store <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token operator\">&lt;</span>App<span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Provider<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"1923-创建分模块切片\"><a class=\"anchor\" href=\"#1923-创建分模块切片\">#</a> 19.2.3 创建分模块切片</h3>\n<p>创建 slice 需要一个字符串名称来标识切片、一个初始 state 以及一个或多个定义了该如何更新 state 的 reducer 函数。slice 创建后 ，我们可以导出 slice 中生成的 Redux action creators 和 reducer 函数。</p>\n<p><code>src/19_rtk/store/modules/home.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createSlice <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@reduxjs/toolkit'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 创建 slice 需要一个字符串名称来标识切片、一个初始 state 以及一个或多个定义了该如何更新 state 的 reducer 函数。</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">//slice 创建后 ，我们可以导出 slice 中生成的 Redux action creators 和 reducer 函数。</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> homeSlice <span class=\"token operator\">=</span> <span class=\"token function\">createSlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// vuex namespaced: true</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token literal-property property\">initialState</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// vuex state</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token literal-property property\">bannerList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token literal-property property\">reducers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// vuex mutations</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">changeBannerList</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      state<span class=\"token punctuation\">.</span>bannerList <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span>payload</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token function\">changeProList</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      state<span class=\"token punctuation\">.</span>proList <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span>payload</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> homeSlice<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">// 每个 case reducer 函数会生成对应的 Action creators</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> changeBannerList<span class=\"token punctuation\">,</span> changeProList <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> homeSlice<span class=\"token punctuation\">.</span>actions</pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> homeSlice<span class=\"token punctuation\">.</span>reducer <span class=\"token comment\">//redux 时 管理状态都是 reducer</span></pre></td></tr></table></figure><p><code>src/19_rtk/store/modules/kind.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createSlice <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@reduxjs/toolkit'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> kindSlice <span class=\"token operator\">=</span> <span class=\"token function\">createSlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token literal-property property\">initialState</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">kindList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token literal-property property\">reducers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">changeKindList</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      state<span class=\"token punctuation\">.</span>kindList <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span>payload</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> changeKindList <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> kindSlice<span class=\"token punctuation\">.</span>actions</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> kindSlice<span class=\"token punctuation\">.</span>reducer</pre></td></tr></table></figure><h3 id=\"1924-整合切片\"><a class=\"anchor\" href=\"#1924-整合切片\">#</a> 19.2.4 <strong>整合切片</strong></h3>\n<p><code>src/19_rtk/store/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> configureStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@reduxjs/toolkit'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> home <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/home'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> kind <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/kind'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token literal-property property\">reducer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 所有的模块都可以配置到此</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    home<span class=\"token punctuation\">,</span> kind</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store</pre></td></tr></table></figure><h3 id=\"1925-组件中使用状态管理器\"><a class=\"anchor\" href=\"#1925-组件中使用状态管理器\">#</a> 19.2.5 组件中使用状态管理器</h3>\n<p><code>src/19_rtk/views/Home.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">//useSelector 用来获取状态管理器的状态</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">//useDispatch 用来修改状态</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useSelector<span class=\"token punctuation\">,</span> useDispatch <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> changeBannerList<span class=\"token punctuation\">,</span> changeProList <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./../store/modules/home'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getBannerList<span class=\"token punctuation\">,</span> getProList  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../api/home'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Home</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">const</span> bannerList <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>home<span class=\"token punctuation\">.</span>bannerList<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">const</span> proList <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>home<span class=\"token punctuation\">.</span>proList<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token function\">getBannerList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">changeBannerList</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token function\">getProList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">limitNum</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">changeProList</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"25\"></td><td><pre>          bannerList <span class=\"token operator\">&amp;&amp;</span> bannerList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token operator\">&lt;</span>img key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>bannerid <span class=\"token punctuation\">&#125;</span> src<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>img <span class=\"token punctuation\">&#125;</span> alt<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>item<span class=\"token punctuation\">.</span>alt<span class=\"token punctuation\">&#125;</span> style<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>swig￼<span class=\"token number\">4</span><span class=\"token operator\">--</span><span class=\"token operator\">></span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>          proList <span class=\"token operator\">&amp;&amp;</span> proList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>li key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proid <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proname <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Home<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/19_rtk/views/Kind.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useDispatch<span class=\"token punctuation\">,</span> useSelector <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getKindList <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../api/kind'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> changeKindList <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../store/modules/kind'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Kind</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">const</span> kindList <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>kind<span class=\"token punctuation\">.</span>kindList<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token function\">getKindList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">changeKindList</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Kind</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        kindList <span class=\"token operator\">&amp;&amp;</span> kindList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token operator\">&lt;</span>p key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>          <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Kind<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<ul>\n<li>\n<p>使用 <code>configureStore</code>  创建 Redux store</p>\n<ul>\n<li><code>configureStore</code>  接受  <code>reducer</code>  函数作为命名参数</li>\n<li><code>configureStore</code>  使用的好用的默认设置自动设置 store</li>\n</ul>\n</li>\n<li>\n<p>为 React 应用程序组件提供 Redux store</p>\n<ul>\n<li>使用 React-Redux  <code>&lt;Provider&gt;</code>  组件包裹你的  <code>&lt;App /&gt;</code></li>\n<li>传递 Redux store 如  <code>&lt;Provider store=&#123;store&#125;&gt;</code></li>\n</ul>\n</li>\n<li>\n<p>使用  <code>createSlice</code>  创建 Redux &quot;slice&quot; reducer</p>\n<ul>\n<li>\n<p>使用字符串名称、初始状态和命名的 reducers 函数调用 “createSlice”</p>\n</li>\n<li>\n<p>Reducer 函数可以使用 Immer 来 “改变” 状态</p>\n</li>\n<li>\n<p>导出生成的 slice reducer 和 action creators</p>\n</li>\n</ul>\n</li>\n<li>\n<p>在 React 组件中使用 React-Redux  <code>useSelector/useDispatch</code>  钩子</p>\n<ul>\n<li>\n<p>使用  <code>useSelector</code>  钩子从 store 中读取数据</p>\n</li>\n<li>\n<p>使用  <code>useDispatch</code>  钩子获取  <code>dispatch</code>  函数，并根据需要 dispatch actions</p>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<blockquote>\n<p>此时发现，组件中的异步操作在 组件内部调用，接下来需要研究如何将异步操作从组件提取出来</p>\n</blockquote>\n<h2 id=\"193-提取异步操作\"><a class=\"anchor\" href=\"#193-提取异步操作\">#</a> 19.3 提取异步操作</h2>\n<h3 id=\"1931-自己定义请求函数\"><a class=\"anchor\" href=\"#1931-自己定义请求函数\">#</a> 19.3.1 自己定义请求函数</h3>\n<p><code>src/20_rtk_async/api/home.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getBannerList</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/banner/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getProList</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">params</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/list?limitNum='</span> <span class=\"token operator\">+</span> params<span class=\"token punctuation\">.</span>limitNum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>src/20_rtk_async/api/kind.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getKindList</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/categorylist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>src/20_rtk_async/store/modules/home.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createSlice <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@reduxjs/toolkit'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getBannerList<span class=\"token punctuation\">,</span> getProList <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../api/home'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> homeSlice <span class=\"token operator\">=</span> <span class=\"token function\">createSlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 主要定义模块，后期从模块中取值给组件以及整合状态管理器</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 模块名称</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token literal-property property\">initialState</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 模块代表的初始化状态</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">bannerList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token literal-property property\">reducers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 修改状态</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token function\">changeBannerList</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      state<span class=\"token punctuation\">.</span>bannerList <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span>payload</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token function\">changeProList</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      state<span class=\"token punctuation\">.</span>proList <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span>payload</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// 取得数据之后，只需要 dispatch 触发此函数即可，参数即为修改时用的 action 的值</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> changeBannerList<span class=\"token punctuation\">,</span> changeProList <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> homeSlice<span class=\"token punctuation\">.</span>actions</pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">// 如果异步操作在状态管理器，写如下代码，参照 redux-thunk 写法</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getBannerListAction</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//dispatch 为默认参数</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token function\">getBannerList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">changeBannerList</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getProListAction</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">params</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//dispatch 为默认参数</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token function\">getProList</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">changeProList</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> homeSlice<span class=\"token punctuation\">.</span>reducer</pre></td></tr></table></figure><p><code>src/20_rtk_async/store/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> configureStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@reduxjs/toolkit'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> home <span class=\"token keyword\">from</span> <span class=\"token string\">'./modules/home'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token literal-property property\">reducer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    home</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store</pre></td></tr></table></figure><p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 引入状态管理器</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> Provider <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span> <span class=\"token comment\">// 提供 Provier 组件，可以添加 store 属性</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./20_rtk_async/store'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./20_rtk_async/App'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token operator\">&lt;</span>Provider store <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> store <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token operator\">&lt;</span>App<span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Provider<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/20_rtk_async/App.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> Home <span class=\"token keyword\">from</span> <span class=\"token string\">'./views/Home'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> Kind <span class=\"token keyword\">from</span> <span class=\"token string\">'./views/Kind'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Home</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Kind</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/20_rtk_async/views/Home.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useDispatch<span class=\"token punctuation\">,</span> useSelector <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getBannerListAction<span class=\"token punctuation\">,</span> getProListAction <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../store/modules/home'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Home</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">const</span> bannerList <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>home<span class=\"token punctuation\">.</span>bannerList<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">const</span> proList <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>home<span class=\"token punctuation\">.</span>proList<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span>getBannerListAction<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 无参不加（）</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">getProListAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">limitNum</span><span class=\"token operator\">:</span> <span class=\"token number\">8</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 有参加（）</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home20</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          bannerList <span class=\"token operator\">&amp;&amp;</span> bannerList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token operator\">&lt;</span>img key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>bannerid <span class=\"token punctuation\">&#125;</span> src<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>img <span class=\"token punctuation\">&#125;</span> alt<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>item<span class=\"token punctuation\">.</span>alt<span class=\"token punctuation\">&#125;</span> style<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>swig￼<span class=\"token number\">5</span><span class=\"token operator\">--</span><span class=\"token operator\">></span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          proList <span class=\"token operator\">&amp;&amp;</span> proList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>li key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proid <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proname <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Home<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"1932-使用-createasyncthunk-请求数据\"><a class=\"anchor\" href=\"#1932-使用-createasyncthunk-请求数据\">#</a> 19.3.2 使用  <code>createAsyncThunk</code>  请求数据</h3>\n<p>Redux Toolkit 的  <code>createAsyncThunk</code>  API 生成 thunk，为您自动 dispatch 那些 &quot;start/success/failure&quot; action。</p>\n<p><code>src/20_rtk_async/store/modules/kind.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createSlice<span class=\"token punctuation\">,</span> createAsyncThunk <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@reduxjs/toolkit'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getKindList <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./../../api//kind'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> kindSlice <span class=\"token operator\">=</span> <span class=\"token function\">createSlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token literal-property property\">initialState</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">kindList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token literal-property property\">reducers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">changeKindList</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 如果使用了 createAsyncThunk 此处修改状态失效</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      state<span class=\"token punctuation\">.</span>kindList <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span>payload</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token function-variable function\">extraReducers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">builder</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//createAsyncThunk 在这里修改状态 下面可以看作固定的写法</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    builder</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token punctuation\">.</span><span class=\"token function\">addCase</span><span class=\"token punctuation\">(</span>getKindListAction<span class=\"token punctuation\">.</span>pending<span class=\"token punctuation\">,</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        state<span class=\"token punctuation\">.</span>status <span class=\"token operator\">=</span> <span class=\"token string\">'loading'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token punctuation\">.</span><span class=\"token function\">addCase</span><span class=\"token punctuation\">(</span>getKindListAction<span class=\"token punctuation\">.</span>fulfilled<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        state<span class=\"token punctuation\">.</span>status <span class=\"token operator\">=</span> <span class=\"token string\">'idle'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        state<span class=\"token punctuation\">.</span>kindList <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span>payload</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token punctuation\">.</span><span class=\"token function\">addCase</span><span class=\"token punctuation\">(</span>getKindListAction<span class=\"token punctuation\">.</span>rejected<span class=\"token punctuation\">,</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        state<span class=\"token punctuation\">.</span>status <span class=\"token operator\">=</span> <span class=\"token string\">'failed'</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\">//kind/getKindListAction1123 可以自定义，但是最好有意义</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> getKindListAction <span class=\"token operator\">=</span> <span class=\"token function\">createAsyncThunk</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kind/getKindListAction1123'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'num'</span><span class=\"token punctuation\">,</span> num<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getKindList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> changeKindList <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> kindSlice<span class=\"token punctuation\">.</span>actions</pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> kindSlice<span class=\"token punctuation\">.</span>reducer</pre></td></tr></table></figure><p><code>src/20_rtk_async/views/Kind.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useDispatch<span class=\"token punctuation\">,</span> useSelector <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getKindListAction <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../store/modules/kind'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Kind</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">const</span> kindList <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>kind<span class=\"token punctuation\">.</span>kindList<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">getKindListAction</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Kind20</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        kindList <span class=\"token operator\">&amp;&amp;</span> kindList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token operator\">&lt;</span>p key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>          <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Kind<span class=\"token punctuation\">;</span></pre></td></tr></table></figure>",
            "tags": [
                "react学习",
                "react"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/react-study/7/",
            "url": "https://www.yexingcheng.com/react-study/7/",
            "title": "React学习第七天",
            "date_published": "2022-08-06T16:00:00.000Z",
            "content_html": "<h1 id=\"十七-hooks\"><a class=\"anchor\" href=\"#十七-hooks\">#</a> 十七、hooks</h1>\n<h2 id=\"171-为什么使用hooks\"><a class=\"anchor\" href=\"#171-为什么使用hooks\">#</a> 17.1 为什么使用 hooks</h2>\n<p>React 没有提供将可复用性行为 “附加” 到组件的途径（例如，把组件连接到 store）。如果你使用过 React 一段时间，你也许会熟悉一些解决此类问题的方案，比如 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRlZS5jb20vbGluaz90YXJnZXQ9aHR0cHMlM0ElMkYlMkZ6aC1oYW5zLnJlYWN0anMub3JnJTJGZG9jcyUyRnJlbmRlci1wcm9wcy5odG1s\">render props</span> 和 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRlZS5jb20vbGluaz90YXJnZXQ9aHR0cHMlM0ElMkYlMkZ6aC1oYW5zLnJlYWN0anMub3JnJTJGZG9jcyUyRmhpZ2hlci1vcmRlci1jb21wb25lbnRzLmh0bWw=\">高阶组件</span>。</p>\n<p><strong>Hook 使你在非 class 的情况下可以使用更多的 React 特性。</strong> 从概念上讲，React 组件一直更像是函数。而 Hook 则拥抱了函数，同时也没有牺牲 React 的精神原则。Hook 提供了问题的解决方案，无需学习复杂的函数式或响应式编程技术。</p>\n<p><strong>react 18 版本以前 hooks</strong></p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWFjdC5kb2NzY2hpbmEub3JnL2RvY3MvaG9va3MtcmVmZXJlbmNlLmh0bWwjYmFzaWMtaG9va3M=\">基础 Hook</span>\n<ul>\n<li><a href=\"https://react.docschina.org/docs/hooks-reference.html#usestate\"> <code>useState</code> </a></li>\n<li><a href=\"https://react.docschina.org/docs/hooks-reference.html#useeffect\"> <code>useEffect</code> </a></li>\n<li><a href=\"https://react.docschina.org/docs/hooks-reference.html#usecontext\"> <code>useContext</code> </a></li>\n</ul>\n</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWFjdC5kb2NzY2hpbmEub3JnL2RvY3MvaG9va3MtcmVmZXJlbmNlLmh0bWwjYWRkaXRpb25hbC1ob29rcw==\">额外的 Hook</span>\n<ul>\n<li><a href=\"https://react.docschina.org/docs/hooks-reference.html#usereducer\"> <code>useReducer</code> </a></li>\n<li><a href=\"https://react.docschina.org/docs/hooks-reference.html#usecallback\"> <code>useCallback</code> </a></li>\n<li><a href=\"https://react.docschina.org/docs/hooks-reference.html#usememo\"> <code>useMemo</code> </a></li>\n<li><a href=\"https://react.docschina.org/docs/hooks-reference.html#useref\"> <code>useRef</code> </a></li>\n<li><a href=\"https://react.docschina.org/docs/hooks-reference.html#useimperativehandle\"> <code>useImperativeHandle</code> </a></li>\n<li><a href=\"https://react.docschina.org/docs/hooks-reference.html#uselayouteffect\"> <code>useLayoutEffect</code> </a></li>\n<li><code>useDebugValue</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"172常见的hooks\"><a class=\"anchor\" href=\"#172常见的hooks\">#</a> 17.2 常见的 hooks</h2>\n<h3 id=\"1721-usestate\"><a class=\"anchor\" href=\"#1721-usestate\">#</a> 17.2.1 useState</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">/</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/01_App_hooks_useState'</span> <span class=\"token comment\">// hooks useState</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/01_App_hooks_useState.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// rsc</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useState <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 函数式组件内不要使用 this</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 如果想要 this 指向函数式组件，本身这个想法就是错误的</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token comment\">// 定义了一个初始化状态 为 count</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token comment\">// 定义了一个修改初始化状态的函数 为 setCount</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token comment\">// 使用 useState 定义了初始化装 count 的值为 1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">,</span> setName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'吴'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token keyword\">function</span> <span class=\"token function\">add100</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add1000</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add10000</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevCount</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 函数写法</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>prevCount<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token keyword\">return</span> prevCount <span class=\"token operator\">+</span> <span class=\"token number\">10000</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span> count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token comment\">// 修改函数内部的值为 运算之后的结果</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">加1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token comment\">// 修改函数内部的值为 运算之后的结果</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">加10</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> add100 <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">加100</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> add1000 <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">加1000</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> add10000 <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">加10000</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span> name <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'吴大勋'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">修改name</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">/</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/02_App_hooks_useState_obj'</span> <span class=\"token comment\">// hooks useState  object</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/02_App_hooks_useState_obj.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useState <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>obj<span class=\"token punctuation\">,</span> setObj<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">w</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token literal-property property\">h</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mouseMove</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">// 鼠标移动，发现 w 和 h 的数据丢失，&#123;x: 1, y: 1&#125; 代替了原来的对象 obj </span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// setObj(&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">//   x: event.clientX,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">//   y: event.clientY</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token comment\">//setObj (&#123; // 合并新数据到原来的 obj</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token comment\">//   ...obj,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token comment\">//   x: event.clientX,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token comment\">//   y: event.clientY</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token function\">setObj</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevObj</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token comment\">// return &#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token comment\">//   w: prevObj.w,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token comment\">//   h: prevObj.h,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token comment\">//   x: event.clientX,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token comment\">//   y: event.clientY</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> prevObj<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientX <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientY<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100vw'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'100vh'</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> onMouseMove <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> mouseMove <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">元素的宽为: </span><span class=\"token punctuation\">&#123;</span> obj<span class=\"token punctuation\">.</span>w <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">，元素的高为： </span><span class=\"token punctuation\">&#123;</span> obj<span class=\"token punctuation\">.</span>h <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">元素的坐标点为： (</span><span class=\"token punctuation\">&#123;</span> obj<span class=\"token punctuation\">.</span>x <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">,</span><span class=\"token punctuation\">&#123;</span>  obj<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">)</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/03_App_hooks_useState_state'</span> <span class=\"token comment\">//hooks useState  拆分对象状态</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/03_App_hooks_useState_state.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useState <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token comment\">// 如果不需要修改状态，那么可以不写解构的第二个值</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> box <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">w</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">h</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">,</span> setPosition<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mouseMove</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">setPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientX<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientY</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100vw'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'100vh'</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> onMouseMove <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> mouseMove <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">元素的宽为: </span><span class=\"token punctuation\">&#123;</span> box<span class=\"token punctuation\">.</span>w <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">，元素的高为： </span><span class=\"token punctuation\">&#123;</span> box<span class=\"token punctuation\">.</span>h <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">元素的坐标点为： (</span><span class=\"token punctuation\">&#123;</span> position<span class=\"token punctuation\">.</span>x <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">,</span><span class=\"token punctuation\">&#123;</span>  position<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">)</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<ul>\n<li>\n<p><strong>不要在循环，条件或嵌套函数中调用 Hook，</strong> 确保总是在你的 React 函数的最顶层以及任何 return 之前调用他们。</p>\n</li>\n<li>\n<p>** 只在 React 函数中调用 Hook，** 不要在普通的 JavaScript 函数中调用 Hook。你可以：</p>\n<ul>\n<li>在 React 的函数组件中调用 Hook</li>\n<li>在自定义 Hook 中调用其他 Hook</li>\n</ul>\n</li>\n<li>\n<p>如果遇到需要以对象的形式定义状态时，根据需求划分对象，因为修改状态使用的是替换</p>\n</li>\n</ul>\n</blockquote>\n<h3 id=\"1722-useeffect\"><a class=\"anchor\" href=\"#1722-useeffect\">#</a> 17.2.2 useEffect</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/04_App_hooks_useEffect'</span> <span class=\"token comment\">// hooks useEffect  </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token attr-name\">root</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span>root<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/04_App_hooks_useEffect.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>proList<span class=\"token punctuation\">,</span> setProList<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token comment\">// 数据请求 --- 函数式组件没有 生命周期钩子函数</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token comment\">//useEffect 的第一个参数是一个回调函数 类似于类组件中的 componentDidMount 以及 componentDidUpdate</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token comment\">//useEffect 内的代码会自动执行</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token comment\">//useEffect 如果没有添加第二个依赖的参数，那么只要内部修改果状态，此部分代码就会一直执行</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token comment\">// useEffect(() => &#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token comment\">//   fetch('http://121.89.205.189:3001/api/pro/list').then(res => res.json()).then(res => &#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token comment\">//     console.log (res.data) // 第一次打印 - componentDidMount</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token comment\">//     setProList (res.data) // 发现上一句话一直在打印 - componentDidUpdate 且没有条件限制</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token comment\">//   &#125;)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token comment\">// 可以给 useEffect 添加第二个参数进行控制内部代码执行的次数</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token comment\">// useEffect(() => &#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token comment\">//   fetch('http://121.89.205.189:3001/api/pro/list').then(res => res.json()).then(res => &#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token comment\">//     console.log(res.data) </span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token comment\">//     setProList(res.data) </span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token comment\">//   &#125;)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token comment\">// &#125;, []) //useEffect 第二个参数为空数组，代表 useEffect 内部只会执行类似 componentDidMount 的操作</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token comment\">// 依赖值发生改变，再次触发代码执行，类似于 componentDidUpdate 中特定条件下请求数据</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token function\">setProList</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 第二个参数写入值，代表只有当 count 的值发生改变时，才会再次触发 useEffect，再次执行</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token comment\">// 如何模拟 组件的销毁呢？</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token comment\">// 在 useEffect 内部的回调函数中 返回一个函数</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token comment\">// 为防止内存泄漏，清除函数会在组件卸载前执行。</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token comment\">// 另外，如果组件多次渲染（通常如此），则在执行下一个 effect 之前，上一个 effect 就已被清除。</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 类似于类组件中的 componentWillUnmount</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      <span class=\"token comment\">// 取消订阅的操作，销毁定时器，计时器等操作</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'组件销毁了'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>count <span class=\"token operator\">===</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>          props<span class=\"token punctuation\">.</span>root<span class=\"token punctuation\">.</span><span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">加1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">&#123;</span> count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>          proList <span class=\"token operator\">&amp;&amp;</span> proList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>            <span class=\"token operator\">&lt;</span>li key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proid <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proname <span class=\"token punctuation\">&#125;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<ol>\n<li>useEffect () 是个副作用函数。</li>\n<li>useEffect () 函数在每次组件重新渲染时，可再次被调用。</li>\n<li>在开发环境中，开启了 React.StrictMode 模式，组件开始时被渲染两次。</li>\n<li>useEffect () 通过返回函数来清理副作用。</li>\n<li>useEffect () 通过传递第二个参数数组来提高渲染性能，或者说实现 watch 效果。</li>\n</ol>\n</blockquote>\n<h3 id=\"1723-useref\"><a class=\"anchor\" href=\"#1723-useref\">#</a> 17.2.3 useRef</h3>\n<p>利用  <code>useRef</code>  就可以绕过 Capture Value 的特性。<strong>可以认为</strong>  <code>ref</code>  <strong>在所有 Render 过程中保持着唯一引用，因此所有对</strong>  <code>ref</code>  <strong>的赋值或取值，拿到的都只有一个最终状态</strong>，而不会在每个 Render 间存在隔离。</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/05_App_hooks_useRef'</span> <span class=\"token comment\">// hooks useRef  </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/05_App_hooks_useRef.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useRef <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> FunCom <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token operator\">&lt;</span>div ref <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> ref <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span>函数式组件<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Com</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'类组件'</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token function-variable function\">testFn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">'!!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">类组件</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token keyword\">const</span> btnRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 类组件中  React.createRef ()</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token keyword\">const</span> comRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token keyword\">const</span> funRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>btnRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>comRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>funRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      &lt;button ref = <span class=\"token punctuation\">&#123;</span> btnRef <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">>按钮ref</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      &lt;Com ref = <span class=\"token punctuation\">&#123;</span> comRef <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">/></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>      &lt;FunCom ref = <span class=\"token punctuation\">&#123;</span> funRef <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">/></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"1724-usereducer\"><a class=\"anchor\" href=\"#1724-usereducer\">#</a> 17.2.4 useReducer</h3>\n<p>useReducer 践行了 Flux/Redux 思想。使用步骤：</p>\n<p>1、创建初始值 initialState</p>\n<p>2、创建所有操作 reducer (state, action);</p>\n<p>3、传给 userReducer，得到读和写 API</p>\n<p>4、调用写 ({type: ' 操作类型 '})</p>\n<p>总的来说，useReducer 是 useState 的复杂版。</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">/</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/06_App_hooks_useReducer'</span> <span class=\"token comment\">// hooks useReducer  </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/06_App_hooks_useReducer.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useReducer <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 1. 创建初始化状态</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token literal-property property\">bannerList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 2. 创建所有操作 reducer (state, action)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">reducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_BANNER_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token comment\">// 返回一个新的状态 -- 当触发修改轮播图数据时，得到一个新的数据</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token comment\">// 如何保证得到一份新的数据  -- 推荐使用 对象的合并</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token comment\">// return &#123; ...state, bannerList: action.payload &#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">bannerList</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>payload <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_PRO_LIST'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token keyword\">return</span> state</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token comment\">// 3. 传给 userReducer，得到读和写 API</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token comment\">//state 代表所有的数据</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token comment\">//dispatch 可以触发 reducer 的改变</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">,</span> initialState<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/banner/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_BANNER_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_PRO_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>       <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>          state<span class=\"token punctuation\">.</span>bannerList <span class=\"token operator\">&amp;&amp;</span> state<span class=\"token punctuation\">.</span>bannerList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>            <span class=\"token operator\">&lt;</span>img key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>bannerid <span class=\"token punctuation\">&#125;</span>  alt<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>alt <span class=\"token punctuation\">&#125;</span> src <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>img <span class=\"token punctuation\">&#125;</span> style<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>swig￼<span class=\"token number\">0</span><span class=\"token operator\">--</span><span class=\"token operator\">></span><span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>          state<span class=\"token punctuation\">.</span>proList <span class=\"token operator\">&amp;&amp;</span> state<span class=\"token punctuation\">.</span>proList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>            <span class=\"token operator\">&lt;</span>li key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proid <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proname <span class=\"token punctuation\">&#125;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre></pre></td></tr><tr><td data-num=\"63\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>如果遇到多个组件需要共享状态时，单纯 useReducer 就显得无能为力</p>\n</blockquote>\n<h3 id=\"1725-usecontext\"><a class=\"anchor\" href=\"#1725-usecontext\">#</a> 17.2.5 useContext</h3>\n<p>1、使用 C = createContext (initial) 创建上下文</p>\n<p>2、使用 &lt;C.Provider&gt; 圈定作用域</p>\n<p>3、在作用域内使用 useContext (C) 来使用上下文</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/07_App_hooks_useContext'</span> <span class=\"token comment\">// hooks useContext  </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/07_App_hooks_useContext.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useContext <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> LangContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> ColorContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Second</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">const</span> lang <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>LangContext<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">const</span> color <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>ColorContext<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Second</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span> lang <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> - </span><span class=\"token punctuation\">&#123;</span> color <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">First</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">first</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Second</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      &lt;LangContext.Provider value = \"中文\"></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        &lt;ColorContext.Provider value = \"red\"></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">First</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ColorContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LangContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      </pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><strong>使用 useReducer 和 useContext 实现轻型 Redux, 可以让组件间共享状态</strong></p>\n<p>步骤：</p>\n<p>1、将数据集中在一个 store 对象</p>\n<p>2、将所有操作集中在 reducer</p>\n<p>3、创建一个 Context</p>\n<p>4、创建对数据的读取 API</p>\n<p>5、将第四步的内容放到第三步的 Context</p>\n<p>6、用 Context.Provider 将 Context 提供给所有组件</p>\n<p>7、各个组件用 useContext 获取读写 API</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/08_App_hooks_redux'</span> <span class=\"token comment\">// hooks useContext useReducer redux</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/09-App-redux.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useContext <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useReducer <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> MyContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> intitalState <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token literal-property property\">userName</span><span class=\"token operator\">:</span> <span class=\"token string\">'吴大勋'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">reducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_USER_NAME'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">userName</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>payload <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_COUNT'</span><span class=\"token operator\">:</span> </pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token string\">'CHANGE_PRO_LIST'</span><span class=\"token operator\">:</span> </pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token keyword\">return</span> state</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Home</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token comment\">// const [state, dispatch] = useReducer(reducer, intitalState)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> state<span class=\"token punctuation\">,</span> dispatch <span class=\"token punctuation\">&#125;</span>  <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>MyContext<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 不要直接在回调函数上使用 async</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span>  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'CHANGE_PRO_LIST'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>          state<span class=\"token punctuation\">.</span>proList <span class=\"token operator\">&amp;&amp;</span> state<span class=\"token punctuation\">.</span>proList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>            <span class=\"token operator\">&lt;</span>li key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proid <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proname <span class=\"token punctuation\">&#125;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">List</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token comment\">// const [state, dispatch] = useReducer(reducer, intitalState)</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> state <span class=\"token punctuation\">&#125;</span>  <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>MyContext<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">List</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>          state<span class=\"token punctuation\">.</span>proList <span class=\"token operator\">&amp;&amp;</span> state<span class=\"token punctuation\">.</span>proList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>            <span class=\"token operator\">&lt;</span>li key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proid <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proname <span class=\"token punctuation\">&#125;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token comment\">// Home 组件  以及 List 组件共享 列表数据</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">,</span> intitalState<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>      &lt;MyContext.Provider value = <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>        state<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>        dispatch</pre></td></tr><tr><td data-num=\"79\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> ></span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Home</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>      </pre></td></tr><tr><td data-num=\"84\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre></pre></td></tr><tr><td data-num=\"88\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>useContext + useReducer 可以实现轻型 redux，但是不适合应用于多模块管理的大型项目</p>\n</blockquote>\n<h3 id=\"1726-usememo\"><a class=\"anchor\" href=\"#1726-usememo\">#</a> 17.2.6 useMemo</h3>\n<h3 id=\"1727-usecallback\"><a class=\"anchor\" href=\"#1727-usecallback\">#</a> 17.2.7 useCallback</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">/</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/09_App_hooks_useCallback_useMemo'</span> <span class=\"token comment\">//hooks useCallback useMemo 提升性能以及计算属性</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/09_App_hooks_useCallback_useMemo.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useMemo <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useCallback <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useState <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// const Child = (props) => &#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">//   console.log ('child 被执行了 ')</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">//   return (</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">//     &lt;div>child - &#123; props.b &#125;&lt;/div></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">//   )</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">const</span> Child <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'child被执行了'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">child - </span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>b <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">const</span> Com <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'com被执行了'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">com - </span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>b <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> setA<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token comment\">// const [b] = useState(100)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">,</span> setB<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>list<span class=\"token punctuation\">,</span> setList<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token function\">setA</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addB</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token function\">setB</span><span class=\"token punctuation\">(</span>b <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token comment\">// 每次更新生成一个新的引用，意味这属性发生改变</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token comment\">// const testFn = () => &#123;&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token comment\">// 如果记住这个函数 useCallback 以及 useMemo ，从而达到提升组件性能的目的</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token comment\">//const testFn = useCallback (() => &#123; //useCallback 结构</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  <span class=\"token comment\">//   return (event) => &#123; // 真正的函数实现</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token comment\">//   &#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  <span class=\"token comment\">// &#125;, []) // 依赖值的改变，重新生成新的引用</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  <span class=\"token keyword\">const</span> testFn <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 真正的函数</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token comment\">// 函数式组件中，通常使用 useMemo 可以实现计算属性</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token comment\">//const doubleA = a * 2 // 不推荐</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>  <span class=\"token keyword\">const</span> doubleA <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token keyword\">return</span> a <span class=\"token operator\">*</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token keyword\">const</span> len <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token keyword\">return</span> list<span class=\"token punctuation\">.</span>length</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>list<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 深拷贝</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        arr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>len<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        <span class=\"token function\">setList</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">追加数据</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span>list<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> add <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">a加1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">&#123;</span> a <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> - </span><span class=\"token punctuation\">&#123;</span> doubleA <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> - </span><span class=\"token punctuation\">&#123;</span> len <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> addB <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">b加1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">&#123;</span> b <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 理想情况 b 的值发生改变，Child 组件才被重新渲染 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 可以使用高阶组件 React.memo () 包裹一下 Child 组件 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Child</span></span> <span class=\"token attr-name\">b</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> b <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 组件的状态发生改变，组件重新渲染，重新渲染，就会给函数生成一个新的地址，意味着全新的一个属性 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>      &lt;Com b = <span class=\"token punctuation\">&#123;</span> b <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> testFn = </span><span class=\"token punctuation\">&#123;</span> testFn <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">/></span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre></pre></td></tr><tr><td data-num=\"79\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>useCallback 应用于 组件的事件，使用 useCallback 包裹组件   -  记忆函数</p>\n<p>useMemo 可以是计算属性， 也应用于 组件的事件，使用 useMemo  包裹组件  - 记忆组件</p>\n</blockquote>\n<h3 id=\"1728-useimperativehandle\"><a class=\"anchor\" href=\"#1728-useimperativehandle\">#</a> 17.2.8 useImperativeHandle</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/10_App_hooks_useImperativeHandle.jsx'</span> <span class=\"token comment\">//useImperativeHandle 父组件操作子组件的方法</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/10_App_hooks_useImperativeHandle.jsx.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// const Child = React.forwardRef((props, ref) => &#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//   return (</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//     &lt;></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">//       &lt;input ref = &#123; ref &#125;/></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">//     &lt;/></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">//   )</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 可以实现子组件中多个 ref 的使用</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> Child <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">const</span> inputRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token keyword\">const</span> divRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token comment\">// 父组件通过 ref 即可 调用 内部自定义的函数 通过透传 ref 解决问题</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  React<span class=\"token punctuation\">.</span><span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token function-variable function\">inputFocus</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        inputRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token function\">wirteVal</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        divRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> str</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      &lt;input ref = <span class=\"token punctuation\">&#123;</span> inputRef <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">/></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      &lt;div ref = <span class=\"token punctuation\">&#123;</span> divRef <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token keyword\">const</span> childRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token comment\">// childRef.current.focus()</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        childRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">inputFocus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token value css language-css\">&lt;!--swig￼1--</span></span></span><span class=\"token punctuation\">></span><span class=\"token plain-text\">>获取焦点</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token comment\">// childRef.current.focus()</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        childRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">wirteVal</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello hooks!!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token value css language-css\">&lt;!--swig￼2--</span></span></span><span class=\"token punctuation\">></span><span class=\"token plain-text\">>写入内容</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>      &lt;Child ref = <span class=\"token punctuation\">&#123;</span> childRef <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">/></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>上面这个例子中与直接转发 ref 不同，直接转发 ref 是将  <code>React.forwardRef</code>  中函数上的 ref 参数直接应用在了返回元素的 ref 属性上，其实父、子组件引用的是同一个 ref 的 current 对象，官方不建议使用这样的 ref 透传，而使用  <code>useImperativeHandle</code>  后，可以让父、子组件分别有自己的 ref，通过  <code>React.forwardRef</code>  将父组件的 ref 透传过来，通过  <code>useImperativeHandle</code>  方法来自定义开放给父组件的 current。</p>\n<p><code>useImperativeHandle </code> 的第一个参数是定义 current 对象的 ref，第二个参数是一个函数，返回值是一个对象，即这个 ref 的 current 对象，这样可以像上面的案例一样，通过自定义父组件的 ref 来使用子组件 ref 的某些方法。</p>\n<p><code>useImperativeHandle</code>  和 <code>React.forwardRef</code>  必须是配合使用的，这也是为什么在开头要介绍 ref 的转发。</p>\n<h3 id=\"1729-uselayouteffect\"><a class=\"anchor\" href=\"#1729-uselayouteffect\">#</a> 17.2.9 useLayoutEffect</h3>\n<p>useLayoutEffect 与 useEffect 的区别：</p>\n<ul>\n<li><code>useEffect</code>  是异步执行的，而 <code>useLayoutEffect</code>  是同步执行的。</li>\n<li><code>useEffect</code>  的执行时机是浏览器完成渲染之后，而  <code>useLayoutEffect</code>  的执行时机是浏览器把内容真正渲染到界面之前</li>\n</ul>\n<p>举个例子：</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/11_App_hooks_useLayoutEffect'</span> <span class=\"token comment\">// useLayoutEffect </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/13-App-useLayoutEffect.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useEffect<span class=\"token punctuation\">,</span> useLayoutEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// const App = () => &#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//   const [count, setCount] = useState(1)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//   useEffect (() => &#123; // 副作用操作 - 异步操作</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//     console.log ('useEffect') // 后执行</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">//     document.title = count + '!!'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">//   &#125;)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">//   useLayoutEffect (() => &#123; // 同步操作 - DOM 相关</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">//     console.log ('useLayoutEffect') // 先执行</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">//     document.title = count</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">//   &#125;) </span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">//   return (</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">//     &lt;div></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">//       &lt;h1>useLayoutEffect&lt;/h1></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">//       &#123; count &#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">//       &lt;button onClick=&#123; () => &#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">//         setCount(count + 1)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">//       &#125;&#125;> 加 1&lt;/button></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">//     &lt;/div></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">//   );</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">// &#125;;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> state1<span class=\"token punctuation\">,</span> setState1 <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> state2<span class=\"token punctuation\">,</span> setState2 <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hi'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> <span class=\"token number\">1000000000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      i<span class=\"token operator\">++</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token function\">setState1</span><span class=\"token punctuation\">(</span><span class=\"token string\">'world'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token function\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> <span class=\"token number\">1000000000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      i<span class=\"token operator\">++</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token function\">setState2</span><span class=\"token punctuation\">(</span><span class=\"token string\">'world'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span>state1<span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span>state2<span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>注意观察 useEffect 抖动现象</p>\n<p>useLayoutEffect 做 DOM 操作</p>\n<p>useEffect 中 副作用执行</p>\n</blockquote>\n<h3 id=\"17210-usedebugvalue\"><a class=\"anchor\" href=\"#17210-usedebugvalue\">#</a> 17.2.10 useDebugValue</h3>\n<p><code>useDebugValue</code>  可用于在 React 开发者工具中显示自定义 hook 的标签。</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">/</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/12_App_hooks_useDebugValue'</span> <span class=\"token comment\">// useDebugValue </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/12_App_hooks_useDebugValue.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useEffect<span class=\"token punctuation\">,</span> useState<span class=\"token punctuation\">,</span> useDebugValue <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// const App = () => &#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//   const [count, setCount] = useState(1)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//   const add = () => &#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//     setCount(count + 1)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">//   &#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">//   useEffect(() => &#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">//     document.title = `点击了 $&#123;count&#125; 次`</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">//   &#125;)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">//   return (</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">//     &lt;div></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">//       &lt;button onClick=&#123;add&#125;> 加 1&lt;/button></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">//     &lt;/div></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">//   );</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">// &#125;;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// 自定义 hook</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token function\">useDebugValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">'myCount'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 自定义 Hook 起名</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    count<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    add</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTitle</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">count</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">点击了</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>count<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">次</span><span class=\"token template-punctuation string\">`</span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token function\">useDebugValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">'myTitle'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 自定义 Hook 起名</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token comment\">// const [count, setCount] = useState(1)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token comment\">// const add = () => &#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token comment\">//   setCount(count + 1)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> count<span class=\"token punctuation\">,</span> add <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">useCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  <span class=\"token comment\">// useEffect(() => &#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  <span class=\"token comment\">//   document.title = `点击了 $&#123;count&#125; 次`</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token function\">useTitle</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> add <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">加1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>接下来的 hooks 是属于 react18 版本新增的 hooks</p>\n<h3 id=\"17211-useid\"><a class=\"anchor\" href=\"#17211-useid\">#</a> 17.2.11 useId</h3>\n<p><code>useId</code>  是一个钩子，用于生成唯一的 ID，在服务器和客户端之间是稳定的，同时避免 hydration 不匹配。</p>\n<blockquote>\n<p>注意：</p>\n<p><code>useId</code>  不是用来生成列表中的键的。 <code>Keys</code>  应该从你的数据中生成。</p>\n<p>不能用于列表渲染的 key 值</p>\n</blockquote>\n<p>对于一个基本的例子，直接将 id 传递给需要它的元素。</p>\n<p>对于同一组件中的多个 ID，使用相同的 ID 附加一个后缀。</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/13_App_hooks_useId'</span> <span class=\"token comment\">// useId </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token operator\">&lt;</span>App<span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/13_App_hooks_useId.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useId <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">//React Hook \"useId\" cannot be called inside a callback. </span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// React Hooks must be called in a React function component or a custom React Hook function</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//useId 不能在回调函数中使用，</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//react hooks 必须包裹在函数式组件或者自定义 hooks 中使用</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token comment\">// const [list] = useState(['a', 'b', 'c', 'd'])</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">const</span> useNameId <span class=\"token operator\">=</span> <span class=\"token function\">useId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">const</span> passwordId <span class=\"token operator\">=</span> <span class=\"token function\">useId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">// list &amp;&amp; list.map((item) => &#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token comment\">//   const id = useId () // 这样的写法是错误的</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token comment\">//   return (</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token comment\">//     &lt;p key = &#123; id &#125;> &#123; item &#125; &lt;/p></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">//   )</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* HTML 中使用 for，react 中使用 HtmlFor */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">htmlFor</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> useNameId <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">用户名</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        &lt;input type=\"text\" id = <span class=\"token punctuation\">&#123;</span> useNameId <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> /></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        &lt;label htmlFor = <span class=\"token punctuation\">&#123;</span> passwordId <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">>密码</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        &lt;input type=\"password\" id = <span class=\"token punctuation\">&#123;</span> passwordId <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> /></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p><strong>注意：</strong></p>\n<p><code>useId</code>  会生成一个包含 : token 的字符串。这有助于确保令牌是唯一的，但在 CSS 选择器或 API（如 <code>querySelectorAll</code> ）中不支持。</p>\n<p><code>useId</code>  支持一个 <code>identifierPrefix</code> ，以防止在多根应用程序中发生碰撞。要配置，请参阅  <code>hydrateRoot</code>  和  <code>ReactDOMServer </code> 的选项。</p>\n<p>hooks 需要在函数式组件以及自定义 hook 的顶级使用（返回 jsx 代码之前），不要在 jsx 代码中使用 hooks</p>\n</blockquote>\n<h3 id=\"17212-usedeferredvalue\"><a class=\"anchor\" href=\"#17212-usedeferredvalue\">#</a> 17.2.12 useDeferredValue</h3>\n<blockquote>\n<p>真实需求其实不需要实时渲染所有的数据</p>\n</blockquote>\n<p><code>useDeferredValue</code>  需要接收一个值，返回这个值的副本，副本的更新会在值更新渲染之后进行更新，以此来避免一些不必要的重复渲染。打个比方页面中有输入框，输入框下的内容依赖于输入框的值，但是输入框是一个高频操作，如果输入 10 次，可能用户只想看到最终的结果那么中途的实时渲染就显得不那么重要了，页面元素少点还好，一旦元素过多页面就会及其的卡顿，渲染引擎堵得死死的，用户就会骂娘了，此时使用 useDeferredValue 是一个很好的选择</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/14_App_hooks_useDeferredValue'</span> <span class=\"token comment\">// useDeferredValue </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/14_App_hooks_useDeferredValue.jsx</code>  数据量必须过大，否则看不到效果</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useDeferredValue<span class=\"token punctuation\">,</span> useEffect<span class=\"token punctuation\">,</span> useState<span class=\"token punctuation\">,</span> useMemo<span class=\"token punctuation\">,</span> memo <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> List <span class=\"token operator\">=</span> <span class=\"token function\">memo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">List</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span>count<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    data<span class=\"token punctuation\">.</span>length <span class=\"token operator\">=</span> <span class=\"token number\">50000</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> data<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      data<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        data<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span>item<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span>count<span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">UseDeferredValueDemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>inpVal<span class=\"token punctuation\">,</span> setInpVal<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token keyword\">const</span> deferredValue <span class=\"token operator\">=</span> <span class=\"token function\">useDeferredValue</span><span class=\"token punctuation\">(</span>inpVal<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 备份数据</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token keyword\">const</span> memoList <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span></span> <span class=\"token attr-name\">count</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span>deferredValue<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">List</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>deferredValue<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">UseDeferredValue</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span>inpVal<span class=\"token punctuation\">&#125;</span></span>  <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setInpVal</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span>memoList<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"17213-usetransition\"><a class=\"anchor\" href=\"#17213-usetransition\">#</a> 17.2.13 useTransition</h3>\n<p><code>useTransition</code>  又叫过渡，他的作用就是标记非紧急更新，这些被标记非紧急更新会在紧急更新完之后进行更新， <code>useTransition</code>  使用场景在应对渲染量很大的页面，需要及时响应某些事件的情况。</p>\n<p>举个例子，准备一个进度条，通过滑动进度条来显示进度条的进度并且渲染相同进度数量的 div, 如果我们不对渲染进行优化那无疑页面会很卡，此时使用过渡配合 useMemo 来缓存页面结构，diffing 算法就会对比出少量的变化进行局部修改。</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">/</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./12_hooks/15_App_hooks_useTransition'</span> <span class=\"token comment\">// useTransition </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token operator\">&lt;</span>App<span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/12_hooks/15_App_hooks_useTransition</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useTransition<span class=\"token punctuation\">,</span> useState<span class=\"token punctuation\">,</span> useMemo <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">UseTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isPending<span class=\"token punctuation\">,</span> startTransition<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>rangeValue<span class=\"token punctuation\">,</span> setRangeValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>renderData<span class=\"token punctuation\">,</span> setRenderData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isStartTransition<span class=\"token punctuation\">,</span> setIsStartTransition<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token function\">setRangeValue</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      arr<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isStartTransition<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token function\">startTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token function\">setRenderData</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token function\">setRenderData</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token keyword\">const</span> jsx <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">return</span> renderData<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>          <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token value css language-css\">&lt;!--swig￼3--</span></span></span><span class=\"token punctuation\">></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>          key=<span class=\"token punctuation\">&#123;</span><span class=\"token string\">'item'</span><span class=\"token operator\">+</span>index<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        ></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span>item<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>      <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>renderData<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token value css language-css\">&lt;!--swig￼4--</span></span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>checkbox<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            <span class=\"token attr-name\">checked</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span>isStartTransition<span class=\"token punctuation\">&#125;</span></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>            <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>              <span class=\"token function\">setIsStartTransition</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>checked<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>          <span class=\"token punctuation\">/></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>          useTransition</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>          <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>range<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>          <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span>rangeValue<span class=\"token punctuation\">&#125;</span></span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>          <span class=\"token attr-name\">min</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>          <span class=\"token attr-name\">max</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">10000</span><span class=\"token punctuation\">&#125;</span></span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>          <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token value css language-css\">&lt;!--swig￼5--</span></span></span><span class=\"token punctuation\">></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>          onChange=<span class=\"token punctuation\">&#123;</span>handleChange<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        /></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">进度条 </span><span class=\"token punctuation\">&#123;</span>rangeValue<span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span>jsx<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  )</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>&#125;</pre></td></tr></table></figure><h3 id=\"17214-usesyncexternalstore\"><a class=\"anchor\" href=\"#17214-usesyncexternalstore\">#</a> 17.2.14 useSyncExternalStore</h3>\n<p>React18 的 beta 版本将 <code>useMutableSource</code>  更新为了 <code>useSyncExternalStore</code> ，这个新的 api 将会对 React 的各种状态管理库产生非常大的影响，下面我来介绍 <code>useSyncExternalStore</code>  的用法和场景。</p>\n<p>我们可以通过这个 api 自行设计一个 redux + react-redux 的数据方案：</p>\n<p><strong>1、设计 store</strong></p>\n<p>首先我们要设计一个 store，它必须有如下属性：</p>\n<ul>\n<li>currentState: 当前状态</li>\n<li>subscribe: 提供状态发生变化时的订阅能力</li>\n<li>getSnapshot: 获取当前状态</li>\n</ul>\n<p>以及改变 state 的方法，这里参考 redux，设计了 dispatch、reducer</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token literal-property property\">currentState</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token literal-property property\">listeners</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">action</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">case</span> <span class=\"token string\">'ADD'</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span>store<span class=\"token punctuation\">.</span>currentState<span class=\"token punctuation\">.</span>data<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token keyword\">return</span> store<span class=\"token punctuation\">.</span>state</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">l</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        store<span class=\"token punctuation\">.</span>listeners<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token function\">getSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">return</span> store<span class=\"token punctuation\">.</span>currentState</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        store<span class=\"token punctuation\">.</span>currentState <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        store<span class=\"token punctuation\">.</span>listeners<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">l</span><span class=\"token operator\">=></span><span class=\"token function\">l</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">return</span> action<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>2、应用 store 同步组件状态</strong></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useSyncExternalStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./store'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">UseSyncExternalStoreDemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token function\">useSyncExternalStore</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span>subscribe<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">count: </span><span class=\"token punctuation\">&#123;</span>state<span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span>store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span><span class=\"token string\">'ADD'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">add+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"17215-useinsertioneffect\"><a class=\"anchor\" href=\"#17215-useinsertioneffect\">#</a> 17.2.15 useInsertionEffect</h3>\n<p><code>useInsertionEffect</code>  与 useEffect 相同，在所有 DOM 变更之前同步触发。在使用 useLayoutEffect 读取布局之前，使用这个函数将样式注入到 DOM 中。因为这个钩子的作用域是有限的，所以这个钩子不能访问 refs，也不能调度更新。</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useInsertionEffect<span class=\"token punctuation\">,</span> useEffect<span class=\"token punctuation\">,</span> useLayoutEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">UseInsertionEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">useInsertionEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'useInsertionEffect'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// const style = document.createElement('style')</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// style.innerHTML = '.box &#123; color: red &#125;'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// document.head.appendChild(style)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'useEffect'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 3</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token function\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'useLayoutEffect'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 2</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">UseInsertionEffect</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"173-自定义hooks\"><a class=\"anchor\" href=\"#173-自定义hooks\">#</a> 17.3 自定义 hooks</h2>\n<p>以 use 开头的小驼峰式的函数</p>\n",
            "tags": [
                "react学习",
                "react"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/react-study/6/",
            "url": "https://www.yexingcheng.com/react-study/6/",
            "title": "React学习第六天",
            "date_published": "2022-08-05T16:00:00.000Z",
            "content_html": "<h1 id=\"十四-上下文context\"><a class=\"anchor\" href=\"#十四-上下文context\">#</a> 十四、上下文 Context</h1>\n<h2 id=\"141-理解上下文-作用及其特点\"><a class=\"anchor\" href=\"#141-理解上下文-作用及其特点\">#</a> 14.1 理解上下文、作用及其特点</h2>\n<p>Context 提供了一个无需为每层组件手动添加 props，就能在组件树间进行数据传递的方法。</p>\n<p>Context 设计目的是为了共享那些对于一个组件树而言是 “全局” 的数据，例如当前认证的用户、主题或首选语言。</p>\n<p>Context 主要应用场景在于<em>很多</em>不同层级的组件需要访问同样一些的数据。请谨慎使用，因为这会使得组件的复用性变差。</p>\n<h2 id=\"142-使用reactcreatecontext\"><a class=\"anchor\" href=\"#142-使用reactcreatecontext\">#</a> 14.2 使用 React.createContext ()</h2>\n<h3 id=\"1421-逐层传递数据\"><a class=\"anchor\" href=\"#1421-逐层传递数据\">#</a> 14.2.1 逐层传递数据</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">/</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./09_context/01_App_next_value'</span> <span class=\"token comment\">// 逐层传递数据</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/09_context/01_App_next_value.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Third</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">third</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>val <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Second</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">second</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      &lt;Third val = <span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>val <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">/></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">First</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">first</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Second</span></span> <span class=\"token attr-name\">val</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>val <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">First</span></span> <span class=\"token attr-name\">val</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>传家宝<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"1422-使用context传值\"><a class=\"anchor\" href=\"#1422-使用context传值\">#</a> 14.2.2 使用 Context 传值</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./09_context/02_App_context'</span> <span class=\"token comment\">// 上下文对象 Context 传值</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/09_context/02_App_context.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 创建上下文对象 - 首字母大写，大驼峰式命名</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> LangContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 3.3 使用上下文对象的 Consumer 组件来获取值，需要组件内容写一个回调函数，回调函数参数即为祖先组件传递的值</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 发现第三种写法看似麻烦，但是如果祖先组件给后代组件通过多个上下文对象传递很多个数据时就很有用了，而前两种方法显得无能为力</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Third</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">third</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LangContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>              <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">语言为： </span><span class=\"token punctuation\">&#123;</span> val <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>              <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LangContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Second</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Second</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Third</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">First</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">First</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Second</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'zh'</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'zh'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">中文</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">英文</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 2. 祖先组件通过 上下文对象的 Provider 组件 配合 value 进行传值 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LangContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">First</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LangContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"1423-传递多个值\"><a class=\"anchor\" href=\"#1423-传递多个值\">#</a> 14.2.3 传递多个值</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./09_context/03_App_context_multiple_value'</span> <span class=\"token comment\">// 上下文对象 Context 传值 多个上下文对象传递数据</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/09_context/03_App_context_multiple_value.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 创建上下文对象 - 首字母大写，大驼峰式命名</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> LangContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> ColorContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Third</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">third</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ColorContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token punctuation\">(</span><span class=\"token parameter\">color</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>              <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LangContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                      <span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                          <span class=\"token operator\">&lt;</span>div style <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>swig￼<span class=\"token number\">0</span><span class=\"token operator\">--</span><span class=\"token operator\">>></span>语言为： <span class=\"token punctuation\">&#123;</span> val <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                        <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LangContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>              <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ColorContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Second</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Second</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Third</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">First</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">First</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Second</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'zh'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#f66'</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'zh'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">中文</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">英文</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        &lt;input type=\"color\"  value=<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>color <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> onChange= </span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>            <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value</pre></td></tr><tr><td data-num=\"67\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">/></span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 2. 祖先组件通过 上下文对象的 Provider 组件 配合 value 进行传值 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LangContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>          &lt;ColorContext.Provider value = <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>color <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">First</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ColorContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LangContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre></pre></td></tr><tr><td data-num=\"80\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>上述案例，还可以通过一个上下文对象传递多个值</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./09_context/04_App_one_context_multiple_value'</span> <span class=\"token comment\">// 上下文对象 Context 传值 1 个上下文对象传递多个数据</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/09_context/04_App_one_context_multiple_value.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 创建上下文对象 - 首字母大写，大驼峰式命名</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> MyContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 3.3 使用上下文对象的 Consumer 组件来获取值，需要组件内容写一个回调函数，回调函数参数即为祖先组件传递的值</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 发现第三种写法看似麻烦，但是如果祖先组件给后代组件通过多个上下文对象传递很多个数据时就很有用了，而前两种方法显得无能为力</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Third</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">third</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>              <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token operator\">&lt;</span>div style <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>swig￼<span class=\"token number\">1</span><span class=\"token operator\">--</span><span class=\"token operator\">>></span><span class=\"token number\">3</span>语言为： <span class=\"token punctuation\">&#123;</span> val<span class=\"token punctuation\">.</span>lang <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>              <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Second</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Second</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Third</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">First</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">First</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Second</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'zh'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#f66'</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'zh'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">中文</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">英文</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        &lt;input type=\"color\"  value=<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>color <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> onChange= </span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>            <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">/></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 2. 祖先组件通过 上下文对象的 Provider 组件 配合 value 进行传值 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>          <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>          <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>color</pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">First</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre></pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>如果遇到函数式组件如何获取 Context 的值</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./09_context/05_App_function_context_value'</span> <span class=\"token comment\">// 上下文对象 Context 传值 函数式组件获取值</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/09_context/05_App_function_context_value.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useContext <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 1. 创建上下文对象 - 首字母大写，大驼峰式命名</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> LangContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 3.3 使用上下文对象的 Consumer 组件来获取值，需要组件内容写一个回调函数，回调函数参数即为祖先组件传递的值</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 发现第三种写法看似麻烦，但是如果祖先组件给后代组件通过多个上下文对象传递很多个数据时就很有用了，而前两种方法显得无能为力</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Third</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">third</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LangContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>              <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">语言为： </span><span class=\"token punctuation\">&#123;</span> val <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>              <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LangContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">// 4. 如果后代组件是函数式组件，可以有两种写法</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\">// 4.1 使用上下文对象.Consumer 完成传值</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Second</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Second</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LangContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>              <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Second - 语言为： </span><span class=\"token punctuation\">&#123;</span> val <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>              <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LangContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Third</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token comment\">// 4.2 可以使用 useContext hooks 来获取值</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">First</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token keyword\">const</span> lang <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>LangContext<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  <span class=\"token comment\">// const color = useContext(ColorContext)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">First</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">First - 语言为： </span><span class=\"token punctuation\">&#123;</span> lang <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Second</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'zh'</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'zh'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">中文</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">英文</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 2. 祖先组件通过 上下文对象的 Provider 组件 配合 value 进行传值 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LangContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">First</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LangContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre></pre></td></tr><tr><td data-num=\"78\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>如果浏览器安装过 react 的开发者工具，打开之后发现上述代码，都显示为  <code>Context.Provider</code>  和  <code>Context.Consumer</code> , 不好区分</p>\n<p>加入 上下文对象的  <code>displayName</code></p>\n</blockquote>\n<h3 id=\"1424-displayname\"><a class=\"anchor\" href=\"#1424-displayname\">#</a> 14.2.4 displayName</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./09_context/06_App_context_displayName'</span> <span class=\"token comment\">// 上下文对象 Context 传值 开发者工具显示 Context 名称</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/09_context/06_App_context_displayName.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 创建上下文对象 - 首字母大写，大驼峰式命名</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> LangContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> ColorContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>LangContext<span class=\"token punctuation\">.</span>displayName <span class=\"token operator\">=</span> <span class=\"token string\">'LangContext'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ColorContext<span class=\"token punctuation\">.</span>displayName <span class=\"token operator\">=</span> <span class=\"token string\">'ColorContext'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 3. 如果后代组件是类组件，可以有三种方式接收祖先组件的传递的值</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">//   3.1 定义好组件后 通过  组件.contextType = 上下文对象，这样就可以在组件中通过 this.context 获取到 组件组件的数据</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">//   3.2 使用类的静态属性 contextType 等于上下文对象，然后通过 this.context 获取值</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">//   3.3 使用上下文对象的 Consumer 组件来获取值，需要组件内容写一个回调函数，回调函数参数即为祖先组件传递的值</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">// 发现第三种写法看似麻烦，但是如果祖先组件给后代组件通过多个上下文对象传递很多个数据时就很有用了，而前两种方法显得无能为力</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Third</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">third</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ColorContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token punctuation\">(</span><span class=\"token parameter\">color</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>              <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LangContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                      <span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                          <span class=\"token operator\">&lt;</span>div style <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>swig￼<span class=\"token number\">2</span><span class=\"token operator\">--</span><span class=\"token operator\">>></span>语言为： <span class=\"token punctuation\">&#123;</span> val <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                        <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LangContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>              <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ColorContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Second</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Second</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Third</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">First</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">First</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Second</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre></pre></td></tr><tr><td data-num=\"63\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'zh'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#f66'</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'zh'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">中文</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">英文</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>        &lt;input type=\"color\"  value=<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>color <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> onChange= </span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>            <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value</pre></td></tr><tr><td data-num=\"76\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">/></span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 2. 祖先组件通过 上下文对象的 Provider 组件 配合 value 进行传值 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LangContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>          &lt;ColorContext.Provider value = <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>color <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">First</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ColorContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LangContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre></pre></td></tr><tr><td data-num=\"89\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"143-常见应用场景解读\"><a class=\"anchor\" href=\"#143-常见应用场景解读\">#</a> 14.3 常见应用场景解读</h2>\n<ul>\n<li>共享那些对于一个组件树而言是 “全局” 的数据，例如当前认证的用户、主题或首选语言</li>\n<li>配合 <code>react hooks</code>  中的 <code>useReducer</code>  可以实现轻量的  <code>redux</code></li>\n</ul>\n<h1 id=\"十五-高阶组件\"><a class=\"anchor\" href=\"#十五-高阶组件\">#</a> 十五、高阶组件</h1>\n<p>高阶组件（HOC）是 React 中用于复用组件逻辑的一种高级技巧。</p>\n<p>HOC 自身不是 React API 的一部分，它是一种基于 React 的组合特性而形成的设计模式。</p>\n<p>具体而言，<strong>高阶组件是参数为组件，返回值为新组件的函数。</strong></p>\n<h2 id=\"151-理解高阶组件-作用及其特点\"><a class=\"anchor\" href=\"#151-理解高阶组件-作用及其特点\">#</a> 15.1 理解高阶组件、作用及其特点</h2>\n<p>一个高阶组件只是一个包装了另外一个 React 组件的 函数。<br>\n这种形式通常实现为一个函数，本质上是一个类工厂。</p>\n<p>. 实现了对原有组件的 <code>增强和优化</code> 。</p>\n<p>可以对原有 <code>组件</code> 中的 state, props 和逻辑执行增删改操作，一般用于代码 <code>重用</code> 和组件 <code>增强优化</code></p>\n<h2 id=\"152-高阶组件语法详解\"><a class=\"anchor\" href=\"#152-高阶组件语法详解\">#</a> 15.2 高阶组件语法详解</h2>\n<p>我们想要我们的组件通过自动注入一个版权信息</p>\n<h3 id=\"1521-组件嵌套\"><a class=\"anchor\" href=\"#1521-组件嵌套\">#</a> 15.2.1 组件嵌套</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./10_hoc/01_App-more-use'</span> <span class=\"token comment\">// 高阶组件 多个组件引入同一个组件</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/10_hoc/01_App-more-use.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Footer</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        Copyright © 2022 Meta Platforms, Inc.</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>footer</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Page1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">userName</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">userName</span><span class=\"token operator\">:</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'userName'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">page1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Footer</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Page2</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">userName</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">userName</span><span class=\"token operator\">:</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'userName'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">page2</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Footer</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Page3</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">userName</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">userName</span><span class=\"token operator\">:</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'userName'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">page3</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Footer</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Page1</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Page2</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Page3</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre></pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>通过 <code>Footer</code>  组件可以复用 jsx 代码，但是其余的业务逻辑代码显得无能为力，可以通过高阶组件来实现</p>\n</blockquote>\n<h3 id=\"1522-高阶组件\"><a class=\"anchor\" href=\"#1522-高阶组件\">#</a> 15.2.2 高阶组件</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./10_hoc/02_App-more-use-hoc'</span> <span class=\"token comment\">// 高阶组件 高阶组件</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/10_hoc/02_App-more-use-hoc.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'userName'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'吴大勋'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Footer</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        Copyright © 2022 Meta Platforms, Inc.</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>footer</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">// 高阶组件的本质是一个函数，将一个组件作为参数，返回一个新的组件</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">withFooter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">Com</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> Component <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 此处可以省略新组件的名称</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">// 写公共部分的业务逻辑</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">userName</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'0000'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">userName</span><span class=\"token operator\">:</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'userName'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 实际上此操作相当于完成父组件给子组件传值</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>          &lt;Com userName = <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>userName <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">/></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Footer</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Page1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token comment\">// state = &#123; userName: ''&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token comment\">// componentDidMount () &#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token comment\">//   this.setState(&#123; userName: localStorage.getItem('userName') &#125;)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1111'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* &lt;h1>page1 - &#123; this.state.userName &#125;&lt;/h1> */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">page1 - </span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>userName <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* &lt;Footer /> */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>Page1 <span class=\"token operator\">=</span> <span class=\"token function\">withFooter</span><span class=\"token punctuation\">(</span>Page1<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Page2</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token comment\">// state = &#123; userName: ''&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>  <span class=\"token comment\">// componentDidMount () &#123;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token comment\">//   this.setState(&#123; userName: localStorage.getItem('userName') &#125;)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>  <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* &lt;h1>page2 - &#123; this.state.userName &#125;&lt;/h1> */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">page2 - </span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>userName <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* &lt;Footer /> */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>Page2 <span class=\"token operator\">=</span> <span class=\"token function\">withFooter</span><span class=\"token punctuation\">(</span>Page2<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Page3</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>  <span class=\"token comment\">// state = &#123; userName: ''&#125;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>  <span class=\"token comment\">// componentDidMount () &#123;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>  <span class=\"token comment\">//   this.setState(&#123; userName: localStorage.getItem('userName') &#125;)</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>  <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* &lt;h1>page3 - &#123; this.state.userName &#125;&lt;/h1> */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">page3 - </span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>userName <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* &lt;Footer /> */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>Page3 <span class=\"token operator\">=</span> <span class=\"token function\">withFooter</span><span class=\"token punctuation\">(</span>Page3<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre></pre></td></tr><tr><td data-num=\"88\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Page1</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Page2</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Page3</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre></pre></td></tr><tr><td data-num=\"102\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>先执行了 组件的生命周期，后执行了高阶组件的生命周期</p>\n<p>但是以后再复用组件的业务时，可以选用函数式组件的自定义 hooks</p>\n</blockquote>\n<h2 id=\"153-常见应用场景解读\"><a class=\"anchor\" href=\"#153-常见应用场景解读\">#</a> 15.3 常见应用场景解读</h2>\n<p>1. 需要代码重用时，react 如果有多个组件都用到了 <code>同一段逻辑</code> ，这时，就可以把共同的逻辑部分提取出来，利用高阶组件的形式将这段逻辑整合到每一个组件中，从而减少代码的逻辑重复</p>\n<p>2. 需要组件 <code>增强优化时</code> ，比如我们在项目中使用的组件有些不是自己写的，而是从网上撸下来的，但是 <code>第三方</code> 写的组件可能比较复杂，有时不能完全满足需求，但第三方组件不易修改，此时也可以用高阶组件，在不修改原始组件的前提下，对组件添加满足实际开发需求的功能</p>\n<p>3. 可以对原有 <code>组件</code> 中的 state, props 和逻辑执行增删改操作，一般用于代码 <code>重用</code> 和组件 <code>增强优化</code></p>\n<p>4. 也可以用来替换  <code>mixins</code>  混入</p>\n<blockquote>\n<p>父组件和高阶组件有什么区别？</p>\n<ul>\n<li>首先从逻辑的执行流程上来看，高阶组件确实和父组件比较相像</li>\n<li>但是 <code>高阶</code> 组件强调的是 <code>逻辑</code> 的抽象。高阶组件是一个 <code>函数</code> ，函数关注的是逻辑；</li>\n<li><code>父组件</code> 是一个组件，组件主要关注的是 <code>UI/DOM</code> 。如果逻辑是与 DOM 直接相关的，那么这部分逻辑适合放到父组件中实现；</li>\n<li>如果逻辑是与 DOM 不直接相关的，那么这部分逻辑适合使用高阶组件抽象，如数据校验、请求发送等。</li>\n</ul>\n</blockquote>\n<h1 id=\"十六-ref\"><a class=\"anchor\" href=\"#十六-ref\">#</a> 十六、ref</h1>\n<p>Refs 提供了一种方式，允许我们访问 DOM 节点或在 render 方法中创建的 React 元素。</p>\n<h2 id=\"161-ref访问dom\"><a class=\"anchor\" href=\"#161-ref访问dom\">#</a> 16.1 ref 访问 DOM</h2>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./11_ref/01_App_ref'</span> <span class=\"token comment\">//ref 的使用以及严格模式</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token comment\">// 开启 React 的严格模式</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token comment\">// https://react.docschina.org/docs/strict-mode.html</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">//react 18 为严格模式引入了一个全新的仅用于开发环境的检查操作。</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// 每当第一次安装组件时，这个新的检查将自动卸载并重新安装每个组件，并在第二次挂载时恢复之前的 state。</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">// 慎用严格模式</span></pre></td></tr></table></figure><p><code>src/11_ref/01_App_ref.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// this.setState(&#123; // Object.assign(&#123;&#125;)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">//   count: this.state.count + 1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//state 拿到的最新的值</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'btn1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'refs'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refs<span class=\"token punctuation\">.</span>btn2<span class=\"token punctuation\">)</span> <span class=\"token comment\">//refs 已经被废弃，但是没有移除，严格模式下会报警告信息</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token comment\">//componentWillMount () &#123;&#125; // 警告：被重命名</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token comment\">// UNSAFE_componentWillMount () &#123;&#125; // 严格模式下识别不安全的生命周期</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 如果开启严格模式并且使用函数形式修改状态，输出结果为 3 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>btn1<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">按钮1-id</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>btn2<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">按钮2-refs - 废弃</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./11_ref/02_App_ref'</span> <span class=\"token comment\">//ref 的使用以及严格模式</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/11_ref/02_App_ref.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Com</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'类组件'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token function-variable function\">testFn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">'!!!!!!!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">类组件ref的使用</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">FunCom</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">函数式组件ref</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  btn3Ref <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 创建一个唯一的 ref</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  comRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  funRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'btn1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'refs'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refs<span class=\"token punctuation\">.</span>btn2<span class=\"token punctuation\">)</span> <span class=\"token comment\">//refs 已经被废弃，但是没有移除，严格模式下会报警告信息</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'domCreateRef'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>btn3Ref<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'comCreateRef'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>comRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'FuncomCreateRef'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>funRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token comment\">// null</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>btn1<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">按钮1-id</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>btn2<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">按钮2-refs - 废弃</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>btn3Ref <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">按钮2 - createRef </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 父组件可以直接通过 ref 获取 子组件的实例 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        &lt;Com ref = <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>comRef <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Com</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 函数式组件没有实例，获取不到子组件实例 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        &lt;FunCom ref = <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>funRef <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">FunCom</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>如果在上述案例中，在 <code>FunCom</code>  组件中上使用 ref，发现报了警告信息</p>\n<p>Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?</p>\n<p>其原因是，函数式组件使用 ref，<strong>必须使用 React.forwardRef () 方法二次包装</strong></p>\n</blockquote>\n<h2 id=\"162-详解ref转发\"><a class=\"anchor\" href=\"#162-详解ref转发\">#</a> 16.2 详解 ref 转发</h2>\n<p><strong>Ref 转发是一个可选特性，其允许某些组件接收  <code>ref</code> ，并将其向下传递（换句话说，“转发” 它）给子组件。</strong></p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./11_ref/03_App_ref_forward'</span> <span class=\"token comment\">// 转发 ref</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/11_ref/03_App_ref_forward.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Com</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'类组件'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token function-variable function\">testFn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">'!!!!!!!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">类组件ref的使用</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">const</span> FunCom <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span>ref<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">函数式组件ref</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">const</span> Form <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span>ref<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>userName<span class=\"token punctuation\">'</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>password<span class=\"token punctuation\">'</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>提交<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* &lt;input type=\"reset\" value=\"重置\" /> */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  btn3Ref <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 创建一个唯一的 ref</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  comRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  funRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  formRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'btn1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'refs'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refs<span class=\"token punctuation\">.</span>btn2<span class=\"token punctuation\">)</span> <span class=\"token comment\">//refs 已经被废弃，但是没有移除，严格模式下会报警告信息</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'domCreateRef'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>btn3Ref<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'comCreateRef'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>comRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'FuncomCreateRef'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>funRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token comment\">// </span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token comment\">// 直接给 form 表单设置初始值</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>formRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">)</span> <span class=\"token comment\">// </span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setFieldValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      <span class=\"token literal-property property\">userName</span><span class=\"token operator\">:</span> <span class=\"token string\">'吴大勋'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">'123456'</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token function-variable function\">setFieldValue</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>formRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>userName </pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>formRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>password </pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>btn1<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">按钮1-id</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>btn2<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">按钮2-refs - 废弃</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>btn3Ref <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">按钮2 - createRef </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 父组件可以直接通过 ref 获取 子组件的实例 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        &lt;Com ref = <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>comRef <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Com</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* 函数式组件没有实例，获取不到子组件实例 */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        &lt;FunCom ref = <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>funRef <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">FunCom</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Form</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>formRef<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Form</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>formRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>formRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">重置表单</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre></pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"163-使用ref注意事项\"><a class=\"anchor\" href=\"#163-使用ref注意事项\">#</a> 16.3 使用 ref 注意事项</h2>\n<ul>\n<li>\n<p>当  <code>ref</code>  属性用于 HTML 元素时，使用  <code>React.createRef()</code>  创建的  <code>ref</code>  接收底层 DOM 元素作为其  <code>current</code>  属性。</p>\n</li>\n<li>\n<p>当  <code>ref</code>  属性用于自定义 class 组件时， <code>ref</code>  对象接收组件的挂载实例作为其  <code>current</code>  属性。</p>\n</li>\n<li>\n<p><strong>你不能在函数组件上使用  <code>ref</code>  属性</strong>，因为他们没有实例。如果非要使用，实际上是转发 ref（父组件中获取到了子组件的某个 DOM）</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWFjdC5kb2NzY2hpbmEub3JnL2RvY3MvaG9va3MtcmVmZXJlbmNlLmh0bWwjdXNlZGVidWd2YWx1ZQ==\">https://react.docschina.org/docs/hooks-reference.html#usedebugvalue</span>)</p>\n</li>\n</ul>\n",
            "tags": [
                "react学习",
                "react"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/react-study/5/",
            "url": "https://www.yexingcheng.com/react-study/5/",
            "title": "React学习第五天",
            "date_published": "2022-08-04T16:00:00.000Z",
            "content_html": "<h1 id=\"九-条件渲染\"><a class=\"anchor\" href=\"#九-条件渲染\">#</a> 九、条件渲染</h1>\n<p>在 React 中，你可以创建不同的组件来封装各种你需要的行为。然后还可以根据应用的状态变化只渲染其中的一部分。</p>\n<p>React 中的条件渲染和 JavaScript 中的一致，使用 JavaScript 操作符 if 或条件运算符来创建表示当前状态的元素，然后让 React 根据它们来更新 UI。</p>\n<h2 id=\"91\"><a class=\"anchor\" href=\"#91\">#</a> 9.1 &amp;&amp;</h2>\n<p>你可以通过用花括号包裹代码在 JSX 中嵌入任何表达式 ，也包括 JavaScript 的逻辑与 &amp;&amp;，它可以方便地条件渲染一个元素。</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">/</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./04_condition/01_App_condition_yu'</span> <span class=\"token comment\">// 条件渲染 &amp;&amp;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/04_condition/01_App_condition_yu.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">MainBox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>unReadMessage<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">还有</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>unReadMessage<span class=\"token punctuation\">.</span>length <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">条未读消息</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'d'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>              <span class=\"token operator\">&lt;</span>p key <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> index <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                <span class=\"token punctuation\">&#123;</span> item <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                  <span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>message <span class=\"token comment\">// 获取数据</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                  arr<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 处理数据</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 修改状态</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                    <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> arr</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">已读</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        &lt;MainBox unReadMessage = <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>message <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> ></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MainBox</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"92-三元运算符\"><a class=\"anchor\" href=\"#92-三元运算符\">#</a> 9.2 三元运算符</h2>\n<p>条件渲染的另一种方法是使用 JavaScript 的条件运算符:</p>\n<pre><code>condition ? true : false。\n</code></pre>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./04_condition/02_App_condition_san'</span> <span class=\"token comment\">// 条件渲染 三元运算符</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/04_condition/02_App_condition_san.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">loginState</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>loginState <span class=\"token operator\">+</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">loginState</span><span class=\"token operator\">:</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>loginState <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">切换</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>loginState <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">退出</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span> <span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">登录</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token comment\">// render() &#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token comment\">//   if (this.state.loginState) &#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token comment\">//     return (</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token comment\">//       &lt;div></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token comment\">//         &#123; this.state.loginState + '' &#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token comment\">//         &lt;button onClick=&#123;() => &#123; this.setState (&#123; loginState: !this.state.loginState &#125;) &#125; &#125;> 切换 & lt;/button></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token comment\">//          &lt;button > 退出 & lt;/button></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token comment\">//       &lt;/div></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token comment\">//     );</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token comment\">//   &#125; else &#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token comment\">//     return (</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token comment\">//       &lt;div></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token comment\">//         &#123; this.state.loginState + '' &#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token comment\">//         &lt;button onClick=&#123;() => &#123; this.setState (&#123; loginState: !this.state.loginState &#125;) &#125; &#125;> 切换 & lt;/button></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token comment\">//          &lt;button > 登录 & lt;/button></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token comment\">//       &lt;/div></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token comment\">//     )</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token comment\">//   &#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token comment\">// render () &#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token comment\">//   // let test = null</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token comment\">//   // if (this.state.loginState) &#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token comment\">//   //   test = &lt;button > 退出 & lt;/button></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token comment\">//   // &#125; else &#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token comment\">//   //   test = &lt;button > 登录 & lt;/button></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token comment\">//   // &#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token comment\">//   const test = this.state.loginState ? &lt;button > 退出 & lt;/button> : &lt;button > 登录 & lt;/button></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  <span class=\"token comment\">//   return (</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token comment\">//     &lt;div></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  <span class=\"token comment\">//       &#123; this.state.loginState + '' &#125;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  <span class=\"token comment\">//       &lt;button onClick=&#123;() => &#123; this.setState (&#123; loginState: !this.state.loginState &#125;) &#125; &#125;> 切换 & lt;/button></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token comment\">//       &#123; test &#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  <span class=\"token comment\">//     &lt;/div></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token comment\">//   )</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"93-动态classname\"><a class=\"anchor\" href=\"#93-动态classname\">#</a> 9.3 动态 className</h2>\n<p>Vue 中有很方便的<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5jc2RuLm5ldC9zby9zZWFyY2g/cT0lRTUlOEElQTglRTYlODAlODElRTclQkIlOTElRTUlQUUlOUEmYW1wO3NwbT0xMDAxLjIxMDEuMzAwMS43MDIw\">动态绑定</span> class 属性的方式，v-bind:class, 那么 react 怎么实现这样的效果呢？</p>\n<blockquote>\n<p><code>&lt;button class=&quot;btn btn-success btn-sm&quot;&gt;&lt;/button&gt;</code></p>\n<p><code>&lt;button class=&quot;btn btn-danger btn-sm&quot;&gt;&lt;/button&gt;</code></p>\n<p><code>&lt;button class=&quot;btn btn-warning btn-sm&quot;&gt;&lt;/button&gt;</code></p>\n</blockquote>\n<p><code>&#123; this.state.type === 'success' ? 'btn btn-success btn-sm' : 'btn btn-sm'&#125;</code></p>\n<p>通过 classnames 这个插件可以实现</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ cnpm i classnames <span class=\"token parameter variable\">-S</span></pre></td></tr></table></figure><p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./04_condition/03_App_condition_classname'</span> <span class=\"token comment\">// 条件渲染 动态的 class</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/04_condition/03_App_condition_classname.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> classnames <span class=\"token keyword\">from</span> <span class=\"token string\">'classnames'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">size</span><span class=\"token operator\">:</span> <span class=\"token string\">'sm'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>          <span class=\"token function\">classnames</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token string-property property\">'btn'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token string-property property\">'btn-sm'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>size <span class=\"token operator\">===</span> <span class=\"token string\">'sm'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token string-property property\">'btn-success'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'default'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">default</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>          <span class=\"token function\">classnames</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token string-property property\">'btn'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token string-property property\">'btn-md'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>size <span class=\"token operator\">===</span> <span class=\"token string\">'md'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token string-property property\">'btn-success'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'success'</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">success md</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>补充：</p>\n<ul>\n<li><strong>css-in-js</strong></li>\n</ul>\n<pre><code>$ cnpm i styled-components -S\n</code></pre>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr></table></figure></blockquote>\n<blockquote>\n<p>import App from './04_condition/04_App_condition_cssinjs' // cssInJs</p>\n<p>const root = ReactDOM.createRoot(document.getElementById('root'))</p>\n<p>// 标签形式调用<br>\n root.render (&lt;App /&gt;)</p>\n<pre><code>\n`src/04_condition/04_App_condition_cssinjs.jsx`\n\n```jsx\nimport React, &#123; Component &#125; from 'react';\nimport styled from 'styled-components'\n\n// css-in-js 内部写的都是纯css\nconst ODiv = styled.div`\n  font-size: 30px;\n  color: #f66\n`\nconst Button = styled.button`\n  padding: 10px 30px;\n\n`\nclass App extends Component &#123;\n  render() &#123;\n    return (\n      &lt;div&gt;\n        &lt;ODiv&gt;你好&lt;/ODiv&gt;\n        &lt;Button&gt;按钮&lt;/Button&gt;\n      &lt;/div&gt;\n    );\n  &#125;\n&#125;\n\nexport default App;\n</code></pre>\n<ul>\n<li><strong>模块化 css</strong></li>\n</ul>\n<blockquote>\n<p>可以解决类似于 vue 中 scoped</p>\n</blockquote>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./04_condition/05_App_module_css'</span> <span class=\"token comment\">// 模块化 css</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/04_condition/05_App_module_css.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// import './style.module.css'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> style <span class=\"token keyword\">from</span> <span class=\"token string\">'./style.module.css'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token comment\">// &lt;div className='container'></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token comment\">//   &lt;div className=\"header\">&lt;/div></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token comment\">//   &lt;div className=\"box\">&lt;/div></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token comment\">//   &lt;div className=\"footer\">&lt;/div></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token comment\">// &lt;/div></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> style<span class=\"token punctuation\">.</span>container <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> style<span class=\"token punctuation\">.</span>header <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> style<span class=\"token punctuation\">.</span>box <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> style<span class=\"token punctuation\">.</span>footer <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>src/04_condition/style.module.css</code></p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token selector\">.container</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token property\">flex-direction</span><span class=\"token punctuation\">:</span> column<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token selector\">.header</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 50px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #f66<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token selector\">.box</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token property\">flex</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token selector\">.footer</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 50px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #ccc<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></blockquote>\n<h2 id=\"94-动态style\"><a class=\"anchor\" href=\"#94-动态style\">#</a> 9.4 动态 style</h2>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./04_condition/06_App_style'</span> <span class=\"token comment\">// 动态 style</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/04_condition/06_App_style.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">size</span><span class=\"token operator\">:</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#333'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token literal-property property\">size</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>size <span class=\"token operator\">+</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">字号+2</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>color<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">&#125;</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">/></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        &lt;div style = <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>color <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          中国共产党第十九届中央委员会第七次全体会议9日上午在京召开。中央委员会总书记习近平代表中央政治局向全会作工作报告，并就十九届中央委员会向中国共产党第二十次全国代表大会的报告讨论稿向全会作了说明。王沪宁就《中国共产党章程（修正案）》讨论稿向全会作了说明。</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h1 id=\"十-列表渲染\"><a class=\"anchor\" href=\"#十-列表渲染\">#</a> 十、列表渲染</h1>\n<ul>\n<li>map () 方法、key</li>\n</ul>\n<p>使用 map () 方法遍历数组</p>\n<blockquote>\n<p>组件接收数组参数，每个列表元素分配一个 key，不然会出现警告 <strong>a key should be provided for list items</strong>，意思就是需要包含 key：</p>\n</blockquote>\n<p>Keys 可以在 DOM 中的某些元素被增加或删除的时候帮助 React 识别哪些元素发生了变化。因此你应当给数组中的每一个元素赋予一个确定的标识。</p>\n<p>一个元素的 key 最好是这个元素在列表中拥有的一个独一无二的字符串。通常，我们使用来自数据的 <code>id</code>  作为元素的 key</p>\n<p>当元素没有确定的 id 时，你可以使用他的序列号索引 <code> index</code>  作为 <code> key</code></p>\n<blockquote>\n<p>如果列表可以重新排序，我们不建议使用索引来进行排序，因为这会导致渲染变得很慢。</p>\n</blockquote>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./05_list/01_App_map'</span> <span class=\"token comment\">// 列表渲染 使用 map</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/05_list/01_App_map.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://121.89.205.189:3001/api/pro/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token literal-property property\">proList</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token comment\">// 边遍历边渲染</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token comment\">// render() &#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token comment\">//   const &#123; proList &#125; = this.state</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token comment\">//   return (</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token comment\">//     &lt;div></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token comment\">//       &#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token comment\">//         //proList &amp;&amp; proList.forEach ((item, index) => &#123; //forEach 没有返回值</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token comment\">//         //   return (</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token comment\">//         //     &lt;p key=&#123; item.proid &#125;>&#123;index + 1&#125; - &#123; item.proname &#125;&lt;/p></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token comment\">//         //   )</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token comment\">//         // &#125;)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token comment\">//         proList &amp;&amp; proList.map ((item, index) => &#123; //map 没有返回值</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token comment\">//           return (</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token comment\">//             &lt;p key=&#123; item.proid &#125;>&#123;index + 1&#125; - &#123; item.proname &#125;&lt;/p></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token comment\">//           )</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token comment\">//         &#125;)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token comment\">//       &#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token comment\">//     &lt;/div></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token comment\">//   );</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token comment\">// 先遍历后渲染 - 利用数组装填 jsx 代码思想</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>proList<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>      arr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proid <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> index <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> --- </span><span class=\"token punctuation\">&#123;</span> item<span class=\"token punctuation\">.</span>proname <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> arr <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>接口  <code>http://121.89.205.189:3001/api/city/sortCity</code></p>\n<p>实现多层遍历</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr></table></figure></blockquote>\n<blockquote>\n<p>import App from './05_list/02_App_mutiple_map' // 列表渲染 多层遍历</p>\n<p>const root = ReactDOM.createRoot(document.getElementById('root'))</p>\n<p>// 标签形式调用<br>\n root.render (&lt;App /&gt;)</p>\n<pre><code>\n`src/05_list/02_App_mutiple_map.jsx`\n\n```jsx\nimport React, &#123; Component &#125; from 'react';\n\nclass App extends Component &#123;\nstate = &#123;\n cityList: []\n&#125;\n\ncomponentDidMount () &#123;\n fetch('http://121.89.205.189:3001/api/city/sortCity').then(res =&gt; res.json()).then(res =&gt; &#123;\n   console.log(JSON.parse(res.data))\n   this.setState(&#123;\n     cityList: JSON.parse(res.data)\n   &#125;)\n &#125;)\n&#125;\nrender() &#123;\n const &#123; cityList &#125; = this.state\n return (\n   &lt;div&gt;\n     &lt;ul&gt;\n       &#123;\n         cityList &amp;&amp; cityList.map(item =&gt; &#123;\n           return (\n             &lt;li key = &#123; item.letter &#125;&gt;\n               &#123; item.letter &#125;\n               &lt;ol&gt;\n                 &#123;\n                   item.data &amp;&amp; item.data.map(itm =&gt; (\n                     &lt;li key = &#123; itm.cityId &#125;&gt; &#123; itm.name &#125;&lt;/li&gt;\n                   ))\n                 &#125;\n               &lt;/ol&gt;\n             &lt;/li&gt;\n           )\n         &#125;)\n       &#125;\n     &lt;/ul&gt;\n   &lt;/div&gt;\n );\n&#125;\n&#125;\n\nexport default App;\n</code></pre>\n</blockquote>\n<h1 id=\"十一-表单绑定\"><a class=\"anchor\" href=\"#十一-表单绑定\">#</a> 十一、表单绑定</h1>\n<p>在 React 里，HTML 表单元素的工作方式和其他的 DOM 元素有些不同，这是因为表单元素通常会保持一些内部的 state。例如这个纯 HTML 表单只接受一个名称：</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    名字:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>提交<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><blockquote>\n<p>此表单具有默认的 HTML 表单行为，即在用户提交表单后浏览到新页面。如果你在 React 中执行相同的代码，它依然有效。但大多数情况下，使用 JavaScript 函数可以很方便的处理表单的提交， 同时还可以访问用户填写的表单数据。实现这种效果的标准方式是使用 “受控组件”。</p>\n<p>表单元素的 value 值受 state 的控制</p>\n</blockquote>\n<h2 id=\"111-各种表单的绑定与取值\"><a class=\"anchor\" href=\"#111-各种表单的绑定与取值\">#</a> 11.1 各种表单的绑定与取值</h2>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./06_form/01_App_form'</span> <span class=\"token comment\">// 表单绑定 受控组件</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/06_form/01_App_form.jsx</code></p>\n<pre><code class=\"language-JSX\">import React, &#123; Component &#125; from 'react';\n\nclass App extends Component &#123;\n  state = &#123;\n    userName: '',\n    password: '',\n    sex: '女',\n    hobby: [],\n    lesson: 1,\n    note: '',\n    flag: false\n  &#125;\n  // handlerUserNameChange = (event) =&gt; &#123;\n  //   this.setState(&#123; userName: event.target.value &#125;)\n  // &#125;\n  // handlerPasswordChange = (event) =&gt; &#123;\n  //   this.setState(&#123; password: event.target.value &#125;)\n  // &#125;\n\n  // handlerChange = (type, event) =&gt; &#123;\n  //   this.setState(&#123; [type]: event.target.value &#125;)\n  // &#125;\n\n  handlerChange = (event) =&gt; &#123;\n    console.log(event.target.name)\n    this.setState(&#123; [event.target.name]: event.target.value &#125;)\n  &#125;\n\n  handlerHobbyChange = (event) =&gt; &#123;\n    const checked = event.target.checked\n    const value = event.target.value\n    const arr = this.state.hobby\n    // checked 为真选中，加入数组，为假 删除\n    if (checked) &#123;\n      arr.push(value)\n    &#125; else &#123;\n      const index = arr.findIndex(item =&gt; item === value)\n      arr.splice(index, 1)\n    &#125;\n    console.log(arr)\n    this.setState(&#123; hobby: arr &#125;)\n  &#125;\n\n  handlerFlagChange = (event) =&gt; &#123;\n    this.setState(&#123; flag: event.target.checked &#125;)\n  &#125;\n  render() &#123;\n    return (\n      &lt;div&gt;\n        &lt;div&gt;\n          &#123;/* &lt;input type=&quot;text&quot; placeholder='用户名' value=&#123; this.state.userName &#125; onChange = &#123; this.handlerUserNameChange &#125;/&gt; &#123; this.state.userName &#125; */&#125;\n          &#123;/* &lt;input type=&quot;text&quot; placeholder='用户名' value=&#123; this.state.userName &#125; onChange = &#123; this.handlerChange.bind(this, 'userName') &#125;/&gt; &#123; this.state.userName &#125; */&#125;\n          &lt;input type=&quot;text&quot; placeholder='用户名' name=&quot;userName&quot; value=&#123; this.state.userName &#125; onChange = &#123; this.handlerChange &#125;/&gt; &#123; this.state.userName &#125;\n        &lt;/div&gt;\n        &lt;div&gt;\n          &#123;/* &lt;input type=&quot;password&quot; placeholder='密码' value=&#123; this.state.password &#125; onChange = &#123; this.handlerPasswordChange &#125;/&gt; &#123; this.state.password &#125; */&#125;\n          &#123;/* &lt;input type=&quot;password&quot; placeholder='密码' value=&#123; this.state.password &#125; onChange = &#123; this.handlerChange.bind(this, 'password') &#125;/&gt; &#123; this.state.password &#125; */&#125;\n          &lt;input type=&quot;password&quot; placeholder='密码' name=&quot;password&quot; value=&#123; this.state.password &#125; onChange = &#123; this.handlerChange &#125;/&gt; &#123; this.state.password &#125;\n        &lt;/div&gt;\n        &lt;div&gt;\n          &lt;input type=&quot;radio&quot; value=&quot;男&quot; name=&quot;sex&quot; checked=&#123; this.state.sex === '男'&#125; onChange = &#123; this.handlerChange &#125;/&gt;男\n          &lt;input type=&quot;radio&quot; value=&quot;女&quot; name=&quot;sex&quot; checked=&#123; this.state.sex === '女'&#125; onChange = &#123; this.handlerChange &#125;/&gt;女 --- &#123; this.state.sex &#125;\n        &lt;/div&gt;\n        &lt;div&gt;\n          &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;🏀&quot; onChange=&#123; this.handlerHobbyChange &#125;/&gt;🏀\n          &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;⚽&quot; onChange=&#123; this.handlerHobbyChange &#125;/&gt;⚽\n          &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;🏐&quot; onChange=&#123; this.handlerHobbyChange &#125;/&gt;🏐\n          &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;🏓&quot; onChange=&#123; this.handlerHobbyChange &#125;/&gt;🏓 --- \n          &#123; \n            this.state.hobby &amp;&amp; this.state.hobby.map(item =&gt; &#123;\n              return &lt;span key = &#123; item &#125;&gt;&#123;item&#125;&lt;/span&gt;\n            &#125;) \n          &#125;\n        &lt;/div&gt;\n        &lt;div&gt;\n          &lt;select name=&quot;lesson&quot; value=&#123;this.state.lesson&#125; onChange=&#123; this.handlerChange &#125;&gt;\n            &lt;option value=&#123;1&#125;&gt;1阶段&lt;/option&gt;\n            &lt;option value=&#123;2&#125;&gt;2阶段&lt;/option&gt;\n            &lt;option value=&#123;3&#125;&gt;3阶段&lt;/option&gt;\n          &lt;/select&gt; --- &#123; this.state.lesson &#125;\n        &lt;/div&gt;\n        &lt;div&gt;\n          &lt;textarea name='note' value=&#123; this.state.note &#125; onChange = &#123; this.handlerChange &#125;&gt;&lt;/textarea&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n          &lt;input type=&quot;checkbox&quot; checked = &#123; this.state.flag &#125; onChange = &#123; this.handlerFlagChange &#125; /&gt; ***** 用户协议 -- &#123; this.state.flag + ''&#125;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    );\n  &#125;\n&#125;\n\nexport default App;\n</code></pre>\n<h2 id=\"112-受控表单以及受控组件\"><a class=\"anchor\" href=\"#112-受控表单以及受控组件\">#</a> 11.2 受控表单以及受控组件</h2>\n<p>在 HTML 中，表单元素（如 <code>&lt;input&gt;</code> 、  <code>&lt;textarea&gt;</code>  和  <code>&lt;select&gt;</code> ）之类的表单元素通常自己维护 state，并根据用户输入进行更新。而在 React 中，可变状态（mutable state）通常保存在组件的 state 属性中，并且只能通过使用 <a href=\"https://react.docschina.org/docs/react-component.html#setstate\"> <code>setState()</code> </a> 来更新。</p>\n<p>我们可以把两者结合起来，使 React 的 state 成为 “唯一数据源”。渲染表单的 React 组件还控制着用户输入过程中表单发生的操作。被 React 以这种方式控制取值的表单输入元素就叫做 “受控组件”。</p>\n<blockquote>\n<p><code>input</code> 、 <code>textarea</code> 、 <code>select</code>  受控组件： value 的属性受了  <code>state</code>  的控制</p>\n<ul>\n<li>使用了受控组件，一定要写  <code>value</code>  属性以及 <code>onChange</code>  事件</li>\n</ul>\n<p><code>radio</code> 、'checkbox' 受控组件: checked 的属性受了 <code>state</code>  的控制</p>\n<p>如果需要设置默认值，那么需要通过  <code>defaultValue</code>  以及 <code>defaultChecked</code>  设置</p>\n</blockquote>\n<p>案例如上</p>\n<h1 id=\"十二-状态提升\"><a class=\"anchor\" href=\"#十二-状态提升\">#</a> 十二、状态提升</h1>\n<p>在 React 中，将多个组件中需要共享的 state 向上移动到它们的最近共同父组件中，便可实现共享 state。这就是所谓的 “状态提升”。</p>\n<h2 id=\"121-父子组件通信\"><a class=\"anchor\" href=\"#121-父子组件通信\">#</a> 12.1 父子组件通信</h2>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./07_state_up/01_App-parent-child-value'</span> <span class=\"token comment\">// 状态提升 多组件数据共享</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/07_state_up/01_App-parent-child-value.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Child1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">child1组件</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">加1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Child2</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">child2组件</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">加1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Child1</span></span> <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Child1</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>hr</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Child2</span></span> <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Child2</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>我们发现 Child1 和 Child2 都是两个独立的个体，并没有实现数据共享</p>\n</blockquote>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./07_state_up/02_App_state_up'</span> <span class=\"token comment\">// 状态提升 多组件数据共享</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/07_state_up/02_App_state_up.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Child1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\">// state = &#123; count: 1 &#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">child1组件</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* &#123; this.state.count &#125; */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* &lt;button onClick=&#123;() => &#123; this.setState (&#123;count: this.state.count + 1&#125; ) &#125;&#125;> 加 1&lt;/button> */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>onClick <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">加1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Child2</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token comment\">// state = &#123; count: 1 &#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">child2组件</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>       <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* &#123; this.state.count &#125; */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>       <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* &lt;button onClick=&#123;() => &#123; this.setState (&#123;count: this.state.count + 1&#125; ) &#125;&#125;> 加 1&lt;/button> */</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>onClick <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">加1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        &lt;Child1 count = <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> onClick = </span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Child1</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>hr</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        &lt;Child2 count = <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> onClick = </span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>add <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Child2</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"122-状态提升解读\"><a class=\"anchor\" href=\"#122-状态提升解读\">#</a> 12.2 状态提升解读</h2>\n<p>实现方式是 利用最近的共同的父级组件中，用 <code>props</code>  的方式传过去到两个子组件， <code>props</code>  中传的是一个 <code>setState</code>  的方法，通过子组件触发 <code>props</code>  传过去的方法，进而调用父级组件的 <code>setState</code>  的方法，改变了父级组件的 <code>state</code> ，调用父级组件的 <code>add</code>  方法，进而同时改变了两个子级组件的 <code>数据</code> 。</p>\n<p>这是 两个有关连的<strong>同级组件</strong>的传值，因为 <code>react</code>  的单项数据流，所以不在两个组件中进行传值，而是提升到 最近的共同的父级组件中，改变父级的 <code>state</code> , 进而影响了两个子级组件的 <code>render</code> 。</p>\n<blockquote>\n<p>注意如果两个组件是同级组件（这两个组件的父组件是同一个）才考虑状态提升共享数据</p>\n</blockquote>\n<h1 id=\"十三-组合vs继承\"><a class=\"anchor\" href=\"#十三-组合vs继承\">#</a> 十三、组合 vs 继承</h1>\n<p>React 有十分强大的组合模式。我们推荐使用组合而非继承来实现组件间的代码重用。</p>\n<h2 id=\"131-理解组件化\"><a class=\"anchor\" href=\"#131-理解组件化\">#</a> 13.1 理解组件化</h2>\n<p><strong>组件化是 React 的核心思想</strong>：</p>\n<ul>\n<li>\n<p>组件化提供了一种抽象，让我们可以开发出一个个独立可复用的小组件来构造我们的应用。</p>\n</li>\n<li>\n<p>任何的应用都会被抽象成一颗组件树。</p>\n</li>\n</ul>\n<p><strong>组件化思想的应用</strong>：</p>\n<ul>\n<li>\n<p>有了组件化的思想，我们在之后的开发中就要充分的利用它。</p>\n</li>\n<li>\n<p>尽可能的将页面拆分成一个个小的、可复用的组件。</p>\n</li>\n<li>\n<p>这样让我们的代码更加方便组织和管理，并且扩展性也更强。</p>\n</li>\n</ul>\n<p><strong>React 的组件相对于 Vue 更加的灵活和多样，按照不同的方式可以分成很多类 组件</strong>：</p>\n<ul>\n<li>根据组件的定义方式，可以分为：函数组件 (Functional Component) 和类组件 (Class Component)；</li>\n</ul>\n<blockquote>\n<p>vue 中有没有类组件和函数式组件？vue2 中有</p>\n<pre><code class=\"language-vue\">&lt;template&gt;\n\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default &#123;\nprops:[],\ndata () &#123;\n\treturn &#123;&#125;\n&#125;\n&#125;\n&lt;/script&gt;\n</code></pre>\n<ul>\n<li>vue 中的函数式组件 - 无状态组件，所有的数据来源均来自父组件</li>\n</ul>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span> <span class=\"token attr-name\">functional</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ul>\n<li>vue 中的类组件 - 兼容 ts 时</li>\n</ul>\n<pre><code>&lt;template&gt;\n  &lt;div&gt;hello vue&lt;/div&gt;\n&lt;/template&gt;\n\nclass Home extends Vue &#123;&#125; // export default &#123;&#125;\n</code></pre>\n</blockquote>\n<ul>\n<li>\n<p>根据组件内部是否有状态需要维护，可以分成：无状态组件 (Stateless Component) 和有状态组件 (Stateful Component)；</p>\n</li>\n<li>\n<p>根据组件的不同职责，可以分成：展示型组件 (Presentational Component - 只做数据的展示，一般不需要写更多的业务逻辑 - 数据请求不出现在展示型组件 - 顶多发出请求的指令 - 具体的请求交给容器型组件) 和容器型组件 (Container Component - 负责给展示性组件提供数据以及处理展示型组件需要的具体的业务逻辑) - 状态管理器 - 更容易理解；</p>\n</li>\n</ul>\n<p>这些概念有很多重叠，但是他们最主要是关注数据逻辑和 UI 展示的分离：</p>\n<ul>\n<li>函数组件、无状态组件、展示型组件主要关注 UI 的展示；</li>\n<li>类组件、有状态组件、容器型组件主要关注数据逻辑；</li>\n</ul>\n<h2 id=\"132-使用组合而非继承实现react组件化\"><a class=\"anchor\" href=\"#132-使用组合而非继承实现react组件化\">#</a> 13.2 使用组合而非继承实现 React 组件化</h2>\n<p>有些组件无法提前知晓它们子组件的具体内容，建议这些组件使用一个特殊的  <code>children</code>  prop 来将他们的子组件传递到渲染结果中。</p>\n<p><code>参照5.3章节</code></p>\n<p>少数情况下，你可能需要在一个组件中预留出几个 “洞”。这种情况下，我们可以不使用  <code>children</code> ，而是自行约定：将所需内容传入 props，并使用相应的 prop。</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./08_com/01_App_props_slot'</span> <span class=\"token comment\">// 组合 VS 继承</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/08_com/01_App_props_slot.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Header</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>left <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>default <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>right <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Header1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        &lt;Header </pre></td></tr><tr><td data-num=\"37\"></td><td><pre>          left = <span class=\"token punctuation\">&#123;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">logo</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>          default = <span class=\"token punctuation\">&#123;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">搜索框</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>          right = <span class=\"token punctuation\">&#123;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">登录</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        ></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>          1111111111</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Header</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        &lt;Header </pre></td></tr><tr><td data-num=\"45\"></td><td><pre>          left = <span class=\"token punctuation\">&#123;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">返回</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>          default = <span class=\"token punctuation\">&#123;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">标题</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>          right = <span class=\"token punctuation\">&#123;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">更多</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        ><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Header</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header1</span></span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token punctuation\">></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">logo</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">搜索框</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">登录</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Header1</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header1</span></span></span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token punctuation\">></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">返回</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">标题</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">更多</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Header1</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre></pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>像 App 组件中的 <code>left</code>  和 <code>default</code>  以及 right  的  属性对应的之类的 <code>React</code>  元素本质就是对象（ <code>object</code> ），所以你可以把它们当作  <code>props</code> ，像其他数据一样传递。这种方法可能使你想起 vue 中 “插槽”（ <code>slot</code> ）的概念，但在  <code>React</code>  中没有 “插槽” 这一概念的限制，你可以将任何东西作为 props 进行传递。</p>\n</blockquote>\n<h2 id=\"133-封装modal弹窗\"><a class=\"anchor\" href=\"#133-封装modal弹窗\">#</a> 13.3 封装 Modal 弹窗</h2>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./08_com/02_App_modal'</span> <span class=\"token comment\">// 组合 VS 继承</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/08_com/02_App_modal.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Modal</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'fixed'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token literal-property property\">bottom</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token literal-property property\">right</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'rgba(0,0,0, 0.4)'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token literal-property property\">justifyContent</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token literal-property property\">alignItems</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>          <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'50%'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>          <span class=\"token literal-property property\">minHeight</span><span class=\"token operator\">:</span> <span class=\"token string\">'300px'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#fff'</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          这里是一个模态框</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>onClick <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">关闭</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">show</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token function-variable function\">close</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>      <span class=\"token literal-property property\">show</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">show</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">打开模态框</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>show <span class=\"token operator\">?</span> <span class=\"token operator\">&lt;</span>Modal onClick <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>close <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>审查元素发现 Modal 组件是渲染在原来的组件的位置的，如果想要让它渲染到不同的位置怎么办呢？</p>\n</blockquote>\n<h2 id=\"134-reactdomcreateportal\"><a class=\"anchor\" href=\"#134-reactdomcreateportal\">#</a> 13.4 ReactDOM.createPortal()</h2>\n<p>普通的组件，子组件的元素将挂载到父组件的 DOM 节点中。</p>\n<p>有时需要将元素渲染到 DOM 中的不同位置上去，这是就用到的 portal 的方法。</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./08_com/03_App_portal'</span> <span class=\"token comment\">// 封装模态框 portal</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/08_com/03_App_portal.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span> <span class=\"token comment\">// 这里不要使用 'react-dom/client' 引入</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Modal</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  modalRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createPortal</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token comment\">// &lt;div id='modal' ref=\"modal\" style=&#123; &#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">'modal'</span> ref<span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>modalRef <span class=\"token punctuation\">&#125;</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'fixed'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token literal-property property\">bottom</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token literal-property property\">right</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'rgba(0,0,0, 0.4)'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token literal-property property\">justifyContent</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token literal-property property\">alignItems</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token comment\">// onClick = &#123; this.props.onClick &#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        onClick <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'modal'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>modalRef<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>          <span class=\"token comment\">// if (event.target === document.getElementById('modal')) &#123; // ? id ?</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>          <span class=\"token comment\">//if (event.target === this.refs.modal) &#123; // ? ref 删除线？</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target <span class=\"token operator\">===</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>modalRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//ref 的使用</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token comment\">// 如何判断当前点击的是自身而不是子元素</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">onClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>          </pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>          <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'50%'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>          <span class=\"token literal-property property\">minHeight</span><span class=\"token operator\">:</span> <span class=\"token string\">'300px'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>          <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#fff'</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>          <span class=\"token comment\">// onClick = &#123; event => &#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>          <span class=\"token comment\">//   event.stopPropagation()</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>          <span class=\"token comment\">// &#125; &#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token punctuation\">></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>          这里是一个模态框</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>onClick <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">关闭</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">show</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token function-variable function\">close</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>      <span class=\"token literal-property property\">show</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">show</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">打开模态框</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>show <span class=\"token operator\">?</span> <span class=\"token operator\">&lt;</span>Modal onClick <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>close <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre></pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>一个 portal 的典型用例是当父组件有  <code>overflow: hidden</code>  或  <code>z-index</code>  样式时，但你需要子组件能够在视觉上 “跳出” 其容器。例如，对话框、悬浮卡以及提示框：</p>\n</blockquote>\n",
            "tags": [
                "react学习",
                "react"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/react-study/4/",
            "url": "https://www.yexingcheng.com/react-study/4/",
            "title": "React学习第四天",
            "date_published": "2022-08-03T16:00:00.000Z",
            "content_html": "<h1 id=\"八-事件绑定\"><a class=\"anchor\" href=\"#八-事件绑定\">#</a> 八、事件绑定</h1>\n<p>React 元素的事件处理和 DOM 元素的很相似，但是有一点语法上的不同：</p>\n<ul>\n<li>\n<p>React 事件的命名采用小驼峰式（camelCase），而不是纯小写。</p>\n</li>\n<li>\n<p>使用 JSX 语法时你需要传入一个函数作为事件处理函数，而不是一个字符串。\\</p>\n<pre><code>* 保证是一个函数\n* 如果需要使用this关键词，保证this指向\n</code></pre>\n</li>\n</ul>\n<h2 id=\"81-es5语法绑定事件\"><a class=\"anchor\" href=\"#81-es5语法绑定事件\">#</a> 8.1 ES5 语法绑定事件</h2>\n<h3 id=\"811-无参数的绑定\"><a class=\"anchor\" href=\"#811-无参数的绑定\">#</a> 8.1.1 无参数的绑定</h3>\n<h4 id=\"8111-方法一\"><a class=\"anchor\" href=\"#8111-方法一\">#</a> 8.1.1.1 方法一</h4>\n<ul>\n<li>定义函数</li>\n</ul>\n<pre><code>handleClick(e) &#123; // e - 事件对象\n  e.preventDefault();\n  // doSomething ...\n&#125;\n</code></pre>\n<ul>\n<li>constructor 中绑定函数执行上下文</li>\n</ul>\n<pre><code>this.handleClick = this.handleClick.bind(this);\n</code></pre>\n<ul>\n<li>jsx 中调用</li>\n</ul>\n<pre><code>&lt;button onClick=&#123;this.hanleClick&#125; /&gt;\n</code></pre>\n<h4 id=\"8111-方法二\"><a class=\"anchor\" href=\"#8111-方法二\">#</a> 8.1.1.1 方法二</h4>\n<ul>\n<li>定义函数</li>\n</ul>\n<pre><code>handleClick(e) &#123; // e - 事件对象\n  e.preventDefault();\n  // doSomething ...\n&#125;\n</code></pre>\n<ul>\n<li>jsx 中调用</li>\n</ul>\n<pre><code>&lt;button onClick=&#123;this.hanleClick.bind(this)&#125; /&gt;\n</code></pre>\n<h3 id=\"812-有参数的绑定\"><a class=\"anchor\" href=\"#812-有参数的绑定\">#</a> 8.1.2 有参数的绑定</h3>\n<ul>\n<li>定义函数</li>\n</ul>\n<pre><code>handleClick(param1, param2, e) &#123;\n  e.preventDefault();\n  // do something ...\n&#125;\n</code></pre>\n<blockquote>\n<p>注意此时无论多少个参数， e 一定放在最后</p>\n</blockquote>\n<ul>\n<li>jsx 中调用</li>\n</ul>\n<pre><code>&lt;button onClick=&#123;this.hanleClick.bind(this, 'x', 'xx')&#125; /&gt;\n</code></pre>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./03_event/01_App_event_es5'</span> <span class=\"token comment\">// 事件处理 es5 绑定事件方式</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/03_event/01_App_event_es5.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">//es5 绑定事件 ---- 主要是对 this 指向的处理</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handlerClickFn <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handlerClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token function\">handlerClick</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//event 为事件默认参数</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token function\">handlerParamsClick</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a <span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 自定义参数  event 将作为最后一个参数</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// a  1</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// b  2</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handlerClickFn <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">es5绑定事件-构造函数</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handlerClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">es5绑定事件-jsx改变this指向</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handlerParamsClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">es5绑定事件-传递参数</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"82-es6语法绑定事件\"><a class=\"anchor\" href=\"#82-es6语法绑定事件\">#</a> 8.2 ES6 语法绑定事件</h2>\n<h3 id=\"821-无参数绑定\"><a class=\"anchor\" href=\"#821-无参数绑定\">#</a> 8.2.1 无参数绑定</h3>\n<h4 id=\"8211-方法一\"><a class=\"anchor\" href=\"#8211-方法一\">#</a> 8.2.1.1 方法一</h4>\n<ul>\n<li>定义函数</li>\n</ul>\n<pre><code>handleClick = (e) =&gt; &#123;\n  e.preventDefault();\n  // do something ...\n&#125;\n</code></pre>\n<ul>\n<li>jsx 中调用</li>\n</ul>\n<pre><code>&lt;button onClick=&#123;this.hanleClick&#125; /&gt;\n</code></pre>\n<blockquote>\n<p>比起 es 5 中的无参数函数的绑定调用， es 6 不需要使用 bind 函数；</p>\n</blockquote>\n<h4 id=\"8212-方法二\"><a class=\"anchor\" href=\"#8212-方法二\">#</a> 8.2.1.2 方法二</h4>\n<p>jsx 中定义箭头函数</p>\n<pre><code>&lt;button onClick=&#123; () =&gt; &#123;&#125;&#125; /&gt;\n</code></pre>\n<h3 id=\"822-有参数绑定\"><a class=\"anchor\" href=\"#822-有参数绑定\">#</a> 8.2.2 有参数绑定</h3>\n<h4 id=\"8221-方法一\"><a class=\"anchor\" href=\"#8221-方法一\">#</a> 8.2.2.1 方法一</h4>\n<ul>\n<li>定义函数</li>\n</ul>\n<pre><code>handleClick = (param1, e) =&gt; &#123;\n  e.preventDefault();\n  // do something ...\n&#125;\n</code></pre>\n<ul>\n<li>jsx 调用</li>\n</ul>\n<pre><code>&lt;button onClick=&#123;this.hanleClick.bind(this, 'x')&#125; /&gt;\n</code></pre>\n<blockquote>\n<p>有参数时，在绑定时依然要使用 bind；<br>\n并且参数一定要传，不然仍然存在 this 指向错误问题；</p>\n</blockquote>\n<h4 id=\"8222-方法二\"><a class=\"anchor\" href=\"#8222-方法二\">#</a> 8.2.2.2 方法二</h4>\n<ul>\n<li>定义函数</li>\n</ul>\n<pre><code>handleClick = (param1, e) =&gt; &#123;\n  // do something ...\n&#125;\n</code></pre>\n<ul>\n<li>jsx 调用</li>\n</ul>\n<pre><code>&lt;button onClick=&#123;() =&gt; this.handleClick('c')&#125; /&gt;\n// 如果需要对 event 对象进行处理的话，需要写成下面的格式\n&lt;button onClick=&#123;(e) =&gt; this.handleClick('c', e)&#125; /&gt;\n</code></pre>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./03_event/02_App_event_es6'</span> <span class=\"token comment\">// 事件处理 es6 绑定事件方式</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/03_event/02_App_event_es6.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">//es5 绑定事件 ---- 主要是对 this 指向的处理</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token function-variable function\">handlerClickFn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">//event 默认参数</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token function-variable function\">handlerParamsClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// a 1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// b 2</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handlerClickFn <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">es6绑定事件-定义箭头函数</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//event 默认参数</span></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">es6绑定事件-jsx写箭头函数</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handlerParamsClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">es6绑定事件-传递参数</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//event 默认参数</span></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>          <span class=\"token comment\">// this.fetchData(&#123; count: this.state.count &#125;)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">></span><span class=\"token plain-text\">es6绑定事件-jsx写箭头函数,直接使用参数</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"83-合成事件的特点\"><a class=\"anchor\" href=\"#83-合成事件的特点\">#</a> 8.3 合成事件的特点</h2>\n<h3 id=\"831-事件机制\"><a class=\"anchor\" href=\"#831-事件机制\">#</a> 8.3.1 事件机制</h3>\n<ul>\n<li><code>react</code>  自身实现了一套事件机制，包括事件的注册、事件的存储、事件的合成及执行等。</li>\n<li><code>react</code>  的所有事件并没有绑定到具体的 <code>dom</code>  节点上而是绑定在了 <code>document</code>  上，然后由统一的事件处理程序来派发执行。</li>\n<li>通过这种处理，减少了事件注册的次数，另外 <code>react</code>  还在事件合成过程中，对不同浏览器的事件进行了封装处理，抹平浏览器之间的事件差异。</li>\n</ul>\n<h3 id=\"832-对合成事件的理解\"><a class=\"anchor\" href=\"#832-对合成事件的理解\">#</a> 8.3.2 对合成事件的理解</h3>\n<p>（1）对原生事件的封装</p>\n<blockquote>\n<p><code>react</code>  会根据原生事件类型来使用不同的合成事件对象，比如：聚焦合成事件对象 <code>SyntheticFoucsEvent</code> （合成事件对象： <code>SyntheticEvent</code>  是 <code>react</code>  合成事件的基类，定义了合成事件的基础公共属性和方法。合成事件对象就是在该基类上创建的，原生 js 的 事件对象为  <code>PointerEvent</code> ）</p>\n</blockquote>\n<p>（2）不同浏览器事件兼容的处理</p>\n<blockquote>\n<p>在对事件进行合成时， <code>react</code>  针对不同的浏览器，也进行了事件的兼容处理</p>\n</blockquote>\n<h3 id=\"833-事件机制的流程\"><a class=\"anchor\" href=\"#833-事件机制的流程\">#</a> 8.3.3 事件机制的流程</h3>\n<h4 id=\"1-事件注册\"><a class=\"anchor\" href=\"#1-事件注册\">#</a> 1、事件注册</h4>\n<blockquote>\n<p>在组件挂载阶段，根据组件内声明的事件类型 - <code>onclick</code> ， <code>onchange</code>  等，给  <code>document</code>  上添加事件 - <code>addEventListener</code> ，并指定统一的事件处理程序  <code>dispatchEvent</code> 。</p>\n</blockquote>\n<h4 id=\"2-事件存储\"><a class=\"anchor\" href=\"#2-事件存储\">#</a> 2、事件存储</h4>\n<blockquote>\n<p>完成事件注册后，将 <code> react dom</code>  ，事件类型，事件处理函数 <code>fn</code>  放入数组存储，组件挂载完成后，经过遍历把事件处理函数存储到  <code>listenerBank</code>  (一个对象) 中，缓存起来，为了在触发事件的时候可以查找到对应的事件处理方法去执行。</p>\n</blockquote>\n<blockquote>\n<p>开始事件的存储，在 <code> react</code>  里所有事件的触发都是通过  <code>dispatchEvent</code>  方法统一进行派发的，而不是在注册的时候直接注册声明的回调，来看下如何存储的 。<br>\n <code>react</code>  把所有的事件和事件类型以及 <code>react</code>  组件进行关联，把这个关系保存在了一个 <code> map</code>  里，也就是一个对象里（键值对），然后在事件触发的时候去根据当前的 组件 id 和 事件类型查找到对应的 事件 fn</p>\n</blockquote>\n<h4 id=\"3-事件执行\"><a class=\"anchor\" href=\"#3-事件执行\">#</a> 3、事件执行</h4>\n<blockquote>\n<p>1、进入统一的事件分发函数 ( <code>dispatchEvent</code> )<br>\n 2、结合原生事件找到当前节点对应的 <code>ReactDOMComponent</code>  对象<br>\n 3、开始 事件的合成</p>\n<blockquote>\n<ul>\n<li>根据当前事件类型生成指定的合成对象</li>\n<li>封装原生事件和冒泡机制</li>\n<li>在  <code>listenerBank</code>  事件池中查找事件回调并合成到  <code>event</code>  (合成事件结束)</li>\n</ul>\n</blockquote>\n<p>4. 处理合成事件内的回调事件（事件触发完成 end）</p>\n</blockquote>\n<h3 id=\"834-合成事件-原生事件之间的冒泡执行关系\"><a class=\"anchor\" href=\"#834-合成事件-原生事件之间的冒泡执行关系\">#</a> 8.3.4 合成事件、原生事件之间的冒泡执行关系</h3>\n<p>结论：</p>\n<ul>\n<li>\n<p>原生事件阻止冒泡肯定会阻止合成事件的触发。</p>\n</li>\n<li>\n<p>合成事件的阻止冒泡不会影响原生事件。</p>\n</li>\n</ul>\n<p>原因：</p>\n<ul>\n<li>浏览器事件的执行需要经过三个阶段， <code>捕获阶段-目标元素阶段-冒泡阶段</code> 。</li>\n</ul>\n<blockquote>\n<p>节点上的原生事件的执行是在目标阶段，然而合成事件的执行是在冒泡阶段，所以原生事件会先合成事件执行，然后再往父节点冒泡，所以原生事件阻止冒泡会阻止合成事件的触发，而合成事件的阻止冒泡不会影响原生事件。</p>\n</blockquote>\n",
            "tags": [
                "react学习",
                "react"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/react-study/3/",
            "url": "https://www.yexingcheng.com/react-study/3/",
            "title": "React学习第三天",
            "date_published": "2022-08-02T16:00:00.000Z",
            "content_html": "<h1 id=\"六-state\"><a class=\"anchor\" href=\"#六-state\">#</a> 六、State</h1>\n<p><code>state</code>  是  <code>class</code>  组件的内置对象，用于 class 组件内部数据更新</p>\n<p><code>state</code>  就是组件描述某种显示情况的数据，由组件自己设置和更改，也就是说由组件自己维护，使用 <code>state</code>  的目的就是为了在不同的状态下使组件的显示不同 (自己管理)</p>\n<h2 id=\"61-state及其特点\"><a class=\"anchor\" href=\"#61-state及其特点\">#</a> 6.1 state 及其特点</h2>\n<p>State 与 props 类似，但是 state 是私有的，并且完全受控于当前组件</p>\n<p>不要直接修改 state</p>\n<p>state 更新可能是异步的：出于性能考虑，React 可能会把多个  <code>setState()</code>  调用合并成一个调用。</p>\n<p>state 更新会被合并：当你调用  <code>setState()</code>  的时候，React 会把你提供的对象合并到当前的 state</p>\n<h2 id=\"62-state的定义和使用\"><a class=\"anchor\" href=\"#62-state的定义和使用\">#</a> 6.2 state 的定义和使用</h2>\n<p>目前 react 中的状态有两种使用方式：</p>\n<h3 id=\"621-es6的类-构造函数\"><a class=\"anchor\" href=\"#621-es6的类-构造函数\">#</a> 6.2.1 es6 的类 - 构造函数</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./02_state/01_App_state_es6'</span> <span class=\"token comment\">//es6 构造函数 初始化状态</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/02_state/01_App_state_es6.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">/**</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * ES6 规定，子类必须在 constructor () 方法中调用 super ()，否则就会报错。</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>这是因为子类自己的 this 对象，必须先通过父类的构造函数完成塑造，</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>得到与父类同样的实例属性和方法，然后再对其进行加工，添加子类自己的实例属性和方法。</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>如果不调用 super () 方法，子类就得不到自己的 this 对象。</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> ES5 的继承机制，是先创造一个独立的子类的实例对象，</pre></td></tr><tr><td data-num=\"9\"></td><td><pre> 然后再将父类的方法添加到这个对象上面，即 “实例在前，继承在后”。</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> ES6 的继承机制，则是先将父类的属性和方法，加到一个空的对象上面，</pre></td></tr><tr><td data-num=\"11\"></td><td><pre> 然后再将该对象作为子类的实例，即 “继承在前，实例在后”</pre></td></tr><tr><td data-num=\"12\"></td><td><pre> */</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token comment\">// constructor (props) &#123; //  Useless constructor </span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token comment\">//   super(props)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        当前时间为：<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleDateString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"622-es7的类-属性初始化器\"><a class=\"anchor\" href=\"#622-es7的类-属性初始化器\">#</a> 6.2.2 es7 的类 - 属性初始化器</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./02_state/02_App_state_es7'</span> <span class=\"token comment\">//es7 属性初始化器 初始化状态</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/02_state/02_App_state_es7.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        当前时间为：<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleDateString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">!!</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"63-如何正确的修改state\"><a class=\"anchor\" href=\"#63-如何正确的修改state\">#</a> 6.3 如何正确的修改 state</h2>\n<p><code>setState()</code>  将对组件 state 的更改排入队列，并通知 React 需要使用更新后的 state 重新渲染此组件及其子组件。这是用于更新用户界面以响应事件处理器和处理服务器数据的主要方式.</p>\n<p>将  <code>setState()</code>  视为<em>请求</em>而不是立即更新组件的命令。为了更好的感知性能，React 会延迟调用它，然后通过一次传递更新多个组件。</p>\n<p><code>setState()</code>  并不总是立即更新组件。它会批量推迟更新。这使得在调用  <code>setState()</code>  后立即读取  <code>this.state</code>  成为了隐患。为了消除隐患，请使用  <code>componentDidUpdate</code>  或者  <code>setState</code>  的回调函数（ <code>setState(updater, callback)</code> ），这两种方式都可以保证在应用更新后触发。</p>\n<p>记住修改状态的三大原则：</p>\n<ul>\n<li>不要直接修改 State</li>\n</ul>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>a <span class=\"token operator\">=</span> <span class=\"token number\">100</span> <span class=\"token comment\">// ❌</span></pre></td></tr></table></figure><ul>\n<li>state 的更新可能是异步的</li>\n</ul>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>a <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>a <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>a <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 10</span></pre></td></tr></table></figure><ul>\n<li>state 的更新会被合并</li>\n</ul>\n<h2 id=\"64-thissetstate方法及其特点\"><a class=\"anchor\" href=\"#64-thissetstate方法及其特点\">#</a> 6.4 this.setState () 方法及其特点</h2>\n<p><code>setState()</code>  会对一个组件的  <code>state</code>  对象安排一次更新。当 state 改变了，该组件就会重新渲染。</p>\n<p><code>setState()</code>  可以添加两个参数，</p>\n<p><code>setState()</code>  的第二个参数为可选的回调函数，它将在  <code>setState</code>  完成合并并重新渲染组件后执行</p>\n<h3 id=\"641-传递函数\"><a class=\"anchor\" href=\"#641-传递函数\">#</a> 6.4.1 传递函数</h3>\n<p>参数一为带有形式参数的  <code>updater</code>  函数：</p>\n<pre><code>this.setState((state, props) =&gt; stateChange[, callback] )\n</code></pre>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./02_state/03_App_setState_function'</span> <span class=\"token comment\">// 修改状态 传递函数</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/02_state/03_App_setState_function.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        &lt;button</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>          onClick=<span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>              <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>              console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 103</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 100</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>              <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>              console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 103</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 100</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>              <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>              console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 103</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 100</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        >加1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>updater 函数中接收的  <code>state</code>  和  <code>props</code>  都保证为最新。updater 的返回值会与  <code>state</code>  进行浅合并。</p>\n</blockquote>\n<h3 id=\"642-传递对象\"><a class=\"anchor\" href=\"#642-传递对象\">#</a> 6.4.2 传递对象</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./02_state/04_App_setState_object'</span> <span class=\"token comment\">// 修改状态 传递对象</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/02_state/04_App_setState_object.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>          <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>              <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>              console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 101</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 100</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>              <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>              console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 101</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span><span class=\"token comment\">// 100</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>              <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>              console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 101</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span><span class=\"token comment\">// 100</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token punctuation\">></span><span class=\"token plain-text\">加1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>这种形式的  <code>setState()</code>  是异步的，并且在同一周期内会对多个  <code>setState</code>  进行批处理，相当于</p>\n<pre><code>Object.assign(\n   prevState,\n   &#123;count: this.state.count + 1&#125;,\n   &#123;count: this.state.count + 1&#125;,\n   ...\n)\n</code></pre>\n<p>后调用的  <code>setState()</code>  将覆盖同一周期内先调用  <code>setState</code>  的值，因此商品数仅增加一次。如果后续状态取决于当前状态，建议使用 updater 函数的形式代替（前面案例已经实现）。或者在第二个参数中再继续操作。</p>\n</blockquote>\n<blockquote>\n<p>思考题：</p>\n<p>1.<a href=\"https://stackoverflow.com/a/48610973/458193\"> 何时以及为什么  <code>setState()</code>  会批量执行？</a></p>\n<p>2.<a href=\"https://github.com/facebook/react/issues/11527#issuecomment-360199710\"> 为什么不直接更新  <code>this.state</code> ？</a></p>\n</blockquote>\n<h1 id=\"七-生命周期\"><a class=\"anchor\" href=\"#七-生命周期\">#</a> 七、生命周期</h1>\n<p>组件的生命周期可分成三个状态：</p>\n<ul>\n<li>Mounting (挂载，初始化)：已插入真实 DOM</li>\n<li>Updating (更新，运行时)：正在被重新渲染</li>\n<li>Unmounting (卸载，销毁)：已移出真实 DOM</li>\n</ul>\n<p>生命周期图谱可以参考链接：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wcm9qZWN0cy53b2p0ZWttYWoucGwvcmVhY3QtbGlmZWN5Y2xlLW1ldGhvZHMtZGlhZ3JhbS8=\">https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/</span></p>\n<blockquote>\n<p>类组件如何实现类似 vue 的计算属性： <span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2Jsb2cvMjAxOC8wNi8wNy95b3UtcHJvYmFibHktZG9udC1uZWVkLWRlcml2ZWQtc3RhdGUuaHRtbCN3aGF0LWFib3V0LW1lbW9pemF0aW9u\">https://zh-hans.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#what-about-memoization</span></p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ cnpm i memoize-one <span class=\"token parameter variable\">-S</span></pre></td></tr></table></figure><p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr></table></figure></blockquote>\n<blockquote>\n<p>import App from './02_state/05_App_computed' // 类组件实现类似计算属性</p>\n<p>const root = ReactDOM.createRoot(document.getElementById('root'))</p>\n<p>// 标签形式调用<br>\n root.render (&lt;App /&gt;)</p>\n<pre><code>\n`src/02_state/05_App_computed.jsx`\n\n```jsx\nimport React, &#123; Component &#125; from 'react';\nimport memoize from 'memoize-one'\nclass MemoList extends Component &#123;\nstate = &#123;\n text: ''\n&#125;\nfilter = memoize((list, text) =&gt; &#123;\n return list.filter(item =&gt; text !== '' &amp;&amp; item.includes(text))\n&#125;)\nrender () &#123;\n const list = this.filter(this.props.list, this.state.text)\n return (\n   &lt;&gt;\n     &lt;input type=&quot;text&quot; value=&#123; this.state.text &#125; onChange = &#123; (event) =&gt; &#123;\n       this.setState(&#123;\n         text: event.target.value\n       &#125;)\n     &#125; &#125;/&gt;\n     &lt;ul&gt;\n       &#123;\n         list.map((item, index) =&gt; &#123;\n           return (&lt;li key = &#123; index &#125;&gt; &#123; item &#125; &lt;/li&gt;)\n         &#125;)\n       &#125;\n     &lt;/ul&gt;\n   &lt;/&gt;\n )\n&#125;\n&#125;\n\nclass App extends Component &#123;\nstate = &#123;\n list: ['a', 'ab', 'abc', 'abcd']\n&#125;\nrender() &#123;\n return (\n   &lt;div&gt;\n     &lt;MemoList list=&#123;this.state.list&#125; /&gt;\n   &lt;/div&gt;\n );\n&#125;\n&#125;\n\nexport default App;\n</code></pre>\n</blockquote>\n<h2 id=\"71-三个阶段\"><a class=\"anchor\" href=\"#71-三个阶段\">#</a> 7.1 三个阶段</h2>\n<h3 id=\"711-装载阶段\"><a class=\"anchor\" href=\"#711-装载阶段\">#</a> 7.1.1 装载阶段</h3>\n<p>当组件实例被创建并插入 DOM 中时，其生命周期调用顺序如下：</p>\n<ul>\n<li>\n<p><code>constructor()</code> : 在 React 组件挂载之前，会调用它的构造函数。</p>\n<blockquote>\n<p>如果不需要对类组件添加初始化数据以及绑定事件，那么就不需要写  <code>constructor</code></p>\n</blockquote>\n</li>\n<li>\n<p><code>static getDerivedStateFromProps()</code> : 在调用 render 方法之前调用，并且在初始挂载及后续更新时都会被调用。</p>\n</li>\n<li>\n<p><code>render()</code> : render () 方法是 class 组件中唯一必须实现的方法。</p>\n</li>\n<li>\n<p><code>componentDidMount()</code> : 在组件挂载后（插入 DOM 树中）立即调用。</p>\n</li>\n</ul>\n<p>render () 方法是 class 组件中唯一必须实现的方法，其他方法可以根据自己的需要来实现。</p>\n<h3 id=\"712-更新阶段\"><a class=\"anchor\" href=\"#712-更新阶段\">#</a> 7.1.2 更新阶段</h3>\n<p>每当组件的 state 或 props 发生变化时，组件就会更新。</p>\n<p>当组件的 props 或 state 发生变化时会触发更新。组件更新的生命周期调用顺序如下：</p>\n<ul>\n<li><code>static getDerivedStateFromProps()</code> : 在调用 render 方法之前调用，并且在初始挂载及后续更新时都会被调用。根据 shouldComponentUpdate () 的返回值，判断 React 组件的输出是否受当前 state 或 props 更改的影响。</li>\n<li><code>shouldComponentUpdate()</code> : 当 props 或 state 发生变化时，shouldComponentUpdate () 会在渲染执行之前被调用。</li>\n<li><code>render()</code> : render () 方法是 class 组件中唯一必须实现的方法。</li>\n<li><code>getSnapshotBeforeUpdate()</code> : 在最近一次渲染输出（提交到 DOM 节点）之前调用。</li>\n<li><code>componentDidUpdate()</code> : 在更新后会被立即调用，如果你需要<strong>执行副作用</strong>（例如，数据提取或动画）以响应 props 中的更改。</li>\n</ul>\n<p>render () 方法是 class 组件中唯一必须实现的方法，其他方法可以根据自己的需要来实现。</p>\n<h3 id=\"713-卸载阶段\"><a class=\"anchor\" href=\"#713-卸载阶段\">#</a> 7.1.3 卸载阶段</h3>\n<p>当组件从 DOM 中移除时会调用如下方法：</p>\n<ul>\n<li><code>componentWillUnmount()</code> : 在组件卸载及销毁之前直接调用。</li>\n</ul>\n<h3 id=\"714-error-boundaries\"><a class=\"anchor\" href=\"#714-error-boundaries\">#</a> 7.1.4 Error boundaries</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvZXJyb3ItYm91bmRhcmllcy5odG1s\">Error boundaries</span> 是 React 组件，它会在其子组件树中的任何位置捕获 JavaScript 错误，并记录这些错误，展示降级 UI 而不是崩溃的组件树。Error boundaries 组件会捕获在渲染期间，在生命周期方法以及其整个树的构造函数中发生的错误。</p>\n<blockquote>\n<p>项目中需要使用的最多的生命周期的钩子函数为  <code>render</code> ,  <code>componentDidMount</code> , <code>componentDidUpdate</code> , <code>componentWillUnmount</code></p>\n</blockquote>\n<blockquote>\n<p>详细介绍范例：<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zOTI1MzI0OTY=\">https://zhuanlan.zhihu.com/p/392532496</span></p>\n</blockquote>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./02_state/06_App_lifeCycle'</span> <span class=\"token comment\">// 类组件生命周期</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">ErrorBoundary</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">hasError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">static</span> <span class=\"token function\">getDerivedStateFromError</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">// 更新 state 使下一次渲染可以显示降级 UI</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">hasError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token function\">componentDidCatch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token comment\">// \"组件堆栈\" 例子:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token comment\">//   in ComponentThatThrows (created by App)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token comment\">//   in ErrorBoundary (created by App)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\">//   in div (created by App)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token comment\">//   in App</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">.</span>componentStack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>hasError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token comment\">// 你可以渲染任何自定义的降级 UI</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Something went wrong.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ErrorBoundary</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  &lt;App root = <span class=\"token punctuation\">&#123;</span> root <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">/></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ErrorBoundary</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/02_state/06_App_lifeCycle.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\">// constructor (props) &#123; // Useless constructor</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\">//   super(props)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token comment\">//static getDerivedStateFromProps (props, state) &#123; // 一般不使用</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token comment\">//   //getDerivedStateFromProps 会在调用 render 方法之前调用，并且在初始挂载及后续更新时都会被调用。</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token comment\">//   // 它应返回一个对象来更新 state，如果返回 null 则不更新任何内容</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token comment\">//   //state 的值在任何时候都取决于 props</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">// 等同于 vue 中的 mounted</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">// 数据请求，实例化操作，DOM 操作，定时器，计时器，订阅数据变化</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\">// 修改状态</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token function\">shouldComponentUpdate</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">nextProps<span class=\"token punctuation\">,</span> nextState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token comment\">// 可以作为 react 组件的性能优化的手段，但是也要慎用</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token comment\">// getSnapshotBeforeUpdate(prevProps, prevState) &#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token comment\">//   // 在最近一次渲染输出（提交到 DOM 节点）之前调用。</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token comment\">//   // 它使得组件能在发生更改之前从 DOM 中捕获一些信息（例如，滚动位置）。</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token comment\">//   // 此生命周期方法的任何返回值将作为参数传递给 componentDidUpdate ()。</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps<span class=\"token punctuation\">,</span> prevState<span class=\"token punctuation\">,</span> snapshot</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token comment\">// 参照 vue 中 updated</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token comment\">// 实例化操作，DOM 操作，特定条件可以请求数据以及修改数据</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token comment\">//if (this.props.userID !== prevProps.userID) &#123; // 监听数据的变化</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token comment\">//   this.fetchData(this.props.userID);</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token function\">componentWillUnmount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token comment\">// 参照 vue  beforeDestory</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token comment\">// 清理对象，取消订阅，消除定时器计时器</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token comment\">// 当 count 的值等于 210 的时候销毁组件</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token comment\">// 挂载阶段 依据初始化数据渲染数据</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token comment\">// 更新阶段 当该组件的状态或者属性发生改变时触发此函数，也就输数据的改变引起视图的二次渲染</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        &lt;button onClick=<span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">===</span> <span class=\"token number\">210</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'销毁组件'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>            <span class=\"token comment\">// 销毁组件</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>root<span class=\"token punctuation\">.</span><span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">>加</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"72-两个时期\"><a class=\"anchor\" href=\"#72-两个时期\">#</a> 7.2 两个时期</h2>\n<p>将应用的渲染过程分为 <code>mount</code>  阶段（应用首次渲染）和 <code>update</code>  阶段（应用状态更新），无论在 <code>mount</code>  阶段还是 <code>update</code>  阶段，都会经历两个子阶段，一个是 <code>render</code>  阶段，一个是 <code>commit</code>  阶段。</p>\n<p><strong>mount 时</strong>：<br>\n在 <code>render</code>  阶段会根据 jsx 对象构建新的 <code>workInProgressFiber</code>  树，然后将相应的 <code>fiber</code>  节点标记为 <code>Placement</code> ，表示这个 <code>fiber</code>  节点需要被插入到 <code>dom</code>  树中，然后会这些带有副作用的 <code>fiber</code>  节点加入一条叫做 <code>Effect List</code>  的链表中。<br>\n在 <code>commit</code>  阶段会遍历 <code>render</code>  阶段形成的 <code>Effect List</code> ，执行链表上相应 <code>fiber</code>  节点的副作用，比如 <code>Placement</code>  插入，或者执行 <code>Passive</code> （useEffect 的副作用）。将这些副作用应用到真实节点上<br>\n<strong> update 时</strong>：<br>\n在 <code>render</code>  阶段会根据最新状态的 jsx 对象对比 <code>current Fiber</code> ，再构建新的 <code>workInProgressFiber</code>  树，这个对比的过程就是 <code>diff算法</code> ， <code>diff算法</code> 又分成单节点的对比和多节点的对比，对比的过程中同样会经历收集副作用的过程，也就是将对比出来的差异标记出来，加入 <code>Effect List</code>  中，这些对比出来的副作用例如： <code>Placement</code> （插入）、 <code>Update</code>  (更新)、 <code>Deletion</code> （删除）等。<br>\n在 <code>commit</code>  阶段同样会遍历 <code>Effect List</code> ，将这些 fiber 节点上的副作用应用到真实节点上。</p>\n<blockquote>\n<p>参考链接: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JlbXlzdGVyeS9hcnRpY2xlL2RldGFpbHMvMTIxODk3MjIz\">https://blog.csdn.net/bemystery/article/details/121897223</span></p>\n</blockquote>\n<h2 id=\"73-入门理解react-fiber架构\"><a class=\"anchor\" href=\"#73-入门理解react-fiber架构\">#</a> 7.3 入门理解 React Fiber 架构</h2>\n<p>在 React 16 之前， <code>VirtualDOM</code>  的更新采用的是 <code>Stack</code>  架构实现的，也就是循环递归方式。不过，这种对比方式有明显的缺陷，就是一旦任务开始进行就无法中断，如果遇到应用中组件数量比较庞大，那么 <code>VirtualDOM</code>  的层级就会比较深，带来的结果就是主线程被长期占用，进而阻塞渲染、造成卡顿现象。</p>\n<p>为了避免出现卡顿等问题，我们必须保障在执行更新操作时计算时不能超过 16ms，如果超过 16ms，就需要先暂停，让给浏览器进行渲染，后续再继续执行更新计算。而 <code>Fiber</code>  架构就是为了支持 “可中断渲染” 而创建的。</p>\n<p>在 <code>React</code>  中， <code>Fiber</code>  使用了一种新的数据结构 <code>fiber tree</code> ，它可以把虚拟 <code>dom tree</code>  转换成一个链表，然后再执行遍历操作，而链表在执行遍历操作时是支持断点重启的，示意图如下。</p>\n<p>官方介绍中， <code>Fiber</code>  被理解为是一种数据结构，但是我们也可以将它理解为是一个执行单元。</p>\n<p><code>Fiber</code>  可以理解为一个执行单元，每次执行完一个执行单元， <code>React Fiber</code>  就会检查还剩多少时间，如果没有时间则将控制权让出去，然后由浏览器执行渲染操作。 <code>React Fiber</code>  与浏览器的交互流程如下图。</p>\n<p>可以看到， <code>React</code>  首先向浏览器请求调度，浏览器在执行完一帧后如果还有空闲时间，会去判断是否存在待执行任务，不存在就直接将控制权交给浏览器；如果存在就会执行对应的任务，执行完一个新的任务单元之后会继续判断是否还有时间，有时间且有待执行任务则会继续执行下一个任务，否则将控制权交给浏览器执行渲染，这个流程是循环进行的。</p>\n<p>所以，我们可以将 <code>Fiber</code>  理解为一个执行单元，并且这个执行单元必须是一次完成的，不能出现暂停。并且，这个小的执行单元在执行完后计算之后，可以移交控制权给浏览器去响应用户，从而提升了渲染的效率。</p>\n<p>在官方的文档中， <code>Fibe</code> r 被解释为是一种数据结构，即链表结构。在链表结构中，每个 <code> Virtual DOM</code>  都可以表示为一个  <code>fiber</code> ，如下图所示。<br>\n<img data-src=\"https://segmentfault.com/img/bVc1w1c\" alt=\"image.png\"><br>\n 通常，一个  <code>fiber</code>  包括了 <code> child</code> （第一个子节点）、 <code>sibling</code> （兄弟节点）、 <code>return</code> （父节点) 等属性， <code>React Fiber</code>  机制的实现，就是依赖于上面的数据结构。</p>\n<p>通过介绍，我们知道 <code>Fiber</code>  使用的是链表结构，准确的说是<strong>单链表树结构</strong>。为了方便理解  <code>Fiber</code>  的遍历过程，下面我们就看下 <code>Fiber</code>  链表结构。</p>\n<p>在上面的例子中，每一个单元都包含了 <code>payload</code> （数据）和 <code>nextUpdate</code> （指向下一个单元的指针）两个元素</p>\n<blockquote>\n<p>参考链接：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDA0MjI3MTkxOQ==\">https://segmentfault.com/a/1190000042271919</span></p>\n</blockquote>\n<h1 id=\"八\"><a class=\"anchor\" href=\"#八\">#</a> 八、</h1>\n",
            "tags": [
                "react学习",
                "react"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/react-study/2/",
            "url": "https://www.yexingcheng.com/react-study/2/",
            "title": "React学习第二天",
            "date_published": "2022-08-01T16:00:00.000Z",
            "content_html": "<h1 id=\"四-组件定义\"><a class=\"anchor\" href=\"#四-组件定义\">#</a> 四、组件定义</h1>\n<p>组件允许你将 UI 拆分为独立可复用的代码片段，并对每个片段进行独立构思。</p>\n<p>组件，从概念上类似于 JavaScript 函数。它接受任意的入参（即 “props”），并返回用于描述页面展示内容的 React 元素。</p>\n<h2 id=\"41-类组件\"><a class=\"anchor\" href=\"#41-类组件\">#</a> 4.1 类组件</h2>\n<p>ES6 的加入让 JavaScript 直接支持使用 class 来定义一个类，react 的创建类组件的方式就是使用的类的继承， <code>ES6 class</code>  是一种使用 React 组件的写法，它使用了 ES6 标准语法来构建</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 类的首字母必须大写</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 组件的首字母必须大写</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token comment\">//render 函数是 类组件必须实现的一个 方法，同时也是 react 类组件唯一一个必不可少的方法</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token comment\">// 在 render 函数内部一定要返回 jsx 代码（也可以写 React.createElement）</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token comment\">// 如果 jsx 代码足够复杂，记得使用 () 包裹 jsx 代码</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token comment\">//render 函数是 react 类组件的生命周期的钩子函数</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">hello react class component</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">// 以标签的形式渲染组件</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">// ？ 也说明了为什么组件的首字母要大写</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">// 小写被当作固有的 HTML 标签</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"42-函数组件\"><a class=\"anchor\" href=\"#42-函数组件\">#</a> 4.2 函数组件</h2>\n<p>定义组件最简单的方式就是编写 JavaScript 函数</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> hello react function component </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"43-两组组件的区别\"><a class=\"anchor\" href=\"#43-两组组件的区别\">#</a> 4.3 两组组件的区别</h2>\n<ul>\n<li>组件的定义方式不同。</li>\n<li>生命周期不同：类组件有，函数式组件没有。</li>\n<li>副作用操作执行不同：class 组件通过生命周期函数，函数组件用 hook 的 useEffect。</li>\n<li>state 的定义、读取、修改方式不同：函数组件用 hook 的 useState。</li>\n<li>this： class 组件有，函数式组件没有。</li>\n<li>实例： class 组件有，函数时组件没有。</li>\n<li>ref 使用不同：类组件可以获取子组件实例，函数式组件不可以，因为函数式组件没有实例。</li>\n</ul>\n<blockquote>\n<p>官方推荐使用函数式组件，以上不同点虽然现在不明白是啥意思，没有关系，会随着大家的学习印象加深。</p>\n</blockquote>\n<h1 id=\"五-props\"><a class=\"anchor\" href=\"#五-props\">#</a> 五、Props</h1>\n<h2 id=\"51-props详解\"><a class=\"anchor\" href=\"#51-props详解\">#</a> 5.1 Props 详解</h2>\n<p><code>props</code>  是正常是外部传入的，组件内部也可以通过一些方式来初始化的设置，属性不能被组件自己更改，但是你可以通过父组件主动重新渲染的方式来传入新的  <code>props</code></p>\n<p>React 非常灵活，但它也有一个严格的规则：</p>\n<p><strong>所有 React 组件都必须像纯函数一样保护它们的 props 不被更改。</strong></p>\n<blockquote>\n<p>纯函数：输入一定，输出一定确定</p>\n</blockquote>\n<p>总的来说，在使用一个组件的时候，可以把参数放在标签的属性当中，所有的属性都会作为组件  <code>props</code>  对象的键值。</p>\n<p>通过箭头函数创建的组件，需要通过函数的参数来接收 <code>props</code></p>\n<p>通过类创建的组件，需要通过  <code>this.props</code>  来接收</p>\n<p>组件可以在其输出中引用其他组件。</p>\n<p>这就可以让我们用同一组件来抽象出任意层次的细节。</p>\n<p>按钮，表单，对话框，甚至整个屏幕的内容：在 React 应用程序中，这些通常都会以组件的形式表示。</p>\n<h2 id=\"52-父子组件通信\"><a class=\"anchor\" href=\"#52-父子组件通信\">#</a> 5.2 父子组件通信</h2>\n<h3 id=\"521-构建一个父子组件\"><a class=\"anchor\" href=\"#521-构建一个父子组件\">#</a> 5.2.1 构建一个父子组件</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./01_props/01_Parent_Child'</span> <span class=\"token comment\">// 省略.jsx</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/01_props/01_Parent_Child.jsx</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/01_props/01_Parent_Child.jsx</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Child</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span>子组件<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Parent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span>父组件<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token operator\">&lt;</span>Child <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>父子组件<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token operator\">&lt;</span>Parent <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</pre></td></tr></table></figure><h3 id=\"522-父组件给子组件传值\"><a class=\"anchor\" href=\"#522-父组件给子组件传值\">#</a> 5.2.2 父组件给子组件传值</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//import App from './01_props/01_Parent_Child' // 父子组件省略.jsx</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./01_props/02_Parent_Child_value'</span> <span class=\"token comment\">// 父组件给子组件传值</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/01_props/02_Parent_Chil_value.jsx</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/01_props/02_Parent_Chil_value.jsx</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 父组件在调用子组件的地方，添加自定义的属性，</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 如果属性的值是变量，boolean 类型，number 类型，对象，数组，null，undefined，函数，</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 需要使用 &#123;&#125; 包裹</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 如果子组件是类组件，可以通过 this.props 访问到父组件传递的值</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 如果子组件是函数式组件，可以通过 函数的默认参数 props 访问到父组件传递的值</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Child2</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'props2'</span><span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span>子组件<span class=\"token number\">2</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>str的值为<span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>str <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>flag的值为<span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>flag <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>num的值为<span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>num <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>obj的a值为<span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>obj<span class=\"token punctuation\">.</span>a <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>arr的值为<span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>arr <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Child1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"props1\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span>子组件<span class=\"token number\">1</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>str的值为<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>str <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>flag的值为<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>flag <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>num的值为<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>num <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>obj的a值为<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>obj<span class=\"token punctuation\">.</span>a <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>arr的值为<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>arr <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Parent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">const</span> str <span class=\"token operator\">=</span> <span class=\"token string\">\"hello world\"</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span>父组件<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token operator\">&lt;</span>Child1 </pre></td></tr><tr><td data-num=\"45\"></td><td><pre>          str <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> str <span class=\"token punctuation\">&#125;</span> </pre></td></tr><tr><td data-num=\"46\"></td><td><pre>          flag <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span> </pre></td></tr><tr><td data-num=\"47\"></td><td><pre>          num <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>          obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">b</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>          arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token operator\">&lt;</span>Child2 </pre></td></tr><tr><td data-num=\"52\"></td><td><pre>          str <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> str <span class=\"token punctuation\">&#125;</span> </pre></td></tr><tr><td data-num=\"53\"></td><td><pre>          flag <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">&#125;</span> </pre></td></tr><tr><td data-num=\"54\"></td><td><pre>          num <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">10000</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>          obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">b</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>          arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'aa'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bb'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'cc'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre></pre></td></tr><tr><td data-num=\"63\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>父子组件<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        <span class=\"token operator\">&lt;</span>Parent <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre></pre></td></tr><tr><td data-num=\"74\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</pre></td></tr></table></figure><h3 id=\"523-父组件给子组件传值设置默认值\"><a class=\"anchor\" href=\"#523-父组件给子组件传值设置默认值\">#</a> 5.2.3 父组件给子组件传值设置默认值</h3>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//import App from './01_props/01_Parent_Child' // 父子组件省略.jsx</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//import App from './01_props/02_Parent_Child_value' // 父组件给子组件传值</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./01_props/03_Parent_Child_default'</span> <span class=\"token comment\">// 父组件给子组件传值，子组件设置默认值</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/01_props/03_Parent_Chil_default.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/01_props/03_Parent_Chil_default.jsx</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 父组件在调用子组件的地方，添加自定义的属性，</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 如果属性的值是变量，boolean 类型，number 类型，对象，数组，null，undefined，函数，</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 需要使用 &#123;&#125; 包裹</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 如果子组件是类组件，可以通过 this.props 访问到父组件传递的值</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 如果子组件是函数式组件，可以通过 函数的默认参数 props 访问到父组件传递的值</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 如果子组件是函数式组件，就在组件定义之后通过 组件.defaultProps 设置默认值</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// 如果子组件是类组件，其中一种方式就在组件定义之后通过 组件.defaultProps 设置默认值</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 如果子组件是类组件，另一种方式就是在定义子组件时，通过类的静态属性设置 defaultProps</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Child2</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'props2'</span><span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">子组件2</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">str的值为</span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>str <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">flag的值为</span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>flag <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">num的值为</span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>num <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">obj的a值为</span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>obj<span class=\"token punctuation\">.</span>a <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">arr的值为</span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>arr <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>Child2<span class=\"token punctuation\">.</span>defaultProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token literal-property property\">str</span><span class=\"token operator\">:</span> <span class=\"token string\">'hello react function'</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Child1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token keyword\">static</span> defaultProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token literal-property property\">str</span><span class=\"token operator\">:</span> <span class=\"token string\">'hello react static props'</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"props1\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">子组件1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">str的值为</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>str <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">flag的值为</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>flag <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">num的值为</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>num <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">obj的a值为</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>obj<span class=\"token punctuation\">.</span>a <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">arr的值为</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>arr <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token comment\">// Child1.defaultProps = &#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token comment\">//   str: 'hello react class'</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Parent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token keyword\">const</span> str <span class=\"token operator\">=</span> <span class=\"token string\">\"hello world\"</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">父组件</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        &lt;Child1 </pre></td></tr><tr><td data-num=\"58\"></td><td><pre>          str = <span class=\"token punctuation\">&#123;</span> str <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>          flag = <span class=\"token punctuation\">&#123;</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> </span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>          num = <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>          obj = <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">b</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>          arr = <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        /></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        &lt;Child2 </pre></td></tr><tr><td data-num=\"65\"></td><td><pre>          flag = <span class=\"token punctuation\">&#123;</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> </span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>          num = <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">10000</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>          obj = <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">b</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>          arr = <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'aa'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bb'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'cc'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>        /></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre></pre></td></tr><tr><td data-num=\"75\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">父子组件</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Parent</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre></pre></td></tr><tr><td data-num=\"86\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</pre></td></tr></table></figure><h3 id=\"524-使用prop-types属性验证\"><a class=\"anchor\" href=\"#524-使用prop-types属性验证\">#</a> 5.2.4 使用 prop-types 属性验证</h3>\n<blockquote>\n<p>自 React v15.5 起， <code>React.PropTypes</code>  已移入另一个包中。请使用 <a href=\"https://www.npmjs.com/package/prop-types\"> <code>prop-types</code>  库</a> 代替。</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ cnpm i prop-types <span class=\"token parameter variable\">-D</span></pre></td></tr></table></figure><figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">'prop-types'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>MyComponent<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 你可以将属性声明为 JS 原生类型，默认情况下</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 这些属性都是可选的。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token literal-property property\">optionalArray</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token literal-property property\">optionalBool</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>bool<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token literal-property property\">optionalFunc</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>func<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token literal-property property\">optionalNumber</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token literal-property property\">optionalObject</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token literal-property property\">optionalString</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token literal-property property\">optionalSymbol</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>symbol<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">// 任何可被渲染的元素（包括数字、字符串、元素或数组）</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// (或 Fragment) 也包含这些类型。</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token literal-property property\">optionalNode</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// 一个 React 元素。</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token literal-property property\">optionalElement</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>element<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">// 一个 React 元素类型（即，MyComponent）。</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token literal-property property\">optionalElementType</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>elementType<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">// 你也可以声明 prop 为类的实例，这里使用</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">// JS 的 instanceof 操作符。</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token literal-property property\">optionalMessage</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">instanceOf</span><span class=\"token punctuation\">(</span>Message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\">// 你可以让你的 prop 只能是特定的值，指定它为</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\">// 枚举类型。</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token literal-property property\">optionalEnum</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">oneOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'News'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Photos'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\">// 一个对象可以是几种类型中的任意一个类型</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token literal-property property\">optionalUnion</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">oneOfType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>PropTypes<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">instanceOf</span><span class=\"token punctuation\">(</span>Message<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\">// 可以指定一个数组由某一类型的元素组成</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token literal-property property\">optionalArrayOf</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">arrayOf</span><span class=\"token punctuation\">(</span>PropTypes<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token comment\">// 可以指定一个对象由某一类型的值组成</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token literal-property property\">optionalObjectOf</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">objectOf</span><span class=\"token punctuation\">(</span>PropTypes<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token comment\">// 可以指定一个对象由特定的类型值组成</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token literal-property property\">optionalObjectWithShape</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>number</pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token comment\">// An object with warnings on extra properties</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token literal-property property\">optionalObjectWithStrictShape</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">exact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token literal-property property\">quantity</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>number</pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token comment\">// 你可以在任何 PropTypes 属性后面加上 `isRequired` ，确保</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token comment\">// 这个 prop 没有被提供时，会打印警告信息。</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token literal-property property\">requiredFunc</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>func<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token comment\">// 任意类型的必需数据</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token literal-property property\">requiredAny</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>any<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token comment\">// 你可以指定一个自定义验证器。它在验证失败时应返回一个 Error 对象。</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token comment\">// 请不要使用 `console.warn` 或抛出异常，因为这在 `oneOfType` 中不会起作用。</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token function-variable function\">customProp</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> propName<span class=\"token punctuation\">,</span> componentName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">matchme</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">[</span>propName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>  <span class=\"token string\">'Invalid prop `'</span> <span class=\"token operator\">+</span> propName <span class=\"token operator\">+</span> <span class=\"token string\">'` supplied to'</span> <span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>  <span class=\"token string\">' `'</span> <span class=\"token operator\">+</span> componentName <span class=\"token operator\">+</span> <span class=\"token string\">'`. Validation failed.'</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre></pre></td></tr><tr><td data-num=\"75\"></td><td><pre><span class=\"token comment\">// 你也可以提供一个自定义的 `arrayOf` 或 `objectOf` 验证器。</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token comment\">// 它应该在验证失败时返回一个 Error 对象。</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre><span class=\"token comment\">// 验证器将验证数组或对象中的每个值。验证器的前两个参数</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre><span class=\"token comment\">// 第一个是数组或对象本身</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre><span class=\"token comment\">// 第二个是他们当前的键。</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre><span class=\"token literal-property property\">customArrayProp</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">arrayOf</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">propValue<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> componentName<span class=\"token punctuation\">,</span> location<span class=\"token punctuation\">,</span> propFullName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">matchme</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>propValue<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre><span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>  <span class=\"token string\">'Invalid prop `'</span> <span class=\"token operator\">+</span> propFullName <span class=\"token operator\">+</span> <span class=\"token string\">'` supplied to'</span> <span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>  <span class=\"token string\">' `'</span> <span class=\"token operator\">+</span> componentName <span class=\"token operator\">+</span> <span class=\"token string\">'`. Validation failed.'</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></blockquote>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//import App from './01_props/01_Parent_Child' // 父子组件省略.jsx</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//import App from './01_props/02_Parent_Child_value' // 父组件给子组件传值</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">//import App from './01_props/03_Parent_Child_default' // 父组件给子组件传值，子组件设置默认值</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./01_props/04_Parent-Child_type'</span> <span class=\"token comment\">// 父组件给子组件传值，子组件设置默认值，并且验证数据类型</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/01_props/04_Parent_Chil_type.jsx</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/01_props/04_Parent_Chil_type.jsx</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 父组件在调用子组件的地方，添加自定义的属性，</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 如果属性的值是变量，boolean 类型，number 类型，对象，数组，null，undefined，函数，</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 需要使用 &#123;&#125; 包裹</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 如果子组件是类组件，可以通过 this.props 访问到父组件传递的值</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 如果子组件是函数式组件，可以通过 函数的默认参数 props 访问到父组件传递的值</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 如果子组件是函数式组件，就在组件定义之后通过 组件.defaultProps 设置默认值</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// 如果子组件是类组件，其中一种方式就在组件定义之后通过 组件.defaultProps 设置默认值</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 如果子组件是类组件，另一种方式就是在定义子组件时，通过类的静态属性设置 defaultProps</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">// 如果需要给子组件的值设置数据类型的校验，通过第三方的 prop-types 来完成</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// 定义好组件之后， 通过 组件.propTypes 设置</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">'prop-types'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Child2</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'props2'</span><span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span>子组件<span class=\"token number\">2</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>str的值为<span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>str <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>flag的值为<span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>flag <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>num的值为<span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>num <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>obj的a值为<span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>obj<span class=\"token punctuation\">.</span>a <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>arr的值为<span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>arr <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>Child2<span class=\"token punctuation\">.</span>defaultProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token literal-property property\">str</span><span class=\"token operator\">:</span> <span class=\"token string\">'hello react function'</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>Child2<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token literal-property property\">str</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 该属性必须传递，但是只要设置了默认值，即可不传（vue 即使设置默认值，但是还需要传递值）</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token literal-property property\">flag</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>bool<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token comment\">// num: PropTypes.string,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token comment\">//num: PropTypes.oneOfType ([PropTypes.string, PropTypes.number]).isRequired, // 多个类型</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token literal-property property\">obj</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token literal-property property\">arr</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token function-variable function\">num</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> propName<span class=\"token punctuation\">,</span> componentName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>propName<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>componentName<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> props<span class=\"token punctuation\">[</span>propName<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'number'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'请传入number类型数据'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">[</span>propName<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'出错了'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Child1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token keyword\">static</span> defaultProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token literal-property property\">str</span><span class=\"token operator\">:</span> <span class=\"token string\">'hello react static props'</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"props1\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span>子组件<span class=\"token number\">1</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>str的值为<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>str <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>flag的值为<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>flag <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>num的值为<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>num <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>obj的a值为<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>obj<span class=\"token punctuation\">.</span>a <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>arr的值为<span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>arr <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token comment\">// Child1.defaultProps = &#123;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token comment\">//   str: 'hello react class'</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre><span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Parent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token keyword\">const</span> str <span class=\"token operator\">=</span> <span class=\"token string\">\"hello world\"</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>        <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span>父组件<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>        <span class=\"token operator\">&lt;</span>Child1 </pre></td></tr><tr><td data-num=\"82\"></td><td><pre>          str <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> str <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>          flag <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span> </pre></td></tr><tr><td data-num=\"84\"></td><td><pre>          num <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>          obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">b</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>          arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>        <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>        <span class=\"token operator\">&lt;</span>Child2 </pre></td></tr><tr><td data-num=\"89\"></td><td><pre>          flag <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">&#125;</span> </pre></td></tr><tr><td data-num=\"90\"></td><td><pre>          num <span class=\"token operator\">=</span>  <span class=\"token string\">'100'</span> </pre></td></tr><tr><td data-num=\"91\"></td><td><pre>          obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">b</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>          arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'aa'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bb'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'cc'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>        <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre></pre></td></tr><tr><td data-num=\"99\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>父子组件<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>        <span class=\"token operator\">&lt;</span>Parent <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre></pre></td></tr><tr><td data-num=\"110\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</pre></td></tr></table></figure><h2 id=\"53-propschildren\"><a class=\"anchor\" href=\"#53-propschildren\">#</a> 5.3 props.children</h2>\n<p>我们知道使用组件的时候，可以嵌套。要在自定义组件中使用嵌套结构，就需要使用  <code>props.children</code>  。</p>\n<p>等同于 vue 中的 slot 插槽</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./01_props/05_App_props_children'</span> <span class=\"token comment\">// 类插槽</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/01_props/05_App_props_children.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">//props.children 可以看作是类似于 vue 中的 slot</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Content</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>children <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Header</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">这里是首页头部</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Header</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Content</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">这里是首页内容</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Content</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">这里是分类头部</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Header</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Content</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">这里是分类内容</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Content</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>如果需要给组件添加多个元素，并且显示在多个位置，可以如下设置：</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./01_props/06_App_mutiple_props_children'</span> <span class=\"token comment\">// 类具名插槽（多个插槽）</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用 js</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/01_props/06_App_mutiple_props_children.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 以数组的下标决定显示的位置</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Header</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">城市</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">标题</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">登录</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Header</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">返回</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">产品名称</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">更多</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Header</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>实现类似 vue 的具名插槽，需要通过 props.children 的下标去访问</p>\n</blockquote>\n<h2 id=\"54-render-props特性\"><a class=\"anchor\" href=\"#54-render-props特性\">#</a> 5.4 render props 特性</h2>\n<blockquote>\n<p>使用 Render Props 来解决横切关注点（Cross-Cutting Concerns）</p>\n</blockquote>\n<p>组件是 React 代码复用的主要单元，但如何将一个组件封装的状态或行为共享给其他需要相同状态的组件并不总是显而易见。</p>\n<p>以下组件跟踪 Web 应用程序中的鼠标位置:</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./01_props/07_App_mouse_tracker'</span> <span class=\"token comment\">// 鼠标跟随</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/01_props/07_App_mouse_tracker.jsx</code></p>\n<blockquote>\n<p>还没有学习状态 state 以及事件处理，这里先用</p>\n</blockquote>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 初始化状态</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">//style 写为对象，对象使用 &#123;&#125; 包裹</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">//onMouseMove 事件，使用小驼峰式命名，函数使用 &#123;&#125; 包裹，函数默认参数为 event 事件对象</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100vw'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'100vh'</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> onMouseMove <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">// 修改状态 --  不要使用赋值表达式</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientX<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>          <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientY</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">鼠标位置：(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>x <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">, </span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>y <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">)</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>当光标在屏幕上移动时，组件在  <code>&lt;p&gt;</code>  中显示其坐标。</p>\n<p>现在的问题是：我们如何在另一个组件中复用这个行为？换个说法，若另一个组件需要知道鼠标位置，我们能否封装这一行为，以便轻松地与其他组件共享它？</p>\n</blockquote>\n<p><strong>render prop 是一个用于告知组件需要渲染什么内容的函数 prop。</strong></p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./01_props/08_App_render_props'</span> <span class=\"token comment\">// 渲染属性 - 其他组件共享状态</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 标签形式调用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>src/01_props/08_App_render_props.jsx</code></p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 渲染属性共享组件的状态</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 在调用需要共享的组件（Mouse）上，添加一个 render 的自定义属性，该属性是一个自定义函数</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 在自定义函数的内部返回需要共享给的那个组件（Cat）</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 在需要共享的组件（Mouse）内部，通过 this.props.render () 或者 props.render () 即可调用，参数即为需要共享的状态</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 那么在定义自定义 render 属性的函数内部，就会接收到 参数，通过返回的组件（Cat）传递该参数即可</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Cat</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">cat鼠标位置：(</span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>point<span class=\"token punctuation\">.</span>x <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">, </span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>point<span class=\"token punctuation\">.</span>y <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">)</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Dog</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Dog鼠标位置：(</span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>point<span class=\"token punctuation\">.</span>x <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">, </span><span class=\"token punctuation\">&#123;</span> props<span class=\"token punctuation\">.</span>point<span class=\"token punctuation\">.</span>y <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">)</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Mouse</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 初始化状态</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token comment\">//style 写为对象，对象使用 &#123;&#125; 包裹</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token comment\">//onMouseMove 事件，使用小驼峰式命名，函数使用 &#123;&#125; 包裹，函数默认参数为 event 事件对象</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100vw'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'50vh'</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> onMouseMove <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token comment\">// 修改状态 --  不要使用赋值表达式</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>          <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientX<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>          <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientY</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">mouse鼠标位置：(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>x <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">, </span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>y <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">)</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/* &lt;Mouse render = &#123; (point) => &#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>          return &lt;Cat point = &#123; point &#125;>&lt;/Cat></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        &#125; &#125;>&lt;/Mouse></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        &lt;hr /></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        &lt;Mouse render = &#123; (point) => &#123;</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>          return &lt;Dog point = &#123; point &#125;>&lt;/Dog></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        &#125; &#125;>&lt;/Mouse> */<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        &lt;Mouse render = <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">point</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>              &lt;Cat point = <span class=\"token punctuation\">&#123;</span> point <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Cat</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>              &lt;Dog point = <span class=\"token punctuation\">&#123;</span> point <span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Dog</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>          <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Mouse</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>此案例实际上完成了 react 中子组件给父组件传值</p>\n</blockquote>\n",
            "tags": [
                "react学习",
                "react"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/react-study/1/",
            "url": "https://www.yexingcheng.com/react-study/1/",
            "title": "React学习第一天",
            "date_published": "2022-07-31T16:00:00.000Z",
            "content_html": "<h1 id=\"一-关于react\"><a class=\"anchor\" href=\"#一-关于react\">#</a> 一、关于 React</h1>\n<p>英文官网：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWFjdGpzLm9yZy8=\">https://reactjs.org/</span></p>\n<p>中文官网：<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnLw==\">https://zh-hans.reactjs.org/</span></p>\n<p>React 起源于 Facebook 的内部项目，因为该公司对市场上所有 JavaScript MVC 框架，都不满意，就决定自己写一套，用来架设 Instagram 的网站。做出来以后，发现这套东西很好用，就在 2013 年 5 月开源了。</p>\n<p>react 在发展过程中，一直跟随原生 js 的脚步，特别是从 v16.0 版本开始（用到了 class 来创建组件）</p>\n<p>2015 年推出了使用 react 来编写移动端的 app ---- react-native</p>\n<p>重要版本发版时间</p>\n<table>\n<thead>\n<tr>\n<th>序号</th>\n<th>版本号</th>\n<th>发版时间</th>\n<th>重要更新</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>16</td>\n<td>2017 年 9 月 26</td>\n<td>引入 es6 的类组件</td>\n</tr>\n<tr>\n<td>2</td>\n<td>16.3</td>\n<td>2018 年 4 月 3 日</td>\n<td>生命周期更新</td>\n</tr>\n<tr>\n<td>3</td>\n<td>16.4</td>\n<td>2018 年 5 月 23 日</td>\n<td>生命周期更新</td>\n</tr>\n<tr>\n<td>4</td>\n<td>16.8</td>\n<td>2019 年 2 月 6 日</td>\n<td>引入 react hooks</td>\n</tr>\n<tr>\n<td>5</td>\n<td>17.0</td>\n<td>2020 年 10 月 20 日</td>\n<td>过渡版本</td>\n</tr>\n<tr>\n<td>6</td>\n<td>18.0</td>\n<td>2022 年 3 月 29 日</td>\n<td>写法改变，严格模式发生改变</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"二-脚手架\"><a class=\"anchor\" href=\"#二-脚手架\">#</a> 二、脚手架</h1>\n<p>英文官网：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jcmVhdGUtcmVhY3QtYXBwLmRldi8=\">https://create-react-app.dev/</span></p>\n<p>中文官网：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jcmVhdGUtcmVhY3QtYXBwLmJvb3Rjc3MuY29tLw==\">https://create-react-app.bootcss.com/</span></p>\n<blockquote>\n<p>补充：react 的脚手架并不是只有  <code>create-react-app</code> ，还有 <code>dva-cli</code> , <code>umi</code>  等</p>\n</blockquote>\n<h2 id=\"21-create-react-app脚手架的使用\"><a class=\"anchor\" href=\"#21-create-react-app脚手架的使用\">#</a> 2.1 create-react-app 脚手架的使用</h2>\n<blockquote>\n<p>Create React App 让你仅通过一行命令，即可构建现代化的 Web 应用。</p>\n<p>本文档之后称之为 cra</p>\n</blockquote>\n<p>创建项目的方式:</p>\n<blockquote>\n<p>需要保证电脑安装 node 版本在 14 以上，系统在 win7 以上</p>\n</blockquote>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 方式 1: 使用 npx</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ npx create-react-app react-basic</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 方式 2: 使用 npm</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>$ <span class=\"token function\">npm</span> init react-app react-basic</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 方式 3: 使用 yarn</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>$ <span class=\"token function\">yarn</span> create react-app react-basic</pre></td></tr></table></figure><p>如果需要使用 ts 开发项目，创建项目时可以通过 <code>--template typescript</code>  指定模版</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ npx create-react-app myapp <span class=\"token parameter variable\">--template</span> typescript</pre></td></tr></table></figure><p>如果出现如下内容，即代表项目创建成功</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Success<span class=\"token operator\">!</span> Created react-basic at /Users/wudaxun/Desktop/workspace/code/bk2207A/code/react-course/react-basic</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Inside that directory, you can run several commands:</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token function\">npm</span> start</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    Starts the development server.</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token function\">npm</span> run build</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    Bundles the app into static files <span class=\"token keyword\">for</span> production.</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token function\">npm</span> <span class=\"token builtin class-name\">test</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    Starts the <span class=\"token builtin class-name\">test</span> runner.</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token function\">npm</span> run <span class=\"token function\">eject</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    Removes this tool and copies build dependencies, configuration files</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    and scripts into the app directory. If you <span class=\"token keyword\">do</span> this, you can’t go back<span class=\"token operator\">!</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>We suggest that you begin by typing:</pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token builtin class-name\">cd</span> react-basic</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token function\">npm</span> start</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>Happy hacking<span class=\"token operator\">!</span></pre></td></tr></table></figure><h2 id=\"22-项目目录解析\"><a class=\"anchor\" href=\"#22-项目目录解析\">#</a> 2.2 项目目录解析</h2>\n<p>项目创建完毕生成目录结构如下：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>react-basic</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>├── README.md</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>├── node_modules</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>├── package.json</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>├── .gitignore</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>├── public</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>│   ├── favicon.ico</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>│   ├── index.html</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>│   ├── logo192.png</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>│   ├── logo512.png</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>│   ├── manifest.json</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>│   └── robots.txt</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>└── src</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    ├── App.css</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    ├── App.js</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    ├── App.test.js</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    ├── index.css</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    ├── index.js</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    ├── logo.svg</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    ├── reportWebVitals.js // 做性能测试</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    └── setupTests.js // 测试</pre></td></tr></table></figure><p><code>src/reportWebVitals.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">reportWebVitals</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">onPerfEntry</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>onPerfEntry <span class=\"token operator\">&amp;&amp;</span> onPerfEntry <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'web-vitals'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span> getCLS<span class=\"token punctuation\">,</span> getFID<span class=\"token punctuation\">,</span> getFCP<span class=\"token punctuation\">,</span> getLCP<span class=\"token punctuation\">,</span> getTTFB <span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token function\">getCLS</span><span class=\"token punctuation\">(</span>onPerfEntry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 衡量视觉稳定性。为了提供一个好的用户体验，CLS 应该小于 0.1</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token function\">getFID</span><span class=\"token punctuation\">(</span>onPerfEntry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 衡量可交互性。为了提供一个好的用户体验，FID 应该在 100 毫秒内。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token function\">getFCP</span><span class=\"token punctuation\">(</span>onPerfEntry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 首次内容绘制</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token function\">getLCP</span><span class=\"token punctuation\">(</span>onPerfEntry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 衡量加载性能。为了提供一个好的用户体验，LCP 应该在 2.5 秒内</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token function\">getTTFB</span><span class=\"token punctuation\">(</span>onPerfEntry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 到第一个字节的时间</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> reportWebVitals<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>react 官方文档已经给了我们性能提升的方案：<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3Mvb3B0aW1pemluZy1wZXJmb3JtYW5jZS5odG1s\">https://zh-hans.reactjs.org/docs/optimizing-performance.html</span></p>\n</blockquote>\n<p>打开 <code>package.json</code> , 发现可运行命令如下：</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts start\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts build\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts test\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token property\">\"eject\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts eject\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><p><code>start</code>  指令用于启动开发者服务器</p>\n<p><code>build</code>  指令用于打包项目</p>\n<p><code>test</code>  指令用于测试</p>\n<p><code>eject</code>  指令用于抽离配置文件</p>\n<blockquote>\n<p><code>cra</code>  脚手架基于 <code>webpack</code> ，默认 <code>webpack</code>  的配置在  <code>node_modules </code> 下的 <code> react-scripts</code>  内部，但是一般情况下，传输代码时，不会上传  <code>node_modules</code> ，那么在必要情况下就必须得抽离配置文件。</p>\n</blockquote>\n<h2 id=\"23-抽离配置文件\"><a class=\"anchor\" href=\"#23-抽离配置文件\">#</a> 2.3 抽离配置文件</h2>\n<p>通过 <code>npm run eject</code>  或者 <code>cnpm run eject</code>  或者 <code>yarn eject</code>  指令抽离配置文件</p>\n<blockquote>\n<p>抽离配置文件过程中注意事项</p>\n<ul>\n<li>1. 确保项目的 git 仓库是最新的</li>\n<li>2. 如果不需要对于 webpack 进行配置，那么不需要抽离配置文件</li>\n<li>create-react-app v2 默认支持 ts 以及 sass 以及 css 的模块化，如果使用 sass 作为 css 预处理器，那么不需要抽离配置文件</li>\n</ul>\n</blockquote>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Copying files into /Users/wudaxun/Desktop/workspace/code/bk2207A/code/react-course/react-basic</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  Adding /config/env.js to the project</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  Adding /config/getHttpsConfig.js to the project</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  Adding /config/modules.js to the project</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  Adding /config/paths.js to the project</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  Adding /config/webpack.config.js to the project</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  Adding /config/webpackDevServer.config.js to the project</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  Adding /config/jest/babelTransform.js to the project</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  Adding /config/jest/cssTransform.js to the project</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  Adding /config/jest/fileTransform.js to the project</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  Adding /scripts/build.js to the project</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  Adding /scripts/start.js to the project</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  Adding /scripts/test.js to the project</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  Adding /config/webpack/persistentCache/createEnvironmentHash.js to the project</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>Updating the dependencies</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  Removing react-scripts from dependencies</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  Adding @babel/core to dependencies</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  Adding @pmmmwh/react-refresh-webpack-plugin to dependencies</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  Adding @svgr/webpack to dependencies</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  Adding babel-jest to dependencies</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  Adding babel-loader to dependencies</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  Adding babel-plugin-named-asset-import to dependencies</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  Adding babel-preset-react-app to dependencies</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  Adding bfj to dependencies</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  Adding browserslist to dependencies</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  Adding camelcase to dependencies</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  Adding case-sensitive-paths-webpack-plugin to dependencies</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  Adding css-loader to dependencies</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  Adding css-minimizer-webpack-plugin to dependencies</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  Adding dotenv to dependencies</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  Adding dotenv-expand to dependencies</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  Adding eslint to dependencies</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  Adding eslint-config-react-app to dependencies</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  Adding eslint-webpack-plugin to dependencies</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  Adding file-loader to dependencies</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  Adding fs-extra to dependencies</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  Adding html-webpack-plugin to dependencies</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  Adding identity-obj-proxy to dependencies</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  Adding jest to dependencies</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  Adding jest-resolve to dependencies</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  Adding jest-watch-typeahead to dependencies</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  Adding mini-css-extract-plugin to dependencies</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  Adding postcss to dependencies</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  Adding postcss-flexbugs-fixes to dependencies</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  Adding postcss-loader to dependencies</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  Adding postcss-normalize to dependencies</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  Adding postcss-preset-env to dependencies</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  Adding prompts to dependencies</pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  Adding react-app-polyfill to dependencies</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  Adding react-dev-utils to dependencies</pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  Adding react-refresh to dependencies</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>  Adding resolve to dependencies</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>  Adding resolve-url-loader to dependencies</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  Adding sass-loader to dependencies</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>  Adding semver to dependencies</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  Adding source-map-loader to dependencies</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>  Adding style-loader to dependencies</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>  Adding tailwindcss to dependencies</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  Adding terser-webpack-plugin to dependencies</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>  Adding webpack to dependencies</pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  Adding webpack-dev-server to dependencies</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>  Adding webpack-manifest-plugin to dependencies</pre></td></tr><tr><td data-num=\"64\"></td><td><pre>  Adding workbox-webpack-plugin to dependencies</pre></td></tr><tr><td data-num=\"65\"></td><td><pre></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>Updating the scripts</pre></td></tr><tr><td data-num=\"67\"></td><td><pre>  Replacing <span class=\"token string\">\"react-scripts start\"</span> with <span class=\"token string\">\"node scripts/start.js\"</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>  Replacing <span class=\"token string\">\"react-scripts build\"</span> with <span class=\"token string\">\"node scripts/build.js\"</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>  Replacing <span class=\"token string\">\"react-scripts test\"</span> with <span class=\"token string\">\"node scripts/test.js\"</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>Configuring package.json</pre></td></tr><tr><td data-num=\"72\"></td><td><pre>  Adding Jest configuration</pre></td></tr><tr><td data-num=\"73\"></td><td><pre>  Adding Babel preset</pre></td></tr><tr><td data-num=\"74\"></td><td><pre></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>Running <span class=\"token function\">npm</span> install<span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"76\"></td><td><pre></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>up to <span class=\"token function\">date</span> <span class=\"token keyword\">in</span> 4s</pre></td></tr><tr><td data-num=\"78\"></td><td><pre></pre></td></tr><tr><td data-num=\"79\"></td><td><pre><span class=\"token number\">203</span> packages are looking <span class=\"token keyword\">for</span> funding</pre></td></tr><tr><td data-num=\"80\"></td><td><pre>  run <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">npm</span> fund<span class=\"token variable\">`</span></span> <span class=\"token keyword\">for</span> details</pre></td></tr><tr><td data-num=\"81\"></td><td><pre>Ejected successfully<span class=\"token operator\">!</span></pre></td></tr></table></figure><figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">npm</span> start</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">npm</span> build</pre></td></tr></table></figure><h2 id=\"24-webpack二次封装\"><a class=\"anchor\" href=\"#24-webpack二次封装\">#</a> 2.4 webpack 二次封装</h2>\n<h3 id=\"241-集成css预处理器\"><a class=\"anchor\" href=\"#241-集成css预处理器\">#</a> 2.4.1 集成 css 预处理器</h3>\n<ul>\n<li><strong>集成 less 预处理器</strong></li>\n</ul>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ cnpm i <span class=\"token function\">less</span> less-loader <span class=\"token parameter variable\">-D</span></pre></td></tr></table></figure><ul>\n<li><strong>集成 sass 预处理器</strong></li>\n</ul>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ cnpm i node-sass <span class=\"token parameter variable\">-D</span></pre></td></tr></table></figure><ul>\n<li><strong>集成 stylus 预处理器</strong></li>\n</ul>\n<pre><code>$ cnpm i stylus stylus-loader -D\n</code></pre>\n<p>具体配置如下：</p>\n<p><code>React-basic/config/webpack.config.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//style files regexes 可以搜索此关键字快速定位</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> cssRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.css$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> cssModuleRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.module\\.css$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> sassRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.(scss|sass)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> sassModuleRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.module\\.(scss|sass)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> lessRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.less$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> lessModuleRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.module\\.less$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> stylusRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.stylus</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">const</span> stylusModuleRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.module\\.stylus</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// \"postcss\" loader applies autoprefixer to our CSS. 可以搜索此关键字快速定位</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// \"css\" loader resolves paths in CSS and adds assets as dependencies.</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">// \"style\" loader turns CSS into JS modules that inject &lt;style> tags.</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">// In production, we use MiniCSSExtractPlugin to extract that CSS</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// to a file, but in development \"style\" loader enables hot editing</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">// of CSS.</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">// By default we support CSS Modules with the extension .module.css</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> cssRegex<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token literal-property property\">exclude</span><span class=\"token operator\">:</span> cssModuleRegex<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token function\">getStyleLoaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token literal-property property\">importLoaders</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token literal-property property\">sourceMap</span><span class=\"token operator\">:</span> isEnvProduction</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token operator\">?</span> shouldUseSourceMap</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token operator\">:</span> isEnvDevelopment<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'icss'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token comment\">// Don't consider CSS imports dead code even if the</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token comment\">// containing package claims to have no side effects.</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token comment\">// Remove this when webpack adds a warning or an error for this.</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token comment\">// See https://github.com/webpack/webpack/issues/6571</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token literal-property property\">sideEffects</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token comment\">// Adds support for CSS Modules (https://github.com/css-modules/css-modules)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token comment\">// using the extension .module.css</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> cssModuleRegex<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token function\">getStyleLoaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token literal-property property\">importLoaders</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token literal-property property\">sourceMap</span><span class=\"token operator\">:</span> isEnvProduction</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token operator\">?</span> shouldUseSourceMap</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token operator\">:</span> isEnvDevelopment<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>          <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'local'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>          <span class=\"token literal-property property\">getLocalIdent</span><span class=\"token operator\">:</span> getCSSModuleLocalIdent<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token comment\">// Opt-in support for SASS (using .scss or .sass extensions).</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token comment\">// By default we support SASS Modules with the</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token comment\">// extensions .module.scss or .module.sass</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>      <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> sassRegex<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token literal-property property\">exclude</span><span class=\"token operator\">:</span> sassModuleRegex<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>          <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token function\">getStyleLoaders</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>              <span class=\"token literal-property property\">importLoaders</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>              <span class=\"token literal-property property\">sourceMap</span><span class=\"token operator\">:</span> isEnvProduction</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>              <span class=\"token operator\">?</span> shouldUseSourceMap</pre></td></tr><tr><td data-num=\"62\"></td><td><pre>              <span class=\"token operator\">:</span> isEnvDevelopment<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>              <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>                <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'icss'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>            <span class=\"token string\">'sass-loader'</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>            <span class=\"token comment\">// Don't consider CSS imports dead code even if the</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>            <span class=\"token comment\">// containing package claims to have no side effects.</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>            <span class=\"token comment\">// Remove this when webpack adds a warning or an error for this.</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>            <span class=\"token comment\">// See https://github.com/webpack/webpack/issues/6571</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>            <span class=\"token literal-property property\">sideEffects</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>      <span class=\"token comment\">// Adds support for CSS Modules, but using SASS</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>      <span class=\"token comment\">// using the extension .module.scss or .module.sass</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> sassModuleRegex<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>          <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token function\">getStyleLoaders</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>              <span class=\"token literal-property property\">importLoaders</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>              <span class=\"token literal-property property\">sourceMap</span><span class=\"token operator\">:</span> isEnvProduction</pre></td></tr><tr><td data-num=\"83\"></td><td><pre>              <span class=\"token operator\">?</span> shouldUseSourceMap</pre></td></tr><tr><td data-num=\"84\"></td><td><pre>              <span class=\"token operator\">:</span> isEnvDevelopment<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>              <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>                <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'local'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>                <span class=\"token literal-property property\">getLocalIdent</span><span class=\"token operator\">:</span> getCSSModuleLocalIdent<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>            <span class=\"token string\">'sass-loader'</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>          <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> lessRegex<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>            <span class=\"token literal-property property\">exclude</span><span class=\"token operator\">:</span> lessModuleRegex<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>              <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token function\">getStyleLoaders</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>                <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>                  <span class=\"token literal-property property\">importLoaders</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>                  <span class=\"token literal-property property\">sourceMap</span><span class=\"token operator\">:</span> isEnvProduction</pre></td></tr><tr><td data-num=\"100\"></td><td><pre>                  <span class=\"token operator\">?</span> shouldUseSourceMap</pre></td></tr><tr><td data-num=\"101\"></td><td><pre>                  <span class=\"token operator\">:</span> isEnvDevelopment<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>                  <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>                    <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'icss'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>                  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>                <span class=\"token string\">'less-loader'</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>                <span class=\"token comment\">// Don't consider CSS imports dead code even if the</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>                <span class=\"token comment\">// containing package claims to have no side effects.</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>                <span class=\"token comment\">// Remove this when webpack adds a warning or an error for this.</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>                <span class=\"token comment\">// See https://github.com/webpack/webpack/issues/6571</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>                <span class=\"token literal-property property\">sideEffects</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>          <span class=\"token comment\">// Adds support for CSS Modules, but using SASS</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>          <span class=\"token comment\">// using the extension .module.scss or .module.sass</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>            <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> lessModuleRegex<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>              <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token function\">getStyleLoaders</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>                <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>                  <span class=\"token literal-property property\">importLoaders</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre>                  <span class=\"token literal-property property\">sourceMap</span><span class=\"token operator\">:</span> isEnvProduction</pre></td></tr><tr><td data-num=\"122\"></td><td><pre>                  <span class=\"token operator\">?</span> shouldUseSourceMap</pre></td></tr><tr><td data-num=\"123\"></td><td><pre>                  <span class=\"token operator\">:</span> isEnvDevelopment<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>                  <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>                    <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'local'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>                    <span class=\"token literal-property property\">getLocalIdent</span><span class=\"token operator\">:</span> getCSSModuleLocalIdent<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>                  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre>                <span class=\"token string\">'less-loader'</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre>     <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>          <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> stylusRegex<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre>            <span class=\"token literal-property property\">exclude</span><span class=\"token operator\">:</span> stylusModuleRegex<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre>              <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token function\">getStyleLoaders</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"136\"></td><td><pre>                <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre>                  <span class=\"token literal-property property\">importLoaders</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre>                  <span class=\"token literal-property property\">sourceMap</span><span class=\"token operator\">:</span> isEnvProduction</pre></td></tr><tr><td data-num=\"139\"></td><td><pre>                  <span class=\"token operator\">?</span> shouldUseSourceMap</pre></td></tr><tr><td data-num=\"140\"></td><td><pre>                  <span class=\"token operator\">:</span> isEnvDevelopment<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre>                  <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre>                    <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'icss'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"143\"></td><td><pre>                  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre>                <span class=\"token string\">'stylus-loader'</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre>              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"147\"></td><td><pre>                <span class=\"token comment\">// Don't consider CSS imports dead code even if the</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre>                <span class=\"token comment\">// containing package claims to have no side effects.</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre>                <span class=\"token comment\">// Remove this when webpack adds a warning or an error for this.</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>                <span class=\"token comment\">// See https://github.com/webpack/webpack/issues/6571</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre>                <span class=\"token literal-property property\">sideEffects</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"152\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"153\"></td><td><pre>          <span class=\"token comment\">// Adds support for CSS Modules, but using SASS</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre>          <span class=\"token comment\">// using the extension .module.scss or .module.sass</span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"156\"></td><td><pre>            <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> stylusModuleRegex<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"157\"></td><td><pre>              <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token function\">getStyleLoaders</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"158\"></td><td><pre>                <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"159\"></td><td><pre>                  <span class=\"token literal-property property\">importLoaders</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"160\"></td><td><pre>                  <span class=\"token literal-property property\">sourceMap</span><span class=\"token operator\">:</span> isEnvProduction</pre></td></tr><tr><td data-num=\"161\"></td><td><pre>                  <span class=\"token operator\">?</span> shouldUseSourceMap</pre></td></tr><tr><td data-num=\"162\"></td><td><pre>                  <span class=\"token operator\">:</span> isEnvDevelopment<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"163\"></td><td><pre>                  <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"164\"></td><td><pre>                    <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'local'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"165\"></td><td><pre>                    <span class=\"token literal-property property\">getLocalIdent</span><span class=\"token operator\">:</span> getCSSModuleLocalIdent<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"166\"></td><td><pre>                  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"167\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"168\"></td><td><pre>                <span class=\"token string\">'stylus-loader'</span></pre></td></tr><tr><td data-num=\"169\"></td><td><pre>              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"170\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><h3 id=\"242-配置解析别名\"><a class=\"anchor\" href=\"#242-配置解析别名\">#</a> 2.4.2 配置 @解析别名</h3>\n<blockquote>\n<p>vue 项目中可以使用 @代替 src 目录，那么 react 中抽离配置文件之后也可以实现此功能</p>\n</blockquote>\n<p><code>react-basic/config/webpack.config.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token literal-property property\">alias</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token string-property property\">'@'</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'src'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// +++++++++++++</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">// Support React Native Web 搜索此关键词快速定位</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// https://www.smashingmagazine.com/2016/08/a-glimpse-into-the-future-with-react-native-for-web/</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string-property property\">'react-native'</span><span class=\"token operator\">:</span> <span class=\"token string\">'react-native-web'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token comment\">// Allows for better profiling with ReactDevTools</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>isEnvProductionProfile <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token string-property property\">'react-dom$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'react-dom/profiling'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token string-property property\">'scheduler/tracing'</span><span class=\"token operator\">:</span> <span class=\"token string\">'scheduler/tracing-profiling'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>modules<span class=\"token punctuation\">.</span>webpackAliases <span class=\"token operator\">||</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><blockquote>\n<p>如果是 ts 项目，需要在 <code>tsconfig.json</code>  中加入如下配置</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> <span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es6\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//ts 代码以 es5 为标准</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre> <span class=\"token property\">\"lib\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   <span class=\"token string\">\"dom\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token string\">\"dom.iterable\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   <span class=\"token string\">\"esnext\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre> <span class=\"token property\">\"paths\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">// ++++++++++</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>   <span class=\"token property\">\"@/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"./src/*\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre> <span class=\"token property\">\"allowJs\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre> <span class=\"token property\">\"skipLibCheck\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre> <span class=\"token property\">\"esModuleInterop\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre> <span class=\"token property\">\"allowSyntheticDefaultImports\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre> <span class=\"token property\">\"strict\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre> <span class=\"token property\">\"forceConsistentCasingInFileNames\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre> <span class=\"token property\">\"noFallthroughCasesInSwitch\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre> <span class=\"token property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre> <span class=\"token property\">\"moduleResolution\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre> <span class=\"token property\">\"resolveJsonModule\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre> <span class=\"token property\">\"isolatedModules\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre> <span class=\"token property\">\"noEmit\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"24\"></td><td><pre> <span class=\"token property\">\"jsx\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-jsx\"</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre> <span class=\"token string\">\"src\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre> <span class=\"token string\">\"src/**/*\"</span> <span class=\"token comment\">// ++++++++++</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></blockquote>\n<p><code>src/index.js</code>  测试</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">'@/index.css'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ++++++</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'@/App'</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// ++++++</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> reportWebVitals <span class=\"token keyword\">from</span> <span class=\"token string\">'@/reportWebVitals'</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// ++++++</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token operator\">&lt;</span>React<span class=\"token punctuation\">.</span>StrictMode<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>React<span class=\"token punctuation\">.</span>StrictMode<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">// If you want to start measuring performance in your app, pass a function</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// to log results (for example: reportWebVitals(console.log))</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token function\">reportWebVitals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>如果控制台报错如下，说明 @别名没有配置成功</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Failed to compile<span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Module not found<span class=\"token operator\">:</span> Error<span class=\"token operator\">:</span> Can<span class=\"token string\">'t resolve '</span>@<span class=\"token operator\">/</span>index<span class=\"token punctuation\">.</span>css<span class=\"token string\">' in '</span><span class=\"token operator\">/</span>Users<span class=\"token operator\">/</span>wudaxun<span class=\"token operator\">/</span>Desktop<span class=\"token operator\">/</span>workspace<span class=\"token operator\">/</span>code<span class=\"token operator\">/</span>bk2207A<span class=\"token operator\">/</span>code<span class=\"token operator\">/</span>react<span class=\"token operator\">-</span>course<span class=\"token operator\">/</span>react<span class=\"token operator\">-</span>basic<span class=\"token operator\">/</span>src'</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token constant\">ERROR</span> <span class=\"token keyword\">in</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>src<span class=\"token operator\">/</span>index<span class=\"token punctuation\">.</span>js <span class=\"token number\">6</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">-</span><span class=\"token number\">21</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Module not found<span class=\"token operator\">:</span> Error<span class=\"token operator\">:</span> Can<span class=\"token string\">'t resolve '</span>@<span class=\"token operator\">/</span>index<span class=\"token punctuation\">.</span>css<span class=\"token string\">' in '</span><span class=\"token operator\">/</span>Users<span class=\"token operator\">/</span>wudaxun<span class=\"token operator\">/</span>Desktop<span class=\"token operator\">/</span>workspace<span class=\"token operator\">/</span>code<span class=\"token operator\">/</span>bk2207A<span class=\"token operator\">/</span>code<span class=\"token operator\">/</span>react<span class=\"token operator\">-</span>course<span class=\"token operator\">/</span>react<span class=\"token operator\">-</span>basic<span class=\"token operator\">/</span>src'</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token constant\">ERROR</span> <span class=\"token keyword\">in</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>src<span class=\"token operator\">/</span>index<span class=\"token punctuation\">.</span>js <span class=\"token number\">7</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">-</span><span class=\"token number\">24</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>Module not found<span class=\"token operator\">:</span> Error<span class=\"token operator\">:</span> Can<span class=\"token string\">'t resolve '</span>@<span class=\"token operator\">/</span>App<span class=\"token string\">' in '</span><span class=\"token operator\">/</span>Users<span class=\"token operator\">/</span>wudaxun<span class=\"token operator\">/</span>Desktop<span class=\"token operator\">/</span>workspace<span class=\"token operator\">/</span>code<span class=\"token operator\">/</span>bk2207A<span class=\"token operator\">/</span>code<span class=\"token operator\">/</span>react<span class=\"token operator\">-</span>course<span class=\"token operator\">/</span>react<span class=\"token operator\">-</span>basic<span class=\"token operator\">/</span>src'</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token constant\">ERROR</span> <span class=\"token keyword\">in</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>src<span class=\"token operator\">/</span>index<span class=\"token punctuation\">.</span>js <span class=\"token number\">8</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">-</span><span class=\"token number\">48</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>Module not found<span class=\"token operator\">:</span> Error<span class=\"token operator\">:</span> Can<span class=\"token string\">'t resolve '</span>@<span class=\"token operator\">/</span>reportWebVitals<span class=\"token string\">' in '</span><span class=\"token operator\">/</span>Users<span class=\"token operator\">/</span>wudaxun<span class=\"token operator\">/</span>Desktop<span class=\"token operator\">/</span>workspace<span class=\"token operator\">/</span>code<span class=\"token operator\">/</span>bk2207A<span class=\"token operator\">/</span>code<span class=\"token operator\">/</span>react<span class=\"token operator\">-</span>course<span class=\"token operator\">/</span>react<span class=\"token operator\">-</span>basic<span class=\"token operator\">/</span>src'</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>webpack compiled <span class=\"token keyword\">with</span> <span class=\"token number\">3</span> errors</pre></td></tr></table></figure><p>如果没有错误说明配置是成功的。</p>\n<blockquote>\n<p>如果不抽离配置文件，但是也需要配置别名 @</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ cnpm i @craco/craco <span class=\"token parameter variable\">-D</span></pre></td></tr></table></figure><p>项目根目录中创建 craco 的配置文件： <code>craco.config.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token literal-property property\">webpack</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre> <span class=\"token literal-property property\">alias</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   <span class=\"token string-property property\">'@'</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'src'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>修改 <code>package.json</code>  中运行命令</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"craco start\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"craco build\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"craco test\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>重启服务器即可生效</p>\n</blockquote>\n<h2 id=\"25-setupproxy代理\"><a class=\"anchor\" href=\"#25-setupproxy代理\">#</a> 2.5 setupProxy 代理</h2>\n<blockquote>\n<p>即使不抽离配置文件，也是在此处配置代理</p>\n</blockquote>\n<p>如果整个项目只有一个服务器且有跨域问题，可以直接在 <code>package.json</code>  中做如下配置：</p>\n<pre><code>&quot;proxy&quot;: &quot;http://121.89.205.189:3001/api/&quot;\n</code></pre>\n<p>然后在项目中可以如下访问：</p>\n<pre><code>// src/index.js\nfetch('/pro/list').then(res =&gt; res.json()).then(res =&gt; &#123;\n  console.log(res.data)\n&#125;)\n</code></pre>\n<p>那么如果有多个服务器 并且也需要解决跨域问题</p>\n<p>首先， <code>http-proxy-middleware</code>  使用 npm 或 Yarn 安装：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ cnpm <span class=\"token function\">install</span> http-proxy-middleware <span class=\"token parameter variable\">-S</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token comment\"># or</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> http-proxy-middleware <span class=\"token parameter variable\">-S</span></pre></td></tr></table></figure><p>接下来，创建 <code>src/setupProxy.js</code>  并在其中放置以下内容：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> createProxyMiddleware <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http-proxy-middleware'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">app</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>您现在可以根据需要注册代理了！这是使用上述内容的示例 <code>http-proxy-middleware</code> ：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> createProxyMiddleware <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http-proxy-middleware'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 此处不使用 import 语法</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">app</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\">// http://121.89.205.189:3001/api/pro/list ==> /myapi/pro/list</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/myapi'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">createProxyMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token string\">'http://121.89.205.189:3001/api'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token literal-property property\">changeOrigin</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token literal-property property\">pathRewrite</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token string-property property\">'^/myapi'</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>** 注意：** 您不需要在任何地方导入此文件。当您启动开发服务器时，它会自动注册。</p>\n</blockquote>\n<blockquote>\n<p>** 注意：** 此文件仅支持 Node 的 JavaScript 语法。确保只使用受支持的语言功能（即不支持 Flow、ES 模块等）。</p>\n</blockquote>\n<blockquote>\n<p>** 注意：** 将路径传递给代理函数允许您在路径上使用通配符和 / 或模式匹配，这比快速路由匹配更灵活。</p>\n</blockquote>\n<h1 id=\"三-jsx\"><a class=\"anchor\" href=\"#三-jsx\">#</a> 三、JSX</h1>\n<p>设想如下变量声明：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Hello<span class=\"token punctuation\">,</span> world<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>这个有趣的标签语法既不是字符串也不是 HTML。</p>\n<p>它被称为 JSX，是一个 JavaScript 的语法扩展。</p>\n<p>JSX 可以生成 React “元素”。</p>\n<blockquote>\n<p>React <span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvcmVhY3Qtd2l0aG91dC1qc3guaHRtbA==\">不强制要求</span>使用 JSX，但是大多数人发现，在 JavaScript 代码中将 JSX 和 UI 放在一起时，会在视觉上有辅助作用。它还可以使 React 显示更多有用的错误和警告消息。</p>\n</blockquote>\n<p><code>src</code>  文件夹下只保留 <code>index.js</code></p>\n<h2 id=\"31-jsx语法详解\"><a class=\"anchor\" href=\"#31-jsx语法详解\">#</a> 3.1 jsx 语法详解</h2>\n<p>在下面的例子中，我们声明了一个名为  <code>name</code>  的变量，然后在 JSX 中使用它，并将它包裹在大括号中</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//react 18 版本以前</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>hello！<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>你好<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> name <span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span> <span class=\"token comment\">//js 变量加 &#123;&#125; 变 react</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 警告信息：ReactDOM.render is no longer supported in React 18. Use createRoot instead. </span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  app<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>在 JSX 语法中，你可以在大括号内放置任何有效的 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9FeHByZXNzaW9uc19hbmRfT3BlcmF0b3JzI0V4cHJlc3Npb25z\">JavaScript 表达式</span>。例如， <code>2+2</code> ， <code>user.firstName</code>  或  <code>formatName(user)</code>  都是有效的 JavaScript 表达式。</p>\n</blockquote>\n<p>在下面的示例中，我们将调用 JavaScript 函数  <code>formatName(user)</code>  的结果，并将结果嵌入到  <code>&lt;div&gt;</code>  元素中。</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">//react 18 版本写法</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//const name = &lt;h1 > 千锋 HTML5 大前端，前端培训界的扛把子！&lt;/h1></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">//const app = &lt;div > 你好，&#123;name&#125;&lt;/div> //js 变量加 &#123;&#125; 变 react</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">formatUser</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">+</span> user<span class=\"token punctuation\">.</span>lastName</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token literal-property property\">firstName</span><span class=\"token operator\">:</span> <span class=\"token string\">'吴'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token literal-property property\">lastName</span><span class=\"token operator\">:</span> <span class=\"token string\">'大勋'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">// 为了便于阅读，我们会将 JSX 拆分为多行。</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// 同时，我们建议将内容包裹在括号中，虽然这样做不是强制要求的，但是这可以避免遇到自动插入分号陷阱。</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    你好，</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> <span class=\"token function\">formatUser</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>jsx 也是一个表达式</strong></p>\n<p>在编译之后，JSX 表达式会被转为普通 JavaScript 函数调用，并且对其取值后得到 JavaScript 对象。</p>\n<p>也就是说，你可以在  <code>if</code>  语句和  <code>for</code>  循环的代码块中使用 JSX，将 JSX 赋值给变量，把 JSX 当作参数传入，以及从函数中返回 JSX</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">//react 18 版本写法</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//const name = &lt;h1 > 千锋 HTML5 大前端，前端培训界的扛把子！&lt;/h1></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">//const app = &lt;div > 你好，&#123;name&#125;&lt;/div> //js 变量加 &#123;&#125; 变 react</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">formatUser</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">+</span> user<span class=\"token punctuation\">.</span>lastName</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token literal-property property\">firstName</span><span class=\"token operator\">:</span> <span class=\"token string\">'吴'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token literal-property property\">lastName</span><span class=\"token operator\">:</span> <span class=\"token string\">'大勋'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">// 为了便于阅读，我们会将 JSX 拆分为多行。</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// 同时，我们建议将内容包裹在括号中，虽然这样做不是强制要求的，但是这可以避免遇到自动插入分号陷阱。</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">// const app = (</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">//   &lt;div></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">//     你好，</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">//     &#123; formatUser(user) &#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">//   &lt;/div></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">// )</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">getGreeting</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        你好，</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> <span class=\"token function\">formatUser</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>hello error<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\">// const app = getGreeting()</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">getGreeting</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>因为 JSX 语法上更接近 JavaScript 而不是 HTML，所以 React DOM 使用  <code>camelCase</code> （小驼峰命名）来定义属性的名称，而不使用 HTML 属性名称的命名约定。</p>\n<p>例如，JSX 里的  <code>class</code>  变成了 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/className\"> <code>className</code> </a>，而  <code>tabindex</code>  则变为 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/tabIndex\"> <code>tabIndex</code> </a>。</p>\n</blockquote>\n<p>Babel 会把 JSX 转译成一个名为  <code>React.createElement()</code>  函数调用。</p>\n<blockquote>\n<p>上述代码都没见到使用过 React 模块，但是显示却用了，为什么？</p>\n</blockquote>\n<h2 id=\"32-reactcreateelement\"><a class=\"anchor\" href=\"#32-reactcreateelement\">#</a> 3.2 React.createElement</h2>\n<p>先看一个代码</p>\n<p><code>src/index.js</code></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/index.js</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 因为 JSX 语法上更接近 JavaScript 而不是 HTML，</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 所以 React DOM 使用 `camelCase`（小驼峰命名）来定义属性的名称，</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 而不使用 HTML 属性名称的命名约定。</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 例如，JSX 里的 `class` 变成了 className</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">//class 在 React 中被看做了关键字</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// const app = (</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">//   &lt;div className='box'></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">//     hello react</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">//   &lt;/div></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// )</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">// ？为什么 react 模块被显示使用了</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">className</span><span class=\"token operator\">:</span> <span class=\"token string\">'box'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hello react ！！！'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>React.createElement()</code>  会预先执行一些检查，以帮助你编写无错代码，但实际上它创建了一个这样的对象：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 注意：这是简化过的结构</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token literal-property property\">className</span><span class=\"token operator\">:</span> <span class=\"token string\">'box'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token string\">'hello react'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>这些对象被称为 “React 元素”。它们描述了你希望在屏幕上看到的内容。React 通过读取这些对象，然后使用它们来构建 DOM 以及保持随时更新。</p>\n",
            "tags": [
                "react学习",
                "react"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/vue-mobile/15/",
            "url": "https://www.yexingcheng.com/vue-mobile/15/",
            "title": "vue-mobile项目开发流程第十五部分(状态管理器,城市选择,登陆状态,已经路由守卫)",
            "date_published": "2022-07-15T16:00:00.000Z",
            "content_html": "<h3 id=\"518-状态管理器\"><a class=\"anchor\" href=\"#518-状态管理器\">#</a> 5.18 状态管理器</h3>\n<p>vuex： <span class=\"exturl\" data-url=\"aHR0cHM6Ly92dWV4LnZ1ZWpzLm9yZy96aC8=\">https://vuex.vuejs.org/zh/</span></p>\n<h4 id=\"5181-介绍\"><a class=\"anchor\" href=\"#5181-介绍\">#</a> 5.18.1 介绍</h4>\n<p>Vuex 是一个专为 Vue.js 应用程序开发的<strong>状态管理模式 + 库</strong>。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</p>\n<h4 id=\"5182-什么时候使用状态管理器\"><a class=\"anchor\" href=\"#5182-什么时候使用状态管理器\">#</a> 5.18.2 什么时候使用状态管理器</h4>\n<ul>\n<li>多个视图依赖于同一状态。1</li>\n<li>来自不同视图的行为需要变更同一状态。</li>\n</ul>\n<blockquote>\n<p>登录状态：首页头部，加入购物车，购物车，确认订单，地址管理。。。。（登录，退出）</p>\n<p>购物车数量：购物车，页面底部，详情页</p>\n<p>城市选择：首页头部，城市选择列表</p>\n</blockquote>\n<h4 id=\"5183-如何使用\"><a class=\"anchor\" href=\"#5183-如何使用\">#</a> 5.18.3 如何使用</h4>\n<pre><code>$ cnpm i vuex -S\n</code></pre>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/store/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入创建仓库的函数</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createStore<span class=\"token punctuation\">,</span> Store <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 2. 创建仓库</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> store<span class=\"token operator\">:</span> Store<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  state<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//vuex 管理的状态</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    count<span class=\"token operator\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  getters<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//vuex 的计算属性</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">doubleCount</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">*</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  actions<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 异步操作</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token function\">addAction</span> <span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//context 上下文对象</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'increment'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 交给 mutations 改变状态</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token function\">addParamsAction</span> <span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//context 上下文对象</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'increment'</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 交给 mutations 改变状态</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  mutations<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 同步更改状态</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token function\">increment</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+=</span> payload</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  modules<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 分模块管理状态</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\">// 3. 暴露仓库</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store</pre></td></tr></table></figure><figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/main.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createApp <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"vue\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./App.vue'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> router <span class=\"token keyword\">from</span> <span class=\"token string\">'./router'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./store'</span> <span class=\"token comment\">// +++++++</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 引入 Vant 组件库中函数对应的样式 </span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">'vant/es/toast/style'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">'vant/es/dialog/style'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">'vant/es/notify/style'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">'vant/es/image-preview/style'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// 导入重置样式表</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">'./assets/main.scss'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span>App<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>router<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 以插件的形式使用 路由</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 以插件的形式使用 仓库 // +++++++</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#app'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><pre><code class=\"language-vue\">&lt;!-- src/views/vuex/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;div&gt;\n    &#123;&#123; count &#125;&#125; - &#123;&#123; doubleCount &#125;&#125;\n    &lt;button @click=&quot;add&quot;&gt;加1&lt;/button&gt;\n    &lt;button @click=&quot;addVuexFn&quot;&gt;vuex中异步加10&lt;/button&gt;\n    &lt;button @click=&quot;addVuexParamsFn&quot;&gt;vuex中异步加5-传递参数&lt;/button&gt;\n    &lt;button @click=&quot;addComFn&quot;&gt;组件中异步加100&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n\n  export default defineComponent(&#123;\n    mounted () &#123;\n    &#125;,\n    computed: &#123;\n      count () &#123;\n        return this.$store.state.count\n      &#125;,\n      doubleCount () &#123;\n        return this.$store.getters.doubleCount\n      &#125;\n    &#125;,\n    methods: &#123;\n      add () &#123; // 组件同步更改state\n        this.$store.commit('increment', 1)\n      &#125;,\n      addVuexFn () &#123; // 组件异步交给vuex的actions解决异步操作，操作结束，同步修改state\n        this.$store.dispatch('addAction')\n      &#125;,\n      addVuexParamsFn () &#123;// 组件异步交给vuex的actions解决异步操作,并且传递参数，操作结束，同步修改state\n        this.$store.dispatch('addParamsAction', 5)\n      &#125;,\n      addComFn () &#123; // 组件异步处理完成同步修改state\n        setTimeout(() =&gt; &#123;\n          this.$store.commit('increment', 100)\n        &#125;, 3000)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n</code></pre>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/router/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入 创建路由的模块 以及 路由历史记录模式的模块 </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 路由的历史模式：</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//createWebHistory  HTML5 模式  /home/kind/cart/user  需要后端配合</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//createWebHashHistory Hash 模式  /#/home   /#/kind  /#/cart  /#/user</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createRouter<span class=\"token punctuation\">,</span> createWebHashHistory <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">&#123;</span> RouteRecordRaw<span class=\"token punctuation\">,</span> Router <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span> <span class=\"token comment\">// 路由规则的类型 ---- 路由规则的类型注解</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 2. 引入页面组件</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> Footer <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/FooterComponent.vue'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> HomeView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/home/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> KindView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> ResultView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/ResultView.vue'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">import</span> CartView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/cart/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">import</span> UserView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">import</span> UserOrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/OrderView.vue'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">import</span> UserAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AddressView.vue'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">import</span> UserAddAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AddAddressView.vue'</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">import</span> UserFavoriteView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/FavoriteView.vue'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">import</span> AboutView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AboutView.vue'</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">import</span> VuexView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/vuex/IndexView.vue'</span> <span class=\"token comment\">// +++++++</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">import</span> SetView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/SetView.vue'</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">import</span> DetailView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/detail/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">import</span> RegisterView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">import</span> CheckTelComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/CheckTelComponent.vue'</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">import</span> SendTelCodeComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SendTelCodeComponent.vue'</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">import</span> SetPasswordComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SetPasswordComponent.vue'</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">import</span> LoginView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/login/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">import</span> OrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddressListView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddressListView.vue'</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddAddressView.vue'</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">import</span> SearchView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">import</span> SearchResultView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/SearchResultView.vue'</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\">// 3. 构建路由的规则</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> RouteRecordRaw<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 路由的重定向</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 地址栏地址 - 路由</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名路由  ---   唯一性</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token comment\">//component: HomeView // 路由映射的页面组件</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> HomeView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/kind'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token comment\">// component: KindView </span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> KindView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/result'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'result'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    component<span class=\"token operator\">:</span> ResultView</pre></td></tr><tr><td data-num=\"64\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/cart'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'cart'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    <span class=\"token comment\">// component: CartView </span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> CartView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token comment\">// component: UserView </span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> UserView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"81\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/set'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"85\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'set'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>    component<span class=\"token operator\">:</span> SetView</pre></td></tr><tr><td data-num=\"87\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userOrder'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"90\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userOrder'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>    component<span class=\"token operator\">:</span> UserOrderView</pre></td></tr><tr><td data-num=\"92\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userAddress'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"95\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    component<span class=\"token operator\">:</span> UserAddressView</pre></td></tr><tr><td data-num=\"97\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>    component<span class=\"token operator\">:</span> UserAddAddressView</pre></td></tr><tr><td data-num=\"102\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userFavorite'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userFavorite'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>    component<span class=\"token operator\">:</span> UserFavoriteView</pre></td></tr><tr><td data-num=\"107\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/about'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'about'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>    component<span class=\"token operator\">:</span> AboutView</pre></td></tr><tr><td data-num=\"112\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/detail/:proid'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'detail'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>    <span class=\"token comment\">// component: DetailView</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> DetailView</pre></td></tr><tr><td data-num=\"119\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/register/index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>    component<span class=\"token operator\">:</span> RegisterView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>    children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre>        component<span class=\"token operator\">:</span> CheckTelComponent</pre></td></tr><tr><td data-num=\"130\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'sms'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>        component<span class=\"token operator\">:</span> SendTelCodeComponent</pre></td></tr><tr><td data-num=\"134\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"136\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'pwd'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre>        component<span class=\"token operator\">:</span> SetPasswordComponent</pre></td></tr><tr><td data-num=\"138\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"143\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre>    component<span class=\"token operator\">:</span> LoginView</pre></td></tr><tr><td data-num=\"145\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"147\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderView</pre></td></tr><tr><td data-num=\"150\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"152\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"153\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddressListView</pre></td></tr><tr><td data-num=\"155\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"156\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"157\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"158\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"159\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddAddressView</pre></td></tr><tr><td data-num=\"160\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"161\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"162\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"163\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"164\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchView</pre></td></tr><tr><td data-num=\"165\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"166\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"167\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/searchResult'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"168\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'searchResult'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"169\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchResultView</pre></td></tr><tr><td data-num=\"170\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"171\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// +++++++</span></pre></td></tr><tr><td data-num=\"172\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/vuex'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"173\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'vuex'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"174\"></td><td><pre>    component<span class=\"token operator\">:</span> VuexView</pre></td></tr><tr><td data-num=\"175\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"176\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"177\"></td><td><pre></pre></td></tr><tr><td data-num=\"178\"></td><td><pre><span class=\"token comment\">// 4. 生成路由</span></pre></td></tr><tr><td data-num=\"179\"></td><td><pre><span class=\"token keyword\">const</span> router<span class=\"token operator\">:</span> Router <span class=\"token operator\">=</span> <span class=\"token function\">createRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"180\"></td><td><pre>  <span class=\"token comment\">// vue2 vue-router3 history: 'history' | 'hash' </span></pre></td></tr><tr><td data-num=\"181\"></td><td><pre>  history<span class=\"token operator\">:</span> <span class=\"token function\">createWebHashHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"182\"></td><td><pre>  routes <span class=\"token comment\">//routes: routes 简写形式</span></pre></td></tr><tr><td data-num=\"183\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"184\"></td><td><pre></pre></td></tr><tr><td data-num=\"185\"></td><td><pre><span class=\"token comment\">// 5. 暴露路由</span></pre></td></tr><tr><td data-num=\"186\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> router</pre></td></tr></table></figure><blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo1MTczLyMvdnVleA==\">http://localhost:5173/#/vuex</span> 查看代码运行结果</p>\n</blockquote>\n<ul>\n<li>单一的状态数</li>\n<li>更改 Vuex 的 store 中的状态的唯一方法是提交 mutation</li>\n<li>Action 提交的是 mutation，而不是直接变更状态</li>\n<li>Action 可以包含任意异步操作。</li>\n</ul>\n<h4 id=\"5184-使用辅助函数\"><a class=\"anchor\" href=\"#5184-使用辅助函数\">#</a> 5.18.4 使用辅助函数</h4>\n<blockquote>\n<p>mapState mapGetters 和计算属性一起使用</p>\n<p>mapMutations 和  mapActions 与 自定义函数一起使用</p>\n</blockquote>\n<pre><code class=\"language-vue\">&lt;!-- src/views/vuex/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;div&gt;\n    &#123;&#123; count &#125;&#125; - &#123;&#123; doubleCount &#125;&#125;\n    &lt;button @click=&quot;add&quot;&gt;加1&lt;/button&gt;\n    &lt;button @click=&quot;addVuexFn&quot;&gt;vuex中异步加10&lt;/button&gt;\n    &lt;button @click=&quot;addVuexParamsFn&quot;&gt;vuex中异步加5-传递参数&lt;/button&gt;\n    &lt;button @click=&quot;addComFn&quot;&gt;组件中异步加100&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; mapState, mapGetters, mapMutations, mapActions &#125; from 'vuex'\n  export default defineComponent(&#123;\n    mounted () &#123;\n    &#125;,\n    computed: &#123; // mapState mapGetters 和计算属性一起使用\n      // count () &#123;\n      //   return this.$store.state.count\n      // &#125;,\n      // doubleCount () &#123;\n      //   return this.$store.getters.doubleCount\n      // &#125;\n      ...mapState(&#123; // 获取状态\n        count: (state: any) =&gt; state.count\n      &#125;),\n      ...mapGetters(&#123; // 获取计算属性\n        doubleCount: 'doubleCount' // 后面的 doubleCount 相当于 this.$store.getters.doubleCount\n      &#125;)\n    &#125;,\n    methods: &#123; // mapMutations 和  mapActions 与 自定义函数一起使用\n      ...mapMutations(&#123; // 前面的increment 相当于在当前组件定义了一个函数，可以使用参数，参数即为使用 this.$store.commit('increment', 1) 使用的参数\n        increment: 'increment' // 后面的increment 相当于 this.$store.commit('increment')\n      &#125;),\n      ...mapActions(&#123;\n        addAction: 'addAction', // this.$store.dispatch('addAction')\n        addParamsAction: 'addParamsAction' //  this.$store.dispatch('addParamsAction', 5)\n      &#125;),\n      add () &#123; // 组件同步更改state\n        // this.$store.commit('increment', 1)\n        this.increment(1)\n      &#125;,\n      addVuexFn () &#123; // 组件异步交给vuex的actions解决异步操作，操作结束，同步修改state\n        // this.$store.dispatch('addAction')\n        this.addAction()\n      &#125;,\n      addVuexParamsFn () &#123;// 组件异步交给vuex的actions解决异步操作,并且传递参数，操作结束，同步修改state\n        // this.$store.dispatch('addParamsAction', 5)\n        this.addParamsAction(5)\n      &#125;,\n      addComFn () &#123; // 组件异步处理完成同步修改state\n        setTimeout(() =&gt; &#123;\n          // this.$store.commit('increment', 100)\n          this.increment(100)\n        &#125;, 3000)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n</code></pre>\n<h4 id=\"5185-模块化开发\"><a class=\"anchor\" href=\"#5185-模块化开发\">#</a> 5.18.5 模块化开发</h4>\n<blockquote>\n<p>假设有一个产品模块，产品模块要管理自己的状态 actions 以及 mutations</p>\n</blockquote>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">&#123;</span> IBannerItem<span class=\"token punctuation\">,</span> IPro <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/views/home/home\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> getBannerListData <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/api/home'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">&#123;</span>Context <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"vm\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// src/store/pro.ts</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">interface</span> <span class=\"token class-name\">IState</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  bannerList<span class=\"token operator\">:</span> IBannerItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  proList<span class=\"token operator\">:</span> IPro<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  namespaced<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名空间</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  state<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    bannerList<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// state.pro.bannerList</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    proList<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// state.pro.proList</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  actions<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 这样设计意味着 轮播图异步在 vuex，而 产品异步在组件</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token function\">getBannerListAction</span> <span class=\"token punctuation\">(</span>context<span class=\"token operator\">:</span> Context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// this.$store.dispatch('pro/getBannerListAction')</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token function\">getBannerListData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>res <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'changeBannerList'</span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  mutations<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token function\">changeBannerList</span> <span class=\"token punctuation\">(</span>state<span class=\"token operator\">:</span> IState<span class=\"token punctuation\">,</span> payload<span class=\"token operator\">:</span> IBannerItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      state<span class=\"token punctuation\">.</span>bannerList <span class=\"token operator\">=</span> payload</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token function\">changeProList</span> <span class=\"token punctuation\">(</span>state<span class=\"token operator\">:</span> IState<span class=\"token punctuation\">,</span> payload<span class=\"token operator\">:</span> IPro<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// this.$store.commit('pro/changeProList')</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      state<span class=\"token punctuation\">.</span>proList <span class=\"token operator\">=</span> payload</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/store/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入创建仓库的函数</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createStore<span class=\"token punctuation\">,</span> Store <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> pro <span class=\"token keyword\">from</span> <span class=\"token string\">'./pro'</span> <span class=\"token comment\">// ++++++</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 2. 创建仓库</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> store<span class=\"token operator\">:</span> Store<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  state<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//vuex 管理的状态</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    count<span class=\"token operator\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  getters<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//vuex 的计算属性</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">doubleCount</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">*</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  actions<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 异步操作</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token function\">addAction</span> <span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//context 上下文对象</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'increment'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 交给 mutations 改变状态</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token function\">addParamsAction</span> <span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//context 上下文对象</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'increment'</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 交给 mutations 改变状态</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  mutations<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 同步更改状态</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token function\">increment</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+=</span> payload</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  modules<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 分模块管理状态</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    pro <span class=\"token comment\">// ++++++</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\">// 3. 暴露仓库</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store</pre></td></tr></table></figure><pre><code class=\"language-vue\">&lt;!-- src/views/vuex/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;div&gt;\n    &lt;img v-for=&quot;item of bannerList&quot; :key=&quot;item.bannerid&quot; :src=&quot;item.img&quot; alt=&quot;&quot; style=&quot;width: 80px&quot;&gt;\n\n    &lt;p v-for=&quot;item of proList&quot; :key=&quot;item.proid&quot;&gt; &#123;&#123; item.proname &#125;&#125;&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; mapState, mapGetters, mapMutations, mapActions &#125; from 'vuex'\n  import &#123; getProListData &#125; from '@/api/home'\n  export default defineComponent(&#123;\n    mounted () &#123;\n      console.log(this.$store)\n      // this.$store.dispatch('pro/getBannerListAction')\n      this.getBannerListAction()\n      \n      getProListData().then(res =&gt; &#123;\n        // this.$store.commit('pro/changeProList', res.data.data)\n        this.changeProList(res.data.data)\n      &#125;)\n    &#125;,\n    computed: &#123; // mapState mapGetters 和计算属性一起使用\n      ...mapState(&#123;\n        bannerList: (state: any) =&gt; state.pro.bannerList,\n        proList: (state: any) =&gt; state.pro.proList\n      &#125;)\n    &#125;,\n    methods: &#123; // mapMutations 和  mapActions 与 自定义函数一起使用\n      ...mapActions(&#123;\n        getBannerListAction: 'pro/getBannerListAction', // this.$store.dispatch('pro/getBannerListAction')\n      &#125;),\n      ...mapMutations(&#123;\n        changeProList: 'pro/changeProList' // this.$store.commit('pro/changeProList')\n      &#125;)\n    &#125;\n  &#125;)\n&lt;/script&gt;\n</code></pre>\n<blockquote>\n<p>状态管理器刷新页面时，状态会重置 --- 考虑数据持久性</p>\n</blockquote>\n<h3 id=\"519-城市选择\"><a class=\"anchor\" href=\"#519-城市选择\">#</a> 5.19 城市选择</h3>\n<p>接口：<span class=\"exturl\" data-url=\"aHR0cDovLzEyMS44OS4yMDUuMTg5OjMwMDEvYXBpL2NpdHkvc29ydENpdHk=\">http://121.89.205.189:3001/api/city/sortCity</span></p>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/store/city.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  namespaced<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名空间</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  state<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    cityList<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    city<span class=\"token operator\">:</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'city'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'西安'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  mutations<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">changeCityList</span> <span class=\"token punctuation\">(</span>state<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> cityList<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> payload<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      state<span class=\"token punctuation\">.</span>cityList <span class=\"token operator\">=</span> payload</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token function\">changeCity</span> <span class=\"token punctuation\">(</span>state<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> city<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> payload<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      state<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> payload</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/store/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入创建仓库的函数</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createStore<span class=\"token punctuation\">,</span> Store <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> pro <span class=\"token keyword\">from</span> <span class=\"token string\">'./pro'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> city <span class=\"token keyword\">from</span> <span class=\"token string\">'./city'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 2. 创建仓库</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> store<span class=\"token operator\">:</span> Store<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  state<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//vuex 管理的状态</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    count<span class=\"token operator\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  getters<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//vuex 的计算属性</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token function\">doubleCount</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">*</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  actions<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 异步操作</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token function\">addAction</span> <span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//context 上下文对象</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'increment'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 交给 mutations 改变状态</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token function\">addParamsAction</span> <span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//context 上下文对象</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'increment'</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 交给 mutations 改变状态</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  mutations<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 同步更改状态</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token function\">increment</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+=</span> payload</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  modules<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 分模块管理状态</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    pro<span class=\"token punctuation\">,</span> city</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token comment\">// 3. 暴露仓库</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store</pre></td></tr></table></figure><figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/vuex.d.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> Store <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">declare</span> <span class=\"token keyword\">module</span> <span class=\"token string\">'@vue/runtime-core'</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\">// 声明自己的 store state</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">interface</span> <span class=\"token class-name\">State</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    count<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    pro<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    city<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token comment\">// 为 `this.$store` 提供类型声明</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ComponentCustomProperties</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    $store<span class=\"token operator\">:</span> Store<span class=\"token operator\">&lt;</span>State<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><pre><code class=\"language-vue\">&lt;!-- src/views/city/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar   \n      title=&quot;城市选择&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n      &gt;\n    &lt;/van-nav-bar&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-index-bar&gt;\n      &lt;template v-for=&quot;item of cityList&quot; :key=&quot;item.letter&quot;&gt;\n        &lt;van-index-anchor :index=&quot;item.letter.toUpperCase()&quot; /&gt;\n        &lt;template v-for=&quot;itm of item.data&quot; :key=&quot;itm.cityId&quot;&gt;\n          &lt;van-cell :title=&quot;itm.name&quot; @click=&quot;changeCity(itm.name)&quot; /&gt;\n        &lt;/template&gt;\n      &lt;/template&gt;\n    &lt;/van-index-bar&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; getCityListData &#125; from '@/api/city'\n  export default defineComponent(&#123;\n    computed: &#123;\n      cityList () &#123;\n        return this.$store.state.city.cityList\n      &#125;\n    &#125;,\n    mounted () &#123;\n      getCityListData().then(res =&gt; &#123;\n        const result = JSON.parse(res.data.data)\n        console.log(result)\n        this.$store.commit('city/changeCityList', result)\n      &#125;)\n    &#125;,\n    methods: &#123;\n      changeCity (name: string) &#123;\n        this.$store.commit('city/changeCity', name)\n        localStorage.setItem('city', name)\n        this.$router.back()\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n</code></pre>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/router/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入 创建路由的模块 以及 路由历史记录模式的模块 </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 路由的历史模式：</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//createWebHistory  HTML5 模式  /home/kind/cart/user  需要后端配合</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//createWebHashHistory Hash 模式  /#/home   /#/kind  /#/cart  /#/user</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createRouter<span class=\"token punctuation\">,</span> createWebHashHistory <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">&#123;</span> RouteRecordRaw<span class=\"token punctuation\">,</span> Router <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span> <span class=\"token comment\">// 路由规则的类型 ---- 路由规则的类型注解</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 2. 引入页面组件</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> Footer <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/FooterComponent.vue'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> HomeView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/home/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> KindView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> ResultView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/ResultView.vue'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">import</span> CartView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/cart/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">import</span> UserView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">import</span> UserOrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/OrderView.vue'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">import</span> UserAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AddressView.vue'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">import</span> UserAddAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AddAddressView.vue'</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">import</span> UserFavoriteView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/FavoriteView.vue'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">import</span> AboutView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AboutView.vue'</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">import</span> VuexView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/vuex/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">import</span> SetView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/SetView.vue'</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">import</span> DetailView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/detail/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">import</span> RegisterView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">import</span> CheckTelComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/CheckTelComponent.vue'</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">import</span> SendTelCodeComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SendTelCodeComponent.vue'</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">import</span> SetPasswordComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SetPasswordComponent.vue'</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">import</span> LoginView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/login/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">import</span> OrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddressListView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddressListView.vue'</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddAddressView.vue'</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">import</span> SearchView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">import</span> SearchResultView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/SearchResultView.vue'</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">import</span> CityView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/city/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\">// 3. 构建路由的规则</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> RouteRecordRaw<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 路由的重定向</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 地址栏地址 - 路由</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名路由  ---   唯一性</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token comment\">//component: HomeView // 路由映射的页面组件</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> HomeView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/kind'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token comment\">// component: KindView </span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> KindView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/result'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'result'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    component<span class=\"token operator\">:</span> ResultView</pre></td></tr><tr><td data-num=\"65\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/cart'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'cart'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token comment\">// component: CartView </span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> CartView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    <span class=\"token comment\">// component: UserView </span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> UserView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"82\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/set'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"86\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'set'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>    component<span class=\"token operator\">:</span> SetView</pre></td></tr><tr><td data-num=\"88\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userOrder'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"91\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userOrder'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>    component<span class=\"token operator\">:</span> UserOrderView</pre></td></tr><tr><td data-num=\"93\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userAddress'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    component<span class=\"token operator\">:</span> UserAddressView</pre></td></tr><tr><td data-num=\"98\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>    component<span class=\"token operator\">:</span> UserAddAddressView</pre></td></tr><tr><td data-num=\"103\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userFavorite'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userFavorite'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>    component<span class=\"token operator\">:</span> UserFavoriteView</pre></td></tr><tr><td data-num=\"108\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/about'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'about'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>    component<span class=\"token operator\">:</span> AboutView</pre></td></tr><tr><td data-num=\"113\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/detail/:proid'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'detail'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>    <span class=\"token comment\">// component: DetailView</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> DetailView</pre></td></tr><tr><td data-num=\"120\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/register/index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>    component<span class=\"token operator\">:</span> RegisterView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>    children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>        component<span class=\"token operator\">:</span> CheckTelComponent</pre></td></tr><tr><td data-num=\"131\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'sms'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre>        component<span class=\"token operator\">:</span> SendTelCodeComponent</pre></td></tr><tr><td data-num=\"135\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"136\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'pwd'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre>        component<span class=\"token operator\">:</span> SetPasswordComponent</pre></td></tr><tr><td data-num=\"139\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"143\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre>    component<span class=\"token operator\">:</span> LoginView</pre></td></tr><tr><td data-num=\"146\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"147\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderView</pre></td></tr><tr><td data-num=\"151\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"152\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"153\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddressListView</pre></td></tr><tr><td data-num=\"156\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"157\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"158\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"159\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"160\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddAddressView</pre></td></tr><tr><td data-num=\"161\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"162\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"163\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"164\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"165\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchView</pre></td></tr><tr><td data-num=\"166\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"167\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"168\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/searchResult'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"169\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'searchResult'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"170\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchResultView</pre></td></tr><tr><td data-num=\"171\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"172\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"173\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/vuex'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"174\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'vuex'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"175\"></td><td><pre>    component<span class=\"token operator\">:</span> VuexView</pre></td></tr><tr><td data-num=\"176\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"177\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// ++++++</span></pre></td></tr><tr><td data-num=\"178\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/city'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"179\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'city'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"180\"></td><td><pre>    component<span class=\"token operator\">:</span> CityView</pre></td></tr><tr><td data-num=\"181\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"182\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"183\"></td><td><pre></pre></td></tr><tr><td data-num=\"184\"></td><td><pre><span class=\"token comment\">// 4. 生成路由</span></pre></td></tr><tr><td data-num=\"185\"></td><td><pre><span class=\"token keyword\">const</span> router<span class=\"token operator\">:</span> Router <span class=\"token operator\">=</span> <span class=\"token function\">createRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"186\"></td><td><pre>  <span class=\"token comment\">// vue2 vue-router3 history: 'history' | 'hash' </span></pre></td></tr><tr><td data-num=\"187\"></td><td><pre>  history<span class=\"token operator\">:</span> <span class=\"token function\">createWebHashHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"188\"></td><td><pre>  routes <span class=\"token comment\">//routes: routes 简写形式</span></pre></td></tr><tr><td data-num=\"189\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"190\"></td><td><pre></pre></td></tr><tr><td data-num=\"191\"></td><td><pre><span class=\"token comment\">// 5. 暴露路由</span></pre></td></tr><tr><td data-num=\"192\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> router</pre></td></tr></table></figure><pre><code class=\"language-vue\">&lt;!-- src/views/home/components/HeaderComponent.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;ul&gt;\n      &lt;li @click=&quot;$router.push('/city')&quot;&gt;&#123;&#123; city &#125;&#125;&lt;/li&gt;\n      &lt;li&gt;\n        &lt;div class=&quot;searchBox&quot; @click=&quot;$router.push('/search')&quot;&gt;\n          &lt;van-image :src=&quot;logo&quot; height=&quot;24&quot;&gt;&lt;/van-image&gt;\n          &lt;span class=&quot;divider &quot;&gt;|&lt;/span&gt;\n          &lt;van-icon name=&quot;search&quot; size=&quot;24&quot;/&gt;\n          &lt;span class=&quot;searchText&quot;&gt;立柜式空调&lt;/span&gt;\n        &lt;/div&gt;\n      &lt;/li&gt;\n      &lt;li&gt;登录&lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/header&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import logo from '@/assets/logo.png'\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        logo\n      &#125;\n    &#125;,\n    computed: &#123; // ++++++++++++++++++++++\n      city () &#123;\n        return this.$store.state.city.city\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .header &#123;\n    ul &#123;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      li &#123;\n        height: 100%;\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        color: #fff;\n        \n\n        &amp;:nth-child(1), &amp;:nth-child(3) &#123;\n          width: 50px;\n        &#125;\n        &amp;:nth-child(2) &#123;\n          flex: 1;\n          .searchBox &#123;\n            width: 100%;\n            height: 70%;\n            background-color: #fff;\n            border-radius: 16px;\n            color: #666;\n            display: flex;\n            .van-image &#123;\n              width: 40px;\n              margin-top: 4px;\n              margin-left: 10px;\n            &#125;\n            .divider &#123;\n              width: 12px;\n              font-size: 24px;\n              margin-left: 10px;\n              color: #999;\n            &#125;\n            .van-icon &#123;\n              width: 30px;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n            &#125;\n            .searchText &#123;\n              flex: 1;\n              line-height: .31rem;\n              display: flex;\n              align-items: center;\n            &#125;\n          &#125;\n        &#125;\n      &#125;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h3 id=\"520-登录状态\"><a class=\"anchor\" href=\"#520-登录状态\">#</a> 5.20 登录状态</h3>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/store/user.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  namespaced<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名空间</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  state<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    loginState<span class=\"token operator\">:</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'loginState'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">'true'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  mutations<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">changeLoginState</span> <span class=\"token punctuation\">(</span>state<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> loginState<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> payload<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      state<span class=\"token punctuation\">.</span>loginState <span class=\"token operator\">=</span> payload</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/store/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入创建仓库的函数</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createStore<span class=\"token punctuation\">,</span> Store <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> pro <span class=\"token keyword\">from</span> <span class=\"token string\">'./pro'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> city <span class=\"token keyword\">from</span> <span class=\"token string\">'./city'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> user <span class=\"token keyword\">from</span> <span class=\"token string\">'./user'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 2. 创建仓库</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> store<span class=\"token operator\">:</span> Store<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  state<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//vuex 管理的状态</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    count<span class=\"token operator\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  getters<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//vuex 的计算属性</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token function\">doubleCount</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">*</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  actions<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 异步操作</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token function\">addAction</span> <span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//context 上下文对象</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'increment'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 交给 mutations 改变状态</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token function\">addParamsAction</span> <span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//context 上下文对象</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'increment'</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 交给 mutations 改变状态</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  mutations<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 同步更改状态</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token function\">increment</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+=</span> payload</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  modules<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 分模块管理状态</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    pro<span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">,</span> user</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\">// 3. 暴露仓库</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store</pre></td></tr></table></figure><figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/vuex.d.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> Store <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">declare</span> <span class=\"token keyword\">module</span> <span class=\"token string\">'@vue/runtime-core'</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\">// 声明自己的 store state</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">interface</span> <span class=\"token class-name\">State</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    count<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    pro<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    city<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    user<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token comment\">// 为 `this.$store` 提供类型声明</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ComponentCustomProperties</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    $store<span class=\"token operator\">:</span> Store<span class=\"token operator\">&lt;</span>State<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><pre><code class=\"language-vue\">&lt;!-- src/views/login/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;登录&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;box&quot;&gt;\n      &lt;van-field v-model=&quot;loginname&quot; clearable placeholder=&quot;手机号/账户名/邮箱&quot; /&gt;\n      &lt;van-field :type=&quot;type&quot; v-model=&quot;password&quot; clearable placeholder=&quot;请输入密码&quot; :right-icon=&quot;eye&quot; @click-right-icon=&quot;changeType&quot;  /&gt;\n      &lt;van-button block round :disabled=&quot;flag&quot; color=&quot;linear-gradient(to right, #ff6034, #ee0a24)&quot; @click=&quot;login&quot;&gt;\n        登录\n      &lt;/van-button&gt;\n      &lt;p class=&quot;tip&quot;&gt;\n        &lt;router-link to=&quot;/register&quot;&gt;手机快速注册&lt;/router-link&gt;\n      &lt;/p&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue'\n  import type &#123; FieldType &#125; from 'vant'\n  import &#123; Dialog, Toast &#125; from 'vant'\n  import &#123; doLogin &#125; from '../../api/user'\n  \n  interface IData &#123;\n    loginname: string\n    password: string\n    type: FieldType\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        loginname: '',\n        password: '',\n        type: 'password'\n      &#125;\n    &#125;,\n    computed: &#123;\n      flag () &#123;\n        return this.loginname === '' || this.password === ''\n      &#125;,\n      eye (): string &#123;\n        return this.type === 'password' ? 'closed-eye' : 'eye-o'\n      &#125;\n    &#125;,\n    methods: &#123;\n      login () &#123;\n        doLogin(&#123; loginname: this.loginname, password: this.password &#125;).then(res =&gt; &#123;\n          if (res.data.code === '10010') &#123;\n            Dialog.confirm(&#123;\n              message: '该账户未被注册，请先注册',\n              confirmButtonText: '立即注册',\n              cancelButtonText: '取消'\n            &#125;)\n              .then(() =&gt; &#123;\n                // on confirm\n                this.$router.push('/register')\n              &#125;)\n              .catch(() =&gt; &#123;\n                // on cancel\n              &#125;)\n          &#125; else if (res.data.code === '10011')&#123;\n            Toast('密码错误')\n          &#125; else &#123;\n            console.log(res.data)\n            localStorage.setItem('token', res.data.data.token) // 后端校验登录凭证\n            localStorage.setItem('userid', res.data.data.userid) // 用户标识\n            localStorage.setItem('loginState', String(true)) // 前端校验登录\n            this.$store.commit('user/changeLoginState', true) // +++++++++++\n            this.$router.back()\n          &#125;\n        &#125;)\n      &#125;,\n      changeType () &#123;\n        if (this.type === 'password') &#123;\n          this.type = 'text'\n        &#125; else &#123;\n          this.type = 'password'\n        &#125;\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .content &#123;\n    background-color: #fff;\n    .box &#123;\n      padding: 35px 15px;\n      .van-button &#123;\n        margin-top: 0.25rem;\n      &#125;\n      .tip &#123;\n        float: right;\n        margin-top: 15px;\n      &#125;\n    &#125; \n  &#125;\n&lt;/style&gt;\n</code></pre>\n<pre><code class=\"language-vue\">&lt;!-- src/views/user/SetView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar   \n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    &gt;\n      &lt;template #title&gt;\n        &lt;span class=&quot;title&quot;&gt;设置&lt;/span&gt;\n      &lt;/template&gt;\n    &lt;/van-nav-bar&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-cell title=&quot;绑定用户名&quot; is-link  @click=&quot;showUpdateUsername&quot; :value=&quot;username&quot;/&gt;\n    &lt;van-cell title=&quot;修改密码&quot; is-link @click=&quot;passwordShow = true&quot;/&gt;\n\n    &lt;van-button class=&quot;btn&quot; block round color=&quot;linear-gradient(to right, #ff6034, #ee0a24)&quot; @click=&quot;logout&quot;&gt;\n      退出登录\n    &lt;/van-button&gt;\n\n    &lt;van-overlay :show=&quot;userNameShow&quot; @click=&quot;userNameShow = false&quot; &gt;\n      &lt;div class=&quot;box&quot;  @click.stop&gt;\n        &lt;h1&gt;设置用户名&lt;/h1&gt;\n        &lt;van-field v-model=&quot;username&quot; placeholder=&quot;请输入用户名&quot;/&gt;\n        &lt;van-button round type=&quot;danger&quot; @click=&quot;updateUsernameFn&quot;&gt;更新&lt;/van-button&gt;\n      &lt;/div&gt;\n    &lt;/van-overlay&gt;\n    &lt;van-overlay :show=&quot;passwordShow&quot; @click=&quot;passwordShow = false&quot; &gt;\n      &lt;div class=&quot;box&quot;  @click.stop&gt;\n        &lt;h1&gt;更新密码&lt;/h1&gt;\n        &lt;van-field class=&quot;new&quot; v-model=&quot;oldPassword&quot; placeholder=&quot;原始密码&quot;/&gt;\n        &lt;van-field class=&quot;new&quot; v-model=&quot;password&quot; placeholder=&quot;新密码&quot;/&gt;\n        &lt;van-button round type=&quot;danger&quot; @click=&quot;updatePasswordFn&quot;&gt;更新&lt;/van-button&gt;\n      &lt;/div&gt;\n    &lt;/van-overlay&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; updateUsername, getUserInfo, updatePassword &#125; from '@/api/user'\nimport &#123; Toast &#125; from 'vant';\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        userNameShow: false,\n        passwordShow: false,\n        username: '',\n        oldPassword: '',\n        password: ''\n      &#125;\n    &#125;,\n    mounted () &#123;\n      getUserInfo(&#123;userid: localStorage.getItem('userid')!&#125;).then(res =&gt; &#123;\n        console.log(res.data)\n        this.username = res.data.data[0].username\n      &#125;)\n    &#125;,\n    methods: &#123;\n      showUpdateUsername () &#123;\n        if (this.username) &#123;\n          Toast('用户名只能更改一次')\n        &#125; else &#123;\n          this.userNameShow = true\n        &#125;\n      &#125;,\n      updateUsernameFn () &#123;\n        updateUsername(&#123; userid: localStorage.getItem('userid')!, username: this.username &#125;).then(res =&gt; &#123;\n          Toast('更改用户名成功')\n          this.userNameShow = false\n        &#125;)\n      &#125;,\n      updatePasswordFn () &#123;\n        updatePassword(&#123; userid: localStorage.getItem('userid')!, oldpassword: this.oldPassword, newpassword: this.password &#125;).then(res =&gt; &#123;\n          if (res.data.code === '10030') &#123;\n            Toast('原始密码错误')\n          &#125; else &#123;\n            Toast('修改密码成功')\n            localStorage.removeItem('loginState')\n            localStorage.removeItem('userid')\n            localStorage.removeItem('token')\n            this.$router.push('/login')\n          &#125;\n        &#125;)\n      &#125;,\n      logout () &#123;\n        localStorage.removeItem('loginState')\n        localStorage.removeItem('userid')\n        localStorage.removeItem('token')\n        this.$store.commit('user/changeLoginState', false) // +++++++++++\n        this.$router.push('/login')\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n   .header &#123;\n    // box-sizing: border-box;\n    border-bottom: 3px solid #666;\n    .van-nav-bar&#123;\n      // background-color: #f66;\n      .title &#123;\n        color: #333;\n      &#125;\n    &#125;\n  &#125;\n  .btn &#123;\n    margin-top: 50px;\n  &#125;\n  .box &#123;\n    height: 30%;\n    width: 80%;\n    margin: 0 10%;\n    background-color: #fff;\n    border-radius: 20px;\n    margin-top: 40%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    h1 &#123;\n      text-align: center;\n      flex: 1;\n      margin-top: 20px;\n    &#125;\n    .van-field &#123;\n      flex: 6;\n      &amp;.new &#123;\n        flex: 3;\n      &#125;\n    &#125;\n    .van-button &#123;\n      flex: 3;\n      margin-bottom: 20px;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<pre><code class=\"language-vue\">&lt;!-- src/views/home/components/HeaderComponent.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;ul&gt;\n      &lt;li @click=&quot;$router.push('/city')&quot;&gt;&#123;&#123; city &#125;&#125;&lt;/li&gt;\n      &lt;li&gt;\n        &lt;div class=&quot;searchBox&quot; @click=&quot;$router.push('/search')&quot;&gt;\n          &lt;van-image :src=&quot;logo&quot; height=&quot;24&quot;&gt;&lt;/van-image&gt;\n          &lt;span class=&quot;divider &quot;&gt;|&lt;/span&gt;\n          &lt;van-icon name=&quot;search&quot; size=&quot;24&quot;/&gt;\n          &lt;span class=&quot;searchText&quot;&gt;立柜式空调&lt;/span&gt;\n        &lt;/div&gt;\n      &lt;/li&gt;\n      &lt;li&gt;\n        &lt;p v-if=&quot;loginState&quot; @click=&quot;$router.push('/user')&quot;&gt;我的&lt;/p&gt;\n        &lt;p v-else @click=&quot;$router.push('/login')&quot;&gt; 登录&lt;/p&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/header&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import logo from '@/assets/logo.png'\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        logo\n      &#125;\n    &#125;,\n    computed: &#123;\n      city () &#123;\n        return this.$store.state.city.city\n      &#125;,\n      loginState () &#123;// ++++++++++\n        return this.$store.state.user.loginState\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .header &#123;\n    ul &#123;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      li &#123;\n        height: 100%;\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        color: #fff;\n        \n\n        &amp;:nth-child(1), &amp;:nth-child(3) &#123;\n          width: 50px;\n        &#125;\n        &amp;:nth-child(2) &#123;\n          flex: 1;\n          .searchBox &#123;\n            width: 100%;\n            height: 70%;\n            background-color: #fff;\n            border-radius: 16px;\n            color: #666;\n            display: flex;\n            .van-image &#123;\n              width: 40px;\n              margin-top: 4px;\n              margin-left: 10px;\n            &#125;\n            .divider &#123;\n              width: 12px;\n              font-size: 24px;\n              margin-left: 10px;\n              color: #999;\n            &#125;\n            .van-icon &#123;\n              width: 30px;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n            &#125;\n            .searchText &#123;\n              flex: 1;\n              line-height: .31rem;\n              display: flex;\n              align-items: center;\n            &#125;\n          &#125;\n        &#125;\n      &#125;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h3 id=\"521-补充路由\"><a class=\"anchor\" href=\"#521-补充路由\">#</a> 5.21 补充路由</h3>\n<h4 id=\"5211-别名\"><a class=\"anchor\" href=\"#5211-别名\">#</a> 5.21.1 别名</h4>\n<h4 id=\"5212-导航守卫\"><a class=\"anchor\" href=\"#5212-导航守卫\">#</a> 5.21.2 导航守卫</h4>\n<ul>\n<li>全局导航守卫</li>\n<li>路由独享导航守卫</li>\n<li>组件内导航守卫</li>\n</ul>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/router/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入 创建路由的模块 以及 路由历史记录模式的模块 </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 路由的历史模式：</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//createWebHistory  HTML5 模式  /home/kind/cart/user  需要后端配合</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//createWebHashHistory Hash 模式  /#/home   /#/kind  /#/cart  /#/user</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createRouter<span class=\"token punctuation\">,</span> createWebHashHistory <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">&#123;</span> RouteRecordRaw<span class=\"token punctuation\">,</span> Router <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span> <span class=\"token comment\">// 路由规则的类型 ---- 路由规则的类型注解</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 2. 引入页面组件</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> Footer <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/FooterComponent.vue'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> HomeView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/home/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> KindView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> ResultView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/ResultView.vue'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">import</span> CartView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/cart/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">import</span> UserView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">import</span> UserOrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/OrderView.vue'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">import</span> UserAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AddressView.vue'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">import</span> UserAddAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AddAddressView.vue'</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">import</span> UserFavoriteView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/FavoriteView.vue'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">import</span> AboutView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AboutView.vue'</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">import</span> VuexView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/vuex/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">import</span> SetView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/SetView.vue'</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">import</span> DetailView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/detail/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">import</span> RegisterView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">import</span> CheckTelComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/CheckTelComponent.vue'</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">import</span> SendTelCodeComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SendTelCodeComponent.vue'</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">import</span> SetPasswordComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SetPasswordComponent.vue'</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">import</span> LoginView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/login/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">import</span> OrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddressListView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddressListView.vue'</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddAddressView.vue'</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">import</span> SearchView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">import</span> SearchResultView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/SearchResultView.vue'</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">import</span> CityView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/city/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\">// 3. 构建路由的规则</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> RouteRecordRaw<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 路由的重定向</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 地址栏地址 - 路由</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名路由  ---   唯一性</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    alias<span class=\"token operator\">:</span> <span class=\"token string\">'/h'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token comment\">//component: HomeView // 路由映射的页面组件</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> HomeView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/kind'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token comment\">// component: KindView </span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> KindView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/result'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'result'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    component<span class=\"token operator\">:</span> ResultView</pre></td></tr><tr><td data-num=\"66\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/cart'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'cart'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    <span class=\"token comment\">// component: CartView </span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> CartView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    <span class=\"token comment\">// component: UserView </span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> UserView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"83\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/set'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"87\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'set'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>    component<span class=\"token operator\">:</span> SetView</pre></td></tr><tr><td data-num=\"89\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userOrder'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"92\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userOrder'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>    component<span class=\"token operator\">:</span> UserOrderView</pre></td></tr><tr><td data-num=\"94\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userAddress'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>    component<span class=\"token operator\">:</span> UserAddressView</pre></td></tr><tr><td data-num=\"99\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>    component<span class=\"token operator\">:</span> UserAddAddressView</pre></td></tr><tr><td data-num=\"104\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userFavorite'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userFavorite'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>    component<span class=\"token operator\">:</span> UserFavoriteView</pre></td></tr><tr><td data-num=\"109\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/about'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'about'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>    component<span class=\"token operator\">:</span> AboutView</pre></td></tr><tr><td data-num=\"114\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/detail/:proid'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'detail'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>    <span class=\"token comment\">// component: DetailView</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> DetailView</pre></td></tr><tr><td data-num=\"121\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/register/index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>    component<span class=\"token operator\">:</span> RegisterView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre>    children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre>        component<span class=\"token operator\">:</span> CheckTelComponent</pre></td></tr><tr><td data-num=\"132\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'sms'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre>        component<span class=\"token operator\">:</span> SendTelCodeComponent</pre></td></tr><tr><td data-num=\"136\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'pwd'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre>        component<span class=\"token operator\">:</span> SetPasswordComponent</pre></td></tr><tr><td data-num=\"140\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"143\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre>    component<span class=\"token operator\">:</span> LoginView</pre></td></tr><tr><td data-num=\"147\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"152\"></td><td><pre>    <span class=\"token comment\">//beforeEnter: (to, from, next) => &#123; // 路由独享的导航守卫</span></pre></td></tr><tr><td data-num=\"153\"></td><td><pre>    <span class=\"token comment\">//   if (localStorage.getItem('loginState') === 'true') &#123;</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre>    <span class=\"token comment\">//     next()</span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre>    <span class=\"token comment\">//   &#125; else &#123;</span></pre></td></tr><tr><td data-num=\"156\"></td><td><pre>    <span class=\"token comment\">//     next('/login')</span></pre></td></tr><tr><td data-num=\"157\"></td><td><pre>    <span class=\"token comment\">//   &#125;</span></pre></td></tr><tr><td data-num=\"158\"></td><td><pre>    <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"159\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"160\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"161\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"162\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"163\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddressListView</pre></td></tr><tr><td data-num=\"164\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"165\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"166\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"167\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"168\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddAddressView</pre></td></tr><tr><td data-num=\"169\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"170\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"171\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"172\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"173\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchView</pre></td></tr><tr><td data-num=\"174\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"175\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"176\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/searchResult'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"177\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'searchResult'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"178\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchResultView</pre></td></tr><tr><td data-num=\"179\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"180\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"181\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/vuex'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"182\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'vuex'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"183\"></td><td><pre>    component<span class=\"token operator\">:</span> VuexView</pre></td></tr><tr><td data-num=\"184\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"185\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"186\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/city'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"187\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'city'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"188\"></td><td><pre>    component<span class=\"token operator\">:</span> CityView</pre></td></tr><tr><td data-num=\"189\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"190\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"191\"></td><td><pre></pre></td></tr><tr><td data-num=\"192\"></td><td><pre><span class=\"token comment\">// 4. 生成路由</span></pre></td></tr><tr><td data-num=\"193\"></td><td><pre><span class=\"token keyword\">const</span> router<span class=\"token operator\">:</span> Router <span class=\"token operator\">=</span> <span class=\"token function\">createRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"194\"></td><td><pre>  <span class=\"token comment\">// vue2 vue-router3 history: 'history' | 'hash' </span></pre></td></tr><tr><td data-num=\"195\"></td><td><pre>  history<span class=\"token operator\">:</span> <span class=\"token function\">createWebHashHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"196\"></td><td><pre>  routes <span class=\"token comment\">//routes: routes 简写形式</span></pre></td></tr><tr><td data-num=\"197\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"198\"></td><td><pre></pre></td></tr><tr><td data-num=\"199\"></td><td><pre><span class=\"token comment\">// 全局前置导航守卫 - 一般适用于后台管理系统</span></pre></td></tr><tr><td data-num=\"200\"></td><td><pre><span class=\"token comment\">// router.beforeEach((to, from, next) => &#123;</span></pre></td></tr><tr><td data-num=\"201\"></td><td><pre><span class=\"token comment\">//   next()</span></pre></td></tr><tr><td data-num=\"202\"></td><td><pre><span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"203\"></td><td><pre><span class=\"token comment\">// 5. 暴露路由</span></pre></td></tr><tr><td data-num=\"204\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> router</pre></td></tr></table></figure><pre><code class=\"language-vue\">&lt;!-- src/views/order/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;确定订单&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-cell center v-if=&quot;flag&quot; title=&quot;请添加地址&quot; is-link @click=&quot;toAddressList&quot; /&gt;\n    &lt;van-cell center v-else :title=&quot;name + ' ' +  tel&quot; is-link :label=&quot;address&quot;  @click=&quot;toAddressList&quot;  /&gt;\n\n    &lt;van-card\n      v-for=&quot;item of orderList&quot;\n      :key=&quot;item.orderid&quot;\n      :num=&quot;item.num&quot;\n      :price=&quot;item.originprice&quot;\n      :title=&quot;item.proname&quot;\n      :thumb=&quot;item.img1&quot;\n    /&gt;\n    &lt;div class=&quot;tip&quot;&gt;\n      &lt;p&gt;&lt;span&gt;原价：&lt;/span&gt;&lt;span&gt;&#123;&#123; totalPrice &#125;&#125;&lt;/span&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;span&gt;快递费：&lt;/span&gt;&lt;span&gt;&#123;&#123; express &#125;&#125;&lt;/span&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;van-submit-bar :disabled=&quot;flag&quot; :price=&quot;totalPrice * 100 + express * 100&quot; @click=&quot;pay&quot; button-text=&quot;去支付&quot; /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; Toast &#125; from 'vant';\nimport &#123; defineComponent &#125; from 'vue';\n  import &#123; getOrderListData &#125; from '../../api/order'\n  interface IOrderItem &#123;\n    addressDetail: string\n    city: string\n    county: string\n    discount: number\n    img1: string\n    name: string\n    num: number\n    orderid: string\n    originprice: number\n    proid: string\n    proname: string\n    province: string\n    status:number\n    tel: string\n    time: string\n    userid: string\n  &#125;\n  interface IData &#123;\n    orderList: IOrderItem[],\n    time: string\n    express: number\n  &#125;\n  export default defineComponent(&#123;\n    beforeRouteEnter (to, from, next) &#123; // 组件内导航守卫+++++++++\n      if (localStorage.getItem('loginState') === 'true') &#123;\n        next()\n      &#125; else &#123;\n        next('/login')\n      &#125;\n    &#125;,\n    data (): IData &#123;\n      return &#123;\n        orderList: [],\n        time: '',\n        express: 0\n      &#125;\n    &#125;,\n    computed: &#123;\n      totalPrice () &#123;\n        return this.orderList.reduce((sum, item) =&gt; &#123;\n          return sum += item.num * item.originprice\n        &#125;, 0)\n      &#125;,\n      flag () &#123; // 显示地址\n        return this.orderList[0]?.tel === ''\n      &#125;,\n      name () &#123;\n        return this.orderList[0]?.name\n      &#125;,\n      tel () &#123;\n        return this.orderList[0]?.tel\n      &#125;,\n      address () &#123;\n        const province = this.orderList[0]?.province\n        const city  = this.orderList[0]?.city\n        const county = this.orderList[0]?.county\n        const addressDetail = this.orderList[0]?.addressDetail\n\n        let str = ''\n        if (province === city) &#123;\n          str += province + county + addressDetail\n        &#125; else &#123;\n          str += province +  city + county + addressDetail\n        &#125;\n        return str\n      &#125;\n    &#125;,\n    mounted () &#123;\n      // console.log(this.$route)\n      this.time = (this.$route.query.time as string)\n      this.express = Math.floor(Math.random() * 20)\n\n      const userid = localStorage.getItem('userid')!\n      getOrderListData(&#123; time: this.time, userid &#125;).then(res =&gt; &#123;\n        console.log(res.data)\n        this.orderList = res.data.data\n      &#125;)\n    &#125;,\n    methods: &#123;\n      toAddressList () &#123;\n        this.$router.push('/orderAddress?time=' + this.time)\n      &#125;,\n      pay () &#123;\n        Toast('正在努力开发中...')\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .tip &#123;\n    margin-top: 15px;\n    margin-right: 10px;\n    text-align: right;\n    p &#123;\n      display: flex;\n      span &#123;\n        &amp;:nth-child(1) &#123;\n          flex: 1;\n        &#125;\n        &amp;:nth-child(2) &#123;\n          width: 40px;\n        &#125;\n      &#125;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"5213-路由元信息\"><a class=\"anchor\" href=\"#5213-路由元信息\">#</a> 5.21.3 路由元信息</h4>\n<h4 id=\"5214-路由过渡\"><a class=\"anchor\" href=\"#5214-路由过渡\">#</a> 5.21.4 路由过渡</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/App.vue --&gt;\n&lt;template&gt;\n  &lt;div class=&quot;container&quot;&gt;\n    &lt;router-view v-slot=&quot;&#123; Component, route &#125;&quot;&gt;\n      &lt;transition :name=&quot;String(route.meta.transition)&quot;&gt;\n        &lt;component :is=&quot;Component&quot; :key=&quot;route.path&quot; /&gt;\n      &lt;/transition&gt;\n    &lt;/router-view&gt;\n    \n    &lt;router-view name=&quot;footer&quot;&gt;&lt;/router-view&gt;\n  &lt;/div&gt;\n  &lt;div class=&quot;landscape-tip&quot;&gt;\n    请将屏幕竖向浏览\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;style lang=&quot;scss&quot;&gt;\n  .container &#123;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    .header &#123;\n      // height: 44px;\n      height: 0.44rem;\n      background-color: #f66;\n    &#125;\n    .content &#123;\n      flex: 1;\n      overflow: auto;\n      background-color: #efefef;\n    &#125;\n    .footer &#123;\n      // height: 50px;\n      height: 0.5rem;\n      background-color: #ffffff;\n      user-select: none;\n\n      ul &#123;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        li &#123;\n          flex: 1;\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          span &#123;\n            font-size: 0.20rem;\n          &#125;\n\n          p &#123;\n            font-size: 0.12rem;\n          &#125;\n        &#125;\n      &#125;\n    &#125;\n  &#125;\n  .landscape-tip &#123;\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    background-color: rgba(0, 0, 0, .8);\n    color: #fff;\n    display: none;\n    justify-content: center;\n    align-items: center;\n  &#125;\n\n  @media only screen and (orientation: landscape) &#123; // 横屏\n    .landscape-tip  &#123;\n      display: flex;\n    &#125;\n  &#125;\n\n  .fade-enter-from, .fade-leave-to &#123; opacity: 0; &#125;\n  .fade-enter-active, .fade-leave-active &#123; transition: all 5s; &#125;\n  .fade-enter-to, .fade-leave-from &#123; opacity: 1; &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"5215-路由懒加载\"><a class=\"anchor\" href=\"#5215-路由懒加载\">#</a> 5.21.5 路由懒加载</h4>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/router/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入 创建路由的模块 以及 路由历史记录模式的模块 </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 路由的历史模式：</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//createWebHistory  HTML5 模式  /home/kind/cart/user  需要后端配合</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//createWebHashHistory Hash 模式  /#/home   /#/kind  /#/cart  /#/user</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createRouter<span class=\"token punctuation\">,</span> createWebHashHistory <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">&#123;</span> RouteRecordRaw<span class=\"token punctuation\">,</span> Router <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span> <span class=\"token comment\">// 路由规则的类型 ---- 路由规则的类型注解</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 2. 引入页面组件</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> Footer <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/FooterComponent.vue'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> HomeView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/home/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">// import KindView from './../views/kind/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">KindView</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./../views/kind/IndexView.vue'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// import ResultView from './../views/kind/ResultView.vue'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ResultView</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./../views/kind/ResultView.vue'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">// import CartView from './../views/cart/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">CartView</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>  <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./../views/cart/IndexView.vue'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">// import UserView from './../views/user/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">UserView</span>  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./../views/user/IndexView.vue'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">// import UserOrderView from '../views/user/OrderView.vue'</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">UserOrderView</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>  <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../views/user/OrderView.vue'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">// import UserAddressView from '../views/user/AddressView.vue'</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">UserAddressView</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>  <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../views/user/AddressView.vue'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">// import UserAddAddressView from '../views/user/AddAddressView.vue'</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">UserAddAddressView</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>  <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../views/user/AddAddressView.vue'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">import</span> UserFavoriteView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/FavoriteView.vue'</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">import</span> AboutView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AboutView.vue'</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">import</span> VuexView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/vuex/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">import</span> SetView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/SetView.vue'</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">import</span> DetailView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/detail/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">import</span> RegisterView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">import</span> CheckTelComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/CheckTelComponent.vue'</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">import</span> SendTelCodeComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SendTelCodeComponent.vue'</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">import</span> SetPasswordComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SetPasswordComponent.vue'</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">import</span> LoginView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/login/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">import</span> OrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddressListView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddressListView.vue'</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddAddressView.vue'</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token keyword\">import</span> SearchView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token keyword\">import</span> SearchResultView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/SearchResultView.vue'</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">import</span> CityView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/city/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token comment\">// 3. 构建路由的规则</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> RouteRecordRaw<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 路由的重定向</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 地址栏地址 - 路由</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名路由  ---   唯一性</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    alias<span class=\"token operator\">:</span> <span class=\"token string\">'/h'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token comment\">//component: HomeView // 路由映射的页面组件</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> HomeView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'fade'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/kind'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token comment\">// component: KindView </span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> KindView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'fade'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/result'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'result'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    component<span class=\"token operator\">:</span> ResultView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"78\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/cart'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"81\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'cart'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>    <span class=\"token comment\">// component: CartView </span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> CartView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"86\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'fade'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"91\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>    <span class=\"token comment\">// component: UserView </span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> UserView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'fade'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/set'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"101\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'set'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>    component<span class=\"token operator\">:</span> SetView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userOrder'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"107\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userOrder'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>    component<span class=\"token operator\">:</span> UserOrderView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userAddress'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"113\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>    component<span class=\"token operator\">:</span> UserAddressView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>    component<span class=\"token operator\">:</span> UserAddAddressView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userFavorite'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userFavorite'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>    component<span class=\"token operator\">:</span> UserFavoriteView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/about'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'about'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre>    component<span class=\"token operator\">:</span> AboutView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"136\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/detail/:proid'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'detail'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre>    <span class=\"token comment\">// component: DetailView</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> DetailView</pre></td></tr><tr><td data-num=\"141\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"143\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"147\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/register/index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre>    component<span class=\"token operator\">:</span> RegisterView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre>    children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"152\"></td><td><pre>        component<span class=\"token operator\">:</span> CheckTelComponent</pre></td></tr><tr><td data-num=\"153\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'sms'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"156\"></td><td><pre>        component<span class=\"token operator\">:</span> SendTelCodeComponent</pre></td></tr><tr><td data-num=\"157\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"158\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"159\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'pwd'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"160\"></td><td><pre>        component<span class=\"token operator\">:</span> SetPasswordComponent</pre></td></tr><tr><td data-num=\"161\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"162\"></td><td><pre>    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"163\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"164\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"165\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"166\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"167\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"168\"></td><td><pre>    component<span class=\"token operator\">:</span> LoginView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"169\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"170\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"171\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"172\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"173\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"174\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"175\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"176\"></td><td><pre>    <span class=\"token comment\">//beforeEnter: (to, from, next) => &#123; // 路由独享的导航守卫</span></pre></td></tr><tr><td data-num=\"177\"></td><td><pre>    <span class=\"token comment\">//   if (localStorage.getItem('loginState') === 'true') &#123;</span></pre></td></tr><tr><td data-num=\"178\"></td><td><pre>    <span class=\"token comment\">//     next()</span></pre></td></tr><tr><td data-num=\"179\"></td><td><pre>    <span class=\"token comment\">//   &#125; else &#123;</span></pre></td></tr><tr><td data-num=\"180\"></td><td><pre>    <span class=\"token comment\">//     next('/login')</span></pre></td></tr><tr><td data-num=\"181\"></td><td><pre>    <span class=\"token comment\">//   &#125;</span></pre></td></tr><tr><td data-num=\"182\"></td><td><pre>    <span class=\"token comment\">// &#125;</span></pre></td></tr><tr><td data-num=\"183\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"184\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"185\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"186\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"187\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddressListView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"188\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"189\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"190\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"191\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"192\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"193\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddAddressView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"194\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"195\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"196\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"197\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"198\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"199\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"200\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"201\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"202\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"203\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/searchResult'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"204\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'searchResult'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"205\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchResultView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"206\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"207\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"208\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"209\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/vuex'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"210\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'vuex'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"211\"></td><td><pre>    component<span class=\"token operator\">:</span> VuexView</pre></td></tr><tr><td data-num=\"212\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"213\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"214\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/city'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"215\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'city'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"216\"></td><td><pre>    component<span class=\"token operator\">:</span> CityView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"217\"></td><td><pre>    meta<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> transition<span class=\"token operator\">:</span> <span class=\"token string\">'slide-left'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"218\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"219\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"220\"></td><td><pre></pre></td></tr><tr><td data-num=\"221\"></td><td><pre><span class=\"token comment\">// 4. 生成路由</span></pre></td></tr><tr><td data-num=\"222\"></td><td><pre><span class=\"token keyword\">const</span> router<span class=\"token operator\">:</span> Router <span class=\"token operator\">=</span> <span class=\"token function\">createRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"223\"></td><td><pre>  <span class=\"token comment\">// vue2 vue-router3 history: 'history' | 'hash' </span></pre></td></tr><tr><td data-num=\"224\"></td><td><pre>  history<span class=\"token operator\">:</span> <span class=\"token function\">createWebHashHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"225\"></td><td><pre>  routes <span class=\"token comment\">//routes: routes 简写形式</span></pre></td></tr><tr><td data-num=\"226\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"227\"></td><td><pre></pre></td></tr><tr><td data-num=\"228\"></td><td><pre><span class=\"token comment\">// 全局前置导航守卫 - 一般适用于后台管理系统</span></pre></td></tr><tr><td data-num=\"229\"></td><td><pre><span class=\"token comment\">// router.beforeEach((to, from, next) => &#123;</span></pre></td></tr><tr><td data-num=\"230\"></td><td><pre><span class=\"token comment\">//   next()</span></pre></td></tr><tr><td data-num=\"231\"></td><td><pre><span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"232\"></td><td><pre><span class=\"token comment\">// 5. 暴露路由</span></pre></td></tr><tr><td data-num=\"233\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> router</pre></td></tr></table></figure><blockquote>\n<p>使用前后 通过  <code>cnpm run build</code>  查看打包的 js 文件</p>\n</blockquote>\n",
            "tags": [
                "vue3移动端项目开发",
                "vue",
                "TypeScript"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/vue-mobile/14/",
            "url": "https://www.yexingcheng.com/vue-mobile/14/",
            "title": "vue-mobile项目开发流程第十四部分(实现kind和user页面)",
            "date_published": "2022-07-13T16:00:00.000Z",
            "content_html": "<h3 id=\"分类\"><a class=\"anchor\" href=\"#分类\">#</a> 分类</h3>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/api/kind.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> request <span class=\"token keyword\">from</span> <span class=\"token string\">'../service/request'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 分类列表</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getCategoryListData</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/pro/categorylist'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 分类下品牌列表</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getCategoryBrandListData</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> category<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/pro/categorybrandlist'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> params <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">// 分类下品牌的产品列表</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getCategoryBrandProListData</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> category<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> brand<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/pro/categorybrandprolist'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> params <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><pre><code class=\"language-vue\">&lt;!-- src/views/kind/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar   \n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n      &gt;\n      &lt;template #title&gt;\n        &lt;span class=&quot;title&quot;&gt;商品分类&lt;/span&gt;\n      &lt;/template&gt;\n    &lt;/van-nav-bar&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;box&quot;&gt;\n      &lt;van-sidebar v-model=&quot;active&quot;&gt;\n        &lt;van-sidebar-item v-for=&quot;(item, index) of categoryList&quot; :key=&quot;index&quot; :title=&quot;item&quot; @click=&quot;getCategoryBrandList(item)&quot;/&gt;\n      &lt;/van-sidebar&gt;\n      &lt;div class=&quot;brandList&quot;&gt;\n        &lt;van-grid :square=&quot;true&quot;&gt;\n          &lt;van-grid-item v-for=&quot;(item, index) of brandList&quot; :key=&quot;index&quot; icon=&quot;photo-o&quot; @click=&quot;toSearchList(item.brand)&quot; &gt;\n            &lt;template #text&gt;\n              &lt;div class=&quot;brandname van-ellipsis&quot;&gt;&#123;&#123;item.brand&#125;&#125;&lt;/div&gt;\n            &lt;/template&gt;\n          &lt;/van-grid-item&gt;\n        &lt;/van-grid&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; getCategoryListData, getCategoryBrandListData &#125; from '@/api/kind'\n  interface IBrand &#123;\n    brand: string\n  &#125;\n  interface IData &#123;\n    active: number\n    categoryList: string[]\n    brandList: IBrand[]\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        active: 0,\n        categoryList: [],\n        brandList: []\n      &#125;\n    &#125;,\n    mounted () &#123;\n      getCategoryListData().then(res =&gt; &#123;\n        this.categoryList = res.data.data\n        this.getCategoryBrandList(res.data.data[0])\n      &#125;)\n    &#125;,\n    methods: &#123;\n      getCategoryBrandList (category: string) &#123;\n        getCategoryBrandListData(&#123; category &#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          this.brandList = res.data.data\n        &#125;)\n      &#125;,\n      toSearchList (brand: string) &#123;\n        this.$router.push('/result?category=' + this.categoryList[this.active] + '&amp;brand=' + brand)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .header &#123;\n    // box-sizing: border-box;\n    border-bottom: 3px solid #666;\n    .van-nav-bar&#123;\n      // background-color: #f66;\n      .title &#123;\n        color: #fff;\n      &#125;\n    &#125;\n  &#125;\n \n  .box &#123;\n    display: flex;\n    height: 100%;\n    .brandList &#123;\n      flex: 1;\n      height: 100%;\n      overflow: auto;\n      background-color: #fff;\n    &#125;\n  &#125;\n  .brandname &#123;\n    width: 60px;\n    overflow: hidden;\n    text-align: center;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<pre><code class=\"language-vue\">&lt;!-- src/views/kind/ResultView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;ul&gt;\n      &lt;li @click=&quot;$router.back()&quot;&gt;\n        &lt;van-icon name=&quot;arrow-left&quot; size=&quot;24&quot;/&gt;\n      &lt;/li&gt;\n      &lt;li&gt;\n        &lt;van-field left-icon=&quot;search&quot; @blur=&quot;flag=false&quot; @focus=&quot;flag=true&quot; v-model=&quot;keyword&quot;  placeholder=&quot;清风抽纸&quot; clearable/&gt;\n      &lt;/li&gt;\n      &lt;li @click=&quot;submit&quot; &gt;\n        &lt;van-button type=&quot;danger&quot; v-show=&quot;flag&quot; size=&quot;mini&quot; &gt;搜索&lt;/van-button&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot; &gt;\n    &lt;van-sticky :offset-top=&quot;44&quot;&gt;\n      &lt;van-dropdown-menu&gt;\n        &lt;van-dropdown-item v-model=&quot;value&quot; :options=&quot;options&quot; @change=&quot;sort&quot;/&gt;\n        &lt;van-dropdown-item title=&quot;筛选&quot; ref=&quot;item&quot;&gt;\n          &lt;div class=&quot;priceField&quot;&gt;\n            &lt;van-field v-model=&quot;min&quot; placeholder=&quot;最低价格&quot; /&gt;\n            -\n            &lt;van-field v-model=&quot;max&quot; placeholder=&quot;最高价格&quot; /&gt;\n          &lt;/div&gt;\n          &lt;div style=&quot;padding: 5px 16px;&quot;&gt;\n            &lt;van-button type=&quot;danger&quot; block round @click=&quot;onConfirm&quot;&gt;\n              确认\n            &lt;/van-button&gt;\n          &lt;/div&gt;\n        &lt;/van-dropdown-item&gt;\n      &lt;/van-dropdown-menu&gt;\n    &lt;/van-sticky&gt;\n    \n    &lt;van-card\n      v-for=&quot;item of searchList&quot;\n      :key=&quot;item.proid&quot;\n      :price=&quot;item.originprice&quot;\n      :title=&quot;item.proname&quot;\n      :thumb=&quot;item.img1&quot;\n      @click=&quot;toDetail(item.proid)&quot;\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; getCategoryBrandProListData &#125; from '@/api/kind'\n  import type &#123; IPro &#125; from '../home/home';\n  import type &#123; DropdownItemInstance &#125; from 'vant';\n\n  interface IData &#123;\n    keyword: string\n    searchList: IPro[]\n    initList: IPro[]\n    list: string[]\n    options: Array&lt;&#123;text: string, value: number&#125;&gt;\n    value: number\n    min: string\n    max: string,\n    flag: boolean\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        keyword: '',\n        searchList: [],\n        initList: [],\n        list: [],\n        options: [\n          &#123; text: '全部商品', value: 0 &#125;,\n          &#123; text: '价格升序', value: 1 &#125;,\n          &#123; text: '价格降序', value: -1 &#125;,\n        ],\n        value: 0,\n        min: &quot;&quot;,\n        max: &quot;&quot;,\n        flag: false\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.keyword = (this.$route.query.brand as string)\n      getCategoryBrandProListData(&#123; brand: this.keyword, category: (this.$route.query.category as string) &#125;).then(res =&gt; &#123;\n        this.searchList = res.data.data\n        this.initList = JSON.parse(JSON.stringify(res.data.data))\n      &#125;)\n    &#125;,\n    methods: &#123;\n      submit () &#123;\n        if (localStorage.getItem('searchList')) &#123;\n          this.list = JSON.parse(localStorage.getItem('searchList')!)\n          const index = this.list.findIndex(item =&gt; item === this.keyword)\n          if (index !== -1) &#123;\n            this.list.splice(index, 1)\n          &#125;\n          this.list.unshift(this.keyword)\n        &#125; else &#123;\n          console.log(1)\n          const arr: string[] = []\n          arr.unshift(this.keyword)\n          this.list = arr\n        &#125;\n        localStorage.setItem('searchList', JSON.stringify(this.list))\n        getCategoryBrandProListData(&#123; brand: this.keyword, category: (this.$route.query.category as string) &#125;).then(res =&gt; &#123;\n          this.searchList = res.data.data\n          this.initList = JSON.parse(JSON.stringify(res.data.data))\n        &#125;)\n      &#125;,\n      sort () &#123;\n        console.log(this.value)\n        switch (this.value) &#123;\n          case 0:\n            this.searchList = this.initList\n            break;\n          case 1:\n            this.searchList.sort((a, b) =&gt; a.originprice - b.originprice)\n            break;\n          case -1:\n            this.searchList.sort((a, b) =&gt; b.originprice - a.originprice)\n            break;\n          default:\n            this.searchList = this.initList\n            break;\n        &#125;\n      &#125;,\n      onConfirm () &#123;\n        if (this.min === '') &#123;\n          this.min = '0'\n        &#125;\n        if (this.max === '') &#123;\n          this.max = '9999999'\n        &#125;\n        const arr = this.searchList.filter(item =&gt; &#123;\n          return item.originprice &gt;= Number(this.min) &amp;&amp; item.originprice &lt;= Number(this.max)\n        &#125;)\n        console.log(arr)\n        this.searchList = arr;\n        // this.min = '';\n        // this.max = '';\n        (this.$refs.item as DropdownItemInstance ).toggle()\n      &#125;,\n      toDetail (proid: string) &#123;\n        this.$router.push('/detail/' + proid)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .header &#123;\n    background-color: #fff;\n    ul &#123;\n      height: 100%;\n      display: flex;\n      li &#123;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        &amp;:nth-child(1) &#123;\n          width: 40px;\n        &#125;\n        &amp;:nth-child(2) &#123;\n          flex: 1;\n          .van-field &#123;\n            background-color: #efefef;\n            border-radius: 16px;\n            height: 32px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n          &#125;\n          \n        &#125;\n        &amp;:nth-child(3) &#123;\n          width: 60px;\n        &#125;\n      &#125;\n    &#125;\n  &#125;\n  .priceField &#123;\n    display: flex;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h3 id=\"14-个人中心\"><a class=\"anchor\" href=\"#14-个人中心\">#</a> 14 个人中心</h3>\n<h4 id=\"141-设置页面\"><a class=\"anchor\" href=\"#141-设置页面\">#</a> 14.1 设置页面</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/user/SetView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar   \n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    &gt;\n      &lt;template #title&gt;\n        &lt;span class=&quot;title&quot;&gt;设置&lt;/span&gt;\n      &lt;/template&gt;\n    &lt;/van-nav-bar&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-cell title=&quot;绑定用户名&quot; is-link /&gt;\n    &lt;van-cell title=&quot;修改密码&quot; is-link /&gt;\n\n    &lt;van-button class=&quot;btn&quot; block round color=&quot;linear-gradient(to right, #ff6034, #ee0a24)&quot;&gt;\n      退出登录\n    &lt;/van-button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  export default defineComponent(&#123;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n   .header &#123;\n    // box-sizing: border-box;\n    border-bottom: 3px solid #666;\n    .van-nav-bar&#123;\n      // background-color: #f66;\n      .title &#123;\n        color: #333;\n      &#125;\n    &#125;\n  &#125;\n  .btn &#123;\n    margin-top: 50px;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"142-个人中心页面\"><a class=\"anchor\" href=\"#142-个人中心页面\">#</a> 14.2 个人中心页面</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/user/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar   \n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    &gt;\n      &lt;template #title&gt;\n        &lt;span class=&quot;title&quot;&gt;个人中心&lt;/span&gt;\n      &lt;/template&gt;\n      &lt;template #right&gt;\n        &lt;router-link to=&quot;/set&quot;&gt;&lt;van-icon name=&quot;setting-o&quot; size=&quot;18&quot; color=&quot;#333&quot;/&gt;&lt;/router-link&gt;\n      &lt;/template&gt;\n    &lt;/van-nav-bar&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;avatarBox&quot;&gt;\n      &lt;van-image round  width=&quot;0.8rem&quot; height=&quot;0.8rem&quot; src=&quot;https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg&quot;/&gt;\n      &lt;router-link to=&quot;/login&quot;&gt;&lt;p&gt;请点击登录&lt;/p&gt;&lt;/router-link&gt;\n    &lt;/div&gt;\n    &lt;van-grid&gt;\n      &lt;van-grid-item icon=&quot;refund-o&quot; text=&quot;待付款&quot; /&gt;\n      &lt;van-grid-item icon=&quot;shop-o&quot; text=&quot;待收货&quot; /&gt;\n      &lt;van-grid-item icon=&quot;thumb-circle-o&quot; text=&quot;待评价&quot; /&gt;\n      &lt;van-grid-item icon=&quot;orders-o&quot; text=&quot;全部订单&quot; /&gt;\n    &lt;/van-grid&gt;\n\n    &lt;van-cell title=&quot;地址管理&quot; is-link /&gt;\n    &lt;van-cell title=&quot;我的收藏夹&quot; is-link /&gt;\n    &lt;van-cell title=&quot;关于我们&quot; is-link /&gt;\n\n    &lt;div class=&quot;logo&quot;&gt;\n      &lt;van-image :src=&quot;logo&quot;&gt;&lt;/van-image&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import logo from '@/assets/logo.png'\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        logo\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n   .header &#123;\n    // box-sizing: border-box;\n    border-bottom: 3px solid #666;\n    .van-nav-bar&#123;\n      // background-color: #f66;\n      .title &#123;\n        color: #333;\n      &#125;\n    &#125;\n  &#125;\n  .avatarBox &#123;\n    width: 100%;\n    height: 1rem;\n    box-sizing: border-box;\n    padding: 10px;\n    background-color: rgb(246, 210, 210);\n    display: flex;\n    a &#123;\n      display: block;\n      display: flex;\n      align-items: center;\n      margin-left: 20px;\n      p &#123;\n       \n        font-size: 16px;\n        color: #333;\n      &#125;\n    &#125;\n    \n  &#125;\n  .logo &#123;\n    margin: 30px auto;\n    display: flex;\n    justify-content: center;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"143-地址页面\"><a class=\"anchor\" href=\"#143-地址页面\">#</a> 14.3 地址页面</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/user/AddressView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;&lt;van-nav-bar\n      title=&quot;地址列表&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;&lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-address-list\n      :list=&quot;list&quot;\n      default-tag-text=&quot;默认&quot;\n      @add=&quot;onAdd&quot;\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\nimport &#123; getAddressList &#125; from '@/api/address';\nimport &#123; defineComponent &#125; from 'vue';\n\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        list: [],\n      &#125;\n    &#125;,\n    mounted () &#123;\n      getAddressList(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n        res.data.data.forEach((item: any) =&gt; &#123;\n          item.id = item.addressid\n          item.address = this.getAddress(item)\n        &#125;)\n        console.log(res.data.data)\n        this.list = res.data.data\n      &#125;)\n    &#125;,\n    methods: &#123;\n      getAddress (item: any) &#123;\n        const province = item.province\n        const city  = item.city\n        const county = item.county\n        const addressDetail = item.addressDetail\n\n        let str = ''\n        if (province === city) &#123;\n          str += province + county + addressDetail\n        &#125; else &#123;\n          str += province +  city + county + addressDetail\n        &#125;\n        return str\n      &#125;,\n      onAdd () &#123;\n        this.$router.push('/userAddAddress')\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;\n</code></pre>\n<pre><code class=\"language-vue\">&lt;!-- src/views/user/AddAddressView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;&lt;van-nav-bar\n      title=&quot;添加地址&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;&lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-address-edit\n      :area-list=&quot;areaList&quot;\n      show-set-default\n      :area-columns-placeholder=&quot;['请选择', '请选择', '请选择']&quot;\n      @save=&quot;onSave&quot;\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; areaList &#125; from '@vant/area-data';\n  import &#123; addAddRessData &#125; from '@/api/address';\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        areaList\n      &#125;\n    &#125;,\n    methods: &#123;\n      onSave (content: any) &#123;\n        console.log(content)\n        content.userid = localStorage.getItem('userid')!\n        addAddRessData(content).then(res =&gt; &#123;\n          console.log(res.data) // 添加地址成功\n          this.$router.back()\n        &#125;)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;\n</code></pre>\n<h4 id=\"144-收藏夹页面\"><a class=\"anchor\" href=\"#144-收藏夹页面\">#</a> 14.4 收藏夹页面</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/user/FavoriteView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar   \n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    &gt;\n      &lt;template #title&gt;\n        &lt;span class=&quot;title&quot;&gt;我的收藏夹&lt;/span&gt;\n      &lt;/template&gt;\n      \n    &lt;/van-nav-bar&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    \n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n      &#125;\n    &#125;\n    \n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n   .header &#123;\n    // box-sizing: border-box;\n    border-bottom: 3px solid #666;\n    .van-nav-bar&#123;\n      // background-color: #f66;\n      .title &#123;\n        color: #333;\n      &#125;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"145-关于我们\"><a class=\"anchor\" href=\"#145-关于我们\">#</a> 14.5 关于我们</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/user/AboutView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar   \n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    &gt;\n      &lt;template #title&gt;\n        &lt;span class=&quot;title&quot;&gt;关于我们&lt;/span&gt;\n      &lt;/template&gt;\n      \n    &lt;/van-nav-bar&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    \n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n      &#125;\n    &#125;\n    \n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n   .header &#123;\n    // box-sizing: border-box;\n    border-bottom: 3px solid #666;\n    .van-nav-bar&#123;\n      // background-color: #f66;\n      .title &#123;\n        color: #333;\n      &#125;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"146-订单页面\"><a class=\"anchor\" href=\"#146-订单页面\">#</a> 14.6 订单页面</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/user/OrderView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar   \n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    &gt;\n      &lt;template #title&gt;\n        &lt;span class=&quot;title&quot;&gt;订单查看&lt;/span&gt;\n      &lt;/template&gt;\n    &lt;/van-nav-bar&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-tabs v-model:active=&quot;active&quot;&gt;\n      &lt;van-tab title=&quot;全部订单&quot;&gt;全部订单&lt;/van-tab&gt;\n      &lt;van-tab title=&quot;待付款&quot;&gt;待付款&lt;/van-tab&gt;\n      &lt;van-tab title=&quot;待收货&quot;&gt;待收货&lt;/van-tab&gt;\n      &lt;van-tab title=&quot;待评价&quot;&gt;待评价&lt;/van-tab&gt;\n    &lt;/van-tabs&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        active: 0\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.active = Number(this.$route.query.type)\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n   .header &#123;\n    // box-sizing: border-box;\n    border-bottom: 3px solid #666;\n    .van-nav-bar&#123;\n      // background-color: #f66;\n      .title &#123;\n        color: #333;\n      &#125;\n    &#125;\n  &#125;\n  .btn &#123;\n    margin-top: 50px;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"147-设置路由\"><a class=\"anchor\" href=\"#147-设置路由\">#</a> 14.7 设置路由</h4>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/router/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入 创建路由的模块 以及 路由历史记录模式的模块 </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 路由的历史模式：</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//createWebHistory  HTML5 模式  /home/kind/cart/user  需要后端配合</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//createWebHashHistory Hash 模式  /#/home   /#/kind  /#/cart  /#/user</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createRouter<span class=\"token punctuation\">,</span> createWebHistory <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">&#123;</span> RouteRecordRaw<span class=\"token punctuation\">,</span> Router <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span> <span class=\"token comment\">// 路由规则的类型 ---- 路由规则的类型注解</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 2. 引入页面组件</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> Footer <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/FooterComponent.vue'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> HomeView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/home/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> KindView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> ResultView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/ResultView.vue'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">import</span> CartView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/cart/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">import</span> UserView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">import</span> UserOrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/OrderView.vue'</span> <span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">import</span> UserAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AddressView.vue'</span> <span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">import</span> UserAddAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AddAddressView.vue'</span> <span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">import</span> UserFavoriteView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/FavoriteView.vue'</span> <span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">import</span> AboutView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/user/AboutView.vue'</span> <span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">import</span> SetView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/SetView.vue'</span> <span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">import</span> DetailView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/detail/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">import</span> RegisterView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">import</span> CheckTelComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/CheckTelComponent.vue'</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">import</span> SendTelCodeComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SendTelCodeComponent.vue'</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">import</span> SetPasswordComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SetPasswordComponent.vue'</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">import</span> LoginView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/login/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">import</span> OrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddressListView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddressListView.vue'</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddAddressView.vue'</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">import</span> SearchView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">import</span> SearchResultView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/SearchResultView.vue'</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\">// 3. 构建路由的规则</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> RouteRecordRaw<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 路由的重定向</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 地址栏地址 - 路由</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名路由  ---   唯一性</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token comment\">//component: HomeView // 路由映射的页面组件</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> HomeView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/kind'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token comment\">// component: KindView </span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> KindView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/result'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'result'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    component<span class=\"token operator\">:</span> ResultView</pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/cart'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'cart'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token comment\">// component: CartView </span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> CartView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token comment\">// component: UserView </span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> UserView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/set'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"83\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'set'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>    component<span class=\"token operator\">:</span> SetView</pre></td></tr><tr><td data-num=\"85\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userOrder'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"88\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userOrder'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>    component<span class=\"token operator\">:</span> UserOrderView</pre></td></tr><tr><td data-num=\"90\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userAddress'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"93\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>    component<span class=\"token operator\">:</span> UserAddressView</pre></td></tr><tr><td data-num=\"95\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>    component<span class=\"token operator\">:</span> UserAddAddressView</pre></td></tr><tr><td data-num=\"100\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/userFavorite'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'userFavorite'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>    component<span class=\"token operator\">:</span> UserFavoriteView</pre></td></tr><tr><td data-num=\"105\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/about'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'about'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>    component<span class=\"token operator\">:</span> AboutView</pre></td></tr><tr><td data-num=\"110\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/detail/:proid'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'detail'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>    <span class=\"token comment\">// component: DetailView</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> DetailView</pre></td></tr><tr><td data-num=\"117\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/register/index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>    component<span class=\"token operator\">:</span> RegisterView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>    children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>        component<span class=\"token operator\">:</span> CheckTelComponent</pre></td></tr><tr><td data-num=\"128\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'sms'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre>        component<span class=\"token operator\">:</span> SendTelCodeComponent</pre></td></tr><tr><td data-num=\"132\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'pwd'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre>        component<span class=\"token operator\">:</span> SetPasswordComponent</pre></td></tr><tr><td data-num=\"136\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre>    component<span class=\"token operator\">:</span> LoginView</pre></td></tr><tr><td data-num=\"143\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"147\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderView</pre></td></tr><tr><td data-num=\"148\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"152\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddressListView</pre></td></tr><tr><td data-num=\"153\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"156\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"157\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddAddressView</pre></td></tr><tr><td data-num=\"158\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"159\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"160\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"161\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"162\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchView</pre></td></tr><tr><td data-num=\"163\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"164\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"165\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/searchResult'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"166\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'searchResult'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"167\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchResultView</pre></td></tr><tr><td data-num=\"168\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"169\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"170\"></td><td><pre></pre></td></tr><tr><td data-num=\"171\"></td><td><pre><span class=\"token comment\">// 4. 生成路由</span></pre></td></tr><tr><td data-num=\"172\"></td><td><pre><span class=\"token keyword\">const</span> router<span class=\"token operator\">:</span> Router <span class=\"token operator\">=</span> <span class=\"token function\">createRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"173\"></td><td><pre>  <span class=\"token comment\">// vue2 vue-router3 history: 'history' | 'hash' </span></pre></td></tr><tr><td data-num=\"174\"></td><td><pre>  history<span class=\"token operator\">:</span> <span class=\"token function\">createWebHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"175\"></td><td><pre>  routes <span class=\"token comment\">//routes: routes 简写形式</span></pre></td></tr><tr><td data-num=\"176\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"177\"></td><td><pre></pre></td></tr><tr><td data-num=\"178\"></td><td><pre><span class=\"token comment\">// 5. 暴露路由</span></pre></td></tr><tr><td data-num=\"179\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> router</pre></td></tr></table></figure><h4 id=\"148-更新用户名以及密码\"><a class=\"anchor\" href=\"#148-更新用户名以及密码\">#</a> 14.8 更新用户名以及密码</h4>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/api/user.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> request <span class=\"token keyword\">from</span> <span class=\"token string\">'./../service/request'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 检测手机号是否被注册过</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">doCheckPhone</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> tel<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/docheckphone'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 发送短信验证码</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">doSendMsgCode</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> tel<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/dosendmsgcode'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">// 验证验证码</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">doCheckCode</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> tel<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> telcode<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/docheckcode'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">// 设置密码完成注册</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">doFinishRegister</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> tel<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/dofinishregister'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">// 登录</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">doLogin</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> loginname<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/login'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\">// 获取用户信息</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getUserInfo</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/info'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> params <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\">// 更新用户名</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">updateUsername</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/bindusername'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>params<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\">// 更新密码</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">updatePassword</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> oldpassword<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> newpassword<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/updatePassword'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>params<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><pre><code class=\"language-vue\">&lt;!-- src/views/user/SetView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar   \n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    &gt;\n      &lt;template #title&gt;\n        &lt;span class=&quot;title&quot;&gt;设置&lt;/span&gt;\n      &lt;/template&gt;\n    &lt;/van-nav-bar&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-cell title=&quot;绑定用户名&quot; is-link  @click=&quot;showUpdateUsername&quot; :value=&quot;username&quot;/&gt;\n    &lt;van-cell title=&quot;修改密码&quot; is-link @click=&quot;passwordShow = true&quot;/&gt;\n\n    &lt;van-button class=&quot;btn&quot; block round color=&quot;linear-gradient(to right, #ff6034, #ee0a24)&quot; @click=&quot;logout&quot;&gt;\n      退出登录\n    &lt;/van-button&gt;\n\n    &lt;van-overlay :show=&quot;userNameShow&quot; @click=&quot;userNameShow = false&quot; &gt;\n      &lt;div class=&quot;box&quot;  @click.stop&gt;\n        &lt;h1&gt;设置用户名&lt;/h1&gt;\n        &lt;van-field v-model=&quot;username&quot; placeholder=&quot;请输入用户名&quot;/&gt;\n        &lt;van-button round type=&quot;danger&quot; @click=&quot;updateUsernameFn&quot;&gt;更新&lt;/van-button&gt;\n      &lt;/div&gt;\n    &lt;/van-overlay&gt;\n    &lt;van-overlay :show=&quot;passwordShow&quot; @click=&quot;passwordShow = false&quot; &gt;\n      &lt;div class=&quot;box&quot;  @click.stop&gt;\n        &lt;h1&gt;更新密码&lt;/h1&gt;\n        &lt;van-field class=&quot;new&quot; v-model=&quot;oldPassword&quot; placeholder=&quot;原始密码&quot;/&gt;\n        &lt;van-field class=&quot;new&quot; v-model=&quot;password&quot; placeholder=&quot;新密码&quot;/&gt;\n        &lt;van-button round type=&quot;danger&quot; @click=&quot;updatePasswordFn&quot;&gt;更新&lt;/van-button&gt;\n      &lt;/div&gt;\n    &lt;/van-overlay&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; updateUsername, getUserInfo, updatePassword &#125; from '@/api/user'\nimport &#123; Toast &#125; from 'vant';\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        userNameShow: false,\n        passwordShow: false,\n        username: '',\n        oldPassword: '',\n        password: ''\n      &#125;\n    &#125;,\n    mounted () &#123;\n      getUserInfo(&#123;userid: localStorage.getItem('userid')!&#125;).then(res =&gt; &#123;\n        console.log(res.data)\n        this.username = res.data.data[0].username\n      &#125;)\n    &#125;,\n    methods: &#123;\n      showUpdateUsername () &#123;\n        if (this.username) &#123;\n          Toast('用户名只能更改一次')\n        &#125; else &#123;\n          this.userNameShow = true\n        &#125;\n      &#125;,\n      updateUsernameFn () &#123;\n        updateUsername(&#123; userid: localStorage.getItem('userid')!, username: this.username &#125;).then(res =&gt; &#123;\n          Toast('更改用户名成功')\n          this.userNameShow = false\n        &#125;)\n      &#125;,\n      updatePasswordFn () &#123;\n        updatePassword(&#123; userid: localStorage.getItem('userid')!, oldpassword: this.oldPassword, newpassword: this.password &#125;).then(res =&gt; &#123;\n          if (res.data.code === '10030') &#123;\n            Toast('原始密码错误')\n          &#125; else &#123;\n            Toast('修改密码成功')\n            localStorage.removeItem('loginState')\n            localStorage.removeItem('userid')\n            localStorage.removeItem('token')\n            this.$router.push('/login')\n          &#125;\n        &#125;)\n      &#125;,\n      logout () &#123;\n        localStorage.removeItem('loginState')\n        localStorage.removeItem('userid')\n        localStorage.removeItem('token')\n        this.$router.push('/login')\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n   .header &#123;\n    // box-sizing: border-box;\n    border-bottom: 3px solid #666;\n    .van-nav-bar&#123;\n      // background-color: #f66;\n      .title &#123;\n        color: #333;\n      &#125;\n    &#125;\n  &#125;\n  .btn &#123;\n    margin-top: 50px;\n  &#125;\n  .box &#123;\n    height: 30%;\n    width: 80%;\n    margin: 0 10%;\n    background-color: #fff;\n    border-radius: 20px;\n    margin-top: 40%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    h1 &#123;\n      text-align: center;\n      flex: 1;\n      margin-top: 20px;\n    &#125;\n    .van-field &#123;\n      flex: 6;\n      &amp;.new &#123;\n        flex: 3;\n      &#125;\n    &#125;\n    .van-button &#123;\n      flex: 3;\n      margin-bottom: 20px;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"149-我的收藏夹\"><a class=\"anchor\" href=\"#149-我的收藏夹\">#</a> 14.9 我的收藏夹</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/user/FavoriteView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar   \n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    &gt;\n      &lt;template #title&gt;\n        &lt;span class=&quot;title&quot;&gt;我的收藏夹&lt;/span&gt;\n      &lt;/template&gt;\n      \n    &lt;/van-nav-bar&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;no&quot; v-if=&quot;flag&quot;&gt;\n      &lt;van-empty description=&quot;收藏夹空空如也&quot;&gt;\n        &lt;van-button round type=&quot;danger&quot; class=&quot;bottom-button&quot; @click=&quot;$router.push('/kind')&quot;&gt;立即浏览收藏&lt;/van-button&gt;\n      &lt;/van-empty&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;has&quot; v-else&gt;\n      &lt;van-swipe-cell\n        v-for=&quot;(item, index) of favoriteList&quot;\n        :key=&quot;item.proid&quot;\n      &gt;\n      &lt;van-card\n        :price=&quot;item.originprice&quot;\n        :title=&quot;item.proname&quot;\n        :thumb=&quot;item.img1&quot;\n      &gt;\n      &lt;/van-card&gt;\n        \n        &lt;template #right&gt;\n          &lt;van-button square text=&quot;删除&quot; type=&quot;danger&quot; @click=&quot;deleteItem(index)&quot; class=&quot;delete-button&quot; /&gt;\n        &lt;/template&gt;\n      &lt;/van-swipe-cell&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; getDetailData &#125; from '@/api/detail'\n  export default defineComponent(&#123;\n    data (): any &#123;\n      return &#123;\n        arr: [],\n        favoriteList: []\n      &#125;\n    &#125;,\n    computed: &#123;\n      flag () &#123;\n        return this.arr.length === 0\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.arr = JSON.parse(localStorage.getItem('stars')!)\n      const newArr: any = []\n      this.arr.forEach((item: string) =&gt; &#123;\n        newArr.push(getDetailData(item))\n      &#125;)\n      Promise.all(newArr).then(res =&gt; &#123;\n        console.log(res)\n        res.forEach((item: any) =&gt; &#123;\n          this.favoriteList.push(item.data.data)\n        &#125;)\n        console.log(this.favoriteList)\n      &#125;)\n    &#125;,\n    methods: &#123;\n      deleteItem (index: number) &#123;\n        this.favoriteList.splice(index, 1)\n        this.arr.splice(index, 1)\n        localStorage.setItem('stars', JSON.stringify(this.arr))\n      &#125;\n    &#125;\n    \n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n   .header &#123;\n    // box-sizing: border-box;\n    border-bottom: 3px solid #666;\n    .van-nav-bar&#123;\n      // background-color: #f66;\n      .title &#123;\n        color: #333;\n      &#125;\n    &#125;\n  &#125;\n  .delete-button &#123;\n    height: 100%;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"1410-查看订单\"><a class=\"anchor\" href=\"#1410-查看订单\">#</a> 14.10 查看订单</h4>\n<blockquote>\n<p>18813007812 Xagp01</p>\n</blockquote>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/api/user.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> request <span class=\"token keyword\">from</span> <span class=\"token string\">'./../service/request'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 检测手机号是否被注册过</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">doCheckPhone</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> tel<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/docheckphone'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 发送短信验证码</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">doSendMsgCode</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> tel<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/dosendmsgcode'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">// 验证验证码</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">doCheckCode</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> tel<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> telcode<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/docheckcode'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">// 设置密码完成注册</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">doFinishRegister</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> tel<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/dofinishregister'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">// 登录</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">doLogin</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> loginname<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/login'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\">// 获取用户信息</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getUserInfo</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/info'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> params <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\">// 更新用户名</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">updateUsername</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/bindusername'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>params<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\">// 更新密码</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">updatePassword</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> oldpassword<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> newpassword<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/updatePassword'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>params<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token comment\">// 获取订单</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getAllOrderData</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/orderlist'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>params<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><pre><code class=\"language-vue\">&lt;!-- src/views/user/OrderView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar   \n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    &gt;\n      &lt;template #title&gt;\n        &lt;span class=&quot;title&quot;&gt;订单查看&lt;/span&gt;\n      &lt;/template&gt;\n    &lt;/van-nav-bar&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-tabs v-model:active=&quot;active&quot;&gt;\n      &lt;van-tab title=&quot;全部订单&quot;&gt;\n        &lt;van-card\n          v-for=&quot;item of orderList&quot;\n          :price=&quot;item.originprice&quot;\n          :title=&quot;item.proname&quot;\n          :desc=&quot;item.time&quot;\n          :thumb=&quot;item.img1&quot;\n        &gt;\n          &lt;template #num&gt;\n            &lt;van-button v-if=&quot;item.status === 0&quot; type=&quot;warning&quot; size=&quot;mini&quot;&gt;去支付&lt;/van-button&gt;\n            &lt;van-button v-else-if=&quot;item.status === 1&quot; type=&quot;danger&quot; size=&quot;mini&quot;&gt;确认收货&lt;/van-button&gt;\n            &lt;van-button v-else type=&quot;primary&quot; size=&quot;mini&quot;&gt;去评价&lt;/van-button&gt;\n          &lt;/template&gt;\n        &lt;/van-card&gt;\n      &lt;/van-tab&gt;\n      &lt;van-tab title=&quot;待付款&quot;&gt;\n        &lt;van-card\n          v-for=&quot;item of payList&quot;\n          :price=&quot;item.originprice&quot;\n          :title=&quot;item.proname&quot;\n          :desc=&quot;item.time&quot;\n          :thumb=&quot;item.img1&quot;\n        &gt;\n        &lt;template #num&gt;\n          &lt;van-button type=&quot;warning&quot; size=&quot;mini&quot;&gt;去支付&lt;/van-button&gt;\n        &lt;/template&gt;\n        &lt;/van-card&gt;\n      &lt;/van-tab&gt;\n      &lt;van-tab title=&quot;待收货&quot;&gt;\n        &lt;van-card\n          v-for=&quot;item of receiptList&quot;\n          :price=&quot;item.originprice&quot;\n          :title=&quot;item.proname&quot;\n          :desc=&quot;item.time&quot;\n          :thumb=&quot;item.img1&quot;\n        &gt;\n          &lt;template #num&gt;\n            &lt;van-button type=&quot;danger&quot; size=&quot;mini&quot;&gt;确认收货&lt;/van-button&gt;\n          &lt;/template&gt;\n        &lt;/van-card&gt;\n      &lt;/van-tab&gt;\n      &lt;van-tab title=&quot;待评价&quot;&gt;\n        &lt;van-card\n          v-for=&quot;item of assessList&quot;\n          :price=&quot;item.originprice&quot;\n          :title=&quot;item.proname&quot;\n          :desc=&quot;item.time&quot;\n          :thumb=&quot;item.img1&quot;\n        &gt;\n          &lt;template #num&gt;\n            &lt;van-button type=&quot;primary&quot; size=&quot;mini&quot;&gt;去评价&lt;/van-button&gt;\n          &lt;/template&gt;\n        &lt;/van-card&gt;\n      &lt;/van-tab&gt;\n    &lt;/van-tabs&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; getAllOrderData &#125; from '@/api/user'\n  export default defineComponent(&#123;\n    data (): any &#123;\n      return &#123;\n        active: 0,\n        orderList: []\n      &#125;\n    &#125;,\n    computed: &#123;\n      payList () &#123;\n        return this.orderList.filter((item: any) =&gt; item.status === 0)\n      &#125;,\n      receiptList () &#123;\n        return this.orderList.filter((item: any) =&gt; item.status === 1)\n      &#125;,\n      assessList () &#123;\n        return this.orderList.filter((item: any) =&gt; item.status === 2)\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.active = Number(this.$route.query.type)\n\n      getAllOrderData(&#123; userid: localStorage.getItem('userid')!&#125;).then(res =&gt; &#123;\n        console.log(res.data)\n        this.orderList = res.data.data\n      &#125;)\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n   .header &#123;\n    // box-sizing: border-box;\n    border-bottom: 3px solid #666;\n    .van-nav-bar&#123;\n      // background-color: #f66;\n      .title &#123;\n        color: #333;\n      &#125;\n    &#125;\n  &#125;\n  .btn &#123;\n    margin-top: 50px;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"1411-完善个人中心界面\"><a class=\"anchor\" href=\"#1411-完善个人中心界面\">#</a> 14.11 完善个人中心界面</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/user/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar   \n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    &gt;\n      &lt;template #title&gt;\n        &lt;span class=&quot;title&quot;&gt;个人中心&lt;/span&gt;\n      &lt;/template&gt;\n      &lt;template #right&gt;\n        &lt;router-link v-if=&quot;userFlag&quot; to=&quot;/set&quot;&gt;&lt;van-icon name=&quot;setting-o&quot; size=&quot;18&quot; color=&quot;#333&quot;/&gt;&lt;/router-link&gt;\n      &lt;/template&gt;\n    &lt;/van-nav-bar&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;avatarBox&quot;&gt;\n      &lt;van-image round  width=&quot;0.8rem&quot; height=&quot;0.8rem&quot; src=&quot;https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg&quot;/&gt;\n      &lt;a href=&quot;#&quot; v-if=&quot;userFlag&quot;&gt;&lt;p&gt;欢迎您:&#123;&#123; username &#125;&#125;&lt;/p&gt;&lt;/a&gt;\n      &lt;router-link v-else to=&quot;/login&quot;&gt;&lt;p&gt;请点击登录&lt;/p&gt;&lt;/router-link&gt;\n    &lt;/div&gt;\n    &lt;van-grid&gt;\n      &lt;van-grid-item icon=&quot;refund-o&quot; text=&quot;待付款&quot; @click=&quot;getOrder(1)&quot;/&gt;\n      &lt;van-grid-item icon=&quot;shop-o&quot; text=&quot;待收货&quot;  @click=&quot;getOrder(2)&quot;/&gt;\n      &lt;van-grid-item icon=&quot;thumb-circle-o&quot; text=&quot;待评价&quot;  @click=&quot;getOrder(3)&quot;/&gt;\n      &lt;van-grid-item icon=&quot;orders-o&quot; text=&quot;全部订单&quot;  @click=&quot;getOrder(0)&quot;/&gt;\n    &lt;/van-grid&gt;\n\n    &lt;van-cell title=&quot;地址管理&quot; is-link @click=&quot;toAddressList&quot;/&gt;\n    &lt;van-cell title=&quot;我的收藏夹&quot; is-link @click=&quot;toFavorite&quot;/&gt;\n    &lt;van-cell title=&quot;关于我们&quot; is-link @click=&quot;toAbout&quot;/&gt;\n\n    &lt;div class=&quot;logo&quot;&gt;\n      &lt;van-image :src=&quot;logo&quot;&gt;&lt;/van-image&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import logo from '@/assets/logo.png'\n  import &#123; getUserInfo  &#125; from '@/api/user'\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        logo,\n        userFlag: false,\n        username: ''\n      &#125;\n    &#125;,\n    mounted () &#123;\n      if (localStorage.getItem('userid')) &#123;\n        // 用户登录\n        this.userFlag = true\n        getUserInfo(&#123; userid: localStorage.getItem('userid')!&#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          this.username = res.data.data[0].username ? res.data.data[0].username : res.data.data[0].tel\n        &#125;)\n      &#125; else &#123;\n        // 用户未登录\n        this.userFlag = false\n        // this.$router.push('/login')\n      &#125;\n    &#125;,\n\n    methods: &#123;\n      getOrder (type: number) &#123;\n        if (localStorage.getItem('loginState') === 'true') &#123;\n          this.$router.push('/userOrder?type=' + type)\n        &#125; else &#123;\n          this.$router.push('/login')\n        &#125;\n      &#125;,\n      toAddressList () &#123;\n        if (localStorage.getItem('loginState') === 'true') &#123;\n          this.$router.push('/userAddress')\n        &#125; else &#123;\n          this.$router.push('/login')\n        &#125;\n      &#125;,\n      toFavorite () &#123;\n        this.$router.push('/userFavorite')\n      &#125;,\n      toAbout () &#123;\n        this.$router.push('/about')\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n   .header &#123;\n    // box-sizing: border-box;\n    border-bottom: 3px solid #666;\n    .van-nav-bar&#123;\n      // background-color: #f66;\n      .title &#123;\n        color: #333;\n      &#125;\n    &#125;\n  &#125;\n  .avatarBox &#123;\n    width: 100%;\n    height: 1rem;\n    box-sizing: border-box;\n    padding: 10px;\n    background-color: rgb(246, 210, 210);\n    display: flex;\n    a &#123;\n      display: block;\n      display: flex;\n      align-items: center;\n      margin-left: 20px;\n      p &#123;\n       \n        font-size: 16px;\n        color: #333;\n      &#125;\n    &#125;\n    \n  &#125;\n  .logo &#123;\n    margin: 30px auto;\n    display: flex;\n    justify-content: center;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n",
            "tags": [
                "vue3移动端项目开发",
                "vue",
                "TypeScript"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/vue-mobile/13/",
            "url": "https://www.yexingcheng.com/vue-mobile/13/",
            "title": "vue-mobile项目开发流程第十三部分(实现提交订单功能)",
            "date_published": "2022-07-11T16:00:00.000Z",
            "content_html": "<h3 id=\"13-搜索\"><a class=\"anchor\" href=\"#13-搜索\">#</a> 13 搜索</h3>\n<h4 id=\"131-创建搜索页面以及路由\"><a class=\"anchor\" href=\"#131-创建搜索页面以及路由\">#</a> 13.1 创建搜索页面以及路由</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/search/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;search header&lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;search content&lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\nimport &#123; defineComponent &#125; from 'vue';\n\n  export default defineComponent(&#123;&#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;\n</code></pre>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/router/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入 创建路由的模块 以及 路由历史记录模式的模块 </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 路由的历史模式：</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//createWebHistory  HTML5 模式  /home/kind/cart/user  需要后端配合</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//createWebHashHistory Hash 模式  /#/home   /#/kind  /#/cart  /#/user</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createRouter<span class=\"token punctuation\">,</span> createWebHistory <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">&#123;</span> RouteRecordRaw<span class=\"token punctuation\">,</span> Router <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span> <span class=\"token comment\">// 路由规则的类型 ---- 路由规则的类型注解</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 2. 引入页面组件</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> Footer <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/FooterComponent.vue'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> HomeView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/home/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> KindView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> CartView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/cart/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">import</span> UserView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">import</span> DetailView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/detail/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">import</span> RegisterView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">import</span> CheckTelComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/CheckTelComponent.vue'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">import</span> SendTelCodeComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SendTelCodeComponent.vue'</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">import</span> SetPasswordComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SetPasswordComponent.vue'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">import</span> LoginView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/login/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">import</span> OrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddressListView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddressListView.vue'</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddAddressView.vue'</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">import</span> SearchView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/IndexView.vue'</span> <span class=\"token comment\">// +++++</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\">// 3. 构建路由的规则</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> RouteRecordRaw<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 路由的重定向</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 地址栏地址 - 路由</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名路由  ---   唯一性</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token comment\">//component: HomeView // 路由映射的页面组件</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> HomeView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/kind'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token comment\">// component: KindView </span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> KindView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/cart'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'cart'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token comment\">// component: CartView </span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> CartView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token comment\">// component: UserView </span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> UserView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/detail/:proid'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'detail'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    <span class=\"token comment\">// component: DetailView</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> DetailView</pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/register/index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>    component<span class=\"token operator\">:</span> RegisterView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>    children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>        component<span class=\"token operator\">:</span> CheckTelComponent</pre></td></tr><tr><td data-num=\"85\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'sms'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>        component<span class=\"token operator\">:</span> SendTelCodeComponent</pre></td></tr><tr><td data-num=\"89\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'pwd'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>        component<span class=\"token operator\">:</span> SetPasswordComponent</pre></td></tr><tr><td data-num=\"93\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>    component<span class=\"token operator\">:</span> LoginView</pre></td></tr><tr><td data-num=\"100\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderView</pre></td></tr><tr><td data-num=\"105\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddressListView</pre></td></tr><tr><td data-num=\"110\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddAddressView</pre></td></tr><tr><td data-num=\"115\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// +++++</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchView</pre></td></tr><tr><td data-num=\"120\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre></pre></td></tr><tr><td data-num=\"123\"></td><td><pre><span class=\"token comment\">// 4. 生成路由</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre><span class=\"token keyword\">const</span> router<span class=\"token operator\">:</span> Router <span class=\"token operator\">=</span> <span class=\"token function\">createRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>  <span class=\"token comment\">// vue2 vue-router3 history: 'history' | 'hash' </span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>  history<span class=\"token operator\">:</span> <span class=\"token function\">createWebHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>  routes <span class=\"token comment\">//routes: routes 简写形式</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre></pre></td></tr><tr><td data-num=\"130\"></td><td><pre><span class=\"token comment\">// 5. 暴露路由</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> router</pre></td></tr></table></figure><h4 id=\"132-完善搜索页面\"><a class=\"anchor\" href=\"#132-完善搜索页面\">#</a> 13.2 完善搜索页面</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/search/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;ul&gt;\n      &lt;li @click=&quot;$router.back()&quot;&gt;\n        &lt;van-icon name=&quot;arrow-left&quot; size=&quot;24&quot;/&gt;\n      &lt;/li&gt;\n      &lt;li&gt;\n        &lt;van-field left-icon=&quot;search&quot; v-model=&quot;keyword&quot;  placeholder=&quot;清风抽纸&quot; /&gt;\n      &lt;/li&gt;\n      &lt;li @click=&quot;submit&quot;&gt;\n        &lt;van-button type=&quot;danger&quot; size=&quot;mini&quot;&gt;搜索&lt;/van-button&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;search content&lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\nimport &#123; defineComponent &#125; from 'vue';\n\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        keyword: ''\n      &#125;\n    &#125;,\n    methods: &#123;\n      submit () &#123;\n\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .header &#123;\n    background-color: #fff;\n    ul &#123;\n      height: 100%;\n      display: flex;\n      li &#123;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        &amp;:nth-child(1) &#123;\n          width: 40px;\n        &#125;\n        &amp;:nth-child(2) &#123;\n          flex: 1;\n          .van-field &#123;\n            background-color: #efefef;\n            border-radius: 16px;\n            height: 32px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n          &#125;\n          \n        &#125;\n        &amp;:nth-child(3) &#123;\n          width: 60px;\n        &#125;\n      &#125;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"133-封装搜索的请求接口\"><a class=\"anchor\" href=\"#133-封装搜索的请求接口\">#</a> 13.3 封装搜索的请求接口</h4>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/api/search.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> request <span class=\"token keyword\">from</span> <span class=\"token string\">'../service/request'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 热门搜索</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getHotSearchListData</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/pro/hotword'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 搜索列表数据</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getSearchListData</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> count<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> limitNum<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> keyword<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/pro/search'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> params <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"134-请求热门搜索以及最近搜索并且渲染\"><a class=\"anchor\" href=\"#134-请求热门搜索以及最近搜索并且渲染\">#</a> 13.4 请求热门搜索以及最近搜索并且渲染</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/search/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;ul&gt;\n      &lt;li @click=&quot;$router.back()&quot;&gt;\n        &lt;van-icon name=&quot;arrow-left&quot; size=&quot;24&quot;/&gt;\n      &lt;/li&gt;\n      &lt;li&gt;\n        &lt;van-field left-icon=&quot;search&quot; v-model=&quot;keyword&quot;  placeholder=&quot;清风抽纸&quot; /&gt;\n      &lt;/li&gt;\n      &lt;li @click=&quot;submit&quot;&gt;\n        &lt;van-button type=&quot;danger&quot; size=&quot;mini&quot; &gt;搜索&lt;/van-button&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;list&quot;&gt;\n      &lt;h3&gt;最近搜索&lt;/h3&gt;\n      &lt;van-tag v-for=&quot;(item, index) of searchList&quot; :key=&quot;index&quot; plain &gt;&#123;&#123;item&#125;&#125;&lt;/van-tag&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;list&quot;&gt;\n      &lt;h3&gt;热门搜索&lt;/h3&gt;\n      &lt;van-tag v-for=&quot;item of hotList&quot; :key=&quot;item.wordid&quot; plain &gt;&#123;&#123;item.keyword&#125;&#125;&lt;/van-tag&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; getHotSearchListData &#125; from '@/api/search'\n  interface IWord &#123;\n    keyword: string\n    num: number\n    wordid: string\n  &#125;\n  interface IData &#123;\n    keyword: string\n    hotList: IWord[]\n    searchList: string[]\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        keyword: '',\n        hotList: [],\n        searchList: []\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.searchList = JSON.parse(localStorage.getItem('searchList')!)\n      getHotSearchListData().then(res =&gt; &#123;\n        console.log(res.data)\n        this.hotList = res.data.data\n      &#125;)\n    &#125;,\n    methods: &#123;\n      submit () &#123;\n        if (localStorage.getItem('searchList')) &#123;\n          this.searchList = JSON.parse(localStorage.getItem('searchList')!)\n          const index = this.searchList.findIndex(item =&gt; item === this.keyword)\n          if (index !== -1) &#123;\n            this.searchList.splice(index, 1)\n          &#125;\n          this.searchList.unshift(this.keyword)\n        &#125; else &#123;\n          this.searchList.unshift(this.keyword)\n        &#125;\n        localStorage.setItem('searchList', JSON.stringify(this.searchList))\n        \n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .header &#123;\n    background-color: #fff;\n    ul &#123;\n      height: 100%;\n      display: flex;\n      li &#123;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        &amp;:nth-child(1) &#123;\n          width: 40px;\n        &#125;\n        &amp;:nth-child(2) &#123;\n          flex: 1;\n          .van-field &#123;\n            background-color: #efefef;\n            border-radius: 16px;\n            height: 32px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n          &#125;\n          \n        &#125;\n        &amp;:nth-child(3) &#123;\n          width: 60px;\n        &#125;\n      &#125;\n    &#125;\n  &#125;\n  .list &#123;\n    background-color: #fff;\n    padding: 15px;\n    .van-tag &#123;\n      padding: 5px 10px;\n      margin: 3px;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"135-优化页面跳转路由\"><a class=\"anchor\" href=\"#135-优化页面跳转路由\">#</a> 13.5 优化页面跳转路由</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/search/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;ul&gt;\n      &lt;li @click=&quot;$router.back()&quot;&gt;\n        &lt;van-icon name=&quot;arrow-left&quot; size=&quot;24&quot;/&gt;\n      &lt;/li&gt;\n      &lt;li&gt;\n        &lt;van-field left-icon=&quot;search&quot; v-model=&quot;keyword&quot;  placeholder=&quot;清风抽纸&quot; clearable/&gt;\n      &lt;/li&gt;\n      &lt;li @click=&quot;submit&quot;&gt;\n        &lt;van-button type=&quot;danger&quot; size=&quot;mini&quot; &gt;搜索&lt;/van-button&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;list&quot;&gt;\n      &lt;h3&gt;\n        最近搜索\n        &lt;span @click=&quot;deleteList&quot;&gt;\n          &lt;van-icon name=&quot;delete-o&quot; /&gt;\n        &lt;/span&gt;\n      &lt;/h3&gt;\n      &lt;van-tag v-for=&quot;(item, index) of searchList&quot; :key=&quot;index&quot; plain @click=&quot;search(item)&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/van-tag&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;list&quot;&gt;\n      &lt;h3&gt;热门搜索&lt;/h3&gt;\n      &lt;van-tag v-for=&quot;item of hotList&quot; :key=&quot;item.wordid&quot; plain @click=&quot;search(item.keyword)&quot;&gt;&#123;&#123;item.keyword&#125;&#125;&lt;/van-tag&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; getHotSearchListData &#125; from '@/api/search'\n  interface IWord &#123;\n    keyword: string\n    num: number\n    wordid: string\n  &#125;\n  interface IData &#123;\n    keyword: string\n    hotList: IWord[]\n    searchList: string[]\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        keyword: '',\n        hotList: [],\n        searchList: []\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.searchList = JSON.parse(localStorage.getItem('searchList')!)\n      getHotSearchListData().then(res =&gt; &#123;\n        console.log(res.data)\n        this.hotList = res.data.data\n      &#125;)\n    &#125;,\n    methods: &#123;\n      deleteList () &#123;\n        localStorage.removeItem('searchList')\n        this.searchList = []\n      &#125;,\n      search (keyword: string) &#123;\n        this.keyword = keyword\n\n        this.submit()\n      &#125;,\n      submit () &#123;\n        if (localStorage.getItem('searchList')) &#123;\n          this.searchList = JSON.parse(localStorage.getItem('searchList')!)\n          const index = this.searchList.findIndex(item =&gt; item === this.keyword)\n          if (index !== -1) &#123;\n            this.searchList.splice(index, 1)\n          &#125;\n          this.searchList.unshift(this.keyword)\n        &#125; else &#123;\n          console.log(1)\n          const arr: string[] = []\n          arr.unshift(this.keyword)\n          this.searchList = arr\n        &#125;\n        localStorage.setItem('searchList', JSON.stringify(this.searchList))\n        \n        this.$router.push('/searchResult?keyword=' + this.keyword)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .header &#123;\n    background-color: #fff;\n    ul &#123;\n      height: 100%;\n      display: flex;\n      li &#123;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        &amp;:nth-child(1) &#123;\n          width: 40px;\n        &#125;\n        &amp;:nth-child(2) &#123;\n          flex: 1;\n          .van-field &#123;\n            background-color: #efefef;\n            border-radius: 16px;\n            height: 32px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n          &#125;\n          \n        &#125;\n        &amp;:nth-child(3) &#123;\n          width: 60px;\n        &#125;\n      &#125;\n    &#125;\n  &#125;\n  .list &#123;\n    background-color: #fff;\n    padding: 15px;\n    .van-tag &#123;\n      padding: 5px 10px;\n      margin: 3px;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"136-构建搜索结果页面并且设置路由\"><a class=\"anchor\" href=\"#136-构建搜索结果页面并且设置路由\">#</a> 13.6 构建搜索结果页面并且设置路由</h4>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/router/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入 创建路由的模块 以及 路由历史记录模式的模块 </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 路由的历史模式：</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//createWebHistory  HTML5 模式  /home/kind/cart/user  需要后端配合</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//createWebHashHistory Hash 模式  /#/home   /#/kind  /#/cart  /#/user</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createRouter<span class=\"token punctuation\">,</span> createWebHistory <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">&#123;</span> RouteRecordRaw<span class=\"token punctuation\">,</span> Router <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span> <span class=\"token comment\">// 路由规则的类型 ---- 路由规则的类型注解</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 2. 引入页面组件</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> Footer <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/FooterComponent.vue'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> HomeView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/home/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> KindView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> CartView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/cart/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">import</span> UserView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">import</span> DetailView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/detail/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">import</span> RegisterView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">import</span> CheckTelComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/CheckTelComponent.vue'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">import</span> SendTelCodeComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SendTelCodeComponent.vue'</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">import</span> SetPasswordComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SetPasswordComponent.vue'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">import</span> LoginView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/login/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">import</span> OrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddressListView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddressListView.vue'</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddAddressView.vue'</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">import</span> SearchView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">import</span> SearchResultView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/search/SearchResultView.vue'</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">// 3. 构建路由的规则</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> RouteRecordRaw<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 路由的重定向</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 地址栏地址 - 路由</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名路由  ---   唯一性</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token comment\">//component: HomeView // 路由映射的页面组件</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> HomeView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/kind'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token comment\">// component: KindView </span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> KindView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/cart'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'cart'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token comment\">// component: CartView </span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> CartView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token comment\">// component: UserView </span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> UserView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/detail/:proid'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'detail'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token comment\">// component: DetailView</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> DetailView</pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/register/index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>    component<span class=\"token operator\">:</span> RegisterView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>    children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>        component<span class=\"token operator\">:</span> CheckTelComponent</pre></td></tr><tr><td data-num=\"86\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'sms'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>        component<span class=\"token operator\">:</span> SendTelCodeComponent</pre></td></tr><tr><td data-num=\"90\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'pwd'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>        component<span class=\"token operator\">:</span> SetPasswordComponent</pre></td></tr><tr><td data-num=\"94\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>    component<span class=\"token operator\">:</span> LoginView</pre></td></tr><tr><td data-num=\"101\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderView</pre></td></tr><tr><td data-num=\"106\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddressListView</pre></td></tr><tr><td data-num=\"111\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddAddressView</pre></td></tr><tr><td data-num=\"116\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'search'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchView</pre></td></tr><tr><td data-num=\"121\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// ++++++</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/searchResult'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'searchResult'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>    component<span class=\"token operator\">:</span> SearchResultView</pre></td></tr><tr><td data-num=\"126\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre></pre></td></tr><tr><td data-num=\"129\"></td><td><pre><span class=\"token comment\">// 4. 生成路由</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre><span class=\"token keyword\">const</span> router<span class=\"token operator\">:</span> Router <span class=\"token operator\">=</span> <span class=\"token function\">createRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre>  <span class=\"token comment\">// vue2 vue-router3 history: 'history' | 'hash' </span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre>  history<span class=\"token operator\">:</span> <span class=\"token function\">createWebHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>  routes <span class=\"token comment\">//routes: routes 简写形式</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre></pre></td></tr><tr><td data-num=\"136\"></td><td><pre><span class=\"token comment\">// 5. 暴露路由</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> router</pre></td></tr></table></figure><pre><code class=\"language-vue\">&lt;!-- src/views/search/SearchResultView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;ul&gt;\n      &lt;li @click=&quot;$router.back()&quot;&gt;\n        &lt;van-icon name=&quot;arrow-left&quot; size=&quot;24&quot;/&gt;\n      &lt;/li&gt;\n      &lt;li&gt;\n        &lt;van-field left-icon=&quot;search&quot; @blur=&quot;flag=false&quot; @focus=&quot;flag=true&quot; v-model=&quot;keyword&quot;  placeholder=&quot;清风抽纸&quot; clearable/&gt;\n      &lt;/li&gt;\n      &lt;li @click=&quot;submit&quot; &gt;\n        &lt;van-button type=&quot;danger&quot; v-show=&quot;flag&quot; size=&quot;mini&quot; &gt;搜索&lt;/van-button&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot; &gt;\n    &lt;van-sticky :offset-top=&quot;44&quot;&gt;\n      &lt;van-dropdown-menu&gt;\n        &lt;van-dropdown-item v-model=&quot;value&quot; :options=&quot;options&quot; @change=&quot;sort&quot;/&gt;\n        &lt;van-dropdown-item title=&quot;筛选&quot; ref=&quot;item&quot;&gt;\n          &lt;div class=&quot;priceField&quot;&gt;\n            &lt;van-field v-model=&quot;min&quot; placeholder=&quot;最低价格&quot; /&gt;\n            -\n            &lt;van-field v-model=&quot;max&quot; placeholder=&quot;最高价格&quot; /&gt;\n          &lt;/div&gt;\n          &lt;div style=&quot;padding: 5px 16px;&quot;&gt;\n            &lt;van-button type=&quot;danger&quot; block round @click=&quot;onConfirm&quot;&gt;\n              确认\n            &lt;/van-button&gt;\n          &lt;/div&gt;\n        &lt;/van-dropdown-item&gt;\n      &lt;/van-dropdown-menu&gt;\n    &lt;/van-sticky&gt;\n    \n    &lt;van-card\n      v-for=&quot;item of searchList&quot;\n      :key=&quot;item.proid&quot;\n      :price=&quot;item.originprice&quot;\n      :title=&quot;item.proname&quot;\n      :thumb=&quot;item.img1&quot;\n      @click=&quot;toDetail(item.proid)&quot;\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; getSearchListData &#125; from '@/api/search'\n  import type &#123; IPro &#125; from '../home/home';\n  import type &#123; DropdownItemInstance &#125; from 'vant';\n\n  interface IData &#123;\n    keyword: string\n    searchList: IPro[]\n    initList: IPro[]\n    list: string[]\n    options: Array&lt;&#123;text: string, value: number&#125;&gt;\n    value: number\n    min: string\n    max: string,\n    flag: boolean\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        keyword: '',\n        searchList: [],\n        initList: [],\n        list: [],\n        options: [\n          &#123; text: '全部商品', value: 0 &#125;,\n          &#123; text: '价格升序', value: 1 &#125;,\n          &#123; text: '价格降序', value: -1 &#125;,\n        ],\n        value: 0,\n        min: &quot;&quot;,\n        max: &quot;&quot;,\n        flag: false\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.keyword = (this.$route.query.keyword as string)\n      getSearchListData(&#123; keyword: this.keyword &#125;).then(res =&gt; &#123;\n        this.searchList = res.data.data\n        this.initList = JSON.parse(JSON.stringify(res.data.data))\n      &#125;)\n    &#125;,\n    methods: &#123;\n      submit () &#123;\n        if (localStorage.getItem('searchList')) &#123;\n          this.list = JSON.parse(localStorage.getItem('searchList')!)\n          const index = this.list.findIndex(item =&gt; item === this.keyword)\n          if (index !== -1) &#123;\n            this.list.splice(index, 1)\n          &#125;\n          this.list.unshift(this.keyword)\n        &#125; else &#123;\n          console.log(1)\n          const arr: string[] = []\n          arr.unshift(this.keyword)\n          this.list = arr\n        &#125;\n        localStorage.setItem('searchList', JSON.stringify(this.list))\n        getSearchListData(&#123; keyword: this.keyword &#125;).then(res =&gt; &#123;\n          this.searchList = res.data.data\n          this.initList = JSON.parse(JSON.stringify(res.data.data))\n        &#125;)\n      &#125;,\n      sort () &#123;\n        console.log(this.value)\n        switch (this.value) &#123;\n          case 0:\n            this.searchList = this.initList\n            break;\n          case 1:\n            this.searchList.sort((a, b) =&gt; a.originprice - b.originprice)\n            break;\n          case -1:\n            this.searchList.sort((a, b) =&gt; b.originprice - a.originprice)\n            break;\n          default:\n            this.searchList = this.initList\n            break;\n        &#125;\n      &#125;,\n      onConfirm () &#123;\n        if (this.min === '') &#123;\n          this.min = '0'\n        &#125;\n        if (this.max === '') &#123;\n          this.max = '9999999'\n        &#125;\n        const arr = this.searchList.filter(item =&gt; &#123;\n          return item.originprice &gt;= Number(this.min) &amp;&amp; item.originprice &lt;= Number(this.max)\n        &#125;)\n        console.log(arr)\n        this.searchList = arr;\n        // this.min = '';\n        // this.max = '';\n        (this.$refs.item as DropdownItemInstance ).toggle()\n      &#125;,\n      toDetail (proid: string) &#123;\n        this.$router.push('/detail/' + proid)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .header &#123;\n    background-color: #fff;\n    ul &#123;\n      height: 100%;\n      display: flex;\n      li &#123;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        &amp;:nth-child(1) &#123;\n          width: 40px;\n        &#125;\n        &amp;:nth-child(2) &#123;\n          flex: 1;\n          .van-field &#123;\n            background-color: #efefef;\n            border-radius: 16px;\n            height: 32px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n          &#125;\n          \n        &#125;\n        &amp;:nth-child(3) &#123;\n          width: 60px;\n        &#125;\n      &#125;\n    &#125;\n  &#125;\n  .priceField &#123;\n    display: flex;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n",
            "tags": [
                "vue3移动端项目开发",
                "vue",
                "TypeScript"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/vue-mobile/12/",
            "url": "https://www.yexingcheng.com/vue-mobile/12/",
            "title": "vue-mobile项目开发流程第十二部分(实现提交订单功能)",
            "date_published": "2022-07-09T16:00:00.000Z",
            "content_html": "<p>封装请求</p>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/api/order.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> request <span class=\"token keyword\">from</span> <span class=\"token string\">'../service/request'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 添加订单</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">addOrderData</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/order/addOrder'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 获取订单信息</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getOrderListData</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> time<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/order/confirmOrder'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>params<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">IOrderAddress</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  time<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  tel<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  province<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  city<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  county<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  addressDetail<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">// 获取订单信息</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">updateOrderAddressData</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> IOrderAddress<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/order/updateOrderAddress'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><pre><code class=\"language-vue\">&lt;!-- src/views/cart/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;购物车&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;no-shop&quot; v-if=&quot;empty&quot;&gt;\n      &lt;van-empty description=&quot;购物车空空如也&quot;&gt;\n        &lt;van-button round type=&quot;danger&quot; class=&quot;bottom-button&quot; @click=&quot;$router.push('/kind')&quot;&gt;立即购物&lt;/van-button&gt;\n      &lt;/van-empty&gt;\n      &lt;van-divider\n        :style=&quot;&#123; color: '#1989fa', borderColor: '#1989fa', padding: '0 16px' &#125;&quot;\n      &gt;\n        快点来看看\n      &lt;/van-divider&gt;\n      &lt;ProComponent :list=&quot;proList&quot;&gt;&lt;/ProComponent&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;shop-list&quot; v-else&gt;\n      &lt;van-swipe-cell\n        v-for=&quot;item of cartList&quot;\n        :key=&quot;item.cartid&quot;\n        :before-close=&quot;beforeClose&quot;\n      &gt;\n      &lt;van-row class=&quot;myItem&quot;&gt;\n        &lt;van-col span=&quot;2&quot;&gt;\n          &lt;van-checkbox v-model=&quot;item.flag&quot; @change=&quot;selectOne(item)&quot;&gt;&lt;/van-checkbox&gt;\n        &lt;/van-col&gt;\n        &lt;van-col span=&quot;22&quot;&gt;\n          &lt;van-card\n            :price=&quot;item.originprice&quot;\n            :title=&quot;item.proname&quot;\n            :thumb=&quot;item.img1&quot;\n          &gt;\n            &lt;template #num&gt;\n              &lt;van-stepper v-model=&quot;item.num&quot; theme=&quot;round&quot; button-size=&quot;22&quot; disable-input @change=&quot;updateNum(item)&quot; /&gt;\n            &lt;/template&gt;\n          &lt;/van-card&gt;\n        &lt;/van-col&gt;\n      &lt;/van-row&gt;\n        \n        &lt;template #right&gt;\n          &lt;van-button square text=&quot;删除&quot; type=&quot;danger&quot; @click=&quot;getDeleteId(item.cartid)&quot; class=&quot;delete-button&quot; /&gt;\n        &lt;/template&gt;\n      &lt;/van-swipe-cell&gt;\n      &lt;van-divider\n        :style=&quot;&#123; color: '#1989fa', borderColor: '#1989fa', padding: '0 16px' &#125;&quot;\n      &gt;\n        可能你想要\n      &lt;/van-divider&gt;\n      &lt;ProComponent :list=&quot;proList&quot;&gt;&lt;/ProComponent&gt;\n      &lt;van-submit-bar @click=&quot;submit&quot; :disabled=&quot;totalNum === 0&quot; :price=&quot;totalPrice&quot; :button-text=&quot;totalNum &gt; 0  ? `去结算($&#123;totalNum&#125;)` : `去结算`&quot;&gt;\n        &lt;van-checkbox v-model=&quot;checked&quot; @click=&quot;changeType&quot;&gt;全选&lt;/van-checkbox&gt;\n      &lt;/van-submit-bar&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; Dialog &#125; from 'vant'\n  import &#123; getCartListData, removeOneData, selectAllData, selectOneData, updateOneDataNum, getCartRecommendData &#125; from '@/api/cart'\n  import &#123; addOrderData &#125; from '@/api/order'\n  import type &#123; ICartItem &#125; from './cart' \n  import type &#123; IPro &#125; from '../home/home';\n  import ProComponent from './components/ProComponent.vue'\n  interface IData &#123;\n    cartList: ICartItem[],\n    id: string\n    checked: boolean\n    proList: IPro[]\n  &#125;\n  export default defineComponent(&#123;\n    components: &#123;\n      ProComponent\n    &#125;,\n    data (): IData &#123;\n      return &#123;\n        cartList: [],\n        id: '',\n        checked: false,\n        proList: []\n      &#125;\n    &#125;,\n    computed: &#123;\n      empty () &#123;\n        return this.cartList.length === 0\n      &#125;,\n\n      totalNum () &#123;  // 选中才累加\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return item.flag ? sum += item.num : sum += 0\n        &#125;, 0)\n      &#125;,\n\n      totalPrice () &#123;\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return  item.flag ? sum += item.num * item.originprice : sum += 0\n        &#125;, 0) * 100\n      &#125;\n    &#125;,\n    mounted () &#123;\n      if (localStorage.getItem('userid')) &#123;\n        this.getCartList()\n      &#125; else &#123;\n        this.$router.push('/login')\n      &#125;\n\n      getCartRecommendData().then(res =&gt; &#123;\n        this.proList = res.data.data\n      &#125;)\n    &#125;,\n    methods: &#123;\n      getCartList () &#123;\n        getCartListData(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          if (res.data.code === '10020') &#123;\n            this.cartList = []\n          &#125; else &#123;\n            this.cartList = res.data.data\n            this.checked = this.cartList.every(item =&gt; item.flag)\n          &#125;\n        &#125;)\n      &#125;,\n      beforeClose (&#123; position &#125;: &#123; position: 'left' | 'right' | 'cell' | 'outside'&#125;): any &#123;\n        console.log(position)\n        switch (position) &#123;\n          case 'right':\n            return new Promise&lt;void&gt;((resolve) =&gt; &#123;\n              Dialog.confirm(&#123;\n                title: '确定删除吗？',\n              &#125;).then(() =&gt; &#123;\n                removeOneData(&#123;cartid: this.id&#125;).then(() =&gt; &#123;\n                  this.getCartList() // 重置列表\n                  this.id = ''\n                  resolve()\n                &#125;)\n              &#125;);\n            &#125;);\n          case 'outside':\n            return true\n        &#125;\n      &#125;,\n      getDeleteId (cartid: string) &#123;\n        console.log(cartid)\n        this.id =cartid\n      &#125;,\n      updateNum (&#123; cartid, num &#125;: ICartItem) &#123;\n        console.log(cartid, num)\n        updateOneDataNum(&#123; cartid, num &#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;,\n      changeType () &#123;\n        console.log(this.checked)\n        selectAllData(&#123; userid: localStorage.getItem('userid')!, type: this.checked&#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;,\n      selectOne (&#123;cartid, flag&#125;: ICartItem) &#123;\n        console.log(cartid, flag)\n        selectOneData(&#123;cartid, flag&#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;,\n      submit () &#123; // +++++++++++\n        addOrderData(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          // this.$router.push('/order/' + res.data.time) // /order/:time\n          this.$router.push('/order?time=' + res.data.time) // /order\n        &#125;)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .delete-button &#123;\n    height: 100%;\n  &#125;\n\n  .myItem &#123;\n    background: var(--van-card-background-color);\n    .van-col--2 &#123;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h3 id=\"12-确定订单实现\"><a class=\"anchor\" href=\"#12-确定订单实现\">#</a> 12 确定订单实现</h3>\n<h4 id=\"121-创建页面以及更新路由\"><a class=\"anchor\" href=\"#121-创建页面以及更新路由\">#</a> 12.1 创建页面以及更新路由</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/order/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;确定订单&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;order content&lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n\n  export default defineComponent(&#123;&#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;\n</code></pre>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/router/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入 创建路由的模块 以及 路由历史记录模式的模块 </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 路由的历史模式：</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//createWebHistory  HTML5 模式  /home/kind/cart/user  需要后端配合</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//createWebHashHistory Hash 模式  /#/home   /#/kind  /#/cart  /#/user</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createRouter<span class=\"token punctuation\">,</span> createWebHistory <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">&#123;</span> RouteRecordRaw<span class=\"token punctuation\">,</span> Router <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span> <span class=\"token comment\">// 路由规则的类型 ---- 路由规则的类型注解</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 2. 引入页面组件</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> Footer <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/FooterComponent.vue'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> HomeView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/home/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> KindView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> CartView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/cart/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">import</span> UserView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">import</span> DetailView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/detail/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">import</span> RegisterView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">import</span> CheckTelComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/CheckTelComponent.vue'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">import</span> SendTelCodeComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SendTelCodeComponent.vue'</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">import</span> SetPasswordComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SetPasswordComponent.vue'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">import</span> LoginView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/login/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">import</span> OrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/IndexView.vue'</span> <span class=\"token comment\">// ++++++++++</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">// 3. 构建路由的规则</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> RouteRecordRaw<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 路由的重定向</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 地址栏地址 - 路由</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名路由  ---   唯一性</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token comment\">//component: HomeView // 路由映射的页面组件</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> HomeView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/kind'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token comment\">// component: KindView </span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> KindView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/cart'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'cart'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token comment\">// component: CartView </span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> CartView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token comment\">// component: UserView </span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> UserView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/detail/:proid'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'detail'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    <span class=\"token comment\">// component: DetailView</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> DetailView</pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/register/index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    component<span class=\"token operator\">:</span> RegisterView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>        component<span class=\"token operator\">:</span> CheckTelComponent</pre></td></tr><tr><td data-num=\"82\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'sms'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>        component<span class=\"token operator\">:</span> SendTelCodeComponent</pre></td></tr><tr><td data-num=\"86\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'pwd'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>        component<span class=\"token operator\">:</span> SetPasswordComponent</pre></td></tr><tr><td data-num=\"90\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    component<span class=\"token operator\">:</span> LoginView</pre></td></tr><tr><td data-num=\"97\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// ++++++++++</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderView</pre></td></tr><tr><td data-num=\"102\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre></pre></td></tr><tr><td data-num=\"105\"></td><td><pre><span class=\"token comment\">// 4. 生成路由</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre><span class=\"token keyword\">const</span> router<span class=\"token operator\">:</span> Router <span class=\"token operator\">=</span> <span class=\"token function\">createRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>  <span class=\"token comment\">// vue2 vue-router3 history: 'history' | 'hash' </span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>  history<span class=\"token operator\">:</span> <span class=\"token function\">createWebHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>  routes <span class=\"token comment\">//routes: routes 简写形式</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre></pre></td></tr><tr><td data-num=\"112\"></td><td><pre><span class=\"token comment\">// 5. 暴露路由</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> router</pre></td></tr></table></figure><h4 id=\"122-布局\"><a class=\"anchor\" href=\"#122-布局\">#</a> 12.2 布局</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/order/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;确定订单&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-cell center v-if=&quot;flag&quot; title=&quot;请添加地址&quot; is-link  /&gt;\n    &lt;van-cell center v-else title=&quot;musk 18813007814&quot; is-link label=&quot;陕西省西安市雁塔区千锋教育&quot; /&gt;\n\n    &lt;van-card\n      v-for=&quot;item of orderList&quot;\n      :key=&quot;item.orderid&quot;\n      :num=&quot;item.num&quot;\n      :price=&quot;item.originprice&quot;\n      :title=&quot;item.proname&quot;\n      :thumb=&quot;item.img1&quot;\n    /&gt;\n    &lt;div class=&quot;tip&quot;&gt;\n      &lt;p&gt;&lt;span&gt;原价：&lt;/span&gt;&lt;span&gt;&#123;&#123; totalPrice &#125;&#125;&lt;/span&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;span&gt;快递费：&lt;/span&gt;&lt;span&gt;&#123;&#123; express &#125;&#125;&lt;/span&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;van-submit-bar :price=&quot;totalPrice * 100 + express * 100&quot; button-text=&quot;去支付&quot; /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; getOrderListData &#125; from '../../api/order'\n  interface IOrderItem &#123;\n    addressDetail: string\n    city: string\n    county: string\n    discount: number\n    img1: string\n    name: string\n    num: number\n    orderid: string\n    originprice: number\n    proid: string\n    proname: string\n    province: string\n    status:number\n    tel: string\n    time: string\n    userid: string\n  &#125;\n  interface IData &#123;\n    orderList: IOrderItem[],\n    time: string\n    express: number\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        orderList: [],\n        time: '',\n        express: 0\n      &#125;\n    &#125;,\n    computed: &#123;\n      totalPrice () &#123;\n        return this.orderList.reduce((sum, item) =&gt; &#123;\n          return sum += item.num * item.originprice\n        &#125;, 0)\n      &#125;,\n      flag () &#123; // 显示地址\n        return this.orderList[0]?.tel === ''\n      &#125;\n    &#125;,\n    mounted () &#123;\n      // console.log(this.$route)\n      this.time = (this.$route.query.time as string)\n      this.express = Math.floor(Math.random() * 20)\n\n      const userid = localStorage.getItem('userid')!\n      getOrderListData(&#123; time: this.time, userid &#125;).then(res =&gt; &#123;\n        console.log(res.data)\n        this.orderList = res.data.data\n      &#125;)\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .tip &#123;\n    margin-top: 15px;\n    margin-right: 10px;\n    text-align: right;\n    p &#123;\n      display: flex;\n      span &#123;\n        &amp;:nth-child(1) &#123;\n          flex: 1;\n        &#125;\n        &amp;:nth-child(2) &#123;\n          width: 40px;\n        &#125;\n      &#125;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"123-点击选择地址\"><a class=\"anchor\" href=\"#123-点击选择地址\">#</a> 12.3 点击选择地址</h4>\n<blockquote>\n<p>点击进入地址选择页面</p>\n</blockquote>\n<pre><code class=\"language-vue\">&lt;!-- src/views/order/AddressListView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;&lt;van-nav-bar\n      title=&quot;地址列表&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;&lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-address-list\n      v-model=&quot;chosenAddressId&quot;\n      :list=&quot;list&quot;\n      default-tag-text=&quot;默认&quot;\n      @add=&quot;onAdd&quot;\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\nimport &#123; defineComponent &#125; from 'vue';\n\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        chosenAddressId: '',\n        list: [],\n        time: ''\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.time = (this.$route.query.time as string)\n    &#125;,\n    methods: &#123;\n      onAdd () &#123;\n        this.$router.push('/orderAddAddress?time=' + this.time)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;\n</code></pre>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/router/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入 创建路由的模块 以及 路由历史记录模式的模块 </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 路由的历史模式：</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//createWebHistory  HTML5 模式  /home/kind/cart/user  需要后端配合</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//createWebHashHistory Hash 模式  /#/home   /#/kind  /#/cart  /#/user</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createRouter<span class=\"token punctuation\">,</span> createWebHistory <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">&#123;</span> RouteRecordRaw<span class=\"token punctuation\">,</span> Router <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span> <span class=\"token comment\">// 路由规则的类型 ---- 路由规则的类型注解</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 2. 引入页面组件</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> Footer <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/FooterComponent.vue'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> HomeView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/home/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> KindView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> CartView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/cart/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">import</span> UserView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">import</span> DetailView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/detail/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">import</span> RegisterView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">import</span> CheckTelComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/CheckTelComponent.vue'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">import</span> SendTelCodeComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SendTelCodeComponent.vue'</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">import</span> SetPasswordComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SetPasswordComponent.vue'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">import</span> LoginView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/login/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">import</span> OrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddressListView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddressListView.vue'</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">// 3. 构建路由的规则</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> RouteRecordRaw<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 路由的重定向</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 地址栏地址 - 路由</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名路由  ---   唯一性</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token comment\">//component: HomeView // 路由映射的页面组件</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> HomeView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/kind'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token comment\">// component: KindView </span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> KindView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/cart'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'cart'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token comment\">// component: CartView </span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> CartView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token comment\">// component: UserView </span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> UserView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/detail/:proid'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'detail'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token comment\">// component: DetailView</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> DetailView</pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/register/index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    component<span class=\"token operator\">:</span> RegisterView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>        component<span class=\"token operator\">:</span> CheckTelComponent</pre></td></tr><tr><td data-num=\"83\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'sms'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>        component<span class=\"token operator\">:</span> SendTelCodeComponent</pre></td></tr><tr><td data-num=\"87\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'pwd'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>        component<span class=\"token operator\">:</span> SetPasswordComponent</pre></td></tr><tr><td data-num=\"91\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    component<span class=\"token operator\">:</span> LoginView</pre></td></tr><tr><td data-num=\"98\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderView</pre></td></tr><tr><td data-num=\"103\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// ++++++++</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddressListView</pre></td></tr><tr><td data-num=\"108\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre></pre></td></tr><tr><td data-num=\"111\"></td><td><pre><span class=\"token comment\">// 4. 生成路由</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre><span class=\"token keyword\">const</span> router<span class=\"token operator\">:</span> Router <span class=\"token operator\">=</span> <span class=\"token function\">createRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>  <span class=\"token comment\">// vue2 vue-router3 history: 'history' | 'hash' </span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>  history<span class=\"token operator\">:</span> <span class=\"token function\">createWebHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>  routes <span class=\"token comment\">//routes: routes 简写形式</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre></pre></td></tr><tr><td data-num=\"118\"></td><td><pre><span class=\"token comment\">// 5. 暴露路由</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> router</pre></td></tr></table></figure><blockquote>\n<p>点击进入地址列表页面</p>\n</blockquote>\n<pre><code class=\"language-vue\">&lt;!-- src/views/order/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;确定订单&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-cell center v-if=&quot;flag&quot; title=&quot;请添加地址&quot; is-link @click=&quot;toAddressList&quot; /&gt;\n    &lt;van-cell center v-else title=&quot;musk 18813007814&quot; is-link label=&quot;陕西省西安市雁塔区千锋教育&quot;  @click=&quot;toAddressList&quot;  /&gt;\n\n    &lt;van-card\n      v-for=&quot;item of orderList&quot;\n      :key=&quot;item.orderid&quot;\n      :num=&quot;item.num&quot;\n      :price=&quot;item.originprice&quot;\n      :title=&quot;item.proname&quot;\n      :thumb=&quot;item.img1&quot;\n    /&gt;\n    &lt;div class=&quot;tip&quot;&gt;\n      &lt;p&gt;&lt;span&gt;原价：&lt;/span&gt;&lt;span&gt;&#123;&#123; totalPrice &#125;&#125;&lt;/span&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;span&gt;快递费：&lt;/span&gt;&lt;span&gt;&#123;&#123; express &#125;&#125;&lt;/span&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;van-submit-bar :price=&quot;totalPrice * 100 + express * 100&quot; button-text=&quot;去支付&quot; /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; getOrderListData &#125; from '../../api/order'\n  interface IOrderItem &#123;\n    addressDetail: string\n    city: string\n    county: string\n    discount: number\n    img1: string\n    name: string\n    num: number\n    orderid: string\n    originprice: number\n    proid: string\n    proname: string\n    province: string\n    status:number\n    tel: string\n    time: string\n    userid: string\n  &#125;\n  interface IData &#123;\n    orderList: IOrderItem[],\n    time: string\n    express: number\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        orderList: [],\n        time: '',\n        express: 0\n      &#125;\n    &#125;,\n    computed: &#123;\n      totalPrice () &#123;\n        return this.orderList.reduce((sum, item) =&gt; &#123;\n          return sum += item.num * item.originprice\n        &#125;, 0)\n      &#125;,\n      flag () &#123; // 显示地址\n        return this.orderList[0]?.tel === ''\n      &#125;\n    &#125;,\n    mounted () &#123;\n      // console.log(this.$route)\n      this.time = (this.$route.query.time as string)\n      this.express = Math.floor(Math.random() * 20)\n\n      const userid = localStorage.getItem('userid')!\n      getOrderListData(&#123; time: this.time, userid &#125;).then(res =&gt; &#123;\n        console.log(res.data)\n        this.orderList = res.data.data\n      &#125;)\n    &#125;,\n    methods: &#123;\n      toAddressList () &#123; // ++++++++++++\n        this.$router.push('/orderAddress?time=' + this.time)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .tip &#123;\n    margin-top: 15px;\n    margin-right: 10px;\n    text-align: right;\n    p &#123;\n      display: flex;\n      span &#123;\n        &amp;:nth-child(1) &#123;\n          flex: 1;\n        &#125;\n        &amp;:nth-child(2) &#123;\n          width: 40px;\n        &#125;\n      &#125;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"124-添加地址页面\"><a class=\"anchor\" href=\"#124-添加地址页面\">#</a> 12.4 添加地址页面</h4>\n<blockquote>\n<p>cnpm i -S @vant/area-data</p>\n</blockquote>\n<pre><code class=\"language-vue\">&lt;!-- src/views/order/AddAddressView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;&lt;van-nav-bar\n      title=&quot;添加地址&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;&lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-address-edit\n      :area-list=&quot;areaList&quot;\n      show-set-default\n      :area-columns-placeholder=&quot;['请选择', '请选择', '请选择']&quot;\n      @save=&quot;onSave&quot;\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; areaList &#125; from '@vant/area-data';\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        areaList\n      &#125;\n    &#125;,\n    methods: &#123;\n      onSave (content: any) &#123;\n        console.log(content)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;\n</code></pre>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/router/index.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 1. 引入 创建路由的模块 以及 路由历史记录模式的模块 </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 路由的历史模式：</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//createWebHistory  HTML5 模式  /home/kind/cart/user  需要后端配合</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//createWebHashHistory Hash 模式  /#/home   /#/kind  /#/cart  /#/user</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createRouter<span class=\"token punctuation\">,</span> createWebHistory <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">&#123;</span> RouteRecordRaw<span class=\"token punctuation\">,</span> Router <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span> <span class=\"token comment\">// 路由规则的类型 ---- 路由规则的类型注解</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 2. 引入页面组件</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> Footer <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/FooterComponent.vue'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> HomeView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/home/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> KindView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/kind/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> CartView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/cart/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">import</span> UserView <span class=\"token keyword\">from</span> <span class=\"token string\">'./../views/user/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">import</span> DetailView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/detail/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">import</span> RegisterView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">import</span> CheckTelComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/CheckTelComponent.vue'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">import</span> SendTelCodeComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SendTelCodeComponent.vue'</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">import</span> SetPasswordComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/register/components/SetPasswordComponent.vue'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">import</span> LoginView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/login/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">import</span> OrderView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/IndexView.vue'</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddressListView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddressListView.vue'</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">import</span> OrderAddAddressView <span class=\"token keyword\">from</span> <span class=\"token string\">'../views/order/AddAddressView.vue'</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">// 3. 构建路由的规则</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> RouteRecordRaw<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 路由的重定向</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 地址栏地址 - 路由</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 命名路由  ---   唯一性</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token comment\">//component: HomeView // 路由映射的页面组件</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> HomeView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/kind'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'kind'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token comment\">// component: KindView </span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> KindView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/cart'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'cart'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token comment\">// component: CartView </span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> CartView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token comment\">// component: UserView </span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> UserView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>      footer<span class=\"token operator\">:</span> Footer</pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/detail/:proid'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'detail'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    <span class=\"token comment\">// component: DetailView</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    components<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> DetailView</pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'register'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/register/index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    component<span class=\"token operator\">:</span> RegisterView<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>    children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>        component<span class=\"token operator\">:</span> CheckTelComponent</pre></td></tr><tr><td data-num=\"84\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'sms'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>        component<span class=\"token operator\">:</span> SendTelCodeComponent</pre></td></tr><tr><td data-num=\"88\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>        path<span class=\"token operator\">:</span> <span class=\"token string\">'pwd'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>        component<span class=\"token operator\">:</span> SetPasswordComponent</pre></td></tr><tr><td data-num=\"92\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>    component<span class=\"token operator\">:</span> LoginView</pre></td></tr><tr><td data-num=\"99\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'order'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderView</pre></td></tr><tr><td data-num=\"104\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddressListView</pre></td></tr><tr><td data-num=\"109\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// +++++++++</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>    path<span class=\"token operator\">:</span> <span class=\"token string\">'/orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>    name<span class=\"token operator\">:</span> <span class=\"token string\">'orderAddAddress'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>    component<span class=\"token operator\">:</span> OrderAddAddressView</pre></td></tr><tr><td data-num=\"114\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre></pre></td></tr><tr><td data-num=\"117\"></td><td><pre><span class=\"token comment\">// 4. 生成路由</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre><span class=\"token keyword\">const</span> router<span class=\"token operator\">:</span> Router <span class=\"token operator\">=</span> <span class=\"token function\">createRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>  <span class=\"token comment\">// vue2 vue-router3 history: 'history' | 'hash' </span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>  history<span class=\"token operator\">:</span> <span class=\"token function\">createWebHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre>  routes <span class=\"token comment\">//routes: routes 简写形式</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre></pre></td></tr><tr><td data-num=\"124\"></td><td><pre><span class=\"token comment\">// 5. 暴露路由</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> router</pre></td></tr></table></figure><blockquote>\n<p>添加并使用该地址（添加 i 地址进入地址列表页面，修改订单的地址）</p>\n</blockquote>\n<h4 id=\"125-封装地址相关接口\"><a class=\"anchor\" href=\"#125-封装地址相关接口\">#</a> 12.5 封装地址相关接口</h4>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/api/address.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> request <span class=\"token keyword\">from</span> <span class=\"token string\">'../service/request'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">IAddress</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  tel<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  province<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  city<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  county<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  addressDetail<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  isDefault<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">addAddRessData</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> IAddress <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/address/add'</span><span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getAddressList</span> <span class=\"token punctuation\">(</span>params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/address/add'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>params<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"126-添加地址实现\"><a class=\"anchor\" href=\"#126-添加地址实现\">#</a> 12.6 添加地址实现</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/order/AddAddressView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;&lt;van-nav-bar\n      title=&quot;添加地址&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;&lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-address-edit\n      :area-list=&quot;areaList&quot;\n      show-set-default\n      :area-columns-placeholder=&quot;['请选择', '请选择', '请选择']&quot;\n      @save=&quot;onSave&quot;\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; areaList &#125; from '@vant/area-data';\nimport &#123; addAddRessData &#125; from '@/api/address';\nimport &#123; updateOrderAddressData &#125; from '@/api/order';\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        areaList,\n        time: ''\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.time = (this.$route.query.time as string)\n    &#125;,\n    methods: &#123;\n      onSave (content: any) &#123;\n        console.log(content)\n        addAddRessData(content).then(res =&gt; &#123;\n          console.log(res.data) // 添加地址成功\n          // 修改订单地址\n          content.userid = localStorage.getItem('userid')!\n          content.time = this.time\n          updateOrderAddressData(content).then(res =&gt; &#123;\n            // 返回前两页  确认订单- 地址列表 - 新增地址\n            this.$router.go(-2)\n          &#125;)\n        &#125;)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;\n</code></pre>\n<h4 id=\"127-确认订单页面处理地址\"><a class=\"anchor\" href=\"#127-确认订单页面处理地址\">#</a> 12.7 确认订单页面处理地址</h4>\n<blockquote>\n<p>计算属性即可完成</p>\n</blockquote>\n<pre><code class=\"language-vue\">&lt;!-- src/views/order/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;确定订单&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-cell center v-if=&quot;flag&quot; title=&quot;请添加地址&quot; is-link @click=&quot;toAddressList&quot; /&gt;\n    &lt;van-cell center v-else :title=&quot;name + ' ' +  tel&quot; is-link :label=&quot;address&quot;  @click=&quot;toAddressList&quot;  /&gt;\n\n    &lt;van-card\n      v-for=&quot;item of orderList&quot;\n      :key=&quot;item.orderid&quot;\n      :num=&quot;item.num&quot;\n      :price=&quot;item.originprice&quot;\n      :title=&quot;item.proname&quot;\n      :thumb=&quot;item.img1&quot;\n    /&gt;\n    &lt;div class=&quot;tip&quot;&gt;\n      &lt;p&gt;&lt;span&gt;原价：&lt;/span&gt;&lt;span&gt;&#123;&#123; totalPrice &#125;&#125;&lt;/span&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;span&gt;快递费：&lt;/span&gt;&lt;span&gt;&#123;&#123; express &#125;&#125;&lt;/span&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;van-submit-bar :price=&quot;totalPrice * 100 + express * 100&quot; button-text=&quot;去支付&quot; /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; getOrderListData &#125; from '../../api/order'\n  interface IOrderItem &#123;\n    addressDetail: string\n    city: string\n    county: string\n    discount: number\n    img1: string\n    name: string\n    num: number\n    orderid: string\n    originprice: number\n    proid: string\n    proname: string\n    province: string\n    status:number\n    tel: string\n    time: string\n    userid: string\n  &#125;\n  interface IData &#123;\n    orderList: IOrderItem[],\n    time: string\n    express: number\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        orderList: [],\n        time: '',\n        express: 0\n      &#125;\n    &#125;,\n    computed: &#123;\n      totalPrice () &#123;\n        return this.orderList.reduce((sum, item) =&gt; &#123;\n          return sum += item.num * item.originprice\n        &#125;, 0)\n      &#125;,\n      flag () &#123; // 显示地址\n        return this.orderList[0]?.tel === ''\n      &#125;,\n      name () &#123;\n        return this.orderList[0]?.name\n      &#125;,\n      tel () &#123;\n        return this.orderList[0]?.tel\n      &#125;,\n      address () &#123;\n        const province = this.orderList[0]?.province\n        const city  = this.orderList[0]?.city\n        const county = this.orderList[0]?.county\n        const addressDetail = this.orderList[0]?.addressDetail\n\n        let str = ''\n        if (province === city) &#123;\n          str += province + county + addressDetail\n        &#125; else &#123;\n          str += province +  city + county + addressDetail\n        &#125;\n        return str\n      &#125;\n    &#125;,\n    mounted () &#123;\n      // console.log(this.$route)\n      this.time = (this.$route.query.time as string)\n      this.express = Math.floor(Math.random() * 20)\n\n      const userid = localStorage.getItem('userid')!\n      getOrderListData(&#123; time: this.time, userid &#125;).then(res =&gt; &#123;\n        console.log(res.data)\n        this.orderList = res.data.data\n      &#125;)\n    &#125;,\n    methods: &#123;\n      toAddressList () &#123;\n        this.$router.push('/orderAddress?time=' + this.time)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .tip &#123;\n    margin-top: 15px;\n    margin-right: 10px;\n    text-align: right;\n    p &#123;\n      display: flex;\n      span &#123;\n        &amp;:nth-child(1) &#123;\n          flex: 1;\n        &#125;\n        &amp;:nth-child(2) &#123;\n          width: 40px;\n        &#125;\n      &#125;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"128-点击地址列表修改订单地址\"><a class=\"anchor\" href=\"#128-点击地址列表修改订单地址\">#</a> 12.8 点击地址列表修改订单地址</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/order/AddressListView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;&lt;van-nav-bar\n      title=&quot;地址列表&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;&lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;van-address-list\n      v-model=&quot;chosenAddressId&quot;\n      :list=&quot;list&quot;\n      default-tag-text=&quot;默认&quot;\n      @add=&quot;onAdd&quot;\n      @click-item=&quot;changeAddress&quot;\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\nimport &#123; getAddressList &#125; from '@/api/address';\nimport &#123; updateOrderAddressData &#125; from '@/api/order';\nimport &#123; defineComponent &#125; from 'vue';\n\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        chosenAddressId: '',\n        list: [],\n        time: ''\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.time = (this.$route.query.time as string)\n      getAddressList(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n        res.data.data.forEach((item: any) =&gt; &#123;\n          item.id = item.addressid\n          item.address = this.getAddress(item)\n          item.isDefault ? this.chosenAddressId = item.addressid : this.chosenAddressId = ''\n        &#125;)\n        console.log(res.data.data)\n        this.list = res.data.data\n      &#125;)\n    &#125;,\n    methods: &#123;\n      getAddress (item: any) &#123;\n        const province = item.province\n        const city  = item.city\n        const county = item.county\n        const addressDetail = item.addressDetail\n\n        let str = ''\n        if (province === city) &#123;\n          str += province + county + addressDetail\n        &#125; else &#123;\n          str += province +  city + county + addressDetail\n        &#125;\n        return str\n      &#125;,\n      onAdd () &#123;\n        this.$router.push('/orderAddAddress?time=' + this.time)\n      &#125;,\n      changeAddress (item: any) &#123;\n        console.log(item)\n        item.time = this.time\n        updateOrderAddressData(item).then(() =&gt; &#123;\n          this.$router.back()\n        &#125;)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;\n</code></pre>\n",
            "tags": [
                "vue3移动端项目开发",
                "vue",
                "TypeScript"
            ]
        },
        {
            "id": "https://www.yexingcheng.com/vue-mobile/11/",
            "url": "https://www.yexingcheng.com/vue-mobile/11/",
            "title": "vue-mobile项目开发流程第十一部分(实现shopcar功能)",
            "date_published": "2022-07-07T16:00:00.000Z",
            "content_html": "<h3 id=\"512-购物车功能实现\"><a class=\"anchor\" href=\"#512-购物车功能实现\">#</a> 5.12 购物车功能实现</h3>\n<h4 id=\"5121-基本购物车结构\"><a class=\"anchor\" href=\"#5121-基本购物车结构\">#</a> 5.12.1 基本购物车结构</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/cart/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;购物车&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;no-shop&quot; v-if=&quot;empty&quot;&gt;\n      &lt;van-empty description=&quot;购物车空空如也&quot;&gt;\n        &lt;van-button round type=&quot;danger&quot; class=&quot;bottom-button&quot; @click=&quot;$router.push('/kind')&quot;&gt;立即购物&lt;/van-button&gt;\n      &lt;/van-empty&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;shop-list&quot; v-else&gt;\n\n      &lt;van-submit-bar :price=&quot;3050&quot; button-text=&quot;提交订单&quot;&gt;\n        &lt;van-checkbox &gt;全选&lt;/van-checkbox&gt;\n      &lt;/van-submit-bar&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n\n  export default defineComponent(&#123;\n    data () &#123;\n      return &#123;\n        cartList: []\n      &#125;\n    &#125;,\n    computed: &#123;\n      empty () &#123;\n        return this.cartList.length === 0\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;\n</code></pre>\n<h4 id=\"5122-请求购物车的数据并且渲染\"><a class=\"anchor\" href=\"#5122-请求购物车的数据并且渲染\">#</a> 5.12.2 请求购物车的数据并且渲染</h4>\n<figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// src/views/cart/cart.d.ts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ICartItem</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  cartid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  discount<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  flag<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  img1<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  num<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  originprice<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  proid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  proname<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  userid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><pre><code class=\"language-vue\">&lt;!-- src/views/cart/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;购物车&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;no-shop&quot; v-if=&quot;empty&quot;&gt;\n      &lt;van-empty description=&quot;购物车空空如也&quot;&gt;\n        &lt;van-button round type=&quot;danger&quot; class=&quot;bottom-button&quot; @click=&quot;$router.push('/kind')&quot;&gt;立即购物&lt;/van-button&gt;\n      &lt;/van-empty&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;shop-list&quot; v-else&gt;\n      &lt;van-card\n        v-for=&quot;item of cartList&quot;\n        :key=&quot;item.cartid&quot;\n        :num=&quot;item.num&quot;\n        :price=&quot;item.originprice&quot;\n        :title=&quot;item.proname&quot;\n        :thumb=&quot;item.img1&quot;\n      /&gt;\n      &lt;van-submit-bar :price=&quot;3050&quot; button-text=&quot;提交订单&quot;&gt;\n        &lt;van-checkbox &gt;全选&lt;/van-checkbox&gt;\n      &lt;/van-submit-bar&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; getCartListData &#125; from '@/api/cart'\n  import type &#123; ICartItem &#125; from './cart'\n  interface IData &#123;//++++\n    cartList: ICartItem[]\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;//++++\n      return &#123;\n        cartList: []\n      &#125;\n    &#125;,\n    computed: &#123;\n      empty () &#123;\n        return this.cartList.length === 0\n      &#125;\n    &#125;,\n    mounted () &#123;//++++\n      this.getCartList()\n    &#125;,\n    methods: &#123;\n      getCartList () &#123;//++++\n        getCartListData(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          if (res.data.code === '10020') &#123;\n            this.cartList = []\n          &#125; else &#123;\n            this.cartList = res.data.data\n          &#125;\n        &#125;)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;\n</code></pre>\n<h4 id=\"5123-删除数据\"><a class=\"anchor\" href=\"#5123-删除数据\">#</a> 5.12.3 删除数据</h4>\n<blockquote>\n<p>异步删除 - 全局变量传值</p>\n</blockquote>\n<pre><code class=\"language-vue\">&lt;!-- src/views/cart/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;购物车&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;no-shop&quot; v-if=&quot;empty&quot;&gt;\n      &lt;van-empty description=&quot;购物车空空如也&quot;&gt;\n        &lt;van-button round type=&quot;danger&quot; class=&quot;bottom-button&quot; @click=&quot;$router.push('/kind')&quot;&gt;立即购物&lt;/van-button&gt;\n      &lt;/van-empty&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;shop-list&quot; v-else&gt;\n      &lt;van-swipe-cell\n        v-for=&quot;item of cartList&quot;\n        :key=&quot;item.cartid&quot;\n        :before-close=&quot;beforeClose&quot;\n      &gt;\n        &lt;van-card\n          :num=&quot;item.num&quot;\n          :price=&quot;item.originprice&quot;\n          :title=&quot;item.proname&quot;\n          :thumb=&quot;item.img1&quot;\n        /&gt;\n        &lt;template #right&gt;\n          &lt;van-button square text=&quot;删除&quot; type=&quot;danger&quot; @click=&quot;getDeleteId(item.cartid)&quot; class=&quot;delete-button&quot; /&gt;\n        &lt;/template&gt;\n      &lt;/van-swipe-cell&gt;\n      &lt;van-submit-bar :price=&quot;3050&quot; button-text=&quot;提交订单&quot;&gt;\n        &lt;van-checkbox &gt;全选&lt;/van-checkbox&gt;\n      &lt;/van-submit-bar&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; Dialog &#125; from 'vant'\n  import &#123; getCartListData, removeOneData &#125; from '@/api/cart'\n  import type &#123; ICartItem &#125; from './cart'\n  interface IData &#123;\n    cartList: ICartItem[],\n    id: string\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        cartList: [],\n        id: ''\n      &#125;\n    &#125;,\n    computed: &#123;\n      empty () &#123;\n        return this.cartList.length === 0\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.getCartList()\n    &#125;,\n    methods: &#123;\n      getCartList () &#123;\n        getCartListData(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          if (res.data.code === '10020') &#123;\n            this.cartList = []\n          &#125; else &#123;\n            this.cartList = res.data.data\n          &#125;\n        &#125;)\n      &#125;,\n      beforeClose (&#123; position &#125;: &#123; position: 'left' | 'right' | 'cell' | 'outside'&#125;): any &#123;\n        console.log(position)\n        switch (position) &#123;\n          case 'right':\n            return new Promise&lt;void&gt;((resolve) =&gt; &#123;\n              Dialog.confirm(&#123;\n                title: '确定删除吗？',\n              &#125;).then(() =&gt; &#123;\n                removeOneData(&#123;cartid: this.id&#125;).then(() =&gt; &#123;\n                  this.getCartList() // 重置列表\n                  this.id = ''\n                  resolve()\n                &#125;)\n              &#125;);\n            &#125;);\n          case 'outside':\n            return true\n        &#125;\n      &#125;,\n      getDeleteId (cartid: string) &#123;\n        console.log(cartid)\n        this.id =cartid\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .delete-button &#123;\n    height: 100%;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"5124-修改购物车数量\"><a class=\"anchor\" href=\"#5124-修改购物车数量\">#</a> 5.12.4 修改购物车数量</h4>\n<blockquote>\n<p>使用插槽自定义数量位置，使用步进器组件完成数量更改，传参传对象</p>\n</blockquote>\n<pre><code class=\"language-vue\">&lt;!-- src/views/cart/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;购物车&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;no-shop&quot; v-if=&quot;empty&quot;&gt;\n      &lt;van-empty description=&quot;购物车空空如也&quot;&gt;\n        &lt;van-button round type=&quot;danger&quot; class=&quot;bottom-button&quot; @click=&quot;$router.push('/kind')&quot;&gt;立即购物&lt;/van-button&gt;\n      &lt;/van-empty&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;shop-list&quot; v-else&gt;\n      &lt;van-swipe-cell\n        v-for=&quot;item of cartList&quot;\n        :key=&quot;item.cartid&quot;\n        :before-close=&quot;beforeClose&quot;\n      &gt;\n        &lt;van-card\n          :price=&quot;item.originprice&quot;\n          :title=&quot;item.proname&quot;\n          :thumb=&quot;item.img1&quot;\n        &gt;\n          &lt;template #num&gt;\n            &lt;van-stepper v-model=&quot;item.num&quot; theme=&quot;round&quot; button-size=&quot;22&quot; disable-input @change=&quot;updateNum(item)&quot; /&gt;\n          &lt;/template&gt;\n        &lt;/van-card&gt;\n        &lt;template #right&gt;\n          &lt;van-button square text=&quot;删除&quot; type=&quot;danger&quot; @click=&quot;getDeleteId(item.cartid)&quot; class=&quot;delete-button&quot; /&gt;\n        &lt;/template&gt;\n      &lt;/van-swipe-cell&gt;\n      &lt;van-submit-bar :price=&quot;3050&quot; button-text=&quot;提交订单&quot;&gt;\n        &lt;van-checkbox &gt;全选&lt;/van-checkbox&gt;\n      &lt;/van-submit-bar&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; Dialog &#125; from 'vant'\n  import &#123; getCartListData, removeOneData, updateOneDataNum &#125; from '@/api/cart' // ++++\n  import type &#123; ICartItem &#125; from './cart'\n  interface IData &#123;\n    cartList: ICartItem[],\n    id: string\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        cartList: [],\n        id: ''\n      &#125;\n    &#125;,\n    computed: &#123;\n      empty () &#123;\n        return this.cartList.length === 0\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.getCartList()\n    &#125;,\n    methods: &#123;\n      getCartList () &#123;\n        getCartListData(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          if (res.data.code === '10020') &#123;\n            this.cartList = []\n          &#125; else &#123;\n            this.cartList = res.data.data\n          &#125;\n        &#125;)\n      &#125;,\n      beforeClose (&#123; position &#125;: &#123; position: 'left' | 'right' | 'cell' | 'outside'&#125;): any &#123;\n        console.log(position)\n        switch (position) &#123;\n          case 'right':\n            return new Promise&lt;void&gt;((resolve) =&gt; &#123;\n              Dialog.confirm(&#123;\n                title: '确定删除吗？',\n              &#125;).then(() =&gt; &#123;\n                removeOneData(&#123;cartid: this.id&#125;).then(() =&gt; &#123;\n                  this.getCartList() // 重置列表\n                  this.id = ''\n                  resolve()\n                &#125;)\n              &#125;);\n            &#125;);\n          case 'outside':\n            return true\n        &#125;\n      &#125;,\n      getDeleteId (cartid: string) &#123;\n        console.log(cartid)\n        this.id =cartid\n      &#125;,\n      updateNum (&#123; cartid, num &#125;: ICartItem) &#123; // ++++\n        console.log(cartid, num)\n        updateOneDataNum(&#123; cartid, num &#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .delete-button &#123;\n    height: 100%;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"5125-计算总价和总数量\"><a class=\"anchor\" href=\"#5125-计算总价和总数量\">#</a> 5.12.5 计算总价和总数量</h4>\n<blockquote>\n<p>总数位 0 按钮不可点</p>\n</blockquote>\n<pre><code class=\"language-vue\">&lt;!-- src/views/cart/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;购物车&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;no-shop&quot; v-if=&quot;empty&quot;&gt;\n      &lt;van-empty description=&quot;购物车空空如也&quot;&gt;\n        &lt;van-button round type=&quot;danger&quot; class=&quot;bottom-button&quot; @click=&quot;$router.push('/kind')&quot;&gt;立即购物&lt;/van-button&gt;\n      &lt;/van-empty&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;shop-list&quot; v-else&gt;\n      &lt;van-swipe-cell\n        v-for=&quot;item of cartList&quot;\n        :key=&quot;item.cartid&quot;\n        :before-close=&quot;beforeClose&quot;\n      &gt;\n        &lt;van-card\n          :price=&quot;item.originprice&quot;\n          :title=&quot;item.proname&quot;\n          :thumb=&quot;item.img1&quot;\n        &gt;\n          &lt;template #num&gt;\n            &lt;van-stepper v-model=&quot;item.num&quot; theme=&quot;round&quot; button-size=&quot;22&quot; disable-input @change=&quot;updateNum(item)&quot; /&gt;\n          &lt;/template&gt;\n        &lt;/van-card&gt;\n        &lt;template #right&gt;\n          &lt;van-button square text=&quot;删除&quot; type=&quot;danger&quot; @click=&quot;getDeleteId(item.cartid)&quot; class=&quot;delete-button&quot; /&gt;\n        &lt;/template&gt;\n      &lt;/van-swipe-cell&gt;\n      &lt;van-submit-bar :disabled=&quot;totalNum === 0&quot; :price=&quot;totalPrice&quot; :button-text=&quot;totalNum &gt; 0  ? `去结算($&#123;totalNum&#125;)` : `去结算`&quot;&gt;\n        &lt;van-checkbox &gt;全选&lt;/van-checkbox&gt;\n      &lt;/van-submit-bar&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; Dialog &#125; from 'vant'\n  import &#123; getCartListData, removeOneData, updateOneDataNum &#125; from '@/api/cart'\n  import type &#123; ICartItem &#125; from './cart'\n  interface IData &#123;\n    cartList: ICartItem[],\n    id: string\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        cartList: [],\n        id: ''\n      &#125;\n    &#125;,\n    computed: &#123;\n      empty () &#123;\n        return this.cartList.length === 0\n      &#125;,\n\n      totalNum () &#123;\n        return this.cartList.reduce((sum, item) =&gt; &#123; // 选中才累加\n          return item.flag ? sum += item.num : sum += 0\n        &#125;, 0)\n      &#125;,\n\n      totalPrice () &#123;\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return  item.flag ? sum += item.num * item.originprice : sum += 0\n        &#125;, 0) * 100\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.getCartList()\n    &#125;,\n    methods: &#123;\n      getCartList () &#123;\n        getCartListData(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          if (res.data.code === '10020') &#123;\n            this.cartList = []\n          &#125; else &#123;\n            this.cartList = res.data.data\n          &#125;\n        &#125;)\n      &#125;,\n      beforeClose (&#123; position &#125;: &#123; position: 'left' | 'right' | 'cell' | 'outside'&#125;): any &#123;\n        console.log(position)\n        switch (position) &#123;\n          case 'right':\n            return new Promise&lt;void&gt;((resolve) =&gt; &#123;\n              Dialog.confirm(&#123;\n                title: '确定删除吗？',\n              &#125;).then(() =&gt; &#123;\n                removeOneData(&#123;cartid: this.id&#125;).then(() =&gt; &#123;\n                  this.getCartList() // 重置列表\n                  this.id = ''\n                  resolve()\n                &#125;)\n              &#125;);\n            &#125;);\n          case 'outside':\n            return true\n        &#125;\n      &#125;,\n      getDeleteId (cartid: string) &#123;\n        console.log(cartid)\n        this.id =cartid\n      &#125;,\n      updateNum (&#123; cartid, num &#125;: ICartItem) &#123;\n        console.log(cartid, num)\n        updateOneDataNum(&#123; cartid, num &#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .delete-button &#123;\n    height: 100%;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<blockquote>\n<p>实际上总价以及总数需要选中才计算</p>\n</blockquote>\n<h4 id=\"5126-全选以及单选\"><a class=\"anchor\" href=\"#5126-全选以及单选\">#</a> 5.12.6 全选以及单选</h4>\n<blockquote>\n<p>以 layout 组件 以及 checkbox 组件完成 基本布局</p>\n</blockquote>\n<pre><code class=\"language-vue\">&lt;!-- src/views/cart/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;购物车&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;no-shop&quot; v-if=&quot;empty&quot;&gt;\n      &lt;van-empty description=&quot;购物车空空如也&quot;&gt;\n        &lt;van-button round type=&quot;danger&quot; class=&quot;bottom-button&quot; @click=&quot;$router.push('/kind')&quot;&gt;立即购物&lt;/van-button&gt;\n      &lt;/van-empty&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;shop-list&quot; v-else&gt;\n      &lt;van-swipe-cell\n        v-for=&quot;item of cartList&quot;\n        :key=&quot;item.cartid&quot;\n        :before-close=&quot;beforeClose&quot;\n      &gt;\n      &lt;van-row class=&quot;myItem&quot;&gt;\n        &lt;van-col span=&quot;2&quot;&gt;\n          &lt;van-checkbox v-model=&quot;item.flag&quot;&gt;&lt;/van-checkbox&gt;\n        &lt;/van-col&gt;\n        &lt;van-col span=&quot;22&quot;&gt;\n          &lt;van-card\n            :price=&quot;item.originprice&quot;\n            :title=&quot;item.proname&quot;\n            :thumb=&quot;item.img1&quot;\n          &gt;\n            &lt;template #num&gt;\n              &lt;van-stepper v-model=&quot;item.num&quot; theme=&quot;round&quot; button-size=&quot;22&quot; disable-input @change=&quot;updateNum(item)&quot; /&gt;\n            &lt;/template&gt;\n          &lt;/van-card&gt;\n        &lt;/van-col&gt;\n      &lt;/van-row&gt;\n        \n        &lt;template #right&gt;\n          &lt;van-button square text=&quot;删除&quot; type=&quot;danger&quot; @click=&quot;getDeleteId(item.cartid)&quot; class=&quot;delete-button&quot; /&gt;\n        &lt;/template&gt;\n      &lt;/van-swipe-cell&gt;\n      &lt;van-submit-bar :price=&quot;totalPrice&quot; :button-text=&quot;totalNum &gt; 0  ? `去结算($&#123;totalNum&#125;)` : `去结算`&quot;&gt;\n        &lt;van-checkbox &gt;全选&lt;/van-checkbox&gt;\n      &lt;/van-submit-bar&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; Dialog &#125; from 'vant'\n  import &#123; getCartListData, removeOneData, updateOneDataNum &#125; from '@/api/cart'\n  import type &#123; ICartItem &#125; from './cart'\n  interface IData &#123;\n    cartList: ICartItem[],\n    id: string\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        cartList: [],\n        id: ''\n      &#125;\n    &#125;,\n    computed: &#123;\n      empty () &#123;\n        return this.cartList.length === 0\n      &#125;,\n\n      totalNum () &#123;  // 选中才累加\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return item.flag ? sum += item.num : sum += 0\n        &#125;, 0)\n      &#125;,\n\n      totalPrice () &#123;\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return  item.flag ? sum += item.num * item.originprice : sum += 0\n        &#125;, 0) * 100\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.getCartList()\n    &#125;,\n    methods: &#123;\n      getCartList () &#123;\n        getCartListData(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          if (res.data.code === '10020') &#123;\n            this.cartList = []\n          &#125; else &#123;\n            this.cartList = res.data.data\n          &#125;\n        &#125;)\n      &#125;,\n      beforeClose (&#123; position &#125;: &#123; position: 'left' | 'right' | 'cell' | 'outside'&#125;): any &#123;\n        console.log(position)\n        switch (position) &#123;\n          case 'right':\n            return new Promise&lt;void&gt;((resolve) =&gt; &#123;\n              Dialog.confirm(&#123;\n                title: '确定删除吗？',\n              &#125;).then(() =&gt; &#123;\n                removeOneData(&#123;cartid: this.id&#125;).then(() =&gt; &#123;\n                  this.getCartList() // 重置列表\n                  this.id = ''\n                  resolve()\n                &#125;)\n              &#125;);\n            &#125;);\n          case 'outside':\n            return true\n        &#125;\n      &#125;,\n      getDeleteId (cartid: string) &#123;\n        console.log(cartid)\n        this.id =cartid\n      &#125;,\n      updateNum (&#123; cartid, num &#125;: ICartItem) &#123;\n        console.log(cartid, num)\n        updateOneDataNum(&#123; cartid, num &#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .delete-button &#123;\n    height: 100%;\n  &#125;\n\n  .myItem &#123;\n    background: var(--van-card-background-color);\n    .van-col--2 &#123;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<blockquote>\n<p>默认全选不选中，通过列表的数据控制全选的效果</p>\n</blockquote>\n<pre><code class=\"language-vue\">&lt;!-- src/views/cart/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;购物车&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;no-shop&quot; v-if=&quot;empty&quot;&gt;\n      &lt;van-empty description=&quot;购物车空空如也&quot;&gt;\n        &lt;van-button round type=&quot;danger&quot; class=&quot;bottom-button&quot; @click=&quot;$router.push('/kind')&quot;&gt;立即购物&lt;/van-button&gt;\n      &lt;/van-empty&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;shop-list&quot; v-else&gt;\n      &lt;van-swipe-cell\n        v-for=&quot;item of cartList&quot;\n        :key=&quot;item.cartid&quot;\n        :before-close=&quot;beforeClose&quot;\n      &gt;\n      &lt;van-row class=&quot;myItem&quot;&gt;\n        &lt;van-col span=&quot;2&quot;&gt;\n          &lt;van-checkbox v-model=&quot;item.flag&quot;&gt;&lt;/van-checkbox&gt;\n        &lt;/van-col&gt;\n        &lt;van-col span=&quot;22&quot;&gt;\n          &lt;van-card\n            :price=&quot;item.originprice&quot;\n            :title=&quot;item.proname&quot;\n            :thumb=&quot;item.img1&quot;\n          &gt;\n            &lt;template #num&gt;\n              &lt;van-stepper v-model=&quot;item.num&quot; theme=&quot;round&quot; button-size=&quot;22&quot; disable-input @change=&quot;updateNum(item)&quot; /&gt;\n            &lt;/template&gt;\n          &lt;/van-card&gt;\n        &lt;/van-col&gt;\n      &lt;/van-row&gt;\n        \n        &lt;template #right&gt;\n          &lt;van-button square text=&quot;删除&quot; type=&quot;danger&quot; @click=&quot;getDeleteId(item.cartid)&quot; class=&quot;delete-button&quot; /&gt;\n        &lt;/template&gt;\n      &lt;/van-swipe-cell&gt;\n      &lt;van-submit-bar :price=&quot;totalPrice&quot; :button-text=&quot;totalNum &gt; 0  ? `去结算($&#123;totalNum&#125;)` : `去结算`&quot;&gt;\n        &lt;van-checkbox v-model=&quot;checked&quot;&gt;全选&lt;/van-checkbox&gt;\n      &lt;/van-submit-bar&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; Dialog &#125; from 'vant'\n  import &#123; getCartListData, removeOneData, updateOneDataNum &#125; from '@/api/cart'\n  import type &#123; ICartItem &#125; from './cart'\n  interface IData &#123;\n    cartList: ICartItem[],\n    id: string\n    checked: boolean // ++++++++\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        cartList: [],\n        id: '',\n        checked: false // ++++++++\n      &#125;\n    &#125;,\n    computed: &#123;\n      empty () &#123;\n        return this.cartList.length === 0\n      &#125;,\n\n      totalNum () &#123;  // 选中才累加\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return item.flag ? sum += item.num : sum += 0\n        &#125;, 0)\n      &#125;,\n\n      totalPrice () &#123;\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return  item.flag ? sum += item.num * item.originprice : sum += 0\n        &#125;, 0) * 100\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.getCartList()\n    &#125;,\n    methods: &#123;\n      getCartList () &#123;\n        getCartListData(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          if (res.data.code === '10020') &#123;\n            this.cartList = []\n          &#125; else &#123;\n            this.cartList = res.data.data\n            this.checked = this.cartList.every(item =&gt; item.flag) // ++++++++\n          &#125;\n        &#125;)\n      &#125;,\n      beforeClose (&#123; position &#125;: &#123; position: 'left' | 'right' | 'cell' | 'outside'&#125;): any &#123;\n        console.log(position)\n        switch (position) &#123;\n          case 'right':\n            return new Promise&lt;void&gt;((resolve) =&gt; &#123;\n              Dialog.confirm(&#123;\n                title: '确定删除吗？',\n              &#125;).then(() =&gt; &#123;\n                removeOneData(&#123;cartid: this.id&#125;).then(() =&gt; &#123;\n                  this.getCartList() // 重置列表\n                  this.id = ''\n                  resolve()\n                &#125;)\n              &#125;);\n            &#125;);\n          case 'outside':\n            return true\n        &#125;\n      &#125;,\n      getDeleteId (cartid: string) &#123;\n        console.log(cartid)\n        this.id =cartid\n      &#125;,\n      updateNum (&#123; cartid, num &#125;: ICartItem) &#123;\n        console.log(cartid, num)\n        updateOneDataNum(&#123; cartid, num &#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .delete-button &#123;\n    height: 100%;\n  &#125;\n\n  .myItem &#123;\n    background: var(--van-card-background-color);\n    .van-col--2 &#123;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<blockquote>\n<p>点击全选控制列表选中状态</p>\n</blockquote>\n<pre><code class=\"language-vue\">&lt;!-- src/views/cart/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;购物车&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;no-shop&quot; v-if=&quot;empty&quot;&gt;\n      &lt;van-empty description=&quot;购物车空空如也&quot;&gt;\n        &lt;van-button round type=&quot;danger&quot; class=&quot;bottom-button&quot; @click=&quot;$router.push('/kind')&quot;&gt;立即购物&lt;/van-button&gt;\n      &lt;/van-empty&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;shop-list&quot; v-else&gt;\n      &lt;van-swipe-cell\n        v-for=&quot;item of cartList&quot;\n        :key=&quot;item.cartid&quot;\n        :before-close=&quot;beforeClose&quot;\n      &gt;\n      &lt;van-row class=&quot;myItem&quot;&gt;\n        &lt;van-col span=&quot;2&quot;&gt;\n          &lt;van-checkbox v-model=&quot;item.flag&quot;&gt;&lt;/van-checkbox&gt;\n        &lt;/van-col&gt;\n        &lt;van-col span=&quot;22&quot;&gt;\n          &lt;van-card\n            :price=&quot;item.originprice&quot;\n            :title=&quot;item.proname&quot;\n            :thumb=&quot;item.img1&quot;\n          &gt;\n            &lt;template #num&gt;\n              &lt;van-stepper v-model=&quot;item.num&quot; theme=&quot;round&quot; button-size=&quot;22&quot; disable-input @change=&quot;updateNum(item)&quot; /&gt;\n            &lt;/template&gt;\n          &lt;/van-card&gt;\n        &lt;/van-col&gt;\n      &lt;/van-row&gt;\n        \n        &lt;template #right&gt;\n          &lt;van-button square text=&quot;删除&quot; type=&quot;danger&quot; @click=&quot;getDeleteId(item.cartid)&quot; class=&quot;delete-button&quot; /&gt;\n        &lt;/template&gt;\n      &lt;/van-swipe-cell&gt;\n      &lt;van-submit-bar :price=&quot;totalPrice&quot; :button-text=&quot;totalNum &gt; 0  ? `去结算($&#123;totalNum&#125;)` : `去结算`&quot;&gt;\n        &lt;van-checkbox v-model=&quot;checked&quot; @click=&quot;changeType&quot;&gt;全选&lt;/van-checkbox&gt;\n      &lt;/van-submit-bar&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; Dialog &#125; from 'vant'\n  import &#123; getCartListData, removeOneData, selectAllData, updateOneDataNum &#125; from '@/api/cart'\n  import type &#123; ICartItem &#125; from './cart'\n  interface IData &#123;\n    cartList: ICartItem[],\n    id: string\n    checked: boolean\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        cartList: [],\n        id: '',\n        checked: false\n      &#125;\n    &#125;,\n    computed: &#123;\n      empty () &#123;\n        return this.cartList.length === 0\n      &#125;,\n\n      totalNum () &#123;  // 选中才累加\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return item.flag ? sum += item.num : sum += 0\n        &#125;, 0)\n      &#125;,\n\n      totalPrice () &#123;\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return  item.flag ? sum += item.num * item.originprice : sum += 0\n        &#125;, 0) * 100\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.getCartList()\n    &#125;,\n    methods: &#123;\n      getCartList () &#123;\n        getCartListData(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          if (res.data.code === '10020') &#123;\n            this.cartList = []\n          &#125; else &#123;\n            this.cartList = res.data.data\n            this.checked = this.cartList.every(item =&gt; item.flag)\n          &#125;\n        &#125;)\n      &#125;,\n      beforeClose (&#123; position &#125;: &#123; position: 'left' | 'right' | 'cell' | 'outside'&#125;): any &#123;\n        console.log(position)\n        switch (position) &#123;\n          case 'right':\n            return new Promise&lt;void&gt;((resolve) =&gt; &#123;\n              Dialog.confirm(&#123;\n                title: '确定删除吗？',\n              &#125;).then(() =&gt; &#123;\n                removeOneData(&#123;cartid: this.id&#125;).then(() =&gt; &#123;\n                  this.getCartList() // 重置列表\n                  this.id = ''\n                  resolve()\n                &#125;)\n              &#125;);\n            &#125;);\n          case 'outside':\n            return true\n        &#125;\n      &#125;,\n      getDeleteId (cartid: string) &#123;\n        console.log(cartid)\n        this.id =cartid\n      &#125;,\n      updateNum (&#123; cartid, num &#125;: ICartItem) &#123;\n        console.log(cartid, num)\n        updateOneDataNum(&#123; cartid, num &#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;,\n      changeType () &#123; // ++++++\n        console.log(this.checked)\n        selectAllData(&#123; userid: localStorage.getItem('userid')!, type: this.checked&#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .delete-button &#123;\n    height: 100%;\n  &#125;\n\n  .myItem &#123;\n    background: var(--van-card-background-color);\n    .van-col--2 &#123;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<blockquote>\n<p>单个列表选中</p>\n</blockquote>\n<pre><code class=\"language-vue\">&lt;!-- src/views/cart/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;购物车&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;no-shop&quot; v-if=&quot;empty&quot;&gt;\n      &lt;van-empty description=&quot;购物车空空如也&quot;&gt;\n        &lt;van-button round type=&quot;danger&quot; class=&quot;bottom-button&quot; @click=&quot;$router.push('/kind')&quot;&gt;立即购物&lt;/van-button&gt;\n      &lt;/van-empty&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;shop-list&quot; v-else&gt;\n      &lt;van-swipe-cell\n        v-for=&quot;item of cartList&quot;\n        :key=&quot;item.cartid&quot;\n        :before-close=&quot;beforeClose&quot;\n      &gt;\n      &lt;van-row class=&quot;myItem&quot;&gt;\n        &lt;van-col span=&quot;2&quot;&gt;\n          &lt;van-checkbox v-model=&quot;item.flag&quot; @change=&quot;selectOne(item)&quot;&gt;&lt;/van-checkbox&gt;\n        &lt;/van-col&gt;\n        &lt;van-col span=&quot;22&quot;&gt;\n          &lt;van-card\n            :price=&quot;item.originprice&quot;\n            :title=&quot;item.proname&quot;\n            :thumb=&quot;item.img1&quot;\n          &gt;\n            &lt;template #num&gt;\n              &lt;van-stepper v-model=&quot;item.num&quot; theme=&quot;round&quot; button-size=&quot;22&quot; disable-input @change=&quot;updateNum(item)&quot; /&gt;\n            &lt;/template&gt;\n          &lt;/van-card&gt;\n        &lt;/van-col&gt;\n      &lt;/van-row&gt;\n        \n        &lt;template #right&gt;\n          &lt;van-button square text=&quot;删除&quot; type=&quot;danger&quot; @click=&quot;getDeleteId(item.cartid)&quot; class=&quot;delete-button&quot; /&gt;\n        &lt;/template&gt;\n      &lt;/van-swipe-cell&gt;\n      &lt;van-submit-bar :price=&quot;totalPrice&quot; :button-text=&quot;totalNum &gt; 0  ? `去结算($&#123;totalNum&#125;)` : `去结算`&quot;&gt;\n        &lt;van-checkbox v-model=&quot;checked&quot; @click=&quot;changeType&quot;&gt;全选&lt;/van-checkbox&gt;\n      &lt;/van-submit-bar&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; Dialog &#125; from 'vant'\n  import &#123; getCartListData, removeOneData, selectAllData, selectOneData, updateOneDataNum &#125; from '@/api/cart'\n  import type &#123; ICartItem &#125; from './cart'\n  interface IData &#123;\n    cartList: ICartItem[],\n    id: string\n    checked: boolean\n  &#125;\n  export default defineComponent(&#123;\n    data (): IData &#123;\n      return &#123;\n        cartList: [],\n        id: '',\n        checked: false\n      &#125;\n    &#125;,\n    computed: &#123;\n      empty () &#123;\n        return this.cartList.length === 0\n      &#125;,\n\n      totalNum () &#123;  // 选中才累加\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return item.flag ? sum += item.num : sum += 0\n        &#125;, 0)\n      &#125;,\n\n      totalPrice () &#123;\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return  item.flag ? sum += item.num * item.originprice : sum += 0\n        &#125;, 0) * 100\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.getCartList()\n    &#125;,\n    methods: &#123;\n      getCartList () &#123;\n        getCartListData(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          if (res.data.code === '10020') &#123;\n            this.cartList = []\n          &#125; else &#123;\n            this.cartList = res.data.data\n            this.checked = this.cartList.every(item =&gt; item.flag)\n          &#125;\n        &#125;)\n      &#125;,\n      beforeClose (&#123; position &#125;: &#123; position: 'left' | 'right' | 'cell' | 'outside'&#125;): any &#123;\n        console.log(position)\n        switch (position) &#123;\n          case 'right':\n            return new Promise&lt;void&gt;((resolve) =&gt; &#123;\n              Dialog.confirm(&#123;\n                title: '确定删除吗？',\n              &#125;).then(() =&gt; &#123;\n                removeOneData(&#123;cartid: this.id&#125;).then(() =&gt; &#123;\n                  this.getCartList() // 重置列表\n                  this.id = ''\n                  resolve()\n                &#125;)\n              &#125;);\n            &#125;);\n          case 'outside':\n            return true\n        &#125;\n      &#125;,\n      getDeleteId (cartid: string) &#123;\n        console.log(cartid)\n        this.id =cartid\n      &#125;,\n      updateNum (&#123; cartid, num &#125;: ICartItem) &#123;\n        console.log(cartid, num)\n        updateOneDataNum(&#123; cartid, num &#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;,\n      changeType () &#123;\n        console.log(this.checked)\n        selectAllData(&#123; userid: localStorage.getItem('userid')!, type: this.checked&#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;,\n      selectOne (&#123;cartid, flag&#125;: ICartItem) &#123; // +++++++++\n        console.log(cartid, flag)\n        selectOneData(&#123;cartid, flag&#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .delete-button &#123;\n    height: 100%;\n  &#125;\n\n  .myItem &#123;\n    background: var(--van-card-background-color);\n    .van-col--2 &#123;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<h4 id=\"5127-推荐列表实现\"><a class=\"anchor\" href=\"#5127-推荐列表实现\">#</a> 5.12.7 推荐列表实现</h4>\n<pre><code class=\"language-vue\">&lt;!-- src/views/cart/components/ProComponent.vue --&gt;\n&lt;template&gt;\n  &lt;div class=&quot;recommendBox&quot;&gt;\n    &lt;div class=&quot;proList&quot;&gt;\n      &lt;ul class=&quot;left&quot;&gt;\n        &lt;li v-for=&quot;(item, index) of list&quot; :key=&quot;item.proid&quot; @click=&quot;toDetail(item.proid)&quot;&gt;\n          &lt;template v-if=&quot;index % 2 ===0&quot;&gt;\n            &lt;div class=&quot;itemImage&quot;&gt;\n              &lt;van-image :src=&quot;item.img1&quot;&gt;&lt;/van-image&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;itemInfo&quot;&gt;\n              &lt;div class=&quot;itemTitle van-multi-ellipsis--l2&quot;&gt;&#123;&#123; item.proname &#125;&#125;&lt;/div&gt;\n              &lt;div class=&quot;itemPrice&quot;&gt;￥&#123;&#123; item.originprice / 1 &#125;&#125;&lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/template&gt;\n        &lt;/li&gt;\n      &lt;/ul&gt;\n      &lt;ul class=&quot;right&quot;&gt;\n        &lt;li v-for=&quot;(item, index) of list&quot; :key=&quot;item.proid&quot; @click=&quot;toDetail(item.proid)&quot;&gt;\n          &lt;template v-if=&quot;index % 2 === 1&quot;&gt;\n            &lt;div class=&quot;itemImage&quot;&gt;\n              &lt;van-image :src=&quot;item.img1&quot;&gt;&lt;/van-image&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;itemInfo&quot;&gt;\n              &lt;div class=&quot;itemTitle van-multi-ellipsis--l2&quot;&gt;&#123;&#123; item.proname &#125;&#125;&lt;/div&gt;\n              &lt;div class=&quot;itemPrice&quot;&gt;￥&#123;&#123; item.originprice &#125;&#125;&lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/template&gt;\n        &lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue'\n  import type &#123; PropType &#125; from 'vue'\n  import type &#123; IPro &#125; from '@/views/home/home'\n  \n  export default defineComponent(&#123;\n    emits: &#123;\n      'to-detail': function (proid: string) &#123;\n        return true\n      &#125;\n    &#125;,\n    props: &#123;\n      list: Array as PropType&lt;IPro[]&gt;\n    &#125;,\n    methods: &#123;\n      toDetail (proid: string) &#123;\n        this.$router.push('/detail/' + proid)\n      &#125;\n    &#125;\n\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .recommendBox &#123;\n    background-color: #fff;\n    margin-top: 10px;\n    h3 &#123;\n      padding: 10px 15px;\n    &#125;\n  &#125;\n  .proList &#123;\n    display: flex;\n    width: 96%;\n    margin: 10px 2% 15px;\n    .left &#123;\n      width: 49%;\n      min-height: 300px;\n      margin-right: 1%;\n      // background-color: #f66;\n    &#125;\n    .right &#123;\n      width: 49%;\n      min-height: 300px;\n      margin-left: 1%;\n      // background-color: #f66;\n    &#125;\n\n    ul &#123;\n      li &#123;\n        margin-top: 5px;\n        background-color: #fff;\n        border-radius: 10px;\n        overflow: hidden;\n        .itemImage &#123;\n          width: 100%;\n          .van-image &#123;\n            min-height: 1.3rem;\n          &#125;\n        &#125;\n        .itemInfo &#123;\n          padding: 10px;\n          .itemTitle &#123;\n            font-size: 0.14rem;\n          &#125;\n          .itemPrice &#123;\n            color: #f66;\n            font-size: 0.2rem;\n            span &#123;\n              font-size: 0.14rem;\n            &#125;\n          &#125;\n        &#125;\n\n      &#125;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n<pre><code class=\"language-vue\">&lt;!-- src/views/cart/IndexView.vue --&gt;\n&lt;template&gt;\n  &lt;header class=&quot;header&quot;&gt;\n    &lt;van-nav-bar\n      title=&quot;购物车&quot;\n      left-arrow\n      @click-left=&quot;$router.back()&quot;\n    /&gt;\n  &lt;/header&gt;\n  &lt;div class=&quot;content&quot;&gt;\n    &lt;div class=&quot;no-shop&quot; v-if=&quot;empty&quot;&gt;\n      &lt;van-empty description=&quot;购物车空空如也&quot;&gt;\n        &lt;van-button round type=&quot;danger&quot; class=&quot;bottom-button&quot; @click=&quot;$router.push('/kind')&quot;&gt;立即购物&lt;/van-button&gt;\n      &lt;/van-empty&gt;\n      &lt;van-divider\n        :style=&quot;&#123; color: '#1989fa', borderColor: '#1989fa', padding: '0 16px' &#125;&quot;\n      &gt;\n        快点来看看\n      &lt;/van-divider&gt;\n      &lt;ProComponent :list=&quot;proList&quot;&gt;&lt;/ProComponent&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;shop-list&quot; v-else&gt;\n      &lt;van-swipe-cell\n        v-for=&quot;item of cartList&quot;\n        :key=&quot;item.cartid&quot;\n        :before-close=&quot;beforeClose&quot;\n      &gt;\n      &lt;van-row class=&quot;myItem&quot;&gt;\n        &lt;van-col span=&quot;2&quot;&gt;\n          &lt;van-checkbox v-model=&quot;item.flag&quot; @change=&quot;selectOne(item)&quot;&gt;&lt;/van-checkbox&gt;\n        &lt;/van-col&gt;\n        &lt;van-col span=&quot;22&quot;&gt;\n          &lt;van-card\n            :price=&quot;item.originprice&quot;\n            :title=&quot;item.proname&quot;\n            :thumb=&quot;item.img1&quot;\n          &gt;\n            &lt;template #num&gt;\n              &lt;van-stepper v-model=&quot;item.num&quot; theme=&quot;round&quot; button-size=&quot;22&quot; disable-input @change=&quot;updateNum(item)&quot; /&gt;\n            &lt;/template&gt;\n          &lt;/van-card&gt;\n        &lt;/van-col&gt;\n      &lt;/van-row&gt;\n        \n        &lt;template #right&gt;\n          &lt;van-button square text=&quot;删除&quot; type=&quot;danger&quot; @click=&quot;getDeleteId(item.cartid)&quot; class=&quot;delete-button&quot; /&gt;\n        &lt;/template&gt;\n      &lt;/van-swipe-cell&gt;\n      &lt;van-divider\n        :style=&quot;&#123; color: '#1989fa', borderColor: '#1989fa', padding: '0 16px' &#125;&quot;\n      &gt;\n        可能你想要\n      &lt;/van-divider&gt;\n      &lt;ProComponent :list=&quot;proList&quot;&gt;&lt;/ProComponent&gt;\n      &lt;van-submit-bar :price=&quot;totalPrice&quot; :button-text=&quot;totalNum &gt; 0  ? `去结算($&#123;totalNum&#125;)` : `去结算`&quot;&gt;\n        &lt;van-checkbox v-model=&quot;checked&quot; @click=&quot;changeType&quot;&gt;全选&lt;/van-checkbox&gt;\n      &lt;/van-submit-bar&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\n  import &#123; defineComponent &#125; from 'vue';\n  import &#123; Dialog &#125; from 'vant'\n  import &#123; getCartListData, removeOneData, selectAllData, selectOneData, updateOneDataNum, getCartRecommendData &#125; from '@/api/cart' // +++++\n  import type &#123; ICartItem &#125; from './cart' \n  import type &#123; IPro &#125; from '../home/home';\n  import ProComponent from './components/ProComponent.vue' // +++++\n  interface IData &#123;\n    cartList: ICartItem[],\n    id: string\n    checked: boolean\n    proList: IPro[] // +++++\n  &#125;\n  export default defineComponent(&#123;\n    components: &#123; // +++++\n      ProComponent\n    &#125;,\n    data (): IData &#123;\n      return &#123;\n        cartList: [],\n        id: '',\n        checked: false,\n        proList: [] // +++++\n      &#125;\n    &#125;,\n    computed: &#123;\n      empty () &#123;\n        return this.cartList.length === 0\n      &#125;,\n\n      totalNum () &#123;  // 选中才累加\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return item.flag ? sum += item.num : sum += 0\n        &#125;, 0)\n      &#125;,\n\n      totalPrice () &#123;\n        return this.cartList.reduce((sum, item) =&gt; &#123;\n          return  item.flag ? sum += item.num * item.originprice : sum += 0\n        &#125;, 0) * 100\n      &#125;\n    &#125;,\n    mounted () &#123;\n      this.getCartList()\n\n      getCartRecommendData().then(res =&gt; &#123; // +++++\n        this.proList = res.data.data\n      &#125;)\n    &#125;,\n    methods: &#123;\n      getCartList () &#123;\n        getCartListData(&#123; userid: localStorage.getItem('userid')! &#125;).then(res =&gt; &#123;\n          console.log(res.data)\n          if (res.data.code === '10020') &#123;\n            this.cartList = []\n          &#125; else &#123;\n            this.cartList = res.data.data\n            this.checked = this.cartList.every(item =&gt; item.flag)\n          &#125;\n        &#125;)\n      &#125;,\n      beforeClose (&#123; position &#125;: &#123; position: 'left' | 'right' | 'cell' | 'outside'&#125;): any &#123;\n        console.log(position)\n        switch (position) &#123;\n          case 'right':\n            return new Promise&lt;void&gt;((resolve) =&gt; &#123;\n              Dialog.confirm(&#123;\n                title: '确定删除吗？',\n              &#125;).then(() =&gt; &#123;\n                removeOneData(&#123;cartid: this.id&#125;).then(() =&gt; &#123;\n                  this.getCartList() // 重置列表\n                  this.id = ''\n                  resolve()\n                &#125;)\n              &#125;);\n            &#125;);\n          case 'outside':\n            return true\n        &#125;\n      &#125;,\n      getDeleteId (cartid: string) &#123;\n        console.log(cartid)\n        this.id =cartid\n      &#125;,\n      updateNum (&#123; cartid, num &#125;: ICartItem) &#123;\n        console.log(cartid, num)\n        updateOneDataNum(&#123; cartid, num &#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;,\n      changeType () &#123;\n        console.log(this.checked)\n        selectAllData(&#123; userid: localStorage.getItem('userid')!, type: this.checked&#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;,\n      selectOne (&#123;cartid, flag&#125;: ICartItem) &#123;\n        console.log(cartid, flag)\n        selectOneData(&#123;cartid, flag&#125;).then(() =&gt; &#123;\n          this.getCartList()\n        &#125;)\n      &#125;\n    &#125;\n  &#125;)\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n  .delete-button &#123;\n    height: 100%;\n  &#125;\n\n  .myItem &#123;\n    background: var(--van-card-background-color);\n    .van-col--2 &#123;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    &#125;\n  &#125;\n&lt;/style&gt;\n</code></pre>\n",
            "tags": [
                "vue3移动端项目开发",
                "vue",
                "TypeScript"
            ]
        }
    ]
}