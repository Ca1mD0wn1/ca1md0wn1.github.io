<!-- build time:Wed Nov 09 2022 02:20:30 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="永不陨落的星辰" href="https://www.yexingcheng.com/rss.xml"><link rel="alternate" type="application/atom+xml" title="永不陨落的星辰" href="https://www.yexingcheng.com/atom.xml"><link rel="alternate" type="application/json" title="永不陨落的星辰" href="https://www.yexingcheng.com/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="react"><link rel="canonical" href="https://www.yexingcheng.com/react-study/5/"><title>React学习第五天 - react学习 | 永不陨落的星辰 = 永不陨落的星辰</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">React学习第五天</h1><div class="meta"><span class="item" title="创建时间：2022-08-05 00:00:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-08-05T00:00:00+08:00">2022-08-05</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>25k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>23 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">永不陨落的星辰</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclffsa1cj20zk0m811l.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gicit31ffoj20zk0m8naf.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipeu1usa7j20zk0m8b29.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclil3m4ej20zk0m8tn8.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipew8gmvyj20zk0m87wh.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gicli3sbvtj20zk0m8x6p.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/react%E5%AD%A6%E4%B9%A0/" itemprop="item" rel="index" title="分类于 react学习"><span itemprop="name">react学习</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.yexingcheng.com/react-study/5/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="叶星辰"><meta itemprop="description" content=", 温柔正确的人总是难以生存，因为这个世界既不温柔 也不正确"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="永不陨落的星辰"></span><div class="body md" itemprop="articleBody"><h1 id="九、条件渲染"><a href="#九、条件渲染" class="headerlink" title="九、条件渲染"></a>九、条件渲染</h1><p>在 React 中，你可以创建不同的组件来封装各种你需要的行为。然后还可以根据应用的状态变化只渲染其中的一部分。</p><p>React 中的条件渲染和 JavaScript 中的一致，使用 JavaScript 操作符 if 或条件运算符来创建表示当前状态的元素，然后让 React 根据它们来更新 UI。</p><h2 id="9-1-amp-amp"><a href="#9-1-amp-amp" class="headerlink" title="9.1 &amp;&amp;"></a>9.1 &amp;&amp;</h2><p>你可以通过用花括号包裹代码在 JSX 中嵌入任何表达式 ，也包括 JavaScript 的逻辑与 &amp;&amp;，它可以方便地条件渲染一个元素。</p><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;

/
import App from &#39;./04_condition/01_App_condition_yu&#39; // 条件渲染 &amp;&amp;

const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;))

// 标签形式调用
root.render(&lt;App /&gt;)
</code></pre><p><code>src/04_condition/01_App_condition_yu.jsx</code></p><pre><code class="jsx">import React, &#123; Component &#125; from &#39;react&#39;;

class MainBox extends Component &#123;
  render () &#123;
    return (
      &lt;div&gt;
        &#123; 
          this.props.unReadMessage.length &gt; 0 &amp;&amp; &lt;span&gt;还有&#123; this.props.unReadMessage.length &#125;条未读消息&lt;/span&gt;
        &#125;&lt;/div&gt;
    )
  &#125;
&#125;

class App extends Component &#123;
  state = &#123;
    message: [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]
  &#125;
  render() &#123;
    return (
      &lt;div&gt;
        &#123;
          this.state.message.map((item, index) =&gt; &#123;
            return (
              &lt;p key = &#123; index &#125;&gt;
                &#123; item &#125;
                &lt;button onClick=&#123; () =&gt; &#123;
                  const arr = this.state.message // 获取数据
                  arr.splice(index, 1) // 处理数据
                  this.setState(&#123; // 修改状态
                    message: arr
                  &#125;)
                &#125;&#125;&gt;已读&lt;/button&gt;
              &lt;/p&gt;
            )
          &#125;)
        &#125;
        &lt;MainBox unReadMessage = &#123; this.state.message &#125; &gt;&lt;/MainBox&gt;
      &lt;/div&gt;
    );
  &#125;
&#125;

export default App;
</code></pre><h2 id="9-2-三元运算符"><a href="#9-2-三元运算符" class="headerlink" title="9.2 三元运算符"></a>9.2 三元运算符</h2><p>条件渲染的另一种方法是使用 JavaScript 的条件运算符:</p><pre><code>condition ? true : false。
</code></pre><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;


import App from &#39;./04_condition/02_App_condition_san&#39; // 条件渲染 三元运算符

const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;))

// 标签形式调用
root.render(&lt;App /&gt;)
</code></pre><p><code>src/04_condition/02_App_condition_san.jsx</code></p><pre><code class="jsx">import React, &#123; Component &#125; from &#39;react&#39;;

class App extends Component &#123;
  state = &#123;
    loginState: false
  &#125;
  render() &#123;
    return (
      &lt;div&gt;
        &#123; this.state.loginState + &#39;&#39; &#125;
        &lt;button onClick=&#123; () =&gt; &#123; this.setState(&#123; loginState: !this.state.loginState &#125;) &#125; &#125;&gt;切换&lt;/button&gt;
        &#123;
          this.state.loginState ? &lt;button&gt;退出&lt;/button&gt; : &lt;button&gt;登录&lt;/button&gt;
        &#125;
      &lt;/div&gt;
    );
  &#125;
  // render() &#123;
  //   if (this.state.loginState) &#123;
  //     return (
  //       &lt;div&gt;
  //         &#123; this.state.loginState + &#39;&#39; &#125;
  //         &lt;button onClick=&#123; () =&gt; &#123; this.setState(&#123; loginState: !this.state.loginState &#125;) &#125; &#125;&gt;切换&lt;/button&gt;
  //          &lt;button&gt;退出&lt;/button&gt;
  //       &lt;/div&gt;
  //     );
  //   &#125; else &#123;
  //     return (
  //       &lt;div&gt;
  //         &#123; this.state.loginState + &#39;&#39; &#125;
  //         &lt;button onClick=&#123; () =&gt; &#123; this.setState(&#123; loginState: !this.state.loginState &#125;) &#125; &#125;&gt;切换&lt;/button&gt;
  //          &lt;button&gt;登录&lt;/button&gt;
  //       &lt;/div&gt;
  //     )
  //   &#125;
  // &#125;
  // render () &#123;
  //   // let test = null
  //   // if (this.state.loginState) &#123;
  //   //   test = &lt;button&gt;退出&lt;/button&gt;
  //   // &#125; else &#123;
  //   //   test = &lt;button&gt;登录&lt;/button&gt;
  //   // &#125;
  //   const test = this.state.loginState ? &lt;button&gt;退出&lt;/button&gt; : &lt;button&gt;登录&lt;/button&gt;
  //   return (
  //     &lt;div&gt;
  //       &#123; this.state.loginState + &#39;&#39; &#125;
  //       &lt;button onClick=&#123; () =&gt; &#123; this.setState(&#123; loginState: !this.state.loginState &#125;) &#125; &#125;&gt;切换&lt;/button&gt;
  //       &#123; test &#125;
  //     &lt;/div&gt;
  //   )
  // &#125;
&#125;

export default App;
</code></pre><h2 id="9-3-动态className"><a href="#9-3-动态className" class="headerlink" title="9.3 动态className"></a>9.3 动态className</h2><p>Vue中有很方便的<span class="exturl" data-url="aHR0cHM6Ly9zby5jc2RuLm5ldC9zby9zZWFyY2g/cT0lRTUlOEElQTglRTYlODAlODElRTclQkIlOTElRTUlQUUlOUEmc3BtPTEwMDEuMjEwMS4zMDAxLjcwMjA=">动态绑定</span>class属性的方式，v-bind:class,那么react怎么实现这样的效果呢？</p><blockquote><p><code>&lt;button class=&quot;btn btn-success btn-sm&quot;&gt;&lt;/button&gt;</code></p><p><code>&lt;button class=&quot;btn btn-danger btn-sm&quot;&gt;&lt;/button&gt;</code></p><p><code>&lt;button class=&quot;btn btn-warning btn-sm&quot;&gt;&lt;/button&gt;</code></p></blockquote><p><code>&#123; this.state.type === &#39;success&#39; ? &#39;btn btn-success btn-sm&#39; : &#39;btn btn-sm&#39;&#125;</code></p><p>通过classnames这个插件可以实现</p><pre><code class="sh">$ cnpm i classnames -S
</code></pre><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;

import App from &#39;./04_condition/03_App_condition_classname&#39; // 条件渲染 动态的class

const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;))

// 标签形式调用
root.render(&lt;App /&gt;)
</code></pre><p><code>src/04_condition/03_App_condition_classname.jsx</code></p><pre><code class="jsx">import React, &#123; Component &#125; from &#39;react&#39;;
import classnames from &#39;classnames&#39;
class App extends Component &#123;
  state = &#123;
    type: &#39;default&#39;,
    size: &#39;sm&#39;
  &#125;
  render() &#123;
    return (
      &lt;div&gt;
        &lt;button className=&#123;
          classnames(&#123;
            &#39;btn&#39;: true,
            &#39;btn-sm&#39;: this.state.size === &#39;sm&#39;,
            &#39;btn-success&#39;: this.state.type === &#39;default&#39;
          &#125;)
        &#125;&gt;default&lt;/button&gt;
        &lt;button className=&#123;
          classnames(&#123;
            &#39;btn&#39;: true,
            &#39;btn-md&#39;: this.state.size === &#39;md&#39;,
            &#39;btn-success&#39;: this.state.type === &#39;success&#39;
          &#125;)
        &#125;&gt;success md&lt;/button&gt;
      &lt;/div&gt;
    );
  &#125;
&#125;

export default App;
</code></pre><blockquote><p>补充：</p><ul><li><strong>css-in-js</strong></li></ul><pre><code>$ cnpm i styled-components -S
</code></pre><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;
</code></pre></blockquote><blockquote><p>import App from ‘.&#x2F;04_condition&#x2F;04_App_condition_cssinjs’ &#x2F;&#x2F; cssInJs</p><p>const root &#x3D; ReactDOM.createRoot(document.getElementById(‘root’))</p><p>&#x2F;&#x2F; 标签形式调用<br>root.render(<app>)</app></p><pre><code>
`src/04_condition/04_App_condition_cssinjs.jsx`

```jsx
import React, &#123; Component &#125; from &#39;react&#39;;
import styled from &#39;styled-components&#39;

// css-in-js 内部写的都是纯css
const ODiv = styled.div`
  font-size: 30px;
  color: #f66
`
const Button = styled.button`
  padding: 10px 30px;

`
class App extends Component &#123;
  render() &#123;
    return (
      &lt;div&gt;
        &lt;ODiv&gt;你好&lt;/ODiv&gt;
        &lt;Button&gt;按钮&lt;/Button&gt;
      &lt;/div&gt;
    );
  &#125;
&#125;

export default App;
</code></pre><ul><li><strong>模块化css</strong></li></ul><blockquote><p>可以解决类似于 vue中 scoped</p></blockquote><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;

import App from &#39;./04_condition/05_App_module_css&#39; // 模块化css

const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;))

// 标签形式调用
root.render(&lt;App /&gt;)
</code></pre><p><code>src/04_condition/05_App_module_css.jsx</code></p><pre><code class="jsx">import React, &#123; Component &#125; from &#39;react&#39;;
// import &#39;./style.module.css&#39;
import style from &#39;./style.module.css&#39;

class App extends Component &#123;
  render() &#123;
    return (
      // &lt;div className=&#39;container&#39;&gt;
      //   &lt;div className=&quot;header&quot;&gt;&lt;/div&gt;
      //   &lt;div className=&quot;box&quot;&gt;&lt;/div&gt;
      //   &lt;div className=&quot;footer&quot;&gt;&lt;/div&gt;
      // &lt;/div&gt;
      &lt;div className=&#123; style.container &#125;&gt;
        &lt;div className=&#123; style.header &#125;&gt;&lt;/div&gt;
        &lt;div className=&#123; style.box &#125;&gt;&lt;/div&gt;
        &lt;div className=&#123; style.footer &#125;&gt;&lt;/div&gt;
      &lt;/div&gt;
    );
  &#125;
&#125;

export default App;
</code></pre><p><code>src/04_condition/style.module.css</code></p><pre><code class="css">.container &#123;
  width: 100%;
  height: 600px;
  display: flex;
  flex-direction: column;
&#125;

.header &#123;
  width: 100%;
  height: 50px;
  background-color: #f66;
&#125;

.box &#123;
  width: 100%;
  flex: 1;
&#125;

.footer &#123;
  width: 100%;
  height: 50px;
  background-color: #ccc;
&#125;
</code></pre></blockquote><h2 id="9-4-动态style"><a href="#9-4-动态style" class="headerlink" title="9.4 动态style"></a>9.4 动态style</h2><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;


import App from &#39;./04_condition/06_App_style&#39; // 动态style

const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;))

// 标签形式调用
root.render(&lt;App /&gt;)
</code></pre><p><code>src/04_condition/06_App_style.jsx</code></p><pre><code class="jsx">import React, &#123; Component &#125; from &#39;react&#39;;

class App extends Component &#123;
  state = &#123;
    size: 12,
    color: &#39;#333&#39;
  &#125;
  render() &#123;
    return (
      &lt;&gt;
        &lt;button onClick=&#123; () =&gt; &#123;
          this.setState(&#123;
            size: this.state.size + 2
          &#125;)
        &#125;&#125;&gt;字号+2&lt;/button&gt;
        &lt;input type=&quot;color&quot; value=&#123;this.state.color&#125; onChange=&#123;(event) =&gt; &#123;
          this.setState(&#123;
            color: event.target.value
          &#125;)
        &#125;&#125; /&gt;
        &lt;div style = &#123; &#123; fontSize: this.state.size, color: this.state.color &#125; &#125;&gt;
          中国共产党第十九届中央委员会第七次全体会议9日上午在京召开。中央委员会总书记习近平代表中央政治局向全会作工作报告，并就十九届中央委员会向中国共产党第二十次全国代表大会的报告讨论稿向全会作了说明。王沪宁就《中国共产党章程（修正案）》讨论稿向全会作了说明。
        &lt;/div&gt;
      &lt;/&gt;
    );
  &#125;
&#125;

export default App;
</code></pre><h1 id="十、列表渲染"><a href="#十、列表渲染" class="headerlink" title="十、列表渲染"></a>十、列表渲染</h1><ul><li>map()方法、key</li></ul><p>使用 map() 方法遍历数组</p><blockquote><p>组件接收数组参数，每个列表元素分配一个 key，不然会出现警告 <strong>a key should be provided for list items</strong>，意思就是需要包含 key：</p></blockquote><p>Keys 可以在 DOM 中的某些元素被增加或删除的时候帮助 React 识别哪些元素发生了变化。因此你应当给数组中的每一个元素赋予一个确定的标识。</p><p>一个元素的 key 最好是这个元素在列表中拥有的一个独一无二的字符串。通常，我们使用来自数据的<code>id</code>作为元素的 key</p><p>当元素没有确定的 id 时，你可以使用他的序列号索引<code>index</code> 作为<code>key</code></p><blockquote><p>如果列表可以重新排序，我们不建议使用索引来进行排序，因为这会导致渲染变得很慢。</p></blockquote><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;

import App from &#39;./05_list/01_App_map&#39; // 列表渲染 使用map

const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;))

// 标签形式调用
root.render(&lt;App /&gt;)
</code></pre><p><code>src/05_list/01_App_map.jsx</code></p><pre><code class="jsx">import React, &#123; Component &#125; from &#39;react&#39;;

class App extends Component &#123;
  state = &#123;
    proList: []
  &#125;

  componentDidMount () &#123;
    fetch(&#39;http://121.89.205.189:3001/api/pro/list&#39;).then(res =&gt; res.json()).then(res =&gt; &#123;
      console.log(res.data)
      this.setState(&#123;
        proList: res.data
      &#125;)
    &#125;)
  &#125;
  // 边遍历边渲染
  // render() &#123;
  //   const &#123; proList &#125; = this.state
  //   return (
  //     &lt;div&gt;
  //       &#123;
  //         // proList &amp;&amp; proList.forEach((item, index) =&gt; &#123; // forEach没有返回值
  //         //   return (
  //         //     &lt;p key=&#123; item.proid &#125;&gt;&#123;index + 1&#125; - &#123; item.proname &#125;&lt;/p&gt;
  //         //   )
  //         // &#125;)
  //         proList &amp;&amp; proList.map((item, index) =&gt; &#123; // map没有返回值
  //           return (
  //             &lt;p key=&#123; item.proid &#125;&gt;&#123;index + 1&#125; - &#123; item.proname &#125;&lt;/p&gt;
  //           )
  //         &#125;)
  //       &#125;
  //     &lt;/div&gt;
  //   );
  // &#125;

  // 先遍历后渲染 - 利用数组装填jsx代码思想
  render() &#123;
    const arr = []
    this.state.proList.forEach((item, index) =&gt; &#123;
      arr.push(&lt;p key=&#123; item.proid &#125;&gt;&#123; index + 1 &#125; --- &#123; item.proname &#125;&lt;/p&gt;)
    &#125;)
    return (
      &lt;div&gt;
        &#123; arr &#125;
      &lt;/div&gt;
    );
  &#125;
&#125;

export default App;
</code></pre><blockquote><p>接口 <code>http://121.89.205.189:3001/api/city/sortCity</code></p><p>实现多层遍历</p><p><code>src/index.js</code></p><pre><code class="js">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;
</code></pre></blockquote><blockquote><p>import App from ‘.&#x2F;05_list&#x2F;02_App_mutiple_map’ &#x2F;&#x2F; 列表渲染 多层遍历</p><p>const root &#x3D; ReactDOM.createRoot(document.getElementById(‘root’))</p><p>&#x2F;&#x2F; 标签形式调用<br>root.render(<app>)</app></p><pre><code>
`src/05_list/02_App_mutiple_map.jsx`

```jsx
import React, &#123; Component &#125; from &#39;react&#39;;

class App extends Component &#123;
state = &#123;
 cityList: []
&#125;

componentDidMount () &#123;
 fetch(&#39;http://121.89.205.189:3001/api/city/sortCity&#39;).then(res =&gt; res.json()).then(res =&gt; &#123;
   console.log(JSON.parse(res.data))
   this.setState(&#123;
     cityList: JSON.parse(res.data)
   &#125;)
 &#125;)
&#125;
render() &#123;
 const &#123; cityList &#125; = this.state
 return (
   &lt;div&gt;
     &lt;ul&gt;
       &#123;
         cityList &amp;&amp; cityList.map(item =&gt; &#123;
           return (
             &lt;li key = &#123; item.letter &#125;&gt;
               &#123; item.letter &#125;
               &lt;ol&gt;
                 &#123;
                   item.data &amp;&amp; item.data.map(itm =&gt; (
                     &lt;li key = &#123; itm.cityId &#125;&gt; &#123; itm.name &#125;&lt;/li&gt;
                   ))
                 &#125;
               &lt;/ol&gt;
             &lt;/li&gt;
           )
         &#125;)
       &#125;
     &lt;/ul&gt;
   &lt;/div&gt;
 );
&#125;
&#125;

export default App;
</code></pre></blockquote><h1 id="十一、表单绑定"><a href="#十一、表单绑定" class="headerlink" title="十一、表单绑定"></a>十一、表单绑定</h1><p>在 React 里，HTML 表单元素的工作方式和其他的 DOM 元素有些不同，这是因为表单元素通常会保持一些内部的 state。例如这个纯 HTML 表单只接受一个名称：</p><pre><code class="html">&lt;form&gt;
  &lt;label&gt;
    名字:
    &lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;
  &lt;/label&gt;
  &lt;input type=&quot;submit&quot; value=&quot;提交&quot; /&gt;
&lt;/form&gt;
</code></pre><blockquote><p>此表单具有默认的 HTML 表单行为，即在用户提交表单后浏览到新页面。如果你在 React 中执行相同的代码，它依然有效。但大多数情况下，使用 JavaScript 函数可以很方便的处理表单的提交， 同时还可以访问用户填写的表单数据。实现这种效果的标准方式是使用“受控组件”。</p><p>表单元素的value值受 state的控制</p></blockquote><h2 id="11-1-各种表单的绑定与取值"><a href="#11-1-各种表单的绑定与取值" class="headerlink" title="11.1 各种表单的绑定与取值"></a>11.1 各种表单的绑定与取值</h2><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;

import App from &#39;./06_form/01_App_form&#39; // 表单绑定 受控组件

const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;))

// 标签形式调用
root.render(&lt;App /&gt;)
</code></pre><p><code>src/06_form/01_App_form.jsx</code></p><pre><code class="JSX">import React, &#123; Component &#125; from &#39;react&#39;;

class App extends Component &#123;
  state = &#123;
    userName: &#39;&#39;,
    password: &#39;&#39;,
    sex: &#39;女&#39;,
    hobby: [],
    lesson: 1,
    note: &#39;&#39;,
    flag: false
  &#125;
  // handlerUserNameChange = (event) =&gt; &#123;
  //   this.setState(&#123; userName: event.target.value &#125;)
  // &#125;
  // handlerPasswordChange = (event) =&gt; &#123;
  //   this.setState(&#123; password: event.target.value &#125;)
  // &#125;

  // handlerChange = (type, event) =&gt; &#123;
  //   this.setState(&#123; [type]: event.target.value &#125;)
  // &#125;

  handlerChange = (event) =&gt; &#123;
    console.log(event.target.name)
    this.setState(&#123; [event.target.name]: event.target.value &#125;)
  &#125;

  handlerHobbyChange = (event) =&gt; &#123;
    const checked = event.target.checked
    const value = event.target.value
    const arr = this.state.hobby
    // checked 为真选中，加入数组，为假 删除
    if (checked) &#123;
      arr.push(value)
    &#125; else &#123;
      const index = arr.findIndex(item =&gt; item === value)
      arr.splice(index, 1)
    &#125;
    console.log(arr)
    this.setState(&#123; hobby: arr &#125;)
  &#125;

  handlerFlagChange = (event) =&gt; &#123;
    this.setState(&#123; flag: event.target.checked &#125;)
  &#125;
  render() &#123;
    return (
      &lt;div&gt;
        &lt;div&gt;
          &#123;/* &lt;input type=&quot;text&quot; placeholder=&#39;用户名&#39; value=&#123; this.state.userName &#125; onChange = &#123; this.handlerUserNameChange &#125;/&gt; &#123; this.state.userName &#125; */&#125;
          &#123;/* &lt;input type=&quot;text&quot; placeholder=&#39;用户名&#39; value=&#123; this.state.userName &#125; onChange = &#123; this.handlerChange.bind(this, &#39;userName&#39;) &#125;/&gt; &#123; this.state.userName &#125; */&#125;
          &lt;input type=&quot;text&quot; placeholder=&#39;用户名&#39; name=&quot;userName&quot; value=&#123; this.state.userName &#125; onChange = &#123; this.handlerChange &#125;/&gt; &#123; this.state.userName &#125;
        &lt;/div&gt;
        &lt;div&gt;
          &#123;/* &lt;input type=&quot;password&quot; placeholder=&#39;密码&#39; value=&#123; this.state.password &#125; onChange = &#123; this.handlerPasswordChange &#125;/&gt; &#123; this.state.password &#125; */&#125;
          &#123;/* &lt;input type=&quot;password&quot; placeholder=&#39;密码&#39; value=&#123; this.state.password &#125; onChange = &#123; this.handlerChange.bind(this, &#39;password&#39;) &#125;/&gt; &#123; this.state.password &#125; */&#125;
          &lt;input type=&quot;password&quot; placeholder=&#39;密码&#39; name=&quot;password&quot; value=&#123; this.state.password &#125; onChange = &#123; this.handlerChange &#125;/&gt; &#123; this.state.password &#125;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;input type=&quot;radio&quot; value=&quot;男&quot; name=&quot;sex&quot; checked=&#123; this.state.sex === &#39;男&#39;&#125; onChange = &#123; this.handlerChange &#125;/&gt;男
          &lt;input type=&quot;radio&quot; value=&quot;女&quot; name=&quot;sex&quot; checked=&#123; this.state.sex === &#39;女&#39;&#125; onChange = &#123; this.handlerChange &#125;/&gt;女 --- &#123; this.state.sex &#125;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;🏀&quot; onChange=&#123; this.handlerHobbyChange &#125;/&gt;🏀
          &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;⚽&quot; onChange=&#123; this.handlerHobbyChange &#125;/&gt;⚽
          &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;🏐&quot; onChange=&#123; this.handlerHobbyChange &#125;/&gt;🏐
          &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;🏓&quot; onChange=&#123; this.handlerHobbyChange &#125;/&gt;🏓 --- 
          &#123; 
            this.state.hobby &amp;&amp; this.state.hobby.map(item =&gt; &#123;
              return &lt;span key = &#123; item &#125;&gt;&#123;item&#125;&lt;/span&gt;
            &#125;) 
          &#125;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;select name=&quot;lesson&quot; value=&#123;this.state.lesson&#125; onChange=&#123; this.handlerChange &#125;&gt;
            &lt;option value=&#123;1&#125;&gt;1阶段&lt;/option&gt;
            &lt;option value=&#123;2&#125;&gt;2阶段&lt;/option&gt;
            &lt;option value=&#123;3&#125;&gt;3阶段&lt;/option&gt;
          &lt;/select&gt; --- &#123; this.state.lesson &#125;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;textarea name=&#39;note&#39; value=&#123; this.state.note &#125; onChange = &#123; this.handlerChange &#125;&gt;&lt;/textarea&gt;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;input type=&quot;checkbox&quot; checked = &#123; this.state.flag &#125; onChange = &#123; this.handlerFlagChange &#125; /&gt; ***** 用户协议 -- &#123; this.state.flag + &#39;&#39;&#125;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  &#125;
&#125;

export default App;
</code></pre><h2 id="11-2-受控表单以及受控组件"><a href="#11-2-受控表单以及受控组件" class="headerlink" title="11.2 受控表单以及受控组件"></a>11.2 受控表单以及受控组件</h2><p>在 HTML 中，表单元素（如<code>&lt;input&gt;</code>、 <code>&lt;textarea&gt;</code> 和 <code>&lt;select&gt;</code>）之类的表单元素通常自己维护 state，并根据用户输入进行更新。而在 React 中，可变状态（mutable state）通常保存在组件的 state 属性中，并且只能通过使用 <a target="_blank" rel="noopener" href="https://react.docschina.org/docs/react-component.html#setstate"><code>setState()</code></a>来更新。</p><p>我们可以把两者结合起来，使 React 的 state 成为“唯一数据源”。渲染表单的 React 组件还控制着用户输入过程中表单发生的操作。被 React 以这种方式控制取值的表单输入元素就叫做“受控组件”。</p><blockquote><p><code>input</code>、<code>textarea</code>、<code>select</code> 受控组件： value的属性受了 <code>state</code> 的控制</p><ul><li>使用了受控组件，一定要写 <code>value</code> 属性以及<code>onChange</code>事件</li></ul><p><code>radio</code>、’checkbox’ 受控组件: checked 的属性受了<code>state</code>的控制</p><p>如果需要设置默认值，那么需要通过 <code>defaultValue</code> 以及<code>defaultChecked</code>设置</p></blockquote><p>案例如上</p><h1 id="十二、状态提升"><a href="#十二、状态提升" class="headerlink" title="十二、状态提升"></a>十二、状态提升</h1><p>在 React 中，将多个组件中需要共享的 state 向上移动到它们的最近共同父组件中，便可实现共享 state。这就是所谓的“状态提升”。</p><h2 id="12-1-父子组件通信"><a href="#12-1-父子组件通信" class="headerlink" title="12.1 父子组件通信"></a>12.1 父子组件通信</h2><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;

import App from &#39;./07_state_up/01_App-parent-child-value&#39; // 状态提升 多组件数据共享

const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;))

// 标签形式调用
root.render(&lt;App /&gt;)
</code></pre><p><code>src/07_state_up/01_App-parent-child-value.jsx</code></p><pre><code class="jsx">import React, &#123; Component &#125; from &#39;react&#39;;

class Child1 extends Component &#123;
  state = &#123; count: 1 &#125;
  render () &#123;
    return (
      &lt;&gt;
        &lt;h1&gt;child1组件&lt;/h1&gt;
        &#123; this.state.count &#125;
        &lt;button onClick=&#123; () =&gt; &#123; this.setState(&#123;count: this.state.count + 1&#125; ) &#125;&#125;&gt;加1&lt;/button&gt;
      &lt;/&gt;
    )
  &#125;
&#125;
class Child2 extends Component &#123;
  state = &#123; count: 1 &#125;
  render () &#123;
    return (
      &lt;&gt;
        &lt;h1&gt;child2组件&lt;/h1&gt;
        &#123; this.state.count &#125;
        &lt;button onClick=&#123; () =&gt; &#123; this.setState(&#123;count: this.state.count + 1&#125; ) &#125;&#125;&gt;加1&lt;/button&gt;
      &lt;/&gt;
    )
  &#125;
&#125;
class App extends Component &#123;
  render() &#123;
    return (
      &lt;div&gt;
        &lt;Child1 &gt;&lt;/Child1&gt;
        &lt;hr&gt;&lt;/hr&gt;
        &lt;Child2 &gt;&lt;/Child2&gt;
      &lt;/div&gt;
    );
  &#125;
&#125;

export default App;
</code></pre><blockquote><p>我们发现Child1和Child2都是两个独立的个体，并没有实现数据共享</p></blockquote><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;


import App from &#39;./07_state_up/02_App_state_up&#39; // 状态提升 多组件数据共享

const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;))

// 标签形式调用
root.render(&lt;App /&gt;)
</code></pre><p><code>src/07_state_up/02_App_state_up.jsx</code></p><pre><code class="jsx">import React, &#123; Component &#125; from &#39;react&#39;;

class Child1 extends Component &#123;
  // state = &#123; count: 1 &#125;
  render () &#123;
    return (
      &lt;&gt;
        &lt;h1&gt;child1组件&lt;/h1&gt;
        &#123;/* &#123; this.state.count &#125; */&#125;
        &#123; this.props.count &#125;
        &#123;/* &lt;button onClick=&#123; () =&gt; &#123; this.setState(&#123;count: this.state.count + 1&#125; ) &#125;&#125;&gt;加1&lt;/button&gt; */&#125;
        &lt;button onClick=&#123; this.props.onClick &#125;&gt;加1&lt;/button&gt; 
      &lt;/&gt;
    )
  &#125;
&#125;
class Child2 extends Component &#123;
  // state = &#123; count: 1 &#125;
  render () &#123;
    return (
      &lt;&gt;
        &lt;h1&gt;child2组件&lt;/h1&gt;
       &#123;/* &#123; this.state.count &#125; */&#125;
       &#123; this.props.count &#125;
        &#123;/* &lt;button onClick=&#123; () =&gt; &#123; this.setState(&#123;count: this.state.count + 1&#125; ) &#125;&#125;&gt;加1&lt;/button&gt; */&#125;
        &lt;button onClick=&#123; this.props.onClick &#125;&gt;加1&lt;/button&gt; 
      &lt;/&gt;
    )
  &#125;
&#125;
class App extends Component &#123;
  state = &#123; count: 1 &#125;
  add = () =&gt; &#123;
    this.setState(&#123;count: this.state.count + 1&#125;)
  &#125;
  render() &#123;
    return (
      &lt;div&gt;
        &lt;Child1 count = &#123; this.state.count &#125; onClick = &#123; this.add &#125;&gt;&lt;/Child1&gt;
        &lt;hr&gt;&lt;/hr&gt;
        &lt;Child2 count = &#123; this.state.count &#125; onClick = &#123; this.add &#125;&gt;&lt;/Child2&gt;
      &lt;/div&gt;
    );
  &#125;
&#125;

export default App;
</code></pre><h2 id="12-2-状态提升解读"><a href="#12-2-状态提升解读" class="headerlink" title="12.2 状态提升解读"></a>12.2 状态提升解读</h2><p>实现方式是 利用最近的共同的父级组件中，用<code>props</code>的方式传过去到两个子组件，<code>props</code>中传的是一个<code>setState</code>的方法，通过子组件触发<code>props</code>传过去的方法，进而调用父级组件的<code>setState</code>的方法，改变了父级组件的<code>state</code>，调用父级组件的<code>add</code>方法，进而同时改变了两个子级组件的<code>数据</code>。</p><p>这是 两个有关连的<strong>同级组件</strong>的传值，因为<code>react</code>的单项数据流，所以不在两个组件中进行传值，而是提升到 最近的共同的父级组件中，改变父级的<code>state</code>,进而影响了两个子级组件的<code>render</code>。</p><blockquote><p>注意如果两个组件是同级组件（这两个组件的父组件是同一个）才考虑状态提升共享数据</p></blockquote><h1 id="十三、组合vs继承"><a href="#十三、组合vs继承" class="headerlink" title="十三、组合vs继承"></a>十三、组合vs继承</h1><p>React 有十分强大的组合模式。我们推荐使用组合而非继承来实现组件间的代码重用。</p><h2 id="13-1-理解组件化"><a href="#13-1-理解组件化" class="headerlink" title="13.1 理解组件化"></a>13.1 理解组件化</h2><p><strong>组件化是React的核心思想</strong>：</p><ul><li><p>组件化提供了一种抽象，让我们可以开发出一个个独立可复用的小组件来构造我们的应用。</p></li><li><p>任何的应用都会被抽象成一颗组件树。</p></li></ul><p><strong>组件化思想的应用</strong>：</p><ul><li><p>有了组件化的思想，我们在之后的开发中就要充分的利用它。</p></li><li><p>尽可能的将页面拆分成一个个小的、可复用的组件。</p></li><li><p>这样让我们的代码更加方便组织和管理，并且扩展性也更强。</p></li></ul><p><strong>React的组件相对于Vue更加的灵活和多样，按照不同的方式可以分成很多类 组件</strong>：</p><ul><li>根据组件的定义方式，可以分为：函数组件(Functional Component )和类组件(Class Component)；</li></ul><blockquote><p>vue 中有没有类组件和函数式组件？vue2中有</p><pre><code class="vue">&lt;template&gt;

&lt;/template&gt;

&lt;script&gt;
export default &#123;
props:[],
data () &#123;
    return &#123;&#125;
&#125;
&#125;
&lt;/script&gt;
</code></pre><ul><li>vue中的函数式组件 - 无状态组件，所有的数据来源均来自父组件</li></ul><pre><code class="jsx">&lt;template functional&gt;
  &lt;div&gt;&#123;&#123;props.msg&#125;&#125;&lt;/div&gt;
&lt;/template&gt;
</code></pre><ul><li>vue 中的类组件 - 兼容ts时</li></ul><pre><code>&lt;template&gt;
  &lt;div&gt;hello vue&lt;/div&gt;
&lt;/template&gt;

class Home extends Vue &#123;&#125; // export default &#123;&#125;
</code></pre></blockquote><ul><li><p>根据组件内部是否有状态需要维护，可以分成：无状态组件(Stateless Component )和有状态组件(Stateful Component)；</p></li><li><p>根据组件的不同职责，可以分成：展示型组件(Presentational Component - 只做数据的展示，一般不需要写更多的业务逻辑-数据请求不出现在展示型组件-顶多发出请求的指令-具体的请求交给容器型组件)和容器型组件(Container Component - 负责给展示性组件提供数据以及处理展示型组件需要的具体的业务逻辑) - 状态管理器-更容易理解；</p></li></ul><p>这些概念有很多重叠，但是他们最主要是关注数据逻辑和UI展示的分离：</p><ul><li>函数组件、无状态组件、展示型组件主要关注UI的展示；</li><li>类组件、有状态组件、容器型组件主要关注数据逻辑；</li></ul><h2 id="13-2-使用组合而非继承实现React组件化"><a href="#13-2-使用组合而非继承实现React组件化" class="headerlink" title="13.2 使用组合而非继承实现React组件化"></a>13.2 使用组合而非继承实现React组件化</h2><p>有些组件无法提前知晓它们子组件的具体内容，建议这些组件使用一个特殊的 <code>children</code> prop 来将他们的子组件传递到渲染结果中。</p><p><code>参照5.3章节</code></p><p>少数情况下，你可能需要在一个组件中预留出几个“洞”。这种情况下，我们可以不使用 <code>children</code>，而是自行约定：将所需内容传入 props，并使用相应的 prop。</p><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;

import App from &#39;./08_com/01_App_props_slot&#39; // 组合VS继承

const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;))

// 标签形式调用
root.render(&lt;App /&gt;)
</code></pre><p><code>src/08_com/01_App_props_slot.jsx</code></p><pre><code class="jsx">import React, &#123; Component &#125; from &#39;react&#39;;

class Header extends Component &#123;
  render () &#123;
    return (
      &lt;header&gt;
        &lt;ul&gt;
          &lt;li&gt;&#123; this.props.left &#125;&lt;/li&gt;
          &lt;li&gt;&#123; this.props.default &#125;&lt;/li&gt;
          &lt;li&gt;&#123; this.props.right &#125;&lt;/li&gt;
        &lt;/ul&gt;
        &#123; this.props.children &#125;
      &lt;/header&gt;
    )
  &#125;
&#125;

class Header1 extends Component &#123;
  render () &#123;
    return (
      &lt;header&gt;
        &lt;ul&gt;
          &lt;li&gt;&#123; this.props.children[0] &#125;&lt;/li&gt;
          &lt;li&gt;&#123; this.props.children[1] &#125;&lt;/li&gt;
          &lt;li&gt;&#123; this.props.children[2] &#125;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/header&gt;
    )
  &#125;
&#125;

class App extends Component &#123;
  render() &#123;
    return (
      &lt;div&gt;
        &lt;Header 
          left = &#123; &lt;span&gt;logo&lt;/span&gt; &#125;
          default = &#123; &lt;span&gt;搜索框&lt;/span&gt; &#125;
          right = &#123; &lt;span&gt;登录&lt;/span&gt; &#125;
        &gt;
          1111111111
        &lt;/Header&gt;

        &lt;Header 
          left = &#123; &lt;span&gt;返回&lt;/span&gt; &#125;
          default = &#123; &lt;span&gt;标题&lt;/span&gt; &#125;
          right = &#123; &lt;span&gt;更多&lt;/span&gt; &#125;
        &gt;&lt;/Header&gt;
        &lt;hr /&gt;
        &lt;Header1
        &gt;
          &lt;span&gt;logo&lt;/span&gt;
          &lt;span&gt;搜索框&lt;/span&gt;
          &lt;span&gt;登录&lt;/span&gt;
        &lt;/Header1&gt;
        &lt;Header1
        &gt;
          &lt;span&gt;返回&lt;/span&gt;
          &lt;span&gt;标题&lt;/span&gt;
          &lt;span&gt;更多&lt;/span&gt;
        &lt;/Header1&gt;
      &lt;/div&gt;
    );
  &#125;
&#125;

export default App;
</code></pre><blockquote><p>像 App组件中的<code>left</code> 和<code>default</code>以及 right 的 属性对应的之类的<code>React</code> 元素本质就是对象（<code>object</code>），所以你可以把它们当作 <code>props</code>，像其他数据一样传递。这种方法可能使你想起vue中“插槽”（<code>slot</code>）的概念，但在 <code>React</code> 中没有“插槽”这一概念的限制，你可以将任何东西作为 props 进行传递。</p></blockquote><h2 id="13-3-封装Modal弹窗"><a href="#13-3-封装Modal弹窗" class="headerlink" title="13.3 封装Modal弹窗"></a>13.3 封装Modal弹窗</h2><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;


import App from &#39;./08_com/02_App_modal&#39; // 组合VS继承

const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;))

// 标签形式调用
root.render(&lt;App /&gt;)
</code></pre><p><code>src/08_com/02_App_modal.jsx</code></p><pre><code class="jsx">import React, &#123; Component &#125; from &#39;react&#39;;
class Modal extends Component &#123;
  render () &#123;
    return (
      &lt;div style=&#123; &#123;
        position: &#39;fixed&#39;,
        top: 0,
        left: 0,
        bottom: 0,
        right: 0,
        backgroundColor: &#39;rgba(0,0,0, 0.4)&#39;,
        display: &#39;flex&#39;,
        justifyContent: &#39;center&#39;,
        alignItems: &#39;center&#39;
        
      &#125; &#125;&gt;
        &lt;div style=&#123; &#123;
          width: &#39;50%&#39;,
          minHeight: &#39;300px&#39;,
          backgroundColor: &#39;#fff&#39;
        &#125; &#125;&gt;
          这里是一个模态框
          &lt;button onClick=&#123; this.props.onClick &#125;&gt;关闭&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  &#125;
&#125;
class App extends Component &#123;
  state = &#123; show: false &#125;
  close = () =&gt; &#123;
    this.setState(&#123;
      show: false
    &#125;)
  &#125;
  render() &#123;
    return (
      &lt;div&gt;
        &lt;button onClick=&#123; () =&gt; this.setState(&#123; show: true &#125;)&#125;&gt;打开模态框&lt;/button&gt;
        &#123;
          this.state.show ? &lt;Modal onClick = &#123; this.close &#125;/&gt; : null
        &#125;
      &lt;/div&gt;
    );
  &#125;
&#125;

export default App;
</code></pre><blockquote><p>审查元素发现 Modal 组件是渲染在原来的组件的位置的，如果想要让它渲染到不同的位置怎么办呢？</p></blockquote><h2 id="13-4-ReactDOM-createPortal"><a href="#13-4-ReactDOM-createPortal" class="headerlink" title="13.4 ReactDOM.createPortal()"></a>13.4 ReactDOM.createPortal()</h2><p>普通的组件，子组件的元素将挂载到父组件的DOM节点中。</p><p>有时需要将元素渲染到DOM中的不同位置上去，这是就用到的portal的方法。</p><p><code>src/index.js</code></p><pre><code class="jsx">// src/index.js
import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/client&#39;

import App from &#39;./08_com/03_App_portal&#39; // 封装模态框 portal

const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;))

// 标签形式调用
root.render(&lt;App /&gt;)
</code></pre><p><code>src/08_com/03_App_portal.jsx</code></p><pre><code class="jsx">import React, &#123; Component &#125; from &#39;react&#39;;
import ReactDOM from &#39;react-dom&#39; // 这里不要使用 &#39;react-dom/client&#39; 引入
class Modal extends Component &#123;
  modalRef = React.createRef()
  render () &#123;
    return ReactDOM.createPortal(
      // &lt;div id=&#39;modal&#39; ref=&quot;modal&quot; style=&#123; &#123;
      &lt;div id=&#39;modal&#39; ref= &#123; this.modalRef &#125; style=&#123; &#123;
        position: &#39;fixed&#39;,
        top: 0,
        left: 0,
        bottom: 0,
        right: 0,
        backgroundColor: &#39;rgba(0,0,0, 0.4)&#39;,
        display: &#39;flex&#39;,
        justifyContent: &#39;center&#39;,
        alignItems: &#39;center&#39;
      &#125; &#125;
        // onClick = &#123; this.props.onClick &#125;
        onClick = &#123; (event) =&gt; &#123;
          console.log(event.target)
          console.log(document.getElementById(&#39;modal&#39;))
          console.log(this.modalRef)
          // if (event.target === document.getElementById(&#39;modal&#39;)) &#123; // ? id ?
          // if (event.target === this.refs.modal) &#123; // ? ref 删除线？
          if (event.target === this.modalRef.current) &#123; // ref的使用
            // 如何判断当前点击的是自身而不是子元素
            this.props.onClick()
          &#125;
          
        &#125; &#125;
      &gt;
        &lt;div style=&#123; &#123;
          width: &#39;50%&#39;,
          minHeight: &#39;300px&#39;,
          backgroundColor: &#39;#fff&#39;
        &#125; &#125;
          // onClick = &#123; event =&gt; &#123;
          //   event.stopPropagation()
          // &#125; &#125;
        &gt;
          这里是一个模态框
          &lt;button onClick=&#123; this.props.onClick &#125;&gt;关闭&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;,
      document.getElementsByTagName(&#39;body&#39;)[0]
    )
  &#125;
&#125;
class App extends Component &#123;
  state = &#123; show: false &#125;
  close = () =&gt; &#123;
    this.setState(&#123;
      show: false
    &#125;)
  &#125;
  render() &#123;
    return (
      &lt;div&gt;
        &lt;button onClick=&#123; () =&gt; this.setState(&#123; show: true &#125;)&#125;&gt;打开模态框&lt;/button&gt;
        &#123;
          this.state.show ? &lt;Modal onClick = &#123; this.close &#125;/&gt; : null
        &#125;
      &lt;/div&gt;
    );
  &#125;
&#125;

export default App;
</code></pre><blockquote><p>一个 portal 的典型用例是当父组件有 <code>overflow: hidden</code> 或 <code>z-index</code> 样式时，但你需要子组件能够在视觉上“跳出”其容器。例如，对话框、悬浮卡以及提示框：</p></blockquote><div class="tags"><a href="/tags/react/" rel="tag"><i class="ic i-tag"></i> react</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-10-31 10:21:19" itemprop="dateModified" datetime="2022-10-31T10:21:19+08:00">2022-10-31</time> </span><span id="react-study/5/" class="item leancloud_visitors" data-flag-title="React学习第五天" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 联系我</button><p>来交朋友吧！</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="叶星辰 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="叶星辰 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="叶星辰 QQ"><p>QQ</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>叶星辰 <i class="ic i-at"><em>@</em></i>永不陨落的星辰</li><li class="link"><strong>本文链接：</strong> <a href="https://www.yexingcheng.com/react-study/5/" title="React学习第五天">https://www.yexingcheng.com/react-study/5/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/react-study/4/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipeu7txpzj20zk0m81kx.jpg" title="React学习第四天"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> react学习</span><h3>React学习第四天</h3></a></div><div class="item right"><a href="/react-study/6/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giciundwu5j20zk0m8n9e.jpg" title="React学习第六天"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> react学习</span><h3>React学习第六天</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">1.</span> <span class="toc-text">九、条件渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-amp-amp"><span class="toc-number">1.1.</span> <span class="toc-text">9.1 &amp;&amp;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.2.</span> <span class="toc-text">9.2 三元运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-%E5%8A%A8%E6%80%81className"><span class="toc-number">1.3.</span> <span class="toc-text">9.3 动态className</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4-%E5%8A%A8%E6%80%81style"><span class="toc-number">1.4.</span> <span class="toc-text">9.4 动态style</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">2.</span> <span class="toc-text">十、列表渲染</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E8%A1%A8%E5%8D%95%E7%BB%91%E5%AE%9A"><span class="toc-number">3.</span> <span class="toc-text">十一、表单绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-%E5%90%84%E7%A7%8D%E8%A1%A8%E5%8D%95%E7%9A%84%E7%BB%91%E5%AE%9A%E4%B8%8E%E5%8F%96%E5%80%BC"><span class="toc-number">3.1.</span> <span class="toc-text">11.1 各种表单的绑定与取值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-%E5%8F%97%E6%8E%A7%E8%A1%A8%E5%8D%95%E4%BB%A5%E5%8F%8A%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6"><span class="toc-number">3.2.</span> <span class="toc-text">11.2 受控表单以及受控组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E7%8A%B6%E6%80%81%E6%8F%90%E5%8D%87"><span class="toc-number">4.</span> <span class="toc-text">十二、状态提升</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1-%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">4.1.</span> <span class="toc-text">12.1 父子组件通信</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-2-%E7%8A%B6%E6%80%81%E6%8F%90%E5%8D%87%E8%A7%A3%E8%AF%BB"><span class="toc-number">4.2.</span> <span class="toc-text">12.2 状态提升解读</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E7%BB%84%E5%90%88vs%E7%BB%A7%E6%89%BF"><span class="toc-number">5.</span> <span class="toc-text">十三、组合vs继承</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#13-1-%E7%90%86%E8%A7%A3%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="toc-number">5.1.</span> <span class="toc-text">13.1 理解组件化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-2-%E4%BD%BF%E7%94%A8%E7%BB%84%E5%90%88%E8%80%8C%E9%9D%9E%E7%BB%A7%E6%89%BF%E5%AE%9E%E7%8E%B0React%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="toc-number">5.2.</span> <span class="toc-text">13.2 使用组合而非继承实现React组件化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-3-%E5%B0%81%E8%A3%85Modal%E5%BC%B9%E7%AA%97"><span class="toc-number">5.3.</span> <span class="toc-text">13.3 封装Modal弹窗</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-4-ReactDOM-createPortal"><span class="toc-number">5.4.</span> <span class="toc-text">13.4 ReactDOM.createPortal()</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/react-study/1/" rel="bookmark" title="React学习第一天">React学习第一天</a></li><li><a href="/react-study/2/" rel="bookmark" title="React学习第二天">React学习第二天</a></li><li><a href="/react-study/3/" rel="bookmark" title="React学习第三天">React学习第三天</a></li><li><a href="/react-study/4/" rel="bookmark" title="React学习第四天">React学习第四天</a></li><li class="active"><a href="/react-study/5/" rel="bookmark" title="React学习第五天">React学习第五天</a></li><li><a href="/react-study/6/" rel="bookmark" title="React学习第六天">React学习第六天</a></li><li><a href="/react-study/7/" rel="bookmark" title="React学习第七天">React学习第七天</a></li><li><a href="/react-study/8/" rel="bookmark" title="React学习第八天">React学习第八天</a></li><li><a href="/react-study/react-router-params/" rel="bookmark" title="React路由传参的几种方式">React路由传参的几种方式</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="叶星辰" data-src="/images/avatar.jpg"><p class="name" itemprop="name">叶星辰</p><div class="description" itemprop="description">温柔正确的人总是难以生存，因为这个世界既不温柔 也不正确</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">39</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">7</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">17</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0NhMW1EMHduMQ==" title="https:&#x2F;&#x2F;github.com&#x2F;Ca1mD0wn1"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9VZmRIbw==" title="https:&#x2F;&#x2F;twitter.com&#x2F;UfdHo"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9tZW5nLXhpbmcteW91LWppLXNpLXl1ZS1odWFuZy0yNw==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;meng-xing-you-ji-si-yue-huang-27"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTUwMjkxOTQ0NQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;502919445"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20vdS83NTc4MjU1ODg1" title="https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;7578255885"><i class="ic i-weibo"></i></span> <span class="exturl item email" data-url="aHR0cHM6Ly9tYWlsLmdvb2dsZS5jb20vbWFpbC91LzAvI2luYm94" title="https:&#x2F;&#x2F;mail.google.com&#x2F;mail&#x2F;u&#x2F;0&#x2F;#inbox"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>friends</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>links</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/react-study/4/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/react-study/6/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/index/" title="分类于 index">index</a></div><span><a href="/Blog_introduction/Blog_introduction/" title="Welcome!">Welcome!</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vue3%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/" title="分类于 vue3移动端项目开发">vue3移动端项目开发</a></div><span><a href="/vue-mobile/11/" title="vue-mobile项目开发流程第十一部分(实现shopcar功能)">vue-mobile项目开发流程第十一部分(实现shopcar功能)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vue3%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/" title="分类于 vue3移动端项目开发">vue3移动端项目开发</a></div><span><a href="/vue-mobile/13/" title="vue-mobile项目开发流程第十三部分(实现提交订单功能)">vue-mobile项目开发流程第十三部分(实现提交订单功能)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vue3%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/" title="分类于 vue3移动端项目开发">vue3移动端项目开发</a></div><span><a href="/vue-mobile/12/" title="vue-mobile项目开发流程第十二部分(实现提交订单功能)">vue-mobile项目开发流程第十二部分(实现提交订单功能)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vue3%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/" title="分类于 vue3移动端项目开发">vue3移动端项目开发</a></div><span><a href="/vue-mobile/14/" title="vue-mobile项目开发流程第十四部分(实现kind和user页面)">vue-mobile项目开发流程第十四部分(实现kind和user页面)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vue3%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/" title="分类于 vue3移动端项目开发">vue3移动端项目开发</a></div><span><a href="/vue-mobile/4/" title="vue-mobile项目开发流程第四部分(开始构建项目)">vue-mobile项目开发流程第四部分(开始构建项目)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/react%E5%AD%A6%E4%B9%A0/" title="分类于 react学习">react学习</a></div><span><a href="/react-study/7/" title="React学习第七天">React学习第七天</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vue3%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/" title="分类于 vue3移动端项目开发">vue3移动端项目开发</a></div><span><a href="/vue-mobile/2/" title="vue-mobile项目开发流程第二部分(单文件组件介绍)">vue-mobile项目开发流程第二部分(单文件组件介绍)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/react%E5%AD%A6%E4%B9%A0/" title="分类于 react学习">react学习</a></div><span><a href="/react-study/4/" title="React学习第四天">React学习第四天</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vue3%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/" title="分类于 vue3移动端项目开发">vue3移动端项目开发</a></div><span><a href="/vue-mobile/9/" title="vue-mobile项目开发流程第九部分(构建login页面)">vue-mobile项目开发流程第九部分(构建login页面)</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2021 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">叶星辰 @ 永不陨落的星辰</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">625k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">9:28</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"react-study/5/",favicon:{show:"星辰",hide:"你快回来"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/miku.model.json"},"display":{"position":"right","width":250,"height":500},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html><!-- rebuild by hrmmi -->