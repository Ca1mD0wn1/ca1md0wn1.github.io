<!-- build time:Wed Nov 09 2022 11:12:10 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="永不陨落的星辰" href="https://www.yexingcheng.com/rss.xml"><link rel="alternate" type="application/atom+xml" title="永不陨落的星辰" href="https://www.yexingcheng.com/atom.xml"><link rel="alternate" type="application/json" title="永不陨落的星辰" href="https://www.yexingcheng.com/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="wxapp,ts"><link rel="canonical" href="https://www.yexingcheng.com/wx-app/day2/"><title>微信小程序学习第二天 - 微信小程序 | 永不陨落的星辰 = 永不陨落的星辰</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">微信小程序学习第二天</h1><div class="meta"><span class="item" title="创建时间：2022-11-01 00:00:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-11-01T00:00:00+08:00">2022-11-01</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>26k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>23 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">永不陨落的星辰</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclhnx9glj20zk0m8npd.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giciub8ja1j20zk0m81ky.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipevuctzzj20zk0m84qp.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipewr8iypj20zk0m8b29.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giph4wqtg4j20zk0m8x6p.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giph4fomxoj20zk0m8axp.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="item" rel="index" title="分类于 微信小程序"><span itemprop="name">微信小程序</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.yexingcheng.com/wx-app/day2/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="叶星辰"><meta itemprop="description" content=", 温柔正确的人总是难以生存，因为这个世界既不温柔 也不正确"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="永不陨落的星辰"></span><div class="body md" itemprop="articleBody"><h1 id="8小程序代码的构成"><a class="anchor" href="#8小程序代码的构成">#</a> 8. 小程序代码的构成</h1><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay8=">https://developers.weixin.qq.com/miniprogram/dev/framework/</span></p><blockquote><p>学习思路，从起步 - 小程序代码构成 开始，如果见到有链接，就跳转过去学习完整的知识</p></blockquote><h2 id="81-json配置"><a class="anchor" href="#81-json配置">#</a> 8.1 JSON 配置</h2><p>JSON 是一种数据格式，并不是编程语言，在小程序中，JSON 扮演的静态配置的角色</p><h3 id="811-小程序的配置-appjson"><a class="anchor" href="#811-小程序的配置-appjson">#</a> 8.1.1 小程序的配置 app.json</h3><p><code>app.json</code> 是当前小程序的全局配置，包括了小程序的所有页面路径、界面表现、网络超时时间、底部 tab 等</p><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb25maWcuaHRtbA==">https://developers.weixin.qq.com/miniprogram/dev/framework/config.html</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1s">https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html</span></p><p>小程序根目录下的 <code>app.json</code> 文件用来对微信小程序进行全局配置。文件内容为一个 JSON 对象，有以下属性：</p><table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left">类型</th><th style="text-align:left">必填</th><th style="text-align:left">描述</th><th style="text-align:left">最低版本</th></tr></thead><tbody><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2VudHJ5UGFnZVBhdGg=">entryPagePath</span></td><td style="text-align:left">string</td><td style="text-align:left">否</td><td style="text-align:left">小程序默认启动首页</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3BhZ2Vz">pages</span></td><td style="text-align:left">string[]</td><td style="text-align:left">是</td><td style="text-align:left">页面路径列表</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3dpbmRvdw==">window</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">全局的默认窗口表现</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3RhYkJhcg==">tabBar</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">底部 <code>tab</code> 栏的表现</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI25ldHdvcmtUaW1lb3V0">networkTimeout</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">网络超时时间</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2RlYnVn">debug</span></td><td style="text-align:left">boolean</td><td style="text-align:left">否</td><td style="text-align:left">是否开启 debug 模式，默认关闭</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2Z1bmN0aW9uYWxQYWdlcw==">functionalPages</span></td><td style="text-align:left">boolean</td><td style="text-align:left">否</td><td style="text-align:left">是否启用插件功能页，默认关闭</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.1.0</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3N1YnBhY2thZ2Vz">subpackages</span></td><td style="text-align:left">Object[]</td><td style="text-align:left">否</td><td style="text-align:left">分包结构配置</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">1.7.3</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3dvcmtlcnM=">workers</span></td><td style="text-align:left">string</td><td style="text-align:left">否</td><td style="text-align:left"><code>Worker</code> 代码放置的目录</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">1.9.90</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3JlcXVpcmVkQmFja2dyb3VuZE1vZGVz">requiredBackgroundModes</span></td><td style="text-align:left">string[]</td><td style="text-align:left">否</td><td style="text-align:left">需要在后台使用的能力，如「音乐播放」</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3BsdWdpbnM=">plugins</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">使用到的插件</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">1.9.6</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3ByZWxvYWRSdWxl">preloadRule</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">分包预下载规则</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.3.0</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3Jlc2l6YWJsZQ==">resizable</span></td><td style="text-align:left">boolean</td><td style="text-align:left">否</td><td style="text-align:left">PC 小程序是否支持用户任意改变窗口大小（包括最大化窗口）；iPad 小程序是否支持屏幕旋转。默认关闭</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.3.0</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3VzaW5nQ29tcG9uZW50cw==">usingComponents</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">全局<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jdXN0b20tY29tcG9uZW50Lw==">自定义组件</span>配置</td><td style="text-align:left">开发者工具 1.02.1810190</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3Blcm1pc3Npb24=">permission</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">小程序接口权限相关设置</td><td style="text-align:left">微信客户端 7.0.0</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3NpdGVtYXBMb2NhdGlvbg==">sitemapLocation</span></td><td style="text-align:left">string</td><td style="text-align:left">是</td><td style="text-align:left">指明 sitemap.json 的位置</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3N0eWxl">style</span></td><td style="text-align:left">string</td><td style="text-align:left">否</td><td style="text-align:left">指定使用升级后的 weui 样式</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.8.0</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3VzZWV4dGVuZGVkbGli">useExtendedLib</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">指定需要引用的扩展库</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.2.1</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2VudHJhbmNlRGVjbGFyZQ==">entranceDeclare</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">微信消息用小程序打开</td><td style="text-align:left">微信客户端 7.0.9</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2Rhcmttb2Rl">darkmode</span></td><td style="text-align:left">boolean</td><td style="text-align:left">否</td><td style="text-align:left">小程序支持 DarkMode</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.11.0</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3RoZW1lTG9jYXRpb24=">themeLocation</span></td><td style="text-align:left">string</td><td style="text-align:left">否</td><td style="text-align:left">指明 theme.json 的位置，darkmode 为 true 为必填</td><td style="text-align:left">开发者工具 1.03.2004271</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2xhenlDb2RlTG9hZGluZw==">lazyCodeLoading</span></td><td style="text-align:left">string</td><td style="text-align:left">否</td><td style="text-align:left">配置自定义组件代码按需注入</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.11.1</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3NpbmdsZVBhZ2U=">singlePage</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">单页模式相关配置</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.12.0</span></td></tr><tr><td style="text-align:left">supportedMaterials</td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9tYXRlcmlhbC9zdXBwb3J0X21hdGVyaWFsLmh0bWw=">聊天素材小程序打开</span>相关配置</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.14.3</span></td></tr><tr><td style="text-align:left">serviceProviderTicket</td><td style="text-align:left">string</td><td style="text-align:left">否</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vZG9jL29wbGF0Zm9ybS9UaGlyZC1wYXJ0eV9QbGF0Zm9ybXMvMi4wL29wZXJhdGlvbi90aGlyZHBhcnR5L2N1c3RvbWl6ZWRfc2VydmljZV9wbGF0Zm9ybV9ndWlkZWxpbmVzLmh0bWw=">定制化型服务商</span>票据</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2VtYmVkZGVkQXBwSWRMaXN0">embeddedAppIdList</span></td><td style="text-align:left">string[]</td><td style="text-align:left">否</td><td style="text-align:left">半屏小程序 appId</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.20.1</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2hhbGZQYWdl">halfPage</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">视频号直播半屏场景设置</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.18.0</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2RlYnVnT3B0aW9ucw==">debugOptions</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">调试相关配置</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.22.1</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI2VuYWJsZVBhc3NpdmVFdmVudA==">enablePassiveEvent</span></td><td style="text-align:left">Object 或 boolean</td><td style="text-align:left">否</td><td style="text-align:left">touch 事件监听是否为 passive</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.24.1</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3Jlc29sdmVBbGlhcw==">resolveAlias</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">自定义模块映射规则</td><td style="text-align:left"></td></tr></tbody></table><ul><li><strong>entryPagePath</strong></li></ul><p>设置小程序默认的启动页面，如果不作设置，那么将会取 pages 数组 的第一项为默认启动项，开发过程中，一般不建议这么使用，你可以使用开发者工具中 添加编译模式 快速解决问题</p><p><img data-src="13.png" alt="image-20220530113321490"></p><p><img data-src="14.png" alt="image-20220530113402566"></p><ul><li><strong>pages</strong></li></ul><p>用于指定小程序由哪些页面组成，每一项都对应一个页面的 路径（含文件名） 信息。文件名不需要写文件后缀，框架会自动去寻找对应位置的 <code>.json</code> , <code>.js</code> , <code>.wxml</code> , <code>.wxss</code> 四个文件进行处理。</p><p>如何给小程序快速添加页面，写好页面后直接保存即可</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token property">"pages"</span><span class="token operator">:</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token string">"pages/home/home"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token string">"pages/logs/logs"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token string">"pages/kind/kind"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token string">"pages/cart/cart"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token string">"pages/user/user"</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  ...</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li><strong>window</strong></li></ul><p>用于设置小程序的状态栏、导航条、标题、窗口背景色。</p><table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left">类型</th><th style="text-align:left">默认值</th><th style="text-align:left">描述</th><th style="text-align:left">最低版本</th></tr></thead><tbody><tr><td style="text-align:left">navigationBarBackgroundColor</td><td style="text-align:left">HexColor</td><td style="text-align:left">#000000</td><td style="text-align:left">导航栏背景颜色，如 <code>#000000</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">navigationBarTextStyle</td><td style="text-align:left">string</td><td style="text-align:left">white</td><td style="text-align:left">导航栏标题颜色，仅支持 <code>black</code> / <code>white</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">navigationBarTitleText</td><td style="text-align:left">string</td><td style="text-align:left"></td><td style="text-align:left">导航栏标题文字内容</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">navigationStyle</td><td style="text-align:left">string</td><td style="text-align:left">default</td><td style="text-align:left">导航栏样式，仅支持以下值： <code>default</code> 默认样式 <code>custom</code> 自定义导航栏，只保留右上角胶囊按钮。参见注 2。</td><td style="text-align:left">iOS/Android 微信客户端 6.6.0，Windows 微信客户端不支持</td></tr><tr><td style="text-align:left">backgroundColor</td><td style="text-align:left">HexColor</td><td style="text-align:left">#ffffff</td><td style="text-align:left">窗口的背景色</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">backgroundTextStyle</td><td style="text-align:left">string</td><td style="text-align:left">dark</td><td style="text-align:left">下拉 loading 的样式，仅支持 <code>dark</code> / <code>light</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">backgroundColorTop</td><td style="text-align:left">string</td><td style="text-align:left">#ffffff</td><td style="text-align:left">顶部窗口的背景色，仅 iOS 支持</td><td style="text-align:left">微信客户端 6.5.16</td></tr><tr><td style="text-align:left">backgroundColorBottom</td><td style="text-align:left">string</td><td style="text-align:left">#ffffff</td><td style="text-align:left">底部窗口的背景色，仅 iOS 支持</td><td style="text-align:left">微信客户端 6.5.16</td></tr><tr><td style="text-align:left">enablePullDownRefresh</td><td style="text-align:left">boolean</td><td style="text-align:left">false</td><td style="text-align:left">是否开启全局的下拉刷新。 详见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29ucHVsbGRvd25yZWZyZXNo">Page.onPullDownRefresh</span></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">onReachBottomDistance</td><td style="text-align:left">number</td><td style="text-align:left">50</td><td style="text-align:left">页面上拉触底事件触发时距页面底部距离，单位为 px。 详见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29ucmVhY2hib3R0b20=">Page.onReachBottom</span></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">pageOrientation</td><td style="text-align:left">string</td><td style="text-align:left">portrait</td><td style="text-align:left">屏幕旋转设置，支持 <code>auto</code> / <code>portrait</code> / <code>landscape</code> 详见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay92aWV3L3Jlc2l6YWJsZS5odG1s">响应显示区域变化</span></td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.4.0</span> (auto) / <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.5.0</span> (landscape)</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1sI3Jlc3RhcnRTdHJhdGVneQ==">restartStrategy</span></td><td style="text-align:left">string</td><td style="text-align:left">homePage</td><td style="text-align:left">重新启动策略配置</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.8.0</span></td></tr><tr><td style="text-align:left">initialRenderingCache</td><td style="text-align:left">string</td><td style="text-align:left"></td><td style="text-align:left">页面<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay92aWV3L2luaXRpYWwtcmVuZGVyaW5nLWNhY2hlLmh0bWw=">初始渲染缓存</span>配置，支持 <code>static</code> / <code>dynamic</code></td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.11.1</span></td></tr><tr><td style="text-align:left">visualEffectInBackground</td><td style="text-align:left">string</td><td style="text-align:left">none</td><td style="text-align:left">切入系统后台时，隐藏页面内容，保护用户隐私。支持 <code>hidden</code> / <code>none</code></td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.15.0</span></td></tr><tr><td style="text-align:left">handleWebviewPreload</td><td style="text-align:left">string</td><td style="text-align:left">static</td><td style="text-align:left">控制<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9wZXJmb3JtYW5jZS90aXBzL3J1bnRpbWVfbmF2Lmh0bWwjXzItNC0lRTYlOEUlQTclRTUlODglQjYlRTklQTIlODQlRTUlOEElQTAlRTglQkQlQkQlRTQlQjglOEIlRTQlQjglQUElRTklQTElQjUlRTklOUQlQTIlRTclOUElODQlRTYlOTclQjYlRTYlOUMlQkE=">预加载下个页面的时机</span>。支持 <code>static</code> / <code>manual</code> / <code>auto</code></td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.15.0</span></td></tr></tbody></table><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> ...<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token property">"window"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token property">"navigationBarBackgroundColor"</span><span class="token operator">:</span> <span class="token string">"#f66"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token property">"navigationBarTextStyle"</span><span class="token operator">:</span> <span class="token string">"white"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"嗨购"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token property">"navigationStyle"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token property">"homeButton"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token property">"backgroundColor"</span><span class="token operator">:</span> <span class="token string">"#123123"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token property">"backgroundTextStyle"</span><span class="token operator">:</span> <span class="token string">"dark"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token property">"enablePullDownRefresh"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token property">"pageOrientation"</span><span class="token operator">:</span> <span class="token string">"portrait"</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  ....</pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li><strong>tabBar</strong></li></ul><p>如果小程序是一个多 tab 应用（客户端窗口的底部或顶部有 tab 栏可以切换页面），可以通过 tabBar 配置项指定 tab 栏的表现，以及 tab 切换时显示的对应页面。</p><table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left">类型</th><th style="text-align:left">必填</th><th style="text-align:left">默认值</th><th style="text-align:left">描述</th><th style="text-align:left">最低版本</th></tr></thead><tbody><tr><td style="text-align:left">color</td><td style="text-align:left">HexColor</td><td style="text-align:left">是</td><td style="text-align:left"></td><td style="text-align:left">tab 上的文字默认颜色，仅支持十六进制颜色</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">selectedColor</td><td style="text-align:left">HexColor</td><td style="text-align:left">是</td><td style="text-align:left"></td><td style="text-align:left">tab 上的文字选中时的颜色，仅支持十六进制颜色</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">backgroundColor</td><td style="text-align:left">HexColor</td><td style="text-align:left">是</td><td style="text-align:left"></td><td style="text-align:left">tab 的背景色，仅支持十六进制颜色</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">borderStyle</td><td style="text-align:left">string</td><td style="text-align:left">否</td><td style="text-align:left">black</td><td style="text-align:left">tabbar 上边框的颜色， 仅支持 <code>black</code> / <code>white</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">list</td><td style="text-align:left">Array</td><td style="text-align:left">是</td><td style="text-align:left"></td><td style="text-align:left">tab 的列表，详见 <code>list</code> 属性说明，最少 2 个、最多 5 个 tab</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">position</td><td style="text-align:left">string</td><td style="text-align:left">否</td><td style="text-align:left">bottom</td><td style="text-align:left">tabBar 的位置，仅支持 <code>bottom</code> / <code>top</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">custom</td><td style="text-align:left">boolean</td><td style="text-align:left">否</td><td style="text-align:left">false</td><td style="text-align:left">自定义 tabBar，见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9hYmlsaXR5L2N1c3RvbS10YWJiYXIuaHRtbA==">详情</span></td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.5.0</span></td></tr></tbody></table><p>其中 list 接受一个数组，<strong>只能配置最少 2 个、最多 5 个 tab</strong>。tab 按数组的顺序排序，每个项都是一个对象，其属性值如下：</p><table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left">类型</th><th style="text-align:left">必填</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">pagePath</td><td style="text-align:left">string</td><td style="text-align:left">是</td><td style="text-align:left">页面路径，必须在 pages 中先定义</td></tr><tr><td style="text-align:left">text</td><td style="text-align:left">string</td><td style="text-align:left">是</td><td style="text-align:left">tab 上按钮文字</td></tr><tr><td style="text-align:left">iconPath</td><td style="text-align:left">string</td><td style="text-align:left">否</td><td style="text-align:left">图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。 <strong>当 <code>position</code> 为 <code>top</code> 时，不显示 icon。</strong></td></tr><tr><td style="text-align:left">selectedIconPath</td><td style="text-align:left">string</td><td style="text-align:left">否</td><td style="text-align:left">选中时的图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。 <strong>当 <code>position</code> 为 <code>top</code> 时，不显示 icon。</strong></td></tr></tbody></table><blockquote><p>如何获取项目需要的图片</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuaWNvbmZvbnQuY24v">https://www.iconfont.cn/</span></p><p>搜索图标 - 加入购物车 - 点击购物车 - 下载素材</p><p>输入颜色 #333333 和 #ff6666。选择大小为 81px，下载 png 图片即可</p></blockquote><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> ...<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token property">"tabBar"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token property">"color"</span><span class="token operator">:</span> <span class="token string">"#333"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token property">"selectedColor"</span><span class="token operator">:</span> <span class="token string">"#f66"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token property">"backgroundColor"</span><span class="token operator">:</span> <span class="token string">"#efefef"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token property">"borderStyle"</span><span class="token operator">:</span> <span class="token string">"black"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token property">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="9"></td><td><pre>          <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/home/home"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"首页"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"resources/tabBar/home.png"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"resources/tabBar/home_active.png"</span></pre></td></tr><tr><td data-num="14"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>          <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/kind/kind"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"分类"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"resources/tabBar/kind.png"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"resources/tabBar/kind_active.png"</span></pre></td></tr><tr><td data-num="20"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>          <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/cart/cart"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"购物车"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"resources/tabBar/cart.png"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"resources/tabBar/cart_active.png"</span></pre></td></tr><tr><td data-num="26"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="27"></td><td><pre>          <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/user/user"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"我的"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"resources/tabBar/user.png"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"resources/tabBar/user_active.png"</span></pre></td></tr><tr><td data-num="32"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="34"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="35"></td><td><pre>  ...</pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li><strong>networkTimeout</strong></li></ul><p>各类网络请求的超时时间，单位均为毫秒。</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> ...<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token property">"networkTimeout"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token property">"request"</span><span class="token operator">:</span> <span class="token number">6000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token property">"connectSocket"</span><span class="token operator">:</span> <span class="token number">4000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token property">"uploadFile"</span><span class="token operator">:</span> <span class="token number">600000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token property">"downloadFile"</span><span class="token operator">:</span> <span class="token number">6000000</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  ....</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>debug</li></ul><p>可以在开发者工具中开启 <code>debug</code> 模式，在开发者工具的控制台面板，调试信息以 <code>info</code> 的形式给出，其信息有 Page 的注册，页面路由，数据更新，事件触发等。可以帮助开发者快速定位一些常见的问题。</p><pre><code>&#123;
 ...,
 &quot;debug&quot;: false,
 ....
&#125;
</code></pre><blockquote><p>底部 tab 选项卡对应的页面，会自动添加类似 vue 中的 keep-alive 的功能，原来的 activated 和 deactivated 分别对应小程序中的。onShow 和 onHide</p></blockquote><ul><li><strong>subpackages</strong></li></ul><p>启用<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9zdWJwYWNrYWdlcy5odG1s">分包加载</span>时，声明项目分包结构。</p><blockquote><p>分包加载：</p><ul><li>整个小程序所有分包大小不超过 20M</li><li>单个分包 / 主包大小不能超过 2M</li></ul><p><strong>使用分包</strong></p><p><strong>独立分包</strong></p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token property">"subPackages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token property">"root"</span><span class="token operator">:</span> <span class="token string">"pckSearch"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"search"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token string">"pages/search/search"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token string">"pages/result/result"</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token property">"independent"</span><span class="token operator">:</span> <span class="token boolean">true</span> </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token property">"root"</span><span class="token operator">:</span> <span class="token string">"pckUser"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token string">"pages/login/login"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token string">"pages/register/register"</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token property">"debug"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr></table></figure><blockquote><p><strong>开启 debug 模式，添加编译模式，调试分包的页面，观察 独立分包和 非独立分包的效果，通过控制台的 console 查看</strong></p></blockquote><p><strong>分包预下载</strong></p><p>开发者可以通过配置，在进入小程序某个页面时，由框架自动预下载可能需要的分包，提升进入后续分包页面时的启动速度。</p><blockquote><p>做一个电商类型的小程序，大部分的用户一定回去搜索，所以可以把搜索相关业务写到分包，当用户打开主包时，预下载 搜索的分包</p></blockquote><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> ...<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token property">"subPackages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>          <span class="token property">"root"</span><span class="token operator">:</span> <span class="token string">"pckSearch"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>          <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"pckSearch"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>          <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token string">"pages/search/search"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token string">"pages/result/result"</span></pre></td></tr><tr><td data-num="10"></td><td><pre>          <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>          <span class="token property">"independent"</span><span class="token operator">:</span> <span class="token boolean">true</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>          <span class="token property">"root"</span><span class="token operator">:</span> <span class="token string">"pckUser"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>          <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"pckUser"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>          <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token string">"pages/login/login"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token string">"pages/register/register"</span></pre></td></tr><tr><td data-num="19"></td><td><pre>          <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>     <span class="token property">"preloadRule"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>       <span class="token property">"pages/home/home"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>         <span class="token property">"network"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="25"></td><td><pre>         <span class="token property">"packages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="26"></td><td><pre>          <span class="token string">"pckSearch"</span></pre></td></tr><tr><td data-num="27"></td><td><pre>         <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="28"></td><td><pre>       <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>     <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  ...</pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></blockquote><p>整体的全局配置文件如下：</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token string">"pages/home/home"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token string">"pages/kind/kind"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token string">"pages/cart/cart"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token string">"pages/user/user"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token string">"pages/detail/detail"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token string">"pages/logs/logs"</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token property">"window"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token property">"navigationBarBackgroundColor"</span><span class="token operator">:</span> <span class="token string">"#f66"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token property">"navigationBarTextStyle"</span><span class="token operator">:</span> <span class="token string">"white"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"嗨购"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token property">"navigationStyle"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token property">"backgroundColor"</span><span class="token operator">:</span> <span class="token string">"#efefef"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token property">"backgroundTextStyle"</span><span class="token operator">:</span> <span class="token string">"dark"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token property">"restartStrategy"</span><span class="token operator">:</span> <span class="token string">"homePageAndLatestPage"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token property">"visualEffectInBackground"</span><span class="token operator">:</span> <span class="token string">"hidden"</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token property">"tabBar"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token property">"color"</span><span class="token operator">:</span> <span class="token string">"#333"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token property">"selectedColor"</span><span class="token operator">:</span> <span class="token string">"#f66"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token property">"backgroundColor"</span><span class="token operator">:</span> <span class="token string">"#efefef"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token property">"borderStyle"</span><span class="token operator">:</span> <span class="token string">"black"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token property">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/home/home"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"首页"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"tabBar/home.png"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"tabBar/home_active.png"</span></pre></td></tr><tr><td data-num="32"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="33"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/kind/kind"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"分类"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"tabBar/kind.png"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"tabBar/kind_active.png"</span></pre></td></tr><tr><td data-num="38"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="39"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/cart/cart"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"购物车"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"tabBar/cart.png"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"tabBar/cart_active.png"</span></pre></td></tr><tr><td data-num="44"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="45"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/user/user"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"我的"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"tabBar/user.png"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"tabBar/user_active.png"</span></pre></td></tr><tr><td data-num="50"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="52"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="53"></td><td><pre>  <span class="token property">"networkTimeout"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    <span class="token property">"request"</span><span class="token operator">:</span> <span class="token number">6000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token property">"connectSocket"</span><span class="token operator">:</span> <span class="token number">6000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token property">"uploadFile"</span><span class="token operator">:</span> <span class="token number">60000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    <span class="token property">"downloadFile"</span><span class="token operator">:</span> <span class="token number">60000</span></pre></td></tr><tr><td data-num="58"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="59"></td><td><pre>  <span class="token property">"subpackages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>      <span class="token property">"root"</span><span class="token operator">:</span> <span class="token string">"packageSearch"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="62"></td><td><pre>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"packageSearch"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="63"></td><td><pre>      <span class="token property">"independent"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="64"></td><td><pre>      <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="65"></td><td><pre>        <span class="token string">"pages/search/search"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="66"></td><td><pre>        <span class="token string">"pages/result/result"</span></pre></td></tr><tr><td data-num="67"></td><td><pre>      <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="69"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>      <span class="token property">"root"</span><span class="token operator">:</span> <span class="token string">"packageUser"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="71"></td><td><pre>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"packageUser"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="72"></td><td><pre>      <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="73"></td><td><pre>        <span class="token string">"pages/register/register"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="74"></td><td><pre>        <span class="token string">"pages/login/login"</span></pre></td></tr><tr><td data-num="75"></td><td><pre>      <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="76"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="77"></td><td><pre>  <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="78"></td><td><pre>  <span class="token property">"preloadRule"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>    <span class="token property">"pages/home/home"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>      <span class="token property">"network"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="81"></td><td><pre>      <span class="token property">"packages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"packageSearch"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="82"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="84"></td><td><pre>  <span class="token property">"debug"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="85"></td><td><pre>  <span class="token property">"style"</span><span class="token operator">:</span> <span class="token string">"v2"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="86"></td><td><pre>  <span class="token property">"sitemapLocation"</span><span class="token operator">:</span> <span class="token string">"sitemap.json"</span></pre></td></tr><tr><td data-num="87"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="812-工具配置-projectconfigjson"><a class="anchor" href="#812-工具配置-projectconfigjson">#</a> 8.1.2 工具配置 project.config.json</h3><h2 id="项目配置文件"><a class="anchor" href="#项目配置文件">#</a> 项目配置文件</h2><ol><li>项目根目录中的 <code>project.config.json</code> 和 <code>project.private.config.json</code> 文件可以对项目进行配置，</li><li><code>project.private.config.json</code> 中的相同设置优先级高于 <code>project.config.json</code></li><li>可以在 <code>project.config.json</code> 文件中配置公共的配置，在 <code>project.private.config.json</code> 配置个人的配置，可以将 <code>project.private.config.json</code> 写到 <code>.gitignore</code> 避免版本管理的冲突。</li><li><code>project.private.config.json</code> 中有的字段，开发者工具内的设置修改会优先覆盖 <code>project.private.config.json</code> 的内容。如在 <code>project.private.config.json</code> 有 <code>appid</code> 字段，那么在 详情 - 基本信息 中修改了 appid，会写到 <code>project.private.config.json</code> 中，不会覆盖掉 <code>project.config.json</code> 的 <code>appid</code> 字段的内容</li><li>开发阶段相关的设置修改优先同步到 <code>project.private.config.json</code> 中，但与最终编译产物有关的设置无法在 <code>project.private.config.json</code> 中生效，界面上的改动也不会同步到 <code>project.private.config.json</code> 文件中。详见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNzZXR0aW5n">表格</span> 是否允许私有设置。</li></ol><h2 id="一级字段"><a class="anchor" href="#一级字段">#</a> 一级字段</h2><p>可以在项目根目录使用 <code>project.config.json</code> 文件对项目进行配置。</p><table><thead><tr><th style="text-align:left">字段名</th><th style="text-align:left">类型</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">miniprogramRoot</td><td style="text-align:left">Path String</td><td style="text-align:left">指定小程序源码的目录 (需为相对路径)</td></tr><tr><td style="text-align:left">qcloudRoot</td><td style="text-align:left">Path String</td><td style="text-align:left">指定腾讯云项目的目录 (需为相对路径)</td></tr><tr><td style="text-align:left">pluginRoot</td><td style="text-align:left">Path String</td><td style="text-align:left">指定插件项目的目录 (需为相对路径)</td></tr><tr><td style="text-align:left">cloudbaseRoot</td><td style="text-align:left">Path String</td><td style="text-align:left">云开发代码根目录 (需为相对路径)</td></tr><tr><td style="text-align:left">cloudfunctionRoot</td><td style="text-align:left">Path String</td><td style="text-align:left">云函数代码根目录 (需为相对路径)</td></tr><tr><td style="text-align:left">cloudfunctionTemplateRoot</td><td style="text-align:left">Path String</td><td style="text-align:left">云函数本地调试请求模板的根目录 (需为相对路径)</td></tr><tr><td style="text-align:left">cloudcontainerRoot</td><td style="text-align:left">Path String</td><td style="text-align:left">云托管代码根目录 (需为相对路径)</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNjb21waWxlVHlwZQ==">compileType</span></td><td style="text-align:left">String</td><td style="text-align:left">编译类型</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNzZXR0aW5n">setting</span></td><td style="text-align:left">Object</td><td style="text-align:left">项目设置</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNsaWJWZXJzaW9u">libVersion</span></td><td style="text-align:left">String</td><td style="text-align:left">基础库版本</td></tr><tr><td style="text-align:left">appid</td><td style="text-align:left">String</td><td style="text-align:left">项目的 appid</td></tr><tr><td style="text-align:left">projectname</td><td style="text-align:left">String</td><td style="text-align:left">项目名字</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNwYWNrT3B0aW9ucw==">packOptions</span></td><td style="text-align:left">Object</td><td style="text-align:left">打包配置选项</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNkZWJ1Z09wdGlvbnM=">debugOptions</span></td><td style="text-align:left">Object</td><td style="text-align:left">调试配置选项</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCN3YXRjaE9wdGlvbnM=">watchOptions</span></td><td style="text-align:left">Object</td><td style="text-align:left">文件监听配置设置</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNzY3JpcHRz">scripts</span></td><td style="text-align:left">Object</td><td style="text-align:left">自定义预处理</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaWdhbWUvZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcjc3RhdGljU2VydmVyT3B0aW9ucw==">staticServerOptions</span></td><td style="text-align:left">Object</td><td style="text-align:left">仅在小游戏项目中有效</td></tr></tbody></table><h3 id="compiletype"><a class="anchor" href="#compiletype">#</a> compileType</h3><p>编译类型作用于开发工具的以下设置</p><p><img data-src="image-20221101090136819.png" alt="image-20221101090136819"></p><p>有效值</p><table><thead><tr><th style="text-align:left">名字</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">miniprogram</td><td style="text-align:left">当前为普通小程序项目</td></tr><tr><td style="text-align:left">plugin</td><td style="text-align:left">当前为小程序插件项目</td></tr></tbody></table><h3 id="setting"><a class="anchor" href="#setting">#</a> setting</h3><p>项目的编译设置，可以指定以下设置。部分设置无法在 <code>project.private.config.json</code> 中生效</p><p>以下字段可以开发者工具 - 详情 - 本地设置可以对应上</p><p><img data-src="image-20221101090621855.png" alt="image-20221101090621855"></p><table><thead><tr><th style="text-align:left">字段名</th><th style="text-align:left">类型</th><th style="text-align:left">允许私有设置 [1]</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">es6</td><td style="text-align:left">Boolean</td><td style="text-align:left">否</td><td style="text-align:left">是否启用 es6 转 es5 [2]</td></tr><tr><td style="text-align:left">enhance</td><td style="text-align:left">Boolean</td><td style="text-align:left">否</td><td style="text-align:left">是否打开增强编译 [2]</td></tr><tr><td style="text-align:left">postcss</td><td style="text-align:left">Boolean</td><td style="text-align:left">否</td><td style="text-align:left">上传代码时样式是否自动补全</td></tr><tr><td style="text-align:left">minified</td><td style="text-align:left">Boolean</td><td style="text-align:left">否</td><td style="text-align:left">上传代码时是否自动压缩脚本文件</td></tr><tr><td style="text-align:left">minifyWXSS</td><td style="text-align:left">Boolean</td><td style="text-align:left">否</td><td style="text-align:left">上传代码时是否自动压缩样式文件</td></tr><tr><td style="text-align:left">minifyWXML</td><td style="text-align:left">Boolean</td><td style="text-align:left">否</td><td style="text-align:left">上传代码时是否自动压缩 WXML 文件</td></tr><tr><td style="text-align:left">uglifyFileName</td><td style="text-align:left">Boolean</td><td style="text-align:left">否</td><td style="text-align:left">上传时进行代码保护</td></tr><tr><td style="text-align:left">ignoreUploadUnusedFiles</td><td style="text-align:left">Boolean</td><td style="text-align:left">否</td><td style="text-align:left">上传时是否过滤无依赖文件</td></tr><tr><td style="text-align:left">autoAudits</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否自动运行体验评分</td></tr><tr><td style="text-align:left">urlCheck</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否检查安全域名和 TLS 版本</td></tr><tr><td style="text-align:left">compileHotReLoad</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否开启文件保存后自动热重载</td></tr><tr><td style="text-align:left">preloadBackgroundData</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">小程序加载时是否数据预拉取</td></tr><tr><td style="text-align:left">lazyloadPlaceholderEnable</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否启用懒注入占位组件调试 [3]</td></tr><tr><td style="text-align:left">useStaticServer</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">仅在小游戏项目有效，是否开启静态资源服务器 [4]</td></tr><tr><td style="text-align:left">bigPackageSizeSupport</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">预览及真机调试的时主包、分包体积上限调整为 4M（小程序）、8M（小游戏）</td></tr></tbody></table><p>以下字段是开发者工具的隐式设置</p><table><thead><tr><th style="text-align:left">字段名</th><th style="text-align:left">类型</th><th style="text-align:left">允许私有设置 [1]</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCNiYWJlbFNldHRpbmc=">babelSetting</span></td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">增强编译下 Babel 的配置项</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL3Byb2plY3Rjb25maWcuaHRtbCN1c2VDb21waWxlclBsdWdpbnM=">useCompilerPlugins</span></td><td style="text-align:left">String [] 或 false</td><td style="text-align:left">否</td><td style="text-align:left">编译插件配置</td></tr><tr><td style="text-align:left">disableUseStrict</td><td style="text-align:left">Boolean</td><td style="text-align:left">否</td><td style="text-align:left">将 JS 编译成 ES5 时，是否禁用严格模式</td></tr><tr><td style="text-align:left">uploadWithSourceMap</td><td style="text-align:left">Boolean</td><td style="text-align:left">否</td><td style="text-align:left">上传时是否带上 sourcemap（默认为 true）</td></tr><tr><td style="text-align:left">localPlugins</td><td style="text-align:left">Boolean</td><td style="text-align:left">否</td><td style="text-align:left">在小游戏插件项目中，是否启用 “以本地目录为插件资源来源”[5] 特性</td></tr><tr><td style="text-align:left">packNpmManually</td><td style="text-align:left">Boolean</td><td style="text-align:left">否</td><td style="text-align:left">是否手动配置构建 npm 的路径</td></tr><tr><td style="text-align:left">packNpmRelationList</td><td style="text-align:left">Array</td><td style="text-align:left">否</td><td style="text-align:left">仅 <code>packNpmManually</code> 为 true 时生效，详细参考<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2RldnRvb2xzL25wbS5odG1s">构建 npm 文档</span></td></tr><tr><td style="text-align:left">coverView</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否使用工具渲染 CoverView</td></tr><tr><td style="text-align:left">ignoreDevUnusedFiles</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">预览、真机调试和本地模拟器等开发阶段是否过滤无依赖文件（默认为 true）</td></tr><tr><td style="text-align:left">checkInvalidKey</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否展示 JSON 文件校验错误信息</td></tr><tr><td style="text-align:left">showShadowRootInWxmlPanel</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否开启调试器 WXML 面板展示 shadow-root</td></tr><tr><td style="text-align:left">useIsolateContext</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否开启小程序独立域调试特性 [6]</td></tr><tr><td style="text-align:left">useMultiFrameRuntime</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否开启模拟器预先载入小程序的某些资源 [7]。此设定为 false 时会导致 <code>useIsolateContext</code> 失效</td></tr><tr><td style="text-align:left">useApiHook</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否启用 API Hook 功能 [8]</td></tr><tr><td style="text-align:left">useApiHostProcess</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否在额外的进程处理一些小程序 API [9]</td></tr><tr><td style="text-align:left">useLanDebug</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">仅在小游戏有效，是否开启局域网调试服务器</td></tr><tr><td style="text-align:left">enableEngineNative</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否在游戏引擎项目中开启支持引用 node 原生模块的底层加速特性</td></tr><tr><td style="text-align:left">showES6CompileOption</td><td style="text-align:left">Boolean</td><td style="text-align:left">是</td><td style="text-align:left">是否在本地设置中展示传统的 ES6 转 ES5 开关（对应 es6），增强编译开关 （对应 enhance）</td></tr></tbody></table><p><strong>注 1</strong>: 开发阶段相关的设置修改优先同步到 <code>project.private.config.json</code> 中，但最终编译产物有关的设置无法在 <code>project.private.config.json</code> 中生效，界面上的改动也不会同步到 <code>project.private.config.json</code> 文件中。</p><p><strong>注 2</strong>: <code>es6</code> 和 <code>enhance</code> 需同时为 true/false，对应于 <code>将 JS 编译成 ES5</code></p><p><strong>注 3</strong>: (<strong>懒注入占位组件调试</strong>) 开启<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9hYmlsaXR5L2xhenlsb2Fk">按需注入</span>后在项目设置面板中会出现对应的勾选项，开启之后，按需注入的组件将会停止注入，页面停止在占位组件状态，便于调试自定义占位组件。</p><p><strong>注 4</strong>: (<strong>静态资源服务器</strong>) 可以托管项目本地的静态资源，主要用于在预览时测试小游戏真机资源加载的效果。</p><p><strong>注 5</strong>: (<strong>以本地目录为插件资源来源</strong>) 启用此特性后，工具将停止从线上获取小游戏插件包内容，并将检验本地相应目录的文件完整性。仅对小游戏插件项目有效。要以本地磁盘目录作为插件的资源来源，需要同时在小游戏插件项目的 game.json 中配置相关的属性。</p><p><strong>注 6</strong>: (<strong>小程序独立域调试</strong>) 一种新的小程序内部代码的执行方式，仅影响工具侧的调试过程。未来将取代传统的执行方式并成为默认选择。仅在 2.11.1 及以上基础库有效。关闭此特性可能有助于规避一些调试中遇到的未知报错。</p><p><strong>注 7</strong>: (<strong>预先载入小程序的某些资源</strong>) 开启此内部特性后，调试时小程序的重新载入可能会更快一些。此设定不影响真机和实际运行效果。</p><p><strong>注 8</strong>: (<strong>API Hook 功能</strong>) 关闭此内部特性可能导致工具的某些调试功能（例如 mock）失效。此设定不影响真机运行效果。</p><p><strong>注 9</strong>: (<strong>额外进程</strong>) 开启此内部特性后，部分 API 的调用会被移到单独的进程以减轻工具主进程的负担。此设定不影响真机运行效果。</p><h4 id="usecompilerplugins"><a class="anchor" href="#usecompilerplugins">#</a> useCompilerPlugins</h4><p>编译插件配置，目前支持编译插件有 typescript、less、sass</p><p>如</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"setting"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">"useCompilerPlugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token string">"typescript"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token string">"less"</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>表示项目支持直接使用 typescript 和 less</p><h4 id="babelsetting"><a class="anchor" href="#babelsetting">#</a> babelSetting</h4><p><code>将 JS 编译为 ES5</code> 时 Babel 的配置项，其中可以指定以下设置</p><table><thead><tr><th style="text-align:left">字段名</th><th style="text-align:left">类型</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">outputPath</td><td style="text-align:left">String</td><td style="text-align:left">Babel 辅助函数的输出目录，默认为 <code>@babel/runtime</code></td></tr><tr><td style="text-align:left">ignore</td><td style="text-align:left">Array <code>&lt;String&gt;</code></td><td style="text-align:left">配置需要跳过 Babel 编译 (包括代码压缩) 处理的文件或目录</td></tr></tbody></table><p><strong>注 1</strong>: 指定文件路径外，还可以指定目录，详见下面项目配置示例</p><h3 id="libversion"><a class="anchor" href="#libversion">#</a> libVersion</h3><p>可以指定项目运行的基础库具体的版本号 也可以 <code>project.config.json</code> 的 <code>libVersion</code> 指定以下值</p><table><thead><tr><th style="text-align:left">值</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">latest</td><td style="text-align:left">最新的非灰度中的基础库</td></tr><tr><td style="text-align:left">trial</td><td style="text-align:left">最新的基础库</td></tr><tr><td style="text-align:left">widelyUsed</td><td style="text-align:left">使用比例最高的基础库</td></tr></tbody></table><p>以上值在 <code>project.private.config.json</code> 文件中无效，因为手动在开发者工具 - 详情 - 本地设置中改变基础库的版本，会覆盖掉 <code>project.private.config.json</code> 的 <code>libVersion</code> 字段</p><h3 id="scripts"><a class="anchor" href="#scripts">#</a> scripts</h3><p>指定自定义预处理的命令</p><table><thead><tr><th style="text-align:left">名字</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">beforeCompile</td><td style="text-align:left">编译前预处理命令</td></tr><tr><td style="text-align:left">beforePreview</td><td style="text-align:left">预览前预处理命令</td></tr><tr><td style="text-align:left">beforeUpload</td><td style="text-align:left">上传前预处理命令</td></tr></tbody></table><h3 id="packoptions"><a class="anchor" href="#packoptions">#</a> packOptions</h3><p><code>packOptions</code> 用以配置项目在打包过程中的选项。打包是预览、上传时对项目进行的必须步骤。</p><p>目前可以指定 <code>packOptions.include</code> 字段，用以配置打包时需要强制带上的文件（<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9zdHJ1Y3R1cmUuaHRtbCMlRTUlODUlODElRTglQUUlQjglRTQlQjglOEElRTQlQkMlQTAlRTclOUElODQlRTYlOTYlODclRTQlQkIlQjY=">仅限后缀名白名单内</span>）或者文件夹，匹配的这些文件或文件夹将一定会出现在预览或上传的结果内。（该字段的优先级高于 <code>packOptions.ignore</code> ）</p><p>同时可以指定 <code>packOptions.ignore</code> 字段，用以配置打包时对符合指定规则的文件或文件夹进行忽略，以跳过打包的过程，这些文件或文件夹将不会出现在预览或上传的结果内。</p><p><code>packOptions.ignore</code> 和 <code>packOptions.include</code> 为一对象数组，对象元素类型如下：</p><table><thead><tr><th style="text-align:left">字段名</th><th style="text-align:left">类型</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">value</td><td style="text-align:left">string</td><td style="text-align:left">路径 1 或取值</td></tr><tr><td style="text-align:left">type</td><td style="text-align:left">string</td><td style="text-align:left">类型</td></tr></tbody></table><p>其中， <code>type</code> 可以取的值为 <code>folder</code> 、 <code>file</code> 、 <code>suffix</code> 、 <code>prefix</code> 、 <code>regexp</code> 2、 <code>glob</code> 2，分别对应文件夹、文件、后缀、前缀、正则表达式、Glob 规则。所有规则值都会自动忽略大小写。</p><p><strong>注 1</strong>: <code>value</code> 字段的值若表示文件或文件夹路径，以小程序目录 ( <code>miniprogramRoot</code> ) 为根目录。</p><p><strong>注 2</strong>: <code>regexp</code> 、 <code>glob</code> 仅 1.02.1809260 及以上版本工具支持。</p><p>示例配置如下。</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"packOptions"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">"ignore"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"file"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"test/test.js"</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"folder"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"test"</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"suffix"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">".webp"</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"prefix"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"test-"</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"glob"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"test/**/*.js"</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"regexp"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"\\.jsx$"</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>注</strong>：这部分设置的更改可能需要重新打开项目才能生效。</p><h3 id="debugoptions"><a class="anchor" href="#debugoptions">#</a> debugOptions</h3><p><code>debugOptions</code> 用以配置在对项目代码进行调试时的选项。</p><p>目前可以指定 <code>debugOptions.hidedInDevtools</code> 字段，用以配置调试时于调试器 Sources 面板隐藏源代码的文件。</p><p><code>hidedInDevtools</code> 的配置规则和 <code>packOptions.ignore</code> 是一致的。</p><p>当某个 js 文件符合此规则时，调试器 Sources 面板中此文件源代码正文内容将被隐藏，显示为：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// xxx.js has been hided by project.config.json</span></pre></td></tr></table></figure><blockquote><p>注：配置此规则后，可能需要关闭并重新打开项目才能看到效果。</p></blockquote><p><strong>项目配置示例：</strong></p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"miniprogramRoot"</span><span class="token operator">:</span> <span class="token string">"./src"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">"qcloudRoot"</span><span class="token operator">:</span> <span class="token string">"./svr"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token property">"setting"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token property">"postcss"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token property">"es6"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token property">"minified"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token property">"urlCheck"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token property">"checkSiteMap"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token property">"enhance"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token property">"babelSetting"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token property">"ignore"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token string">"utils/something_not_to_process.js"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token string">"miniprogram_npm/*"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token string">"utils/already_handle/*"</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token property">"packOptions"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token property">"ignore"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token property">"debugOptions"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="watchoptions"><a class="anchor" href="#watchoptions">#</a> watchOptions</h3><p><code>watchOptions</code> 用以配置项目中可以被忽略展示和监听文件变化的文件匹配规则。 部分项目（如游戏项目）其项目文件可能成千上万，其中大部分可能是资源文件，并不是小程序和小游戏代码中关心展示的文件，这些文件在工具开发时可以不需要被开发者关注，因此工具可以增加一个配置去忽略指定的文件和目录，从而不对这些文件进行文件遍历获取和文件内容变更的监听（watch），从而提高开启工具的速度以及减少工具打开占用的内存。</p><p>目前可以指定 <code>watchOptions.ignore</code> 字段，用以配置工具时对符合指定规则的文件或文件夹进行忽略 ( <code>忽略的文件将不展示在编辑器文件列表和对该文件进行监听</code> ），以避免展示和监听项目中不必要的文件内容（这些文件或文件夹不需要去关心文件变化）</p><p><code>watchOptions.ignore</code> 为 <code>glob pattern</code> 字符串数组，具体支持如下：</p><ul><li><ul><li>匹配 0 到多个字符</li></ul></li><li><p>? 匹配一个字符</p></li><li><p>[...] 匹配一个字符列表，类似正则表达式的字符列表</p></li><li><p>!(pattern|pattern|pattern) 反向匹配括号内的模式</p></li><li><p>?(pattern|pattern|pattern) 匹配 0 或 1 个括号内的模式</p></li><li><p>+(pattern|pattern|pattern) 匹配至少 1 个括号内的模式</p></li><li><p>*(pattern|pattern|pattern) 匹配 0 到多个括号内的模式</p></li><li><p>@(pattern|pat*|pat?erN) 精确匹配括号内的模式</p></li><li><p>** 匹配 0 到多个子目录，递归匹配子目录</p></li></ul><p>示例配置如下。</p><p>如下所示</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"项目配置文件"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">"watchOptions"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>     <span class="token property">"ignore"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token string">"utils/util.js"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token string">"libs/**/**"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>     <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>注 1</strong> : watchOptions.ignore 数组中的值若表示文件或文件夹路径，以项目根目录为基准目录。 <strong>注 2</strong> : 由于文件遍历和 watch 都是在项目启动时执行，因此如果修改了 watchOptions 需要重新打开项目 <strong>注 3</strong>: 该配置仅 1.02.1910220 及以上版本工具支持。</p><h3 id="813-页面配置-pagejson"><a class="anchor" href="#813-页面配置-pagejson">#</a> 8.1.3 页面配置 page.json</h3><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL3BhZ2UuaHRtbA==">页面配置 page.json</span></p><table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left">类型</th><th style="text-align:left">默认值</th><th style="text-align:left">描述</th><th style="text-align:left">最低版本</th></tr></thead><tbody><tr><td style="text-align:left">navigationBarBackgroundColor</td><td style="text-align:left">HexColor</td><td style="text-align:left">#000000</td><td style="text-align:left">导航栏背景颜色，如 <code>#000000</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">navigationBarTextStyle</td><td style="text-align:left">string</td><td style="text-align:left">white</td><td style="text-align:left">导航栏标题颜色，仅支持 <code>black</code> / <code>white</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">navigationBarTitleText</td><td style="text-align:left">string</td><td style="text-align:left"></td><td style="text-align:left">导航栏标题文字内容</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">navigationStyle</td><td style="text-align:left">string</td><td style="text-align:left">default</td><td style="text-align:left">导航栏样式，仅支持以下值： <code>default</code> 默认样式 <code>custom</code> 自定义导航栏，只保留右上角胶囊按钮。</td><td style="text-align:left">iOS/Android 微信客户端 7.0.0，Windows 微信客户端不支持</td></tr><tr><td style="text-align:left">backgroundColor</td><td style="text-align:left">HexColor</td><td style="text-align:left">#ffffff</td><td style="text-align:left">窗口的背景色</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">backgroundTextStyle</td><td style="text-align:left">string</td><td style="text-align:left">dark</td><td style="text-align:left">下拉 loading 的样式，仅支持 <code>dark</code> / <code>light</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">backgroundColorTop</td><td style="text-align:left">string</td><td style="text-align:left">#ffffff</td><td style="text-align:left">顶部窗口的背景色，仅 iOS 支持</td><td style="text-align:left">微信客户端 6.5.16</td></tr><tr><td style="text-align:left">backgroundColorBottom</td><td style="text-align:left">string</td><td style="text-align:left">#ffffff</td><td style="text-align:left">底部窗口的背景色，仅 iOS 支持</td><td style="text-align:left">微信客户端 6.5.16</td></tr><tr><td style="text-align:left">enablePullDownRefresh</td><td style="text-align:left">boolean</td><td style="text-align:left">false</td><td style="text-align:left">是否开启当前页面下拉刷新。 详见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29ucHVsbGRvd25yZWZyZXNo">Page.onPullDownRefresh</span></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">onReachBottomDistance</td><td style="text-align:left">number</td><td style="text-align:left">50</td><td style="text-align:left">页面上拉触底事件触发时距页面底部距离，单位为 px。 详见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29ucmVhY2hib3R0b20=">Page.onReachBottom</span></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">pageOrientation</td><td style="text-align:left">string</td><td style="text-align:left">portrait</td><td style="text-align:left">屏幕旋转设置，支持 <code>auto</code> / <code>portrait</code> / <code>landscape</code> 详见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay92aWV3L3Jlc2l6YWJsZS5odG1s">响应显示区域变化</span></td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.4.0</span> (auto) / <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.5.0</span> (landscape)</td></tr><tr><td style="text-align:left">disableScroll</td><td style="text-align:left">boolean</td><td style="text-align:left">false</td><td style="text-align:left">设置为 <code>true</code> 则页面整体不能上下滚动。 只在页面配置中有效，无法在 <code>app.json</code> 中设置</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">usingComponents</td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">页面<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jdXN0b20tY29tcG9uZW50Lw==">自定义组件</span>配置</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">1.6.3</span></td></tr><tr><td style="text-align:left">initialRenderingCache</td><td style="text-align:left">string</td><td style="text-align:left"></td><td style="text-align:left">页面<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay92aWV3L2luaXRpYWwtcmVuZGVyaW5nLWNhY2hlLmh0bWw=">初始渲染缓存</span>配置，支持 <code>static</code> / <code>dynamic</code></td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.11.1</span></td></tr><tr><td style="text-align:left">style</td><td style="text-align:left">string</td><td style="text-align:left">default</td><td style="text-align:left">启用新版的组件样式</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.10.2</span></td></tr><tr><td style="text-align:left">singlePage</td><td style="text-align:left">Object</td><td style="text-align:left">否</td><td style="text-align:left">单页模式相关配置</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.12.0</span></td></tr><tr><td style="text-align:left">restartStrategy</td><td style="text-align:left">string</td><td style="text-align:left">homePage</td><td style="text-align:left">重新启动策略配置</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.8.0</span></td></tr><tr><td style="text-align:left">handleWebviewPreload</td><td style="text-align:left">string</td><td style="text-align:left">static</td><td style="text-align:left">控制<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9wZXJmb3JtYW5jZS90aXBzL3J1bnRpbWVfbmF2Lmh0bWwjXzItNC0lRTYlOEUlQTclRTUlODglQjYlRTklQTIlODQlRTUlOEElQTAlRTglQkQlQkQlRTQlQjglOEIlRTQlQjglQUElRTklQTElQjUlRTklOUQlQTIlRTclOUElODQlRTYlOTclQjYlRTYlOUMlQkE=">预加载下个页面的时机</span>。支持 <code>static</code> / <code>manual</code> / <code>auto</code></td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.15.0</span></td></tr><tr><td style="text-align:left">visualEffectInBackground</td><td style="text-align:left">string</td><td style="text-align:left">否</td><td style="text-align:left">切入系统后台时，隐藏页面内容，保护用户隐私。支持 <code>hidden</code> / <code>none</code> ，若对页面单独设置则会覆盖全局的配置，详见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1s">全局配置</span></td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.15.0</span></td></tr><tr><td style="text-align:left">enablePassiveEvent</td><td style="text-align:left">Object 或 boolean</td><td style="text-align:left">否</td><td style="text-align:left">事件监听是否为 passive，若对页面单独设置则会覆盖全局的配置，详见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9jb25maWd1cmF0aW9uL2FwcC5odG1s">全局配置</span></td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.24.1</span></td></tr></tbody></table><p>// pages/home/home.json</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"嗨购-首页"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="82-wxml模版"><a class="anchor" href="#82-wxml模版">#</a> 8.2 WXML 模版</h2><p>WXML（WeiXin Markup Language）是框架设计的一套标签语言，结合<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2NvbXBvbmVudC8=">基础组件</span>、<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay92aWV3L3d4bWwvZXZlbnQuaHRtbA==">事件系统</span>，可以构建出页面的结构。</p><p>要完整了解 WXML 语法，请参考<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS93eG1sLw=="> WXML 语法参考</span>。</p><p>用以下一些简单的例子来看看 WXML 具有什么能力：</p><h2 id="数据绑定"><a class="anchor" href="#数据绑定">#</a> 数据绑定</h2><pre><code class="language-vue">&lt;!--wxml--&gt;
&lt;view&gt; &#123;&#123;message&#125;&#125; &lt;/view&gt;
// page.js
Page(&#123;
  data: &#123;
    message: 'Hello MINA!'
  &#125;
&#125;)
</code></pre><h2 id="列表渲染"><a class="anchor" href="#列表渲染">#</a> 列表渲染</h2><pre><code class="language-vue">&lt;!--wxml--&gt;
&lt;view wx:for=&quot;&#123;&#123;array&#125;&#125;&quot;&gt; &#123;&#123;item&#125;&#125; &lt;/view&gt;
// page.js
Page(&#123;
  data: &#123;
    array: [1, 2, 3, 4, 5]
  &#125;
&#125;)
</code></pre><h2 id="条件渲染"><a class="anchor" href="#条件渲染">#</a> 条件渲染</h2><pre><code class="language-vue">&lt;!--wxml--&gt;
&lt;view wx:if=&quot;&#123;&#123;view == 'WEBVIEW'&#125;&#125;&quot;&gt; WEBVIEW &lt;/view&gt;
&lt;view wx:elif=&quot;&#123;&#123;view == 'APP'&#125;&#125;&quot;&gt; APP &lt;/view&gt;
&lt;view wx:else=&quot;&#123;&#123;view == 'MINA'&#125;&#125;&quot;&gt; MINA &lt;/view&gt;
// page.js
Page(&#123;
  data: &#123;
    view: 'MINA'
  &#125;
&#125;)
</code></pre><h2 id="模板"><a class="anchor" href="#模板">#</a> 模板</h2><pre><code class="language-vue">&lt;template name=&quot;staffName&quot;&gt;
  &lt;view&gt;
    FirstName: &#123;&#123;firstName&#125;&#125;, LastName: &#123;&#123;lastName&#125;&#125;
  &lt;/view&gt;
&lt;/template&gt;

&lt;template is=&quot;staffName&quot; data=&quot;&#123;&#123;...staffA&#125;&#125;&quot;&gt;&lt;/template&gt;
&lt;template is=&quot;staffName&quot; data=&quot;&#123;&#123;...staffB&#125;&#125;&quot;&gt;&lt;/template&gt;
&lt;template is=&quot;staffName&quot; data=&quot;&#123;&#123;...staffC&#125;&#125;&quot;&gt;&lt;/template&gt;
</code></pre><p>具体的能力以及使用方式在以下章节查看：</p><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS93eG1sL2RhdGEuaHRtbA==">数据绑定</span>、<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS93eG1sL2xpc3QuaHRtbA==">列表渲染</span>、<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS93eG1sL2NvbmRpdGlvbmFsLmh0bWw=">条件渲染</span>、<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS93eG1sL3RlbXBsYXRlLmh0bWw=">模板</span>、<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS93eG1sL2ltcG9ydC5odG1s">引用</span></p><h3 id="821-数据绑定"><a class="anchor" href="#821-数据绑定">#</a> 8.2.1 数据绑定</h3><p>WXML 中的动态数据均来自对应 Page 的 data。</p><h2 id="简单绑定"><a class="anchor" href="#简单绑定">#</a> 简单绑定</h2><p>数据绑定使用 Mustache 语法（双大括号）将变量包起来，可以作用于：</p><h3 id="内容"><a class="anchor" href="#内容">#</a> 内容</h3><pre><code class="language-vue">&lt;view&gt; &#123;&#123; message &#125;&#125; &lt;/view&gt;
</code></pre><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'Hello MINA!'</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="组件属性需要在双引号之内"><a class="anchor" href="#组件属性需要在双引号之内">#</a> 组件属性 (需要在双引号之内)</h3><pre><code class="language-vue">&lt;view id=&quot;item-&#123;&#123;id&#125;&#125;&quot;&gt; &lt;/view&gt;
</code></pre><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="控制属性需要在双引号之内"><a class="anchor" href="#控制属性需要在双引号之内">#</a> 控制属性 (需要在双引号之内)</h3><pre><code class="language-vue">&lt;view wx:if=&quot;&#123;&#123;condition&#125;&#125;&quot;&gt; &lt;/view&gt;
</code></pre><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">condition</span><span class="token operator">:</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="关键字需要在双引号之内"><a class="anchor" href="#关键字需要在双引号之内">#</a> 关键字 (需要在双引号之内)</h3><p><code>true</code> ：boolean 类型的 true，代表真值。</p><p><code>false</code> ： boolean 类型的 false，代表假值。</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>checkbox</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><em><strong>特别注意：不要直接写 <code>checked=&quot;false&quot;</code> ，其计算结果是一个字符串，转成 boolean 类型后代表真值。</strong></em></p><h2 id="运算"><a class="anchor" href="#运算">#</a> 运算</h2><p>可以在 <code>&#123;&#123;&#125;&#125;</code> 内进行简单的运算，支持的有如下几种方式：</p><h3 id="三元运算"><a class="anchor" href="#三元运算">#</a> 三元运算</h3><pre><code class="language-vue">&lt;view hidden=&quot;&#123;&#123;flag ? true : false&#125;&#125;&quot;&gt; Hidden &lt;/view&gt;
</code></pre><h3 id="算数运算"><a class="anchor" href="#算数运算">#</a> 算数运算</h3><pre><code class="language-vue">&lt;view&gt; &#123;&#123;a + b&#125;&#125; + &#123;&#123;c&#125;&#125; + d &lt;/view&gt;
</code></pre><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>view 中的内容为 <code>3 + 3 + d</code> 。</p><h3 id="逻辑判断"><a class="anchor" href="#逻辑判断">#</a> 逻辑判断</h3><pre><code class="language-vue">&lt;view wx:if=&quot;&#123;&#123;length > 5&#125;&#125;&quot;&gt; &lt;/view&gt;
</code></pre><h3 id="字符串运算"><a class="anchor" href="#字符串运算">#</a> 字符串运算</h3><pre><code class="language-vue">&lt;view&gt;&#123;&#123;"hello" + name&#125;&#125;&lt;/view&gt;
</code></pre><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'MINA'</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="数据路径运算"><a class="anchor" href="#数据路径运算">#</a> 数据路径运算</h3><pre><code>&lt;view&gt;&#123;&#123;object.key&#125;&#125; &#123;&#123;array[0]&#125;&#125;&lt;/view&gt;
</code></pre><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">object</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'Hello '</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">array</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'MINA'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="组合"><a class="anchor" href="#组合">#</a> 组合</h2><p>也可以在 Mustache 内直接进行组合，构成新的对象或者数组</p><h3 id="数组"><a class="anchor" href="#数组">#</a> 数组</h3><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>,1,2,3,4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token comment"></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">zero</span><span class="token operator">:</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>最终组合成数组 <code>[0, 1, 2, 3, 4]</code> 。</p><h3 id="对象"><a class="anchor" href="#对象">#</a> 对象</h3><pre><code class="language-vue">&lt;template is=&quot;objectCombine&quot; data=&quot;&#123;&#123;for: a, bar: b&#125;&#125;&quot;&gt;&lt;/template&gt;
</code></pre><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>最终组合成的对象是 <code>&#123;for: 1, bar: 2&#125;</code></p><p>也可以用扩展运算符 <code>...</code> 来将一个对象展开</p><pre><code>&lt;template is=&quot;objectCombine&quot; data=&quot;&#123;&#123;...obj1, ...obj2, e: 5&#125;&#125;&quot;&gt;&lt;/template&gt;
</code></pre><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">obj1</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token literal-property property">obj2</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token number">4</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>最终组合成的对象是 <code>&#123;a: 1, b: 2, c: 3, d: 4, e: 5&#125;</code> 。</p><p>如果对象的 key 和 value 相同，也可以间接地表达。</p><pre><code class="language-vue">&lt;template is=&quot;objectCombine&quot; data=&quot;&#123;&#123;foo, bar&#125;&#125;&quot;&gt;&lt;/template&gt;
</code></pre><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'my-foo'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'my-bar'</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>最终组合成的对象是 <code>&#123;foo: 'my-foo', bar:'my-bar'&#125;</code> 。</p><p><strong>注意</strong>：上述方式可以随意组合，但是如有存在变量名相同的情况，后边的会覆盖前面，如：</p><pre><code class="language-vue">&lt;template is=&quot;objectCombine&quot; data=&quot;&#123;&#123;...obj1, ...obj2, a, c: 6&#125;&#125;&quot;&gt;&lt;/template&gt;
Page(&#123;
  data: &#123;
    obj1: &#123;
      a: 1,
      b: 2
    &#125;,
    obj2: &#123;
      b: 3,
      c: 4
    &#125;,
    a: 5
  &#125;
&#125;)
</code></pre><p>最终组合成的对象是 <code>&#123;a: 5, b: 3, c: 6&#125;</code> 。</p><p><strong>注意：</strong> 花括号和引号之间如果有空格，将最终被解析成为字符串</p><pre><code class="language-vue">&lt;view wx:for=&quot;&#123;&#123;[1,2,3]&#125;&#125; &quot;&gt;
  &#123;&#123;item&#125;&#125;
&lt;/view&gt;
</code></pre><p>等同于</p><pre><code class="language-vue">&lt;view wx:for=&quot;&#123;&#123;[1,2,3] + ' '&#125;&#125;&quot;&gt;
  &#123;&#123;item&#125;&#125;
&lt;/view&gt;
</code></pre><h2 id="83-wxss-样式"><a class="anchor" href="#83-wxss-样式">#</a> 8.3 WXSS 样式</h2><p><code>WXSS</code> 具有 <code>CSS</code> 大部分的特性，小程序在 <code>WXSS</code> 也做了一些扩充和修改</p><ol><li>新增了尺寸单位。在写 <code>CSS</code> 样式时，开发者需要考虑到手机设备的屏幕会有不同的宽度和设备像素比，采用一些技巧来换算一些像素单位。 <code>WXSS</code> 在底层支持新的尺寸单位 <code>rpx</code> ，开发者可以免去换算的烦恼，只要交给小程序底层来换算即可，由于换算采用的浮点数运算，所以运算结果会和预期结果有一点点偏差。</li><li>提供了全局的样式和局部样式。和前边 <code>app.json</code> , <code>page.json</code> 的概念相同，你可以写一个 <code>app.wxss</code> 作为全局样式，会作用于当前小程序的所有页面，局部页面样式 <code>page.wxss</code> 仅对当前页面生效。</li><li>此外 <code>WXSS</code> 仅支持部分 <code>CSS</code> 选择器</li></ol><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay92aWV3L3d4c3MuaHRtbA==">https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html</span></p><ul><li>rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为 750rpx。如在 iPhone6 上，屏幕宽度为 375px，共有 750 个物理像素，则 750rpx = 375px = 750 物理像素，1rpx = 0.5px = 1 物理像素。</li></ul><table><thead><tr><th style="text-align:left">设备</th><th style="text-align:left">rpx 换算 px (屏幕宽度 / 750)</th><th style="text-align:left">px 换算 rpx (750 / 屏幕宽度)</th></tr></thead><tbody><tr><td style="text-align:left">iPhone5</td><td style="text-align:left">1rpx = 0.42px</td><td style="text-align:left">1px = 2.34rpx</td></tr><tr><td style="text-align:left">iPhone6</td><td style="text-align:left">1rpx = 0.5px</td><td style="text-align:left">1px = 2rpx</td></tr><tr><td style="text-align:left">iPhone6 Plus</td><td style="text-align:left">1rpx = 0.552px</td><td style="text-align:left">1px = 1.81rpx</td></tr></tbody></table><p><strong>建议：</strong> 开发微信小程序时设计师可以用 iPhone6 作为视觉稿的标准。</p><blockquote><p>假如设计是给我们的设计稿，打开以后，发现 设计稿的宽度是 750px，那么我们在 wxss 中写宽度和高度时，可以直接写量取的数据，单位 rpx</p><p>如果设计师给的设计稿为 375px，假设量取的宽度为 100px，那么建议将 wxss 的单位写为 200rpx</p></blockquote><p><strong>注意：</strong> 在较小的屏幕上不可避免的会有一些毛刺，请在开发时尽量避免这种情况。</p><h2 id="84-js逻辑交互"><a class="anchor" href="#84-js逻辑交互">#</a> 8.4 js 逻辑交互</h2><h3 id="841-什么是事件"><a class="anchor" href="#841-什么是事件">#</a> 8.4.1 什么是事件</h3><ul><li>事件是视图层到逻辑层的通讯方式。</li><li>事件可以将用户的行为反馈到逻辑层进行处理。</li><li>事件可以绑定在组件上，当达到触发事件，就会执行逻辑层中对应的事件处理函数。</li><li>事件对象可以携带额外信息，如 id, dataset, touches。</li></ul><blockquote><p>切记，自定义的事件是需要写到 js 中的 选项中的</p></blockquote><h3 id="842-如何给事件传递参数"><a class="anchor" href="#842-如何给事件传递参数">#</a> 8.4.2 如何给事件传递参数</h3><blockquote><p>传递参数时，id 具有特殊性，其余数据通过 data-params 属性传值</p></blockquote><h3 id="843-冒泡"><a class="anchor" href="#843-冒泡">#</a> 8.4.3 冒泡</h3><blockquote><p>biantap 并不会阻止事件冒泡</p><p>catchtap 会阻止冒泡</p></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// pages/test/test.ts</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">"&lt;mark>&lt;i>hello minpro&lt;/i>&lt;/mark>"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'曹喜龙'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'段泽楷'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'王喜珍'</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token literal-property property">cars</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token literal-property property">brand</span><span class="token operator">:</span> <span class="token string">'奔驰'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'大G'</span><span class="token punctuation">,</span> <span class="token string">'c260'</span> <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token literal-property property">brand</span><span class="token operator">:</span> <span class="token string">'宝马'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'X1'</span><span class="token punctuation">,</span> <span class="token string">'X3'</span> <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token literal-property property">obj</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">'0'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'vue'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="25"></td><td><pre>      <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token string">'00'</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token literal-property property">latitude</span><span class="token operator">:</span> <span class="token number">34.218172</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token literal-property property">longitude</span><span class="token operator">:</span> <span class="token number">108.875866</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token literal-property property">company</span><span class="token operator">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token literal-property property">img</span><span class="token operator">:</span> <span class="token string">'/resources/avatar.png'</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="34"></td><td><pre>  <span class="token comment">// changeName (event: &#123; detail: &#123;value: string &#125;&#125;) &#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>  <span class="token function">changeName</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">event</span><span class="token operator">:</span> WechatMiniprogram<span class="token punctuation">.</span>CustomEvent</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>      <span class="token literal-property property">name</span><span class="token operator">:</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="41"></td><td><pre>  <span class="token function">changeMsg</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>      <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hello 小程序'</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="45"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="46"></td><td><pre>  <span class="token function">changeMsgOfParams</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">event</span><span class="token operator">:</span> WechatMiniprogram<span class="token punctuation">.</span>BaseEvent</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>      <span class="token literal-property property">msg</span><span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>str</pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="50"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="51"></td><td><pre>  <span class="token function">chooseLocation</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">11111</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    wx<span class="token punctuation">.</span><span class="token function">chooseLocation</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>          <span class="token literal-property property">address</span><span class="token operator">:</span> res<span class="token punctuation">.</span>address<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="58"></td><td><pre>          <span class="token literal-property property">latitude</span><span class="token operator">:</span> res<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="59"></td><td><pre>          <span class="token literal-property property">longitude</span><span class="token operator">:</span> res<span class="token punctuation">.</span>longitude<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="60"></td><td><pre>          <span class="token literal-property property">company</span><span class="token operator">:</span> res<span class="token punctuation">.</span>name</pre></td></tr><tr><td data-num="61"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="62"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token comment">// wx.chooseLocation(&#123;&#125;).then(res => &#123;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token comment">//   console.log(res)</span></pre></td></tr><tr><td data-num="66"></td><td><pre>    <span class="token comment">// &#125;)</span></pre></td></tr><tr><td data-num="67"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="68"></td><td><pre>  <span class="token function">openLocation</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>    wx<span class="token punctuation">.</span><span class="token function">openLocation</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>      <span class="token literal-property property">latitude</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="71"></td><td><pre>      <span class="token literal-property property">longitude</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>longitude<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="72"></td><td><pre>      <span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token number">18</span></pre></td></tr><tr><td data-num="73"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="74"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="75"></td><td><pre>  <span class="token function">changeAvatar</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>    wx<span class="token punctuation">.</span><span class="token function">chooseMedia</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="77"></td><td><pre>      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="78"></td><td><pre>      <span class="token literal-property property">mediaType</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'image'</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="79"></td><td><pre>      <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'album'</span><span class="token punctuation">,</span> <span class="token string">'camera'</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="80"></td><td><pre>      <span class="token literal-property property">maxDuration</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="81"></td><td><pre>      <span class="token literal-property property">camera</span><span class="token operator">:</span> <span class="token string">'back'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="82"></td><td><pre>      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>tempFiles<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tempFilePath<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="84"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>          <span class="token literal-property property">img</span><span class="token operator">:</span> res<span class="token punctuation">.</span>tempFiles<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tempFilePath</pre></td></tr><tr><td data-num="86"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="87"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="88"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="89"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="90"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="9小程序的宿主环境"><a class="anchor" href="#9小程序的宿主环境">#</a> 9. 小程序的宿主环境</h1><h2 id="91-渲染层和逻辑层"><a class="anchor" href="#91-渲染层和逻辑层">#</a> 9.1 渲染层和逻辑层</h2><p>WXML 模板和 WXSS 样式工作在渲染层</p><p>JS 脚本工作在逻辑层</p><h3 id="911-注册小程序"><a class="anchor" href="#911-注册小程序">#</a> 9.1.1 注册小程序</h3><p>每个小程序都需要在 <code>app.js</code> 中调用 <code>App</code> 方法注册小程序实例，绑定生命周期回调函数、错误监听和页面不存在监听函数等</p><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvQXBwLmh0bWw=">https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html</span></p><p>注册小程序。接受一个 <code>Object</code> 参数，其指定小程序的生命周期回调等。</p><p><strong>App () 必须在 <code>app.js</code> 中调用，必须调用且只能调用一次。不然会出现无法预期的后果。</strong></p><table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left">类型</th><th style="text-align:left">默认值</th><th style="text-align:left">必填</th><th style="text-align:left">说明</th><th style="text-align:left">最低版本</th></tr></thead><tbody><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvQXBwLmh0bWwjb25MYXVuY2gtT2JqZWN0LW9iamVjdA==">onLaunch</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left">否</td><td style="text-align:left">生命周期回调 —— 监听小程序初始化。</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvQXBwLmh0bWwjb25TaG93LU9iamVjdC1vYmplY3Q=">onShow</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left">否</td><td style="text-align:left">生命周期回调 —— 监听小程序启动或切前台。</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvQXBwLmh0bWwjb25IaWRl">onHide</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left">否</td><td style="text-align:left">生命周期回调 —— 监听小程序切后台。</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvQXBwLmh0bWwjb25FcnJvci1TdHJpbmctZXJyb3I=">onError</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left">否</td><td style="text-align:left">错误监听函数。</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvQXBwLmh0bWwjb25QYWdlTm90Rm91bmQtT2JqZWN0LW9iamVjdA==">onPageNotFound</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left">否</td><td style="text-align:left">页面不存在监听函数。</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">1.9.90</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvQXBwLmh0bWwjb25VbmhhbmRsZWRSZWplY3Rpb24tT2JqZWN0LW9iamVjdA==">onUnhandledRejection</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left">否</td><td style="text-align:left">未处理的 Promise 拒绝事件监听函数。</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.10.0</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvQXBwLmh0bWwjb25UaGVtZUNoYW5nZS1PYmplY3Qtb2JqZWN0">onThemeChange</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left">否</td><td style="text-align:left">监听系统主题变化</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.11.0</span></td></tr><tr><td style="text-align:left">其他</td><td style="text-align:left">any</td><td style="text-align:left"></td><td style="text-align:left">否</td><td style="text-align:left">开发者可以添加任意的函数或数据变量到 <code>Object</code> 参数中，用 <code>this</code> 可以访问</td><td style="text-align:left"></td></tr></tbody></table><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// app.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// app.js</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function">onLaunch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onLaunch'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 展示本地存储能力</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">const</span> logs <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token string">'logs'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    logs<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    wx<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'logs'</span><span class="token punctuation">,</span> logs<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 登录</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    wx<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 发送 res.code 到后台换取 openId, sessionKey, unionId</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token comment">// 其他</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token literal-property property">globalData</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token literal-property property">userInfo</span><span class="token operator">:</span> <span class="token keyword">null</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token function">onShow</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onShow'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token function">onHide</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onHide'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token function">onError</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onError'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="912-注册页面"><a class="anchor" href="#912-注册页面">#</a> 9.1.2 注册页面</h3><p>对于小程序中的每个页面，都需要在页面对应的 <code>js</code> 文件中进行注册，指定页面的初始数据、生命周期回调、事件处理函数等。</p><table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left">类型</th><th style="text-align:left">默认值</th><th style="text-align:left">必填</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI2RhdGE=">data</span></td><td style="text-align:left">Object</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">页面的初始数据</td></tr><tr><td style="text-align:left">options</td><td style="text-align:left">Object</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">页面的组件选项，同 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Component.html"><code>Component</code> 构造器</a> 中的 <code>options</code> ，需要基础库版本 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.10.1</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jdXN0b20tY29tcG9uZW50L2JlaGF2aW9ycy5odG1s">behaviors</span></td><td style="text-align:left">String Array</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">类似于 mixins 和 traits 的组件间代码复用机制，参见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jdXN0b20tY29tcG9uZW50L2JlaGF2aW9ycy5odG1s">behaviors</span>，需要基础库版本 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.9.2</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uTG9hZC1PYmplY3QtcXVlcnk=">onLoad</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">生命周期回调 — 监听页面加载</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uU2hvdw==">onShow</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">生命周期回调 — 监听页面显示</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uUmVhZHk=">onReady</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">生命周期回调 — 监听页面初次渲染完成</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uSGlkZQ==">onHide</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">生命周期回调 — 监听页面隐藏</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uVW5sb2Fk">onUnload</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">生命周期回调 — 监听页面卸载</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uUHVsbERvd25SZWZyZXNo">onPullDownRefresh</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">监听用户下拉动作</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uUmVhY2hCb3R0b20=">onReachBottom</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">页面上拉触底事件的处理函数</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uU2hhcmVBcHBNZXNzYWdlLU9iamVjdC1vYmplY3Q=">onShareAppMessage</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">用户点击右上角转发</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uU2hhcmVUaW1lbGluZQ==">onShareTimeline</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">用户点击右上角转发到朋友圈</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uQWRkVG9GYXZvcml0ZXMtT2JqZWN0LW9iamVjdA==">onAddToFavorites</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">用户点击右上角收藏</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uUGFnZVNjcm9sbC1PYmplY3Qtb2JqZWN0">onPageScroll</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">页面滚动触发事件的处理函数</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uUmVzaXplLU9iamVjdC1vYmplY3Q=">onResize</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">页面尺寸改变时触发，详见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay92aWV3L3Jlc2l6YWJsZS5odG1sIyVFNSU5QyVBOCVFNiU4OSU4QiVFNiU5QyVCQSVFNCVCOCU4QSVFNSU5MCVBRiVFNyU5NCVBOCVFNSVCMSU4RiVFNSVCOSU5NSVFNiU5NyU4QiVFOCVCRCVBQyVFNiU5NCVBRiVFNiU4QyU4MQ==">响应显示区域变化</span></td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uVGFiSXRlbVRhcC1PYmplY3Qtb2JqZWN0">onTabItemTap</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">当前是 tab 页时，点击 tab 时触发</td></tr><tr><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvUGFnZS5odG1sI29uU2F2ZUV4aXRTdGF0ZQ==">onSaveExitState</span></td><td style="text-align:left">function</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">页面销毁前保留状态回调</td></tr><tr><td style="text-align:left">其他</td><td style="text-align:left">any</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">开发者可以添加任意的函数或数据到 <code>Object</code> 参数中，在页面的函数中用 <code>this</code> 可以访问。<strong>这部分属性会在页面实例创建时进行一次深拷贝</strong>。</td></tr></tbody></table><h3 id="913页面路由"><a class="anchor" href="#913页面路由">#</a> 9.1.3 页面路由</h3><ul><li><p>编程式导航路由</p><ul><li><p>wx.switchTab ({}) 跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面</p></li><li><p>wx.reLaunch ({}) 关闭所有页面，打开到应用内的某个页面</p></li><li><p>wx.redirectTo ({}) 关闭当前页面，跳转到应用内的某个页面。但是不允许跳转到 tabbar 页面</p></li><li><p>wx.navigateTo ({}) 保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面。使用 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS9yb3V0ZS93eC5uYXZpZ2F0ZUJhY2suaHRtbA==">wx.navigateBack</span> 可以返回到原页面。小程序中页面栈最多十层。</p></li><li><p>wx.navigateBack ({}) 关闭当前页面，返回上一页面或多级页面。可通过 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS9hcGkvZ2V0Q3VycmVudFBhZ2VzLmh0bWw=">getCurrentPages</span> 获取当前的页面栈，决定需要返回几层</p></li></ul></li><li><p>声明式导航路由</p></li></ul><p><code>&lt;navigator url=&quot;&quot; open-type=&quot;&quot;&gt;&lt;/navigator&gt;</code></p><p>下面为 open-type 的属性值</p><table><thead><tr><th style="text-align:left">合法值</th><th style="text-align:left">说明</th><th style="text-align:left">最低版本</th></tr></thead><tbody><tr><td style="text-align:left">navigate</td><td style="text-align:left">对应 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS9yb3V0ZS93eC5uYXZpZ2F0ZVRvLmh0bWw=">wx.navigateTo</span> 或 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS9uYXZpZ2F0ZS93eC5uYXZpZ2F0ZVRvTWluaVByb2dyYW0uaHRtbA==">wx.navigateToMiniProgram</span> 的功能</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">redirect</td><td style="text-align:left">对应 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS9yb3V0ZS93eC5yZWRpcmVjdFRvLmh0bWw=">wx.redirectTo</span> 的功能</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">switchTab</td><td style="text-align:left">对应 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS9yb3V0ZS93eC5zd2l0Y2hUYWIuaHRtbA==">wx.switchTab</span> 的功能</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">reLaunch</td><td style="text-align:left">对应 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS9yb3V0ZS93eC5yZUxhdW5jaC5odG1s">wx.reLaunch</span> 的功能</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">1.1.0</span></td></tr><tr><td style="text-align:left">navigateBack</td><td style="text-align:left">对应 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS9yb3V0ZS93eC5uYXZpZ2F0ZUJhY2suaHRtbA==">wx.navigateBack</span> 的功能</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">1.1.0</span></td></tr><tr><td style="text-align:left">exit</td><td style="text-align:left">退出小程序， <code>target=&quot;miniProgram&quot;</code> 时生效</td><td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jb21wYXRpYmlsaXR5Lmh0bWw=">2.1.0</span></td></tr></tbody></table><h3 id="914-模块化"><a class="anchor" href="#914-模块化">#</a> 9.1.4 模块化</h3><p>可以将一些公共的代码抽离成为一个单独的 js 文件，作为一个模块。</p><ul><li>方式 1: 使用 commonjs 规范，模块只有通过 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/module.html"><code>module.exports</code> </a>或者 <code>exports</code> 才能对外暴露接口。</li></ul><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// pages/test/common.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> !</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">function</span> <span class="token function">sayGoodbye</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Goodbye </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> !</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>sayHello <span class="token operator">=</span> sayHello</pre></td></tr><tr><td data-num="10"></td><td><pre>exports<span class="token punctuation">.</span>sayGoodbye <span class="token operator">=</span> sayGoodbye</pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// pages/test/test.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> common <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'common.js'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token operator">...</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  common<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token string">'千锋教育'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  common<span class="token punctuation">.</span><span class="token function">sayGoodbye</span><span class="token punctuation">(</span><span class="token string">'吴大勋'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token operator">...</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>方式 2: 使用 es6 模块化规范</li></ul><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// pages/test/es6md.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> !</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">sayGoodbye</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Goodbye </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> !</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// pages/test/test.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> sayHello<span class="token punctuation">,</span> sayGoodbye <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./es6md'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre> <span class="token operator">...</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token string">'千锋教育 - 太原'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">sayGoodbye</span><span class="token punctuation">(</span><span class="token string">'吴大勋 - HTML5'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token operator">...</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="92-组件"><a class="anchor" href="#92-组件">#</a> 9.2 组件</h2><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2NvbXBvbmVudC8=">https://developers.weixin.qq.com/miniprogram/dev/component/</span></p><p>搭建小程序页面时，参照组件篇章</p><p>通过给 <code>app.json</code> 的 pages 选项添加 <code>pages/com/com</code> 测试小程序的常用组件</p><h2 id="93-api"><a class="anchor" href="#93-api">#</a> 9.3 API</h2><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS8=">https://developers.weixin.qq.com/miniprogram/dev/api/</span></p><p>通过小程序调用微信的功能时，参照 API 章节</p><p>通过给 <code>app.json</code> 的 pages 选项添加 <code>pages/api/api</code> 测试小程序的常用组件</p><h1 id="10小程序的自定义组件"><a class="anchor" href="#10小程序的自定义组件">#</a> 10 小程序的自定义组件</h1><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9jdXN0b20tY29tcG9uZW50Lw==">https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/</span></p><div class="tags"><a href="/tags/wxapp/" rel="tag"><i class="ic i-tag"></i> wxapp</a> <a href="/tags/ts/" rel="tag"><i class="ic i-tag"></i> ts</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-11-02 21:03:23" itemprop="dateModified" datetime="2022-11-02T21:03:23+08:00">2022-11-02</time> </span><span id="wx-app/day2/" class="item leancloud_visitors" data-flag-title="微信小程序学习第二天" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 联系我</button><p>来交朋友吧！</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="叶星辰 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="叶星辰 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="叶星辰 QQ"><p>QQ</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>叶星辰 <i class="ic i-at"><em>@</em></i>永不陨落的星辰</li><li class="link"><strong>本文链接：</strong> <a href="https://www.yexingcheng.com/wx-app/day2/" title="微信小程序学习第二天">https://www.yexingcheng.com/wx-app/day2/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/Screeps/action1/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gicli9lfebj20zk0m84qp.jpg" title="screeps日记 part1"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> screeps</span><h3>screeps日记 part1</h3></a></div><div class="item right"><a href="/wx-app/day3/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giclgrvbd6j20zk0m8qv5.jpg" title="构建电商界面的小程序（一）"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 微信小程序</span><h3>构建电商界面的小程序（一）</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#8%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BB%A3%E7%A0%81%E7%9A%84%E6%9E%84%E6%88%90"><span class="toc-number">1.</span> <span class="toc-text">8. 小程序代码的构成</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#81-json%E9%85%8D%E7%BD%AE"><span class="toc-number">1.1.</span> <span class="toc-text">8.1 JSON 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#811-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E9%85%8D%E7%BD%AE-appjson"><span class="toc-number">1.1.1.</span> <span class="toc-text">8.1.1 小程序的配置 app.json</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#812-%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE-projectconfigjson"><span class="toc-number">1.1.2.</span> <span class="toc-text">8.1.2 工具配置 project.config.json</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.</span> <span class="toc-text">项目配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E7%BA%A7%E5%AD%97%E6%AE%B5"><span class="toc-number">1.3.</span> <span class="toc-text">一级字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#compiletype"><span class="toc-number">1.3.1.</span> <span class="toc-text">compileType</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setting"><span class="toc-number">1.3.2.</span> <span class="toc-text">setting</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#usecompilerplugins"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">useCompilerPlugins</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#babelsetting"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">babelSetting</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#libversion"><span class="toc-number">1.3.3.</span> <span class="toc-text">libVersion</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scripts"><span class="toc-number">1.3.4.</span> <span class="toc-text">scripts</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#packoptions"><span class="toc-number">1.3.5.</span> <span class="toc-text">packOptions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#debugoptions"><span class="toc-number">1.3.6.</span> <span class="toc-text">debugOptions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watchoptions"><span class="toc-number">1.3.7.</span> <span class="toc-text">watchOptions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#813-%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE-pagejson"><span class="toc-number">1.3.8.</span> <span class="toc-text">8.1.3 页面配置 page.json</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#82-wxml%E6%A8%A1%E7%89%88"><span class="toc-number">1.4.</span> <span class="toc-text">8.2 WXML 模版</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">1.5.</span> <span class="toc-text">数据绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">1.6.</span> <span class="toc-text">列表渲染</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">1.7.</span> <span class="toc-text">条件渲染</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF"><span class="toc-number">1.8.</span> <span class="toc-text">模板</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#821-%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">1.8.1.</span> <span class="toc-text">8.2.1 数据绑定</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%BB%91%E5%AE%9A"><span class="toc-number">1.9.</span> <span class="toc-text">简单绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AE%B9"><span class="toc-number">1.9.1.</span> <span class="toc-text">内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%B1%9E%E6%80%A7%E9%9C%80%E8%A6%81%E5%9C%A8%E5%8F%8C%E5%BC%95%E5%8F%B7%E4%B9%8B%E5%86%85"><span class="toc-number">1.9.2.</span> <span class="toc-text">组件属性 (需要在双引号之内)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%B1%9E%E6%80%A7%E9%9C%80%E8%A6%81%E5%9C%A8%E5%8F%8C%E5%BC%95%E5%8F%B7%E4%B9%8B%E5%86%85"><span class="toc-number">1.9.3.</span> <span class="toc-text">控制属性 (需要在双引号之内)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97%E9%9C%80%E8%A6%81%E5%9C%A8%E5%8F%8C%E5%BC%95%E5%8F%B7%E4%B9%8B%E5%86%85"><span class="toc-number">1.9.4.</span> <span class="toc-text">关键字 (需要在双引号之内)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E7%AE%97"><span class="toc-number">1.10.</span> <span class="toc-text">运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97"><span class="toc-number">1.10.1.</span> <span class="toc-text">三元运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97"><span class="toc-number">1.10.2.</span> <span class="toc-text">算数运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD"><span class="toc-number">1.10.3.</span> <span class="toc-text">逻辑判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%90%E7%AE%97"><span class="toc-number">1.10.4.</span> <span class="toc-text">字符串运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%B7%AF%E5%BE%84%E8%BF%90%E7%AE%97"><span class="toc-number">1.10.5.</span> <span class="toc-text">数据路径运算</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88"><span class="toc-number">1.11.</span> <span class="toc-text">组合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-number">1.11.1.</span> <span class="toc-text">数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.11.2.</span> <span class="toc-text">对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#83-wxss-%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.12.</span> <span class="toc-text">8.3 WXSS 样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#84-js%E9%80%BB%E8%BE%91%E4%BA%A4%E4%BA%92"><span class="toc-number">1.13.</span> <span class="toc-text">8.4 js 逻辑交互</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#841-%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.13.1.</span> <span class="toc-text">8.4.1 什么是事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#842-%E5%A6%82%E4%BD%95%E7%BB%99%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="toc-number">1.13.2.</span> <span class="toc-text">8.4.2 如何给事件传递参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#843-%E5%86%92%E6%B3%A1"><span class="toc-number">1.13.3.</span> <span class="toc-text">8.4.3 冒泡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%AE%BF%E4%B8%BB%E7%8E%AF%E5%A2%83"><span class="toc-number">2.</span> <span class="toc-text">9. 小程序的宿主环境</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#91-%E6%B8%B2%E6%9F%93%E5%B1%82%E5%92%8C%E9%80%BB%E8%BE%91%E5%B1%82"><span class="toc-number">2.1.</span> <span class="toc-text">9.1 渲染层和逻辑层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#911-%E6%B3%A8%E5%86%8C%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="toc-number">2.1.1.</span> <span class="toc-text">9.1.1 注册小程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#912-%E6%B3%A8%E5%86%8C%E9%A1%B5%E9%9D%A2"><span class="toc-number">2.1.2.</span> <span class="toc-text">9.1.2 注册页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#913%E9%A1%B5%E9%9D%A2%E8%B7%AF%E7%94%B1"><span class="toc-number">2.1.3.</span> <span class="toc-text">9.1.3 页面路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#914-%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">2.1.4.</span> <span class="toc-text">9.1.4 模块化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#92-%E7%BB%84%E4%BB%B6"><span class="toc-number">2.2.</span> <span class="toc-text">9.2 组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#93-api"><span class="toc-number">2.3.</span> <span class="toc-text">9.3 API</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">10 小程序的自定义组件</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/wx-app/day1/" rel="bookmark" title="微信小程序学习第一天">微信小程序学习第一天</a></li><li class="active"><a href="/wx-app/day2/" rel="bookmark" title="微信小程序学习第二天">微信小程序学习第二天</a></li><li><a href="/wx-app/day3/" rel="bookmark" title="构建电商界面的小程序（一）">构建电商界面的小程序（一）</a></li><li><a href="/wx-app/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/" rel="bookmark" title="微信公众号的开发">微信公众号的开发</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="叶星辰" data-src="/images/avatar.jpg"><p class="name" itemprop="name">叶星辰</p><div class="description" itemprop="description">温柔正确的人总是难以生存，因为这个世界既不温柔 也不正确</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">39</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">7</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">17</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0NhMW1EMHduMQ==" title="https:&#x2F;&#x2F;github.com&#x2F;Ca1mD0wn1"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9VZmRIbw==" title="https:&#x2F;&#x2F;twitter.com&#x2F;UfdHo"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9tZW5nLXhpbmcteW91LWppLXNpLXl1ZS1odWFuZy0yNw==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;meng-xing-you-ji-si-yue-huang-27"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTUwMjkxOTQ0NQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;502919445"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20vdS83NTc4MjU1ODg1" title="https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;7578255885"><i class="ic i-weibo"></i></span> <span class="exturl item email" data-url="aHR0cHM6Ly9tYWlsLmdvb2dsZS5jb20vbWFpbC91LzAvI2luYm94" title="https:&#x2F;&#x2F;mail.google.com&#x2F;mail&#x2F;u&#x2F;0&#x2F;#inbox"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>friends</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>links</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/Screeps/action1/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/wx-app/day3/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/react%E5%AD%A6%E4%B9%A0/" title="分类于 react学习">react学习</a></div><span><a href="/react-study/2/" title="React学习第二天">React学习第二天</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/interview/" title="分类于 面试用">面试用</a></div><span><a href="/interview/Currying/" title="详解柯里化和反柯里化">详解柯里化和反柯里化</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/react%E5%AD%A6%E4%B9%A0/" title="分类于 react学习">react学习</a></div><span><a href="/react-study/8/" title="React学习第八天">React学习第八天</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/interview/" title="分类于 面试用">面试用</a></div><span><a href="/interview/wrapper-object/" title="js中包装对象">js中包装对象</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vue3%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/" title="分类于 vue3移动端项目开发">vue3移动端项目开发</a></div><span><a href="/vue-mobile/14/" title="vue-mobile项目开发流程第十四部分(实现kind和user页面)">vue-mobile项目开发流程第十四部分(实现kind和user页面)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/react%E5%AD%A6%E4%B9%A0/" title="分类于 react学习">react学习</a></div><span><a href="/react-study/4/" title="React学习第四天">React学习第四天</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/interview/" title="分类于 面试用">面试用</a></div><span><a href="/interview/interview/" title="面试题总结">面试题总结</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Screeps/" title="分类于 screeps">screeps</a></div><span><a href="/Screeps/action1/" title="screeps日记 part1">screeps日记 part1</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" title="分类于 微信小程序">微信小程序</a></div><span><a href="/wx-app/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/" title="微信公众号的开发">微信公众号的开发</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vue3%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/" title="分类于 vue3移动端项目开发">vue3移动端项目开发</a></div><span><a href="/vue-mobile/9/" title="vue-mobile项目开发流程第九部分(构建login页面)">vue-mobile项目开发流程第九部分(构建login页面)</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2021 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">叶星辰 @ 永不陨落的星辰</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">581k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">8:48</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"wx-app/day2/",favicon:{show:"星辰",hide:"你快回来"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({model:{jsonPath:"/live2dw/assets/miku.model.json"},display:{position:"right",width:250,height:500},mobile:{show:!1},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html><!-- rebuild by hrmmi -->